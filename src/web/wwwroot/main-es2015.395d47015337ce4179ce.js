(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},gfpf:function(t,e){var n={userAgent:!1},r={};if(void 0===s)var s={};s.lang={extend:function(t,e,r){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var s=function(){};if(s.prototype=e.prototype,t.prototype=new s,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),r){var i;for(i in r)t.prototype[i]=r[i];var a=function(){},l=["toString","valueOf"];try{/MSIE/.test(n.userAgent)&&(a=function(t,e){for(i=0;i<l.length;i+=1){var n=l[i],r=e[n];"function"==typeof r&&r!=Object.prototype[n]&&(t[n]=r)}})}catch(o){}a(t.prototype,r)}}};var i,o,a,l,c,u,h,d,f,p,g,m=m||(i=Math,a=(o={}).lib={},l=a.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=a.WordArray=l.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,s=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<s;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else for(i=0;i<s;i+=4)e[r+i>>>2]=n[i>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=i.ceil(e/4)},clone:function(){var t=l.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(4294967296*i.random()|0);return new c.init(e,t)}}),u=o.enc={},h=u.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++){var i=e[s>>>2]>>>24-s%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new c.init(n,e/2)}},d=u.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++)r.push(String.fromCharCode(e[s>>>2]>>>24-s%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new c.init(n,e)}},f=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},p=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,n=e.words,r=e.sigBytes,s=this.blockSize,o=r/(4*s),a=(o=t?i.ceil(o):i.max((0|o)-this._minBufferSize,0))*s,l=i.min(4*a,r);if(a){for(var u=0;u<a;u+=s)this._doProcessBlock(n,u);var h=n.splice(0,a);e.sigBytes-=l}return new c.init(h,l)},clone:function(){var t=l.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),a.Hasher=p.extend({cfg:l.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new g.HMAC.init(t,n).finalize(e)}}}),g=o.algo={},o);!function(t){var e,n=(e=m).lib,r=n.Base,s=n.WordArray;(e=e.x64={}).Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),e.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push(i.high),n.push(i.low)}return s.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,s=0;s<n;s++)e[s]=e[s].clone();return t}})}(),m.lib.Cipher||function(t){var e=(f=m).lib,n=e.Base,r=e.WordArray,s=e.BufferedBlockAlgorithm,i=f.enc.Base64,o=f.algo.EvpKDF,a=e.Cipher=s.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?p:d).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?p:d).decrypt(t,e,n,r)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=f.mode={},c=function(t,e,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var s=0;s<n;s++)t[e+s]^=r[s]},u=(e.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();u.Encryptor=u.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;c.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),u.Decryptor=u.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,s=t.slice(e,e+r);n.decryptBlock(t,e),c.call(this,t,e,r),this._prevBlock=s}}),l=l.CBC=u,u=(f.pad={}).Pkcs7={pad:function(t,e){for(var n,s=(n=(n=4*e)-t.sigBytes%n)<<24|n<<16|n<<8|n,i=[],o=0;o<n;o+=4)i.push(s);n=r.create(i,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:l,padding:u}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=e.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),d=(l=(f.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?r.create([1398893684,1701076831]).concat(t).concat(e):e).toString(i)},parse:function(t){var e=(t=i.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var n=r.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:n})}},e.SerializableCipher=n.extend({cfg:n.extend({format:l}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var s=t.createEncryptor(n,r);return e=s.finalize(e),h.create({ciphertext:e,key:n,iv:(s=s.cfg).iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),f=(f.kdf={}).OpenSSL={execute:function(t,e,n,s){return s||(s=r.random(8)),t=o.create({keySize:e+n}).compute(t,s),n=r.create(t.words.slice(e),4*n),t.sigBytes=4*e,h.create({key:t,iv:n,salt:s})}},p=e.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:f}),encrypt:function(t,e,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,(t=d.encrypt.call(this,t,e,n.key,r)).mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,d.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=m,e=t.lib.BlockCipher,n=t.algo,r=[],s=[],i=[],o=[],a=[],l=[],c=[],u=[],h=[],d=[],f=[],p=0;256>p;p++)f[p]=128>p?p<<1:p<<1^283;var g=0,y=0;for(p=0;256>p;p++){var v;r[g]=v=(v=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&v^99,s[v]=g;var w=f[g],b=f[w],S=f[b],_=257*f[v]^16843008*v;i[g]=_<<24|_>>>8,o[g]=_<<16|_>>>16,a[g]=_<<8|_>>>24,l[g]=_,c[v]=(_=16843009*S^65537*b^257*w^16843008*g)<<24|_>>>8,u[v]=_<<16|_>>>16,h[v]=_<<8|_>>>24,d[v]=_,g?(g=w^f[f[f[S^w]]],y^=f[f[y]]):g=y=1}var x=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=e.extend({_doReset:function(){for(var t=(n=this._key).words,e=n.sigBytes/4,n=4*((this._nRounds=e+6)+1),s=this._keySchedule=[],i=0;i<n;i++)if(i<e)s[i]=t[i];else{var o=s[i-1];i%e?6<e&&4==i%e&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=x[i/e|0]<<24),s[i]=s[i-e]^o}for(t=this._invKeySchedule=[],e=0;e<n;e++)i=n-e,o=e%4?s[i]:s[i-4],t[e]=4>e||4>=i?o:c[r[o>>>24]]^u[r[o>>>16&255]]^h[r[o>>>8&255]]^d[r[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,i,o,a,l,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,c,u,h,d,s),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,s,i,o,a){for(var l=this._nRounds,c=t[e]^n[0],u=t[e+1]^n[1],h=t[e+2]^n[2],d=t[e+3]^n[3],f=4,p=1;p<l;p++){var g=r[c>>>24]^s[u>>>16&255]^i[h>>>8&255]^o[255&d]^n[f++],m=r[u>>>24]^s[h>>>16&255]^i[d>>>8&255]^o[255&c]^n[f++],y=r[h>>>24]^s[d>>>16&255]^i[c>>>8&255]^o[255&u]^n[f++];d=r[d>>>24]^s[c>>>16&255]^i[u>>>8&255]^o[255&h]^n[f++],c=g,u=m,h=y}g=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&d])^n[f++],m=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^n[f++],y=(a[h>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^n[f++],d=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^n[f++],t[e]=g,t[e+1]=m,t[e+2]=y,t[e+3]=d},keySize:8}),t.AES=e._createHelper(n)}(),function(){function t(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function e(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var n,r=m,s=(n=r.lib).WordArray,i=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=i.DES=(n=n.BlockCipher).extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;56>n;n++){var r=o[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(t=this._subKeys=[],r=0;16>r;r++){var s=t[r]=[],i=l[r];for(n=0;24>n;n++)s[n/6|0]|=e[(a[n]-1+i)%28]<<31-n%6,s[4+(n/6|0)]|=e[28+(a[n+24]-1+i)%28]<<31-n%6;for(s[0]=s[0]<<1|s[0]>>>31,n=1;7>n;n++)s[n]>>>=4*(n-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(e=this._invSubKeys=[],n=0;16>n;n++)e[n]=t[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(n,r,s){this._lBlock=n[r],this._rBlock=n[r+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var i=0;16>i;i++){for(var o=s[i],a=this._lBlock,l=this._rBlock,h=0,d=0;8>d;d++)h|=c[d][((l^o[d])&u[d])>>>0];this._lBlock=l,this._rBlock=a^h}s=this._lBlock,this._lBlock=this._rBlock,this._rBlock=s,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=n._createHelper(h),i=i.TripleDES=n.extend({_doReset:function(){var t=this._key.words;this._des1=h.createEncryptor(s.create(t.slice(0,2))),this._des2=h.createEncryptor(s.create(t.slice(2,4))),this._des3=h.createEncryptor(s.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=n._createHelper(i)}(),function(){var t=m.lib.WordArray;m.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var s=0;s<n;s+=3)for(var i=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,o=0;4>o&&s+.75*o<n;o++)t.push(r.charAt(i>>>6*(3-o)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(e){var n=e.length,r=this._map;(s=r.charAt(64))&&-1!=(s=e.indexOf(s))&&(n=s);for(var s=[],i=0,o=0;o<n;o++)if(o%4){var a=r.indexOf(e.charAt(o-1))<<o%4*2,l=r.indexOf(e.charAt(o))>>>6-o%4*2;s[i>>>2]|=(a|l)<<24-i%4*8,i++}return t.create(s,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,r,s,i,o){return((t=t+(e&n|~e&r)+s+o)<<i|t>>>32-i)+e}function n(t,e,n,r,s,i,o){return((t=t+(e&r|n&~r)+s+o)<<i|t>>>32-i)+e}function r(t,e,n,r,s,i,o){return((t=t+(e^n^r)+s+o)<<i|t>>>32-i)+e}function s(t,e,n,r,s,i,o){return((t=t+(n^(e|~r))+s+o)<<i|t>>>32-i)+e}for(var i=m,o=(l=i.lib).WordArray,a=l.Hasher,l=i.algo,c=[],u=0;64>u;u++)c[u]=4294967296*t.abs(t.sin(u+1))|0;l=l.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,i){for(var o=0;16>o;o++)t[a=i+o]=16711935&((l=t[a])<<8|l>>>24)|4278255360&(l<<24|l>>>8);var a,l=t[i+1],u=t[i+2],h=t[i+3],d=t[i+4],f=t[i+5],p=t[i+6],g=t[i+7],m=t[i+8],y=t[i+9],v=t[i+10],w=t[i+11],b=t[i+12],S=t[i+13],_=t[i+14],x=t[i+15],C=e(C=(o=this._hash.words)[0],F=o[1],A=o[2],E=o[3],a=t[i+0],7,c[0]),E=e(E,C,F,A,l,12,c[1]),A=e(A,E,C,F,u,17,c[2]),F=e(F,A,E,C,h,22,c[3]);C=e(C,F,A,E,d,7,c[4]),E=e(E,C,F,A,f,12,c[5]),A=e(A,E,C,F,p,17,c[6]),F=e(F,A,E,C,g,22,c[7]),C=e(C,F,A,E,m,7,c[8]),E=e(E,C,F,A,y,12,c[9]),A=e(A,E,C,F,v,17,c[10]),F=e(F,A,E,C,w,22,c[11]),C=e(C,F,A,E,b,7,c[12]),E=e(E,C,F,A,S,12,c[13]),A=e(A,E,C,F,_,17,c[14]),C=n(C,F=e(F,A,E,C,x,22,c[15]),A,E,l,5,c[16]),E=n(E,C,F,A,p,9,c[17]),A=n(A,E,C,F,w,14,c[18]),F=n(F,A,E,C,a,20,c[19]),C=n(C,F,A,E,f,5,c[20]),E=n(E,C,F,A,v,9,c[21]),A=n(A,E,C,F,x,14,c[22]),F=n(F,A,E,C,d,20,c[23]),C=n(C,F,A,E,y,5,c[24]),E=n(E,C,F,A,_,9,c[25]),A=n(A,E,C,F,h,14,c[26]),F=n(F,A,E,C,m,20,c[27]),C=n(C,F,A,E,S,5,c[28]),E=n(E,C,F,A,u,9,c[29]),A=n(A,E,C,F,g,14,c[30]),C=r(C,F=n(F,A,E,C,b,20,c[31]),A,E,f,4,c[32]),E=r(E,C,F,A,m,11,c[33]),A=r(A,E,C,F,w,16,c[34]),F=r(F,A,E,C,_,23,c[35]),C=r(C,F,A,E,l,4,c[36]),E=r(E,C,F,A,d,11,c[37]),A=r(A,E,C,F,g,16,c[38]),F=r(F,A,E,C,v,23,c[39]),C=r(C,F,A,E,S,4,c[40]),E=r(E,C,F,A,a,11,c[41]),A=r(A,E,C,F,h,16,c[42]),F=r(F,A,E,C,p,23,c[43]),C=r(C,F,A,E,y,4,c[44]),E=r(E,C,F,A,b,11,c[45]),A=r(A,E,C,F,x,16,c[46]),C=s(C,F=r(F,A,E,C,u,23,c[47]),A,E,a,6,c[48]),E=s(E,C,F,A,g,10,c[49]),A=s(A,E,C,F,_,15,c[50]),F=s(F,A,E,C,f,21,c[51]),C=s(C,F,A,E,b,6,c[52]),E=s(E,C,F,A,h,10,c[53]),A=s(A,E,C,F,v,15,c[54]),F=s(F,A,E,C,l,21,c[55]),C=s(C,F,A,E,m,6,c[56]),E=s(E,C,F,A,x,10,c[57]),A=s(A,E,C,F,p,15,c[58]),F=s(F,A,E,C,S,21,c[59]),C=s(C,F,A,E,d,6,c[60]),E=s(E,C,F,A,w,10,c[61]),A=s(A,E,C,F,u,15,c[62]),F=s(F,A,E,C,y,21,c[63]),o[0]=o[0]+C|0,o[1]=o[1]+F|0,o[2]=o[2]+A|0,o[3]=o[3]+E|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;n[s>>>5]|=128<<24-s%32;var i=t.floor(r/4294967296);for(n[15+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(s+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),n=(e=this._hash).words,r=0;4>r;r++)n[r]=16711935&((s=n[r])<<8|s>>>24)|4278255360&(s<<24|s>>>8);return e},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),i.MD5=a._createHelper(l),i.HmacMD5=a._createHmacHelper(l)}(Math),function(){var t=m,e=(s=t.lib).WordArray,n=s.Hasher,r=[],s=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,s=n[0],i=n[1],o=n[2],a=n[3],l=n[4],c=0;80>c;c++){if(16>c)r[c]=0|t[e+c];else{var u=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=u<<1|u>>>31}u=(s<<5|s>>>27)+l+r[c],u=20>c?u+(1518500249+(i&o|~i&a)):40>c?u+(1859775393+(i^o^a)):60>c?u+((i&o|i&a|o&a)-1894007588):u+((i^o^a)-899497514),l=a,a=o,o=i<<30|i>>>2,i=s,s=u}n[0]=n[0]+s|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(s),t.HmacSHA1=n._createHmacHelper(s)}(),function(t){for(var e=m,n=(s=e.lib).WordArray,r=s.Hasher,s=e.algo,i=[],o=[],a=function(t){return 4294967296*(t-(0|t))|0},l=2,c=0;64>c;){var u;t:{for(var h=t.sqrt(u=l),d=2;d<=h;d++)if(!(u%d)){u=!1;break t}u=!0}u&&(8>c&&(i[c]=a(t.pow(l,.5))),o[c]=a(t.pow(l,1/3)),c++),l++}var f=[];s=s.SHA256=r.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],s=n[1],i=n[2],a=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=0;64>d;d++){if(16>d)f[d]=0|t[e+d];else{var p=f[d-15],g=f[d-2];f[d]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+f[d-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+f[d-16]}p=h+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&u)+o[d]+f[d],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&s^r&i^s&i),h=u,u=c,c=l,l=a+p|0,a=i,i=s,s=r,r=p+g|0}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+u|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=t.floor(r/4294967296),n[15+(s+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA256=r._createHelper(s),e.HmacSHA256=r._createHmacHelper(s)}(Math),function(){var t=m,e=t.lib.WordArray,n=(r=t.algo).SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=n._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=n._createHelper(r),t.HmacSHA224=n._createHmacHelper(r)}(),function(){function t(){return r.create.apply(r,arguments)}for(var e=m,n=e.lib.Hasher,r=(i=e.x64).Word,s=i.WordArray,i=e.algo,o=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],a=[],l=0;80>l;l++)a[l]=t();i=i.SHA512=n.extend({_doReset:function(){this._hash=new s.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n,r=(n=this._hash.words)[0],s=n[1],i=n[2],l=n[3],c=n[4],u=n[5],h=n[6],d=r.high,f=r.low,p=s.high,g=s.low,m=i.high,y=i.low,v=l.high,w=l.low,b=c.high,S=c.low,_=u.high,x=u.low,C=h.high,E=h.low,A=(n=n[7]).high,F=n.low,T=d,I=f,k=p,D=g,P=m,R=y,O=v,N=w,H=b,j=S,V=_,B=x,L=C,M=E,U=A,q=F,K=0;80>K;K++){var $=a[K];if(16>K)var z=$.high=0|t[e+2*K],G=$.low=0|t[e+2*K+1];else{z=((G=(z=a[K-15]).high)>>>1|(W=z.low)<<31)^(G>>>8|W<<24)^G>>>7;var W=(W>>>1|G<<31)^(W>>>8|G<<24)^(W>>>7|G<<25),J=((G=(J=a[K-2]).high)>>>19|(Z=J.low)<<13)^(G<<3|Z>>>29)^G>>>6,Z=(Z>>>19|G<<13)^(Z<<3|G>>>29)^(Z>>>6|G<<26);$.high=z=(z=(z=z+(Y=(G=a[K-7]).high)+((G=W+G.low)>>>0<W>>>0?1:0))+J+((G+=Z)>>>0<Z>>>0?1:0))+(nt=(Q=a[K-16]).high)+((G+=Q=Q.low)>>>0<Q>>>0?1:0),$.low=G}var Y=H&V^~H&L,Q=j&B^~j&M,X=($=T&k^T&P^k&P,I&D^I&R^D&R),tt=(Z=o[K]).high,et=Z.low,nt=U+((H>>>14|j<<18)^(H>>>18|j<<14)^(H<<23|j>>>9))+((Z=q+((j>>>14|H<<18)^(j>>>18|H<<14)^(j<<23|H>>>9)))>>>0<q>>>0?1:0);U=L,q=M,L=V,M=B,V=H,B=j,H=O+(nt=(nt=(nt=nt+Y+((Z+=Q)>>>0<Q>>>0?1:0))+tt+((Z+=et)>>>0<et>>>0?1:0))+z+((Z+=G)>>>0<G>>>0?1:0))+((j=N+Z|0)>>>0<N>>>0?1:0)|0,O=P,N=R,P=k,R=D,k=T,D=I,T=nt+($=(W=(T>>>28|I<<4)^(T<<30|I>>>2)^(T<<25|I>>>7))+$+((G=(J=(I>>>28|T<<4)^(I<<30|T>>>2)^(I<<25|T>>>7))+X)>>>0<J>>>0?1:0))+((I=Z+G|0)>>>0<Z>>>0?1:0)|0}f=r.low=f+I,r.high=d+T+(f>>>0<I>>>0?1:0),g=s.low=g+D,s.high=p+k+(g>>>0<D>>>0?1:0),y=i.low=y+R,i.high=m+P+(y>>>0<R>>>0?1:0),w=l.low=w+N,l.high=v+O+(w>>>0<N>>>0?1:0),S=c.low=S+j,c.high=b+H+(S>>>0<j>>>0?1:0),x=u.low=x+B,u.high=_+V+(x>>>0<B>>>0?1:0),E=h.low=E+M,h.high=C+L+(E>>>0<M>>>0?1:0),F=n.low=F+q,n.high=A+U+(F>>>0<q>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),e.SHA512=n._createHelper(i),e.HmacSHA512=n._createHmacHelper(i)}(),function(){var t=m,e=(s=t.x64).Word,n=s.WordArray,r=(s=t.algo).SHA512,s=s.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=r._createHelper(s),t.HmacSHA384=r._createHmacHelper(s)}(),function(){var t=m,e=(r=t.lib).WordArray,n=r.Hasher,r=t.algo,s=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),i=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=e.create([0,1518500249,1859775393,2400959708,2840853838]),c=e.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=n.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;16>n;n++)t[r=e+n]=16711935&((S=t[r])<<8|S>>>24)|4278255360&(S<<24|S>>>8);var r,u,h,d,f,p,g,m,y,v,w,b,S=l.words,_=c.words,x=s.words,C=i.words,E=o.words,A=a.words;for(g=u=(r=this._hash.words)[0],m=h=r[1],y=d=r[2],v=f=r[3],w=p=r[4],n=0;80>n;n+=1)b=u+t[e+x[n]]|0,b=16>n?b+((h^d^f)+S[0]):32>n?b+((h&d|~h&f)+S[1]):48>n?b+(((h|~d)^f)+S[2]):64>n?b+((h&f|d&~f)+S[3]):b+((h^(d|~f))+S[4]),b=(b=(b|=0)<<E[n]|b>>>32-E[n])+p|0,u=p,p=f,f=d<<10|d>>>22,d=h,h=b,b=g+t[e+C[n]]|0,b=16>n?b+((m^(y|~v))+_[0]):32>n?b+((m&v|y&~v)+_[1]):48>n?b+(((m|~y)^v)+_[2]):64>n?b+((m&y|~m&v)+_[3]):b+((m^y^v)+_[4]),b=(b=(b|=0)<<A[n]|b>>>32-A[n])+w|0,g=w,w=v,v=y<<10|y>>>22,y=m,m=b;b=r[1]+d+v|0,r[1]=r[2]+f+w|0,r[2]=r[3]+p+g|0,r[3]=r[4]+u+m|0,r[4]=r[0]+h+y|0,r[0]=b},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;for(e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,n=0;5>n;n++)e[n]=16711935&((r=e[n])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}}),t.RIPEMD160=n._createHelper(r),t.HmacRIPEMD160=n._createHmacHelper(r)}(Math),function(){var t=m.enc.Utf8;m.algo.HMAC=m.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,s=4*r;n.sigBytes>s&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),o=this._iKey=n.clone(),a=i.words,l=o.words,c=0;c<r;c++)a[c]^=1549556828,l[c]^=909522486;i.sigBytes=o.sigBytes=s,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t,e=m,n=(t=e.lib).Base,r=t.WordArray,s=(t=e.algo).HMAC,i=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=s.create((u=this.cfg).hasher,t),i=r.create(),o=r.create([1]),a=i.words,l=o.words,c=u.keySize,u=u.iterations;a.length<c;){var h=n.update(e).finalize(o);n.reset();for(var d=h.words,f=d.length,p=h,g=1;g<u;g++){p=n.finalize(p),n.reset();for(var m=p.words,y=0;y<f;y++)d[y]^=m[y]}i.concat(h),l[0]++}return i.sigBytes=4*c,i}});e.PBKDF2=function(t,e,n){return i.create(n).compute(t,e)}}();var y,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function w(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=v.charAt(n>>6)+v.charAt(63&n);for(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=v.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=v.charAt(n>>2)+v.charAt((3&n)<<4));(3&r.length)>0;)r+="=";return r}function b(t){var e,n,r,s="",i=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e)(r=v.indexOf(t.charAt(e)))<0||(0==i?(s+=F(r>>2),n=3&r,i=1):1==i?(s+=F(n<<2|r>>4),n=15&r,i=2):2==i?(s+=F(n),s+=F(r>>2),n=3&r,i=3):(s+=F(n<<2|r>>4),s+=F(15&r),i=0));return 1==i&&(s+=F(n<<2)),s}function S(t){var e,n=b(t),r=new Array;for(e=0;2*e<n.length;++e)r[e]=parseInt(n.substring(2*e,2*e+2),16);return r}function _(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):this.fromString(t,null==e&&"string"!=typeof t?256:e))}function x(){return new _(null)}"Microsoft Internet Explorer"==n.appName?(_.prototype.am=function(t,e,n,r,s,i){for(var o=32767&e,a=e>>15;--i>=0;){var l=32767&this[t],c=this[t++]>>15,u=a*l+c*o;s=((l=o*l+((32767&u)<<15)+n[r]+(1073741823&s))>>>30)+(u>>>15)+a*c+(s>>>30),n[r++]=1073741823&l}return s},y=30):"Netscape"!=n.appName?(_.prototype.am=function(t,e,n,r,s,i){for(;--i>=0;){var o=e*this[t++]+n[r]+s;s=Math.floor(o/67108864),n[r++]=67108863&o}return s},y=26):(_.prototype.am=function(t,e,n,r,s,i){for(var o=16383&e,a=e>>14;--i>=0;){var l=16383&this[t],c=this[t++]>>14,u=a*l+c*o;s=((l=o*l+((16383&u)<<14)+n[r]+s)>>28)+(u>>14)+a*c,n[r++]=268435455&l}return s},y=28),_.prototype.DB=y,_.prototype.DM=(1<<y)-1,_.prototype.DV=1<<y,_.prototype.FV=Math.pow(2,52),_.prototype.F1=52-y,_.prototype.F2=2*y-52;var C,E,A=new Array;for(C="0".charCodeAt(0),E=0;E<=9;++E)A[C++]=E;for(C="a".charCodeAt(0),E=10;E<36;++E)A[C++]=E;for(C="A".charCodeAt(0),E=10;E<36;++E)A[C++]=E;function F(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function T(t,e){var n=A[t.charCodeAt(e)];return null==n?-1:n}function I(t){var e=x();return e.fromInt(t),e}function k(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function D(t){this.m=t}function P(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function R(t,e){return t&e}function O(t,e){return t|e}function N(t,e){return t^e}function H(t,e){return t&~e}function j(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function V(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function B(){}function L(t){return t}function M(t){this.r2=x(),this.q3=x(),_.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}D.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},D.prototype.revert=function(t){return t},D.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},D.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},D.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},P.prototype.convert=function(t){var e=x();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(_.ZERO)>0&&this.m.subTo(e,e),e},P.prototype.revert=function(t){var e=x();return t.copyTo(e),this.reduce(e),e},P.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},P.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},P.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},_.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},_.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},_.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,s=!1,i=0;--r>=0;){var o=8==n?255&t[r]:T(t,r);o<0?"-"==t.charAt(r)&&(s=!0):(s=!1,0==i?this[this.t++]=o:i+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-i)-1)<<i,this[this.t++]=o>>this.DB-i):this[this.t-1]|=o<<i,(i+=n)>=this.DB&&(i-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),s&&_.ZERO.subTo(this,this)},_.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},_.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},_.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},_.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,s=this.DB-r,i=(1<<s)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>s|a,a=(this[n]&i)<<r;for(n=o-1;n>=0;--n)e[n]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},_.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,s=this.DB-r,i=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&i)<<s,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&i)<<s),e.t=this.t-n,e.clamp()}},_.prototype.subTo=function(t,e){for(var n=0,r=0,s=Math.min(t.t,this.t);n<s;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},_.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),s=n.t;for(e.t=s+r.t;--s>=0;)e[s]=0;for(s=0;s<r.t;++s)e[s+n.t]=n.am(0,r[s],e,s,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&_.ZERO.subTo(e,e)},_.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},_.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var s=this.abs();if(s.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=x());var i=x(),o=this.s,a=t.s,l=this.DB-k(r[r.t-1]);l>0?(r.lShiftTo(l,i),s.lShiftTo(l,n)):(r.copyTo(i),s.copyTo(n));var c=i.t,u=i[c-1];if(0!=u){var h=u*(1<<this.F1)+(c>1?i[c-2]>>this.F2:0),d=this.FV/h,f=(1<<this.F1)/h,p=1<<this.F2,g=n.t,m=g-c,y=null==e?x():e;for(i.dlShiftTo(m,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),_.ONE.dlShiftTo(c,y),y.subTo(i,i);i.t<c;)i[i.t++]=0;for(;--m>=0;){var v=n[--g]==u?this.DM:Math.floor(n[g]*d+(n[g-1]+p)*f);if((n[g]+=i.am(0,v,n,m,0,c))<v)for(i.dlShiftTo(m,y),n.subTo(y,n);n[g]<--v;)n.subTo(y,n)}null!=e&&(n.drShiftTo(c,e),o!=a&&_.ZERO.subTo(e,e)),n.t=c,n.clamp(),l>0&&n.rShiftTo(l,n),o<0&&_.ZERO.subTo(n,n)}}},_.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},_.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},_.prototype.exp=function(t,e){if(t>4294967295||t<1)return _.ONE;var n=x(),r=x(),s=e.convert(this),i=k(t)-1;for(s.copyTo(n);--i>=0;)if(e.sqrTo(n,r),(t&1<<i)>0)e.mulTo(r,s,n);else{var o=n;n=r,r=o}return e.revert(n)},_.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,s=!1,i="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(s=!0,i=F(n));o>=0;)a<e?(n=(this[o]&(1<<a)-1)<<e-a,n|=this[--o]>>(a+=this.DB-e)):(n=this[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(s=!0),s&&(i+=F(n));return s?i:"0"},_.prototype.negate=function(){var t=x();return _.ZERO.subTo(this,t),t},_.prototype.abs=function(){return this.s<0?this.negate():this},_.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},_.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+k(this[this.t-1]^this.s&this.DM)},_.prototype.mod=function(t){var e=x();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(_.ZERO)>0&&t.subTo(e,e),e},_.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new D(e):new P(e),this.exp(t,n)},_.ZERO=I(0),_.ONE=I(1),B.prototype.convert=L,B.prototype.revert=L,B.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},B.prototype.sqrTo=function(t,e){t.squareTo(e)},M.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=x();return t.copyTo(e),this.reduce(e),e},M.prototype.revert=function(t){return t},M.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},M.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},M.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var U,q,K,$=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],z=(1<<26)/$[$.length-1];function G(){this.i=0,this.j=0,this.S=new Array}function W(){!function(t){q[K++]^=255&t,q[K++]^=t>>8&255,q[K++]^=t>>16&255,q[K++]^=t>>24&255,K>=256&&(K-=256)}((new Date).getTime())}if(_.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},_.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=I(n),s=x(),i=x(),o="";for(this.divRemTo(r,s,i);s.signum()>0;)o=(n+i.intValue()).toString(t).substr(1)+o,s.divRemTo(r,s,i);return i.intValue().toString(t)+o},_.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),s=!1,i=0,o=0,a=0;a<t.length;++a){var l=T(t,a);l<0?"-"==t.charAt(a)&&0==this.signum()&&(s=!0):(o=e*o+l,++i>=n&&(this.dMultiply(r),this.dAddOffset(o,0),i=0,o=0))}i>0&&(this.dMultiply(Math.pow(e,i)),this.dAddOffset(o,0)),s&&_.ZERO.subTo(this,this)},_.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(_.ONE.shiftLeft(t-1),O,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(_.ONE.shiftLeft(t-1),this);else{var r=new Array,s=7&t;r.length=1+(t>>3),e.nextBytes(r),s>0?r[0]&=(1<<s)-1:r[0]=0,this.fromString(r,256)}},_.prototype.bitwiseTo=function(t,e,n){var r,s,i=Math.min(t.t,this.t);for(r=0;r<i;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(s=t.s&this.DM,r=i;r<this.t;++r)n[r]=e(this[r],s);n.t=this.t}else{for(s=this.s&this.DM,r=i;r<t.t;++r)n[r]=e(s,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},_.prototype.changeBit=function(t,e){var n=_.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},_.prototype.addTo=function(t,e){for(var n=0,r=0,s=Math.min(t.t,this.t);n<s;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},_.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},_.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},_.prototype.multiplyLowerTo=function(t,e,n){var r,s=Math.min(this.t+t.t,e);for(n.s=0,n.t=s;s>0;)n[--s]=0;for(r=n.t-this.t;s<r;++s)n[s+this.t]=this.am(0,t[s],n,s,0,this.t);for(r=Math.min(t.t,e);s<r;++s)this.am(0,t[s],n,s,0,e-s);n.clamp()},_.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},_.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},_.prototype.millerRabin=function(t){var e=this.subtract(_.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>$.length&&(t=$.length);for(var s=x(),i=0;i<t;++i){s.fromInt($[Math.floor(Math.random()*$.length)]);var o=s.modPow(r,this);if(0!=o.compareTo(_.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<n&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo(_.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},_.prototype.clone=function(){var t=x();return this.copyTo(t),t},_.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},_.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},_.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},_.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},_.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,s=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[s++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==s&&(128&this.s)!=(128&n)&&++s,(s>0||n!=this.s)&&(e[s++]=n);return e},_.prototype.equals=function(t){return 0==this.compareTo(t)},_.prototype.min=function(t){return this.compareTo(t)<0?this:t},_.prototype.max=function(t){return this.compareTo(t)>0?this:t},_.prototype.and=function(t){var e=x();return this.bitwiseTo(t,R,e),e},_.prototype.or=function(t){var e=x();return this.bitwiseTo(t,O,e),e},_.prototype.xor=function(t){var e=x();return this.bitwiseTo(t,N,e),e},_.prototype.andNot=function(t){var e=x();return this.bitwiseTo(t,H,e),e},_.prototype.not=function(){for(var t=x(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},_.prototype.shiftLeft=function(t){var e=x();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},_.prototype.shiftRight=function(t){var e=x();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},_.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+j(this[t]);return this.s<0?this.t*this.DB:-1},_.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=V(this[n]^e);return t},_.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},_.prototype.setBit=function(t){return this.changeBit(t,O)},_.prototype.clearBit=function(t){return this.changeBit(t,H)},_.prototype.flipBit=function(t){return this.changeBit(t,N)},_.prototype.add=function(t){var e=x();return this.addTo(t,e),e},_.prototype.subtract=function(t){var e=x();return this.subTo(t,e),e},_.prototype.multiply=function(t){var e=x();return this.multiplyTo(t,e),e},_.prototype.divide=function(t){var e=x();return this.divRemTo(t,e,null),e},_.prototype.remainder=function(t){var e=x();return this.divRemTo(t,null,e),e},_.prototype.divideAndRemainder=function(t){var e=x(),n=x();return this.divRemTo(t,e,n),new Array(e,n)},_.prototype.modPow=function(t,e){var n,r,s=t.bitLength(),i=I(1);if(s<=0)return i;n=s<18?1:s<48?3:s<144?4:s<768?5:6,r=s<8?new D(e):e.isEven()?new M(e):new P(e);var o=new Array,a=3,l=n-1,c=(1<<n)-1;if(o[1]=r.convert(this),n>1){var u=x();for(r.sqrTo(o[1],u);a<=c;)o[a]=x(),r.mulTo(u,o[a-2],o[a]),a+=2}var h,d,f=t.t-1,p=!0,g=x();for(s=k(t[f])-1;f>=0;){for(s>=l?h=t[f]>>s-l&c:(h=(t[f]&(1<<s+1)-1)<<l-s,f>0&&(h|=t[f-1]>>this.DB+s-l)),a=n;0==(1&h);)h>>=1,--a;if((s-=a)<0&&(s+=this.DB,--f),p)o[h].copyTo(i),p=!1;else{for(;a>1;)r.sqrTo(i,g),r.sqrTo(g,i),a-=2;a>0?r.sqrTo(i,g):(d=i,i=g,g=d),r.mulTo(g,o[h],i)}for(;f>=0&&0==(t[f]&1<<s);)r.sqrTo(i,g),d=i,i=g,g=d,--s<0&&(s=this.DB-1,--f)}return r.revert(i)},_.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return _.ZERO;for(var n=t.clone(),r=this.clone(),s=I(1),i=I(0),o=I(0),a=I(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(s.isEven()&&i.isEven()||(s.addTo(this,s),i.subTo(t,i)),s.rShiftTo(1,s)):i.isEven()||i.subTo(t,i),i.rShiftTo(1,i);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),e&&s.subTo(o,s),i.subTo(a,i)):(r.subTo(n,r),e&&o.subTo(s,o),a.subTo(i,a))}return 0!=r.compareTo(_.ONE)?_.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},_.prototype.pow=function(t){return this.exp(t,new B)},_.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var s=e.getLowestSetBit(),i=n.getLowestSetBit();if(i<0)return e;for(s<i&&(i=s),i>0&&(e.rShiftTo(i,e),n.rShiftTo(i,n));e.signum()>0;)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=n.getLowestSetBit())>0&&n.rShiftTo(s,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return i>0&&n.lShiftTo(i,n),n},_.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=$[$.length-1]){for(e=0;e<$.length;++e)if(n[0]==$[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<$.length;){for(var r=$[e],s=e+1;s<$.length&&r<z;)r*=$[s++];for(r=n.modInt(r);e<s;)if(r%$[e++]==0)return!1}return n.millerRabin(t)},_.prototype.square=function(){var t=x();return this.squareTo(t),t},G.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)r=this.S[e],this.S[e]=this.S[n=n+this.S[e]+t[e%t.length]&255],this.S[n]=r;this.i=0,this.j=0},G.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},null==q){var J;if(q=new Array,K=0,void 0!==r&&(void 0!==r.crypto||void 0!==r.msCrypto)){var Z=r.crypto||r.msCrypto;if(Z.getRandomValues){var Y=new Uint8Array(32);for(Z.getRandomValues(Y),J=0;J<32;++J)q[K++]=Y[J]}else if("Netscape"==n.appName&&n.appVersion<"5"){var Q=r.crypto.random(32);for(J=0;J<Q.length;++J)q[K++]=255&Q.charCodeAt(J)}}for(;K<256;)J=Math.floor(65536*Math.random()),q[K++]=J>>>8,q[K++]=255&J;K=0,W()}function X(){if(null==U){for(W(),(U=new G).init(q),K=0;K<q.length;++K)q[K]=0;K=0}return U.next()}function tt(){}function et(t,e){return new _(t,e)}function nt(t,e,n){for(var r="",s=0;r.length<e;)r+=n(String.fromCharCode.apply(String,t.concat([(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s]))),s+=1;return r}function rt(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function st(t,e,n){for(var r="",s=0;r.length<e;)r+=n(t+String.fromCharCode.apply(String,[(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s])),s+=1;return r}function it(t,e){this.x=e,this.q=t}function ot(t,e,n,r){this.curve=t,this.x=e,this.y=n,this.z=null==r?_.ONE:r,this.zinv=null}function at(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new ot(this,null,null)}tt.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=X()},rt.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},rt.prototype.setPublic=function(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=et(t,16),this.e=parseInt(e,16)}},rt.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var n=new Array,r=t.length-1;r>=0&&e>0;){var s=t.charCodeAt(r--);s<128?n[--e]=s:s>127&&s<2048?(n[--e]=63&s|128,n[--e]=s>>6|192):(n[--e]=63&s|128,n[--e]=s>>6&63|128,n[--e]=s>>12|224)}n[--e]=0;for(var i=new tt,o=new Array;e>2;){for(o[0]=0;0==o[0];)i.nextBytes(o);n[--e]=o[0]}return n[--e]=2,n[--e]=0,new _(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},rt.prototype.encryptOAEP=function(t,e,n){var r=function(t,e,n,r){var s=ct.crypto.MessageDigest,i=ct.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=s.getCanonicalAlgName(n),r=s.getHashLength(o),n=function(t){return xt(i.hashHex(Ct(t),o))}),t.length+2*r+2>e)throw"Message too long for RSA";var a,l="";for(a=0;a<e-t.length-2*r-2;a+=1)l+="\0";var c=n("")+l+"\x01"+t,u=new Array(r);(new tt).nextBytes(u);var h=nt(u,c.length,n),d=[];for(a=0;a<c.length;a+=1)d[a]=c.charCodeAt(a)^h.charCodeAt(a);var f=nt(d,u.length,n),p=[0];for(a=0;a<u.length;a+=1)p[a+1]=u[a]^f.charCodeAt(a);return new _(p.concat(d))}(t,this.n.bitLength()+7>>3,e,n);if(null==r)return null;var s=this.doPublic(r);if(null==s)return null;var i=s.toString(16);return 0==(1&i.length)?i:"0"+i},rt.prototype.type="RSA",rt.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},rt.prototype.setPrivate=function(t,e,n){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=e,this.d=n;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key";this.n=et(t,16),this.e=parseInt(e,16),this.d=et(n,16)}},rt.prototype.setPrivateEx=function(t,e,n,r,s,i,o,a){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=et(t,16),this.e=parseInt(e,16),this.d=et(n,16),this.p=et(r,16),this.q=et(s,16),this.dmp1=et(i,16),this.dmq1=et(o,16),this.coeff=et(a,16)},rt.prototype.generate=function(t,e){var n=new tt,r=t>>1;this.e=parseInt(e,16);for(var s=new _(e,16);;){for(;this.p=new _(t-r,1,n),0!=this.p.subtract(_.ONE).gcd(s).compareTo(_.ONE)||!this.p.isProbablePrime(10););for(;this.q=new _(r,1,n),0!=this.q.subtract(_.ONE).gcd(s).compareTo(_.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var i=this.p;this.p=this.q,this.q=i}var o=this.p.subtract(_.ONE),a=this.q.subtract(_.ONE),l=o.multiply(a);if(0==l.gcd(s).compareTo(_.ONE)){this.n=this.p.multiply(this.q),this.d=s.modInverse(l),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},rt.prototype.decrypt=function(t){var e=et(t,16),n=this.doPrivate(e);return null==n?null:function(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=e-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var s="";++r<n.length;){var i=255&n[r];i<128?s+=String.fromCharCode(i):i>191&&i<224?(s+=String.fromCharCode((31&i)<<6|63&n[r+1]),++r):(s+=String.fromCharCode((15&i)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return s}(n,this.n.bitLength()+7>>3)},rt.prototype.decryptOAEP=function(t,e,n){var r=et(t,16),s=this.doPrivate(r);return null==s?null:function(t,e,n,r){var s=ct.crypto.MessageDigest,i=ct.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=s.getCanonicalAlgName(n),r=s.getHashLength(o),n=function(t){return xt(i.hashHex(Ct(t),o))}),t=t.toByteArray(),a=0;a<t.length;a+=1)t[a]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*r+2)throw"Cipher too short";var a,l=t.substr(1,r),c=t.substr(r+1),u=st(c,r,n),h=[];for(a=0;a<l.length;a+=1)h[a]=l.charCodeAt(a)^u.charCodeAt(a);var d=st(String.fromCharCode.apply(String,h),t.length-r,n),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^d.charCodeAt(a);if((f=String.fromCharCode.apply(String,f)).substr(0,r)!==n(""))throw"Hash mismatch";var p=(f=f.substr(r)).indexOf("\x01");if((-1!=p?f.substr(0,p).lastIndexOf("\0"):-1)+1!=p)throw"Malformed data";return f.substr(p+1)}(s,this.n.bitLength()+7>>3,e,n)},it.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},it.prototype.toBigInteger=function(){return this.x},it.prototype.negate=function(){return new it(this.q,this.x.negate().mod(this.q))},it.prototype.add=function(t){return new it(this.q,this.x.add(t.toBigInteger()).mod(this.q))},it.prototype.subtract=function(t){return new it(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},it.prototype.multiply=function(t){return new it(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},it.prototype.square=function(){return new it(this.q,this.x.square().mod(this.q))},it.prototype.divide=function(t){return new it(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},ot.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ot.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ot.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(_.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(_.ZERO))},ot.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(_.ZERO)&&!this.y.toBigInteger().equals(_.ZERO)},ot.prototype.negate=function(){return new ot(this.curve,this.x,this.y.negate(),this.z)},ot.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(_.ZERO.equals(n))return _.ZERO.equals(e)?this.twice():this.curve.getInfinity();var r=new _("3"),s=this.x.toBigInteger(),i=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),n.square()),a=o.multiply(n),l=s.multiply(o),c=e.square().multiply(this.z),u=c.subtract(l.shiftLeft(1)).multiply(t.z).subtract(a).multiply(n).mod(this.curve.q),h=l.multiply(r).multiply(e).subtract(i.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),d=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new ot(this.curve,this.curve.fromBigInteger(u),this.curve.fromBigInteger(h),d)},ot.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new _("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),s=r.multiply(n).mod(this.curve.q),i=this.curve.a.toBigInteger(),o=e.square().multiply(t);_.ZERO.equals(i)||(o=o.add(this.z.square().multiply(i)));var a=(o=o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(s)).shiftLeft(1).multiply(r).mod(this.curve.q),l=o.multiply(t).multiply(e).subtract(s.shiftLeft(1)).shiftLeft(2).multiply(s).subtract(o.square().multiply(o)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new ot(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(l),c)},ot.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new _("3")),s=this.negate(),i=this;for(e=r.bitLength()-2;e>0;--e){i=i.twice();var o=r.testBit(e);o!=n.testBit(e)&&(i=i.add(o?this:s))}return i},ot.prototype.multiplyTwo=function(t,e,n){var r;r=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var s=this.curve.getInfinity(),i=this.add(e);r>=0;)s=s.twice(),t.testBit(r)?s=n.testBit(r)?s.add(i):s.add(this):n.testBit(r)&&(s=s.add(e)),--r;return s},at.prototype.getQ=function(){return this.q},at.prototype.getA=function(){return this.a},at.prototype.getB=function(){return this.b},at.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},at.prototype.getInfinity=function(){return this.infinity},at.prototype.fromBigInteger=function(t){return new it(this.q,t)},at.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,n=t.substr(2,e),r=t.substr(e+2,e);return new ot(this,this.fromBigInteger(new _(n,16)),this.fromBigInteger(new _(r,16)));default:return null}},it.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ot.prototype.getEncoded=function(t){var e=function(t,e){var n=t.toByteArrayUnsigned();if(e<n.length)n=n.slice(n.length-e);else for(;e>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),s=e(n,32);return t?r.isEven()?s.unshift(2):s.unshift(3):(s.unshift(4),s=s.concat(e(r,32))),s},ot.decodeFrom=function(t,e){var n=e.length-1,r=e.slice(1,1+n/2),s=e.slice(1+n/2,1+n);r.unshift(0),s.unshift(0);var i=new _(r),o=new _(s);return new ot(t,t.fromBigInteger(i),t.fromBigInteger(o))},ot.decodeFromHex=function(t,e){e.substr(0,2);var n=e.length-2,r=e.substr(2,n/2),s=e.substr(2+n/2,n/2),i=new _(r,16),o=new _(s,16);return new ot(t,t.fromBigInteger(i),t.fromBigInteger(o))},ot.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),n=t.y.subtract(this.y).divide(e),r=n.square().subtract(this.x).subtract(t.x),s=n.multiply(this.x.subtract(r)).subtract(this.y);return new ot(this.curve,r,s)},ot.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(_.valueOf(2)),e=this.curve.fromBigInteger(_.valueOf(3)),n=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),r=n.square().subtract(this.x.multiply(t)),s=n.multiply(this.x.subtract(r)).subtract(this.y);return new ot(this.curve,r,s)},ot.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new _("3")),s=this.negate(),i=this;for(e=r.bitLength()-2;e>0;--e){i=i.twice();var o=r.testBit(e);o!=n.testBit(e)&&(i=i.add2D(o?this:s))}return i},ot.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),s=this.curve.getQ(),i=e.multiply(e).mod(s),o=t.multiply(t).multiply(t).add(n.multiply(t)).add(r).mod(s);return i.equals(o)},ot.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ot.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(e.compareTo(_.ONE)<0||e.compareTo(t.subtract(_.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(_.ONE)<0||n.compareTo(t.subtract(_.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var lt=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(t,e,r){return e?n[e]:String.fromCharCode(parseInt(r,16))}var s=new String(""),i=Object.hasOwnProperty;return function(n,o){var a,l,c=n.match(t),u=c[0],h=!1;"{"===u?a={}:"["===u?a=[]:(a=[],h=!0);for(var d=[a],f=1-h,p=c.length;f<p;++f){var g;switch((u=c[f]).charCodeAt(0)){default:(g=d[0])[l||g.length]=+u,l=void 0;break;case 34:if(-1!==(u=u.substring(1,u.length-1)).indexOf("\\")&&(u=u.replace(e,r)),g=d[0],!l){if(!(g instanceof Array)){l=u||s;break}l=g.length}g[l]=u,l=void 0;break;case 91:d.unshift((g=d[0])[l||g.length]=[]),l=void 0;break;case 93:d.shift();break;case 102:(g=d[0])[l||g.length]=!1,l=void 0;break;case 110:(g=d[0])[l||g.length]=null,l=void 0;break;case 116:(g=d[0])[l||g.length]=!0,l=void 0;break;case 123:d.unshift((g=d[0])[l||g.length]={}),l=void 0;break;case 125:d.shift()}}if(h){if(1!==d.length)throw new Error;a=a[0]}else if(d.length)throw new Error;if(o){var m=function(t,e){var n=t[e];if(n&&"object"==typeof n){var r=null;for(var s in n)if(i.call(n,s)&&n!==t){var a=m(n,s);void 0!==a?n[s]=a:(r||(r=[]),r.push(s))}if(r)for(var l=r.length;--l>=0;)delete n[r[l]]}return o.call(t,e,n)};a=m({"":a},"")}return a}}();void 0!==ct&&ct||(ct={}),void 0!==ct.asn1&&ct.asn1||(ct.asn1={}),ct.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1).length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",s=0;s<n;s++)r+="f";e=new _(r,16).xor(t).add(_.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return Tt(t,e)},this.newObject=function(t){var e=ct.asn1,n=e.DERBoolean,r=e.DERInteger,s=e.DERBitString,i=e.DEROctetString,o=e.DERNull,a=e.DERObjectIdentifier,l=e.DEREnumerated,c=e.DERUTF8String,u=e.DERNumericString,h=e.DERPrintableString,d=e.DERTeletexString,f=e.DERIA5String,p=e.DERUTCTime,g=e.DERGeneralizedTime,m=e.DERSequence,y=e.DERSet,v=e.DERTaggedObject,w=e.ASN1Util.newObject,b=Object.keys(t);if(1!=b.length)throw"key of param shall be only one.";var S=b[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+S+":"))throw"undefined key: "+S;if("bool"==S)return new n(t[S]);if("int"==S)return new r(t[S]);if("bitstr"==S)return new s(t[S]);if("octstr"==S)return new i(t[S]);if("null"==S)return new o(t[S]);if("oid"==S)return new a(t[S]);if("enum"==S)return new l(t[S]);if("utf8str"==S)return new c(t[S]);if("numstr"==S)return new u(t[S]);if("prnstr"==S)return new h(t[S]);if("telstr"==S)return new d(t[S]);if("ia5str"==S)return new f(t[S]);if("utctime"==S)return new p(t[S]);if("gentime"==S)return new g(t[S]);if("seq"==S){for(var _=t[S],x=[],C=0;C<_.length;C++){var E=w(_[C]);x.push(E)}return new m({array:x})}if("set"==S){for(_=t[S],x=[],C=0;C<_.length;C++)E=w(_[C]),x.push(E);return new y({array:x})}if("tag"==S){var A=t[S];if("[object Array]"===Object.prototype.toString.call(A)&&3==A.length){var F=w(A[2]);return new v({tag:A[0],explicit:A[1],obj:F})}var T={};if(void 0!==A.explicit&&(T.explicit=A.explicit),void 0!==A.tag&&(T.tag=A.tag),void 0===A.obj)throw"obj shall be specified for 'tag'.";return T.obj=w(A.obj),new v(T)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},ct.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=(e=Math.floor(n/40)+"."+n%40,""),s=2;s<t.length;s+=2){var i=("00000000"+parseInt(t.substr(s,2),16).toString(2)).slice(-8);r+=i.substr(1,7),"0"==i.substr(0,1)&&(e=e+"."+new _(r,2).toString(10),r="")}return e},ct.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new _(t,10).toString(2),s=7-r.length%7;7==s&&(s=0);for(var i="",o=0;o<s;o++)i+="0";for(r=i+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",s=t.split("."),i=40*parseInt(s[0])+parseInt(s[1]);r+=e(i),s.splice(0,2);for(var o=0;o<s.length;o++)r+=n(s[o]);return r},ct.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var n=e.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+n).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},ct.asn1.DERAbstractString=function(t){ct.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=St(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},s.lang.extend(ct.asn1.DERAbstractString,ct.asn1.ASN1Object),ct.asn1.DERAbstractTime=function(t){ct.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,n){var r=this.zeroPadding,s=this.localDateToUTC(t),i=String(s.getFullYear());"utc"==e&&(i=i.substr(2,2));var o=i+r(String(s.getMonth()+1),2)+r(String(s.getDate()),2)+r(String(s.getHours()),2)+r(String(s.getMinutes()),2)+r(String(s.getSeconds()),2);if(!0===n){var a=s.getMilliseconds();if(0!=a){var l=r(String(a),3);o=o+"."+(l=l.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=mt(t)},this.setByDateValue=function(t,e,n,r,s,i){var o=new Date(Date.UTC(t,e-1,n,r,s,i,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},s.lang.extend(ct.asn1.DERAbstractTime,ct.asn1.ASN1Object),ct.asn1.DERAbstractStructured=function(t){ct.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},s.lang.extend(ct.asn1.DERAbstractStructured,ct.asn1.ASN1Object),ct.asn1.DERBoolean=function(){ct.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},s.lang.extend(ct.asn1.DERBoolean,ct.asn1.ASN1Object),ct.asn1.DERInteger=function(t){ct.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=ct.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new _(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},s.lang.extend(ct.asn1.DERInteger,ct.asn1.ASN1Object),ct.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=ct.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}ct.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var n=0;n<=e;n++)t+="0";var r="";for(n=0;n<t.length-1;n+=8){var s=t.substr(n,8),i=parseInt(s,2).toString(16);1==i.length&&(i="0"+i),r+=i}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)e+=1==t[n]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},s.lang.extend(ct.asn1.DERBitString,ct.asn1.ASN1Object),ct.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=ct.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}ct.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},s.lang.extend(ct.asn1.DEROctetString,ct.asn1.DERAbstractString),ct.asn1.DERNull=function(){ct.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},s.lang.extend(ct.asn1.DERNull,ct.asn1.ASN1Object),ct.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new _(t,10).toString(2),s=7-r.length%7;7==s&&(s=0);for(var i="",o=0;o<s;o++)i+="0";for(r=i+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=e(parseInt(a,2))}return n};ct.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",s=t.split("."),i=40*parseInt(s[0])+parseInt(s[1]);r+=e(i),s.splice(0,2);for(var o=0;o<s.length;o++)r+=n(s[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=ct.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},s.lang.extend(ct.asn1.DERObjectIdentifier,ct.asn1.ASN1Object),ct.asn1.DEREnumerated=function(t){ct.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=ct.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new _(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},s.lang.extend(ct.asn1.DEREnumerated,ct.asn1.ASN1Object),ct.asn1.DERUTF8String=function(t){ct.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},s.lang.extend(ct.asn1.DERUTF8String,ct.asn1.DERAbstractString),ct.asn1.DERNumericString=function(t){ct.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},s.lang.extend(ct.asn1.DERNumericString,ct.asn1.DERAbstractString),ct.asn1.DERPrintableString=function(t){ct.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},s.lang.extend(ct.asn1.DERPrintableString,ct.asn1.DERAbstractString),ct.asn1.DERTeletexString=function(t){ct.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},s.lang.extend(ct.asn1.DERTeletexString,ct.asn1.DERAbstractString),ct.asn1.DERIA5String=function(t){ct.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},s.lang.extend(ct.asn1.DERIA5String,ct.asn1.DERAbstractString),ct.asn1.DERUTCTime=function(t){ct.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=mt(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=mt(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},s.lang.extend(ct.asn1.DERUTCTime,ct.asn1.DERAbstractTime),ct.asn1.DERGeneralizedTime=function(t){ct.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=mt(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=mt(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},s.lang.extend(ct.asn1.DERGeneralizedTime,ct.asn1.DERAbstractTime),ct.asn1.DERSequence=function(t){ct.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].getEncodedHex();return this.hV=t,this.hV}},s.lang.extend(ct.asn1.DERSequence,ct.asn1.DERAbstractStructured),ct.asn1.DERSet=function(t){ct.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++)t.push(this.asn1Array[e].getEncodedHex());return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},s.lang.extend(ct.asn1.DERSet,ct.asn1.DERAbstractStructured),ct.asn1.DERTaggedObject=function(t){ct.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,n){this.hT=e,this.isExplicit=t,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},s.lang.extend(ct.asn1.DERTaggedObject,ct.asn1.ASN1Object);var ct,ut,ht,dt=new function(){};function ft(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function pt(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}function gt(t){for(var e="",n=0;n<t.length;n++){var r=t[n].toString(16);1==r.length&&(r="0"+r),e+=r}return e}function mt(t){return gt(ft(t))}function yt(t){return(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function vt(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function wt(t){return t.length%2==1&&(t="0"+t),yt(w(t))}function bt(t){return b(vt(t))}function St(t){return Pt(jt(t))}function _t(t){return decodeURIComponent(Rt(t))}function xt(t){for(var e="",n=0;n<t.length-1;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e}function Ct(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e}function Et(t){return w(t)}function At(t){return Et(t).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Ft(t){return b(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Tt(t,e){return"-----BEGIN "+e+"-----\r\n"+At(t)+"\r\n-----END "+e+"-----\r\n"}function It(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return Ft(t=void 0!==e?(t=t.replace("-----BEGIN "+e+"-----","")).replace("-----END "+e+"-----",""):(t=t.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function kt(t){var e,n,r,s,i,o,a,l,c,u,h;if(h=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return l=h[1],e=parseInt(l),2===l.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),n=parseInt(h[2])-1,r=parseInt(h[3]),s=parseInt(h[4]),i=parseInt(h[5]),o=parseInt(h[6]),a=0,""!==(c=h[7])&&(u=(c.substr(1)+"00").substr(0,3),a=parseInt(u)),Date.UTC(e,n,r,s,i,o,a);throw"unsupported zulu format: "+t}function Dt(t){return~~(kt(t)/1e3)}function Pt(t){return t.replace(/%/g,"")}function Rt(t){return t.replace(/(..)/g,"%$1")}function Ot(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var n=(t=t.toLowerCase()).split(":").length-1;if(n<2)throw e;var r=":".repeat(7-n+2),s=(t=t.replace("::",r)).split(":");if(8!=s.length)throw e;for(var i=0;i<8;i++)s[i]=("0000"+s[i]).slice(-4);return s.join("")}function Nt(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var e=(t=t.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)e[n]=e[n].replace(/^0+/,""),""==e[n]&&(e[n]="0");var r=(t=":"+e.join(":")+":").match(/:(0:){2,}/g);if(null===r)return t.slice(1,-1);var s="";for(n=0;n<r.length;n++)r[n].length>s.length&&(s=r[n]);return(t=t.replace(s,"::")).slice(1,-1)}function Ht(t){var e="malformed hex value";if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8!=t.length)return 32==t.length?Nt(t):t;try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(o){throw e}}function jt(t){for(var e=encodeURIComponent(t),n="",r=0;r<e.length;r++)"%"==e[r]?(n+=e.substr(r,3),r+=2):n=n+"%"+mt(e[r]);return n}function Vt(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function Bt(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map((function(t,e,n){var r=parseInt(t);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(o){throw"malformed integer array string: "+o}}dt.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var n=parseInt(t.substr(e+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},dt.getL=function(t,e){var n=dt.getLblen(t,e);return n<1?"":t.substr(e+2,2*n)},dt.getVblen=function(t,e){var n;return""==(n=dt.getL(t,e))?-1:("8"===n.substr(0,1)?new _(n.substr(2),16):new _(n,16)).intValue()},dt.getVidx=function(t,e){var n=dt.getLblen(t,e);return n<0?n:e+2*(n+1)},dt.getV=function(t,e){var n=dt.getVidx(t,e),r=dt.getVblen(t,e);return t.substr(n,2*r)},dt.getTLV=function(t,e){return t.substr(e,2)+dt.getL(t,e)+dt.getV(t,e)},dt.getNextSiblingIdx=function(t,e){return dt.getVidx(t,e)+2*dt.getVblen(t,e)},dt.getChildIdx=function(t,e){var n=dt,r=new Array,s=n.getVidx(t,e);"03"==t.substr(e,2)?r.push(s+2):r.push(s);for(var i=n.getVblen(t,e),o=s,a=0;;){var l=n.getNextSiblingIdx(t,o);if(null==l||l-s>=2*i)break;if(a>=200)break;r.push(l),o=l,a++}return r},dt.getNthChildIdx=function(t,e,n){return dt.getChildIdx(t,e)[n]},dt.getIdxbyList=function(t,e,n,r){var s,i,o=dt;if(0==n.length){if(void 0!==r&&t.substr(e,2)!==r)throw"checking tag doesn't match: "+t.substr(e,2)+"!="+r;return e}return s=n.shift(),i=o.getChildIdx(t,e),o.getIdxbyList(t,i[s],n,r)},dt.getTLVbyList=function(t,e,n,r){var s=dt,i=s.getIdxbyList(t,e,n);if(void 0===i)throw"can't find nthList object";if(void 0!==r&&t.substr(i,2)!=r)throw"checking tag doesn't match: "+t.substr(i,2)+"!="+r;return s.getTLV(t,i)},dt.getVbyList=function(t,e,n,r,s){var i,o,a=dt;if(void 0===(i=a.getIdxbyList(t,e,n,r)))throw"can't find nthList object";return o=a.getV(t,i),!0===s&&(o=o.substr(2)),o},dt.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},n=[],r=t.substr(0,2),s=parseInt(r,16);n[0]=new String(Math.floor(s/40)),n[1]=new String(s%40);for(var i=t.substr(2),o=[],a=0;a<i.length/2;a++)o.push(parseInt(i.substr(2*a,2),16));var l=[],c="";for(a=0;a<o.length;a++)128&o[a]?c+=e((127&o[a]).toString(2),7):(c+=e((127&o[a]).toString(2),7),l.push(new String(parseInt(c,2))),c="");var u=n.join(".");return l.length>0&&(u=u+"."+l.join(".")),u},dt.dump=function(t,e,n,r){var s=dt,i=s.getV,o=s.dump,a=s.getChildIdx,l=t;t instanceof ct.asn1.ASN1Object&&(l=t.getEncodedHex());var c=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var u=e.ommit_long_octet;if("01"==l.substr(n,2))return"00"==(h=i(l,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==l.substr(n,2))return r+"INTEGER "+c(h=i(l,n),u)+"\n";if("03"==l.substr(n,2))return r+"BITSTRING "+c(h=i(l,n),u)+"\n";if("04"==l.substr(n,2)){var h=i(l,n);return s.isASN1HEX(h)?(_=r+"OCTETSTRING, encapsulates\n")+o(h,e,0,r+"  "):r+"OCTETSTRING "+c(h,u)+"\n"}if("05"==l.substr(n,2))return r+"NULL\n";if("06"==l.substr(n,2)){var d=i(l,n),f=ct.asn1.ASN1Util.oidHexToInt(d),p=ct.asn1.x509.OID.oid2name(f),g=f.replace(/\./g," ");return""!=p?r+"ObjectIdentifier "+p+" ("+g+")\n":r+"ObjectIdentifier ("+g+")\n"}if("0c"==l.substr(n,2))return r+"UTF8String '"+_t(i(l,n))+"'\n";if("13"==l.substr(n,2))return r+"PrintableString '"+_t(i(l,n))+"'\n";if("14"==l.substr(n,2))return r+"TeletexString '"+_t(i(l,n))+"'\n";if("16"==l.substr(n,2))return r+"IA5String '"+_t(i(l,n))+"'\n";if("17"==l.substr(n,2))return r+"UTCTime "+_t(i(l,n))+"\n";if("18"==l.substr(n,2))return r+"GeneralizedTime "+_t(i(l,n))+"\n";if("30"==l.substr(n,2)){if("3000"==l.substr(n,4))return r+"SEQUENCE {}\n";_=r+"SEQUENCE\n";var m=e;if((2==(w=a(l,n)).length||3==w.length)&&"06"==l.substr(w[0],2)&&"04"==l.substr(w[w.length-1],2)){p=s.oidname(i(l,w[0]));var y=JSON.parse(JSON.stringify(e));y.x509ExtName=p,m=y}for(var v=0;v<w.length;v++)_+=o(l,m,w[v],r+"  ");return _}if("31"==l.substr(n,2)){_=r+"SET\n";var w=a(l,n);for(v=0;v<w.length;v++)_+=o(l,e,w[v],r+"  ");return _}var b=parseInt(l.substr(n,2),16);if(0!=(128&b)){var S=31&b;if(0!=(32&b)){var _=r+"["+S+"]\n";for(w=a(l,n),v=0;v<w.length;v++)_+=o(l,e,w[v],r+"  ");return _}return"68747470"==(h=i(l,n)).substr(0,8)&&(h=_t(h)),"subjectAltName"===e.x509ExtName&&2==S&&(h=_t(h)),r+"["+S+"] "+h+"\n"}return r+"UNKNOWN("+l.substr(n,2)+") "+i(l,n)+"\n"},dt.isASN1HEX=function(t){var e=dt;if(t.length%2==1)return!1;var n=e.getVblen(t,0),r=t.substr(0,2),s=e.getL(t,0);return t.length-r.length-s.length==2*n},dt.oidname=function(t){var e=ct.asn1;ct.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var n=e.x509.OID.oid2name(t);return""===n&&(n=t),n},void 0!==ct&&ct||(ct={}),void 0!==ct.asn1&&ct.asn1||(ct.asn1={}),void 0!==ct.asn1.x509&&ct.asn1.x509||(ct.asn1.x509={}),ct.asn1.x509.Certificate=function(t){ct.asn1.x509.Certificate.superclass.constructor.call(this);var e=ct.asn1,n=e.DERSequence,r=e.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var t=new ct.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});t.init(this.prvKey),t.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=t.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new r({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+At(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==t&&(void 0!==t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},s.lang.extend(ct.asn1.x509.Certificate,ct.asn1.ASN1Object),ct.asn1.x509.TBSCertificate=function(t){ct.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=ct.asn1,n=e.DERSequence,r=e.DERInteger,s=e.DERTaggedObject,i=e.x509,o=i.Time,a=i.X500Name,l=i.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new s({obj:new r({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new r(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new i.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new a(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new o(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new o(t)},this.setSubjectByParam=function(t){this.asn1Subject=new a(t)},this.setSubjectPublicKey=function(t){this.asn1SubjPKey=new l(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=Lt.getKey(t);this.asn1SubjPKey=new l(e)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,e){ct.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new n({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new n({array:this.extensionsArray}),r=new s({explicit:!0,tag:"a3",obj:e});this.asn1Array.push(r)}var i=new n({array:this.asn1Array});return this.hTLV=i.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},s.lang.extend(ct.asn1.x509.TBSCertificate,ct.asn1.ASN1Object),ct.asn1.x509.Extension=function(t){ct.asn1.x509.Extension.superclass.constructor.call(this);var e=ct.asn1,n=e.DERObjectIdentifier,r=e.DEROctetString,s=e.DERBoolean,i=e.DERSequence;this.getEncodedHex=function(){var t=new n({oid:this.oid}),e=new r({hex:this.getExtnValueHex()}),o=new Array;return o.push(t),this.critical&&o.push(new s),o.push(e),new i({array:o}).getEncodedHex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},s.lang.extend(ct.asn1.x509.Extension,ct.asn1.ASN1Object),ct.asn1.x509.Extension.appendByNameToArray=function(t,e,n){var r=t.toLowerCase(),s=ct.asn1.x509;if("basicconstraints"==r){var i=new s.BasicConstraints(e);n.push(i)}else if("keyusage"==r)i=new s.KeyUsage(e),n.push(i);else if("crldistributionpoints"==r)i=new s.CRLDistributionPoints(e),n.push(i);else if("extkeyusage"==r)i=new s.ExtKeyUsage(e),n.push(i);else if("authoritykeyidentifier"==r)i=new s.AuthorityKeyIdentifier(e),n.push(i);else if("authorityinfoaccess"==r)i=new s.AuthorityInfoAccess(e),n.push(i);else if("subjectaltname"==r)i=new s.SubjectAltName(e),n.push(i);else{if("issueraltname"!=r)throw"unsupported extension name: "+t;i=new s.IssuerAltName(e),n.push(i)}},ct.asn1.x509.KeyUsage=function(t){ct.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=$t.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==t&&(void 0!==t.bin&&(this.asn1ExtnValue=new ct.asn1.DERBitString(t)),void 0!==t.names&&void 0!==t.names.length)){for(var n=t.names,r="000000000",s=0;s<n.length;s++)for(var i=0;i<e.length;i++)n[s]===e[i]&&(r=r.substring(0,i)+"1"+r.substring(i+1,r.length));this.asn1ExtnValue=new ct.asn1.DERBitString({bin:r})}},s.lang.extend(ct.asn1.x509.KeyUsage,ct.asn1.x509.Extension),ct.asn1.x509.BasicConstraints=function(t){ct.asn1.x509.BasicConstraints.superclass.constructor.call(this,t),this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new ct.asn1.DERBoolean),this.pathLen>-1&&t.push(new ct.asn1.DERInteger({int:this.pathLen}));var e=new ct.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},s.lang.extend(ct.asn1.x509.BasicConstraints,ct.asn1.x509.Extension),ct.asn1.x509.CRLDistributionPoints=function(t){ct.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=ct.asn1,n=e.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new e.DERSequence({array:t})},this.setByOneURI=function(t){var e=new n.GeneralNames([{uri:t}]),r=new n.DistributionPointName(e),s=new n.DistributionPoint({dpobj:r});this.setByDPArray([s])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},s.lang.extend(ct.asn1.x509.CRLDistributionPoints,ct.asn1.x509.Extension),ct.asn1.x509.ExtKeyUsage=function(t){ct.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=ct.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new e.DERSequence;for(var n=0;n<t.length;n++){var r=new e.DERObjectIdentifier(t[n]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},s.lang.extend(ct.asn1.x509.ExtKeyUsage,ct.asn1.x509.Extension),ct.asn1.x509.AuthorityKeyIdentifier=function(t){ct.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=ct.asn1,n=e.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var r=new e.DERSequence({array:t});return this.asn1ExtnValue=r,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new ct.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new ct.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new ct.asn1.DERInteger(t)},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn))},s.lang.extend(ct.asn1.x509.AuthorityKeyIdentifier,ct.asn1.x509.Extension),ct.asn1.x509.AuthorityInfoAccess=function(t){ct.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,n=ct.asn1,r=n.DERSequence,s=0;s<t.length;s++){var i=new r({array:[new n.DERObjectIdentifier(t[s].accessMethod),new n.x509.GeneralName(t[s].accessLocation)]});e.push(i)}this.asn1ExtnValue=new r({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},s.lang.extend(ct.asn1.x509.AuthorityInfoAccess,ct.asn1.x509.Extension),ct.asn1.x509.SubjectAltName=function(t){ct.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new ct.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},s.lang.extend(ct.asn1.x509.SubjectAltName,ct.asn1.x509.Extension),ct.asn1.x509.IssuerAltName=function(t){ct.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new ct.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},s.lang.extend(ct.asn1.x509.IssuerAltName,ct.asn1.x509.Extension),ct.asn1.x509.CRL=function(t){ct.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new ct.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new ct.asn1.DERBitString({hex:"00"+this.hexSig});var t=new ct.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+At(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==t&&(void 0!==t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},s.lang.extend(ct.asn1.x509.CRL,ct.asn1.ASN1Object),ct.asn1.x509.TBSCertList=function(t){ct.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=ct.asn1,n=e.DERSequence,r=e.x509,s=r.Time;this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new r.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new r.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new s(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new s(t)},this.addRevokedCert=function(t,e){var n={};null!=t&&null!=t&&(n.sn=t),null!=e&&null!=e&&(n.time=e);var s=new r.CRLEntry(n);this.aRevokedCert.push(s)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var t=new n({array:this.aRevokedCert});this.asn1Array.push(t)}var e=new n({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},s.lang.extend(ct.asn1.x509.TBSCertList,ct.asn1.ASN1Object),ct.asn1.x509.CRLEntry=function(t){ct.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=ct.asn1;this.setCertSerial=function(t){this.sn=new e.DERInteger(t)},this.setRevocationDate=function(t){this.time=new e.x509.Time(t)},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},s.lang.extend(ct.asn1.x509.CRLEntry,ct.asn1.ASN1Object),ct.asn1.x509.X500Name=function(t){ct.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var e,n=ct.asn1,r=n.x509,s=It;this.setByString=function(t){var e=t.split("/");e.shift();for(var n=[],s=0;s<e.length;s++)if(e[s].match(/^[^=]+=.+$/))n.push(e[s]);else{var i=n.length-1;n[i]=n[i]+"/"+e[s]}for(s=0;s<n.length;s++)this.asn1Array.push(new r.RDN({str:n[s]}))},this.setByLdapString=function(t){var e=r.X500Name.ldapToOneline(t);this.setByString(e)},this.setByObject=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=new ct.asn1.x509.RDN({str:e+"="+t[e]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new n.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer&&((e=new $t).hex=s(t.certissuer),this.hTLV=e.getIssuerHex()),void 0!==t.certsubject&&((e=new $t).hex=s(t.certsubject),this.hTLV=e.getSubjectHex()))},s.lang.extend(ct.asn1.x509.X500Name,ct.asn1.ASN1Object),ct.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),(e=e.map((function(t){return t.replace(/,/,"\\,")}))).join(",")},ct.asn1.x509.X500Name.ldapToOneline=function(t){for(var e=t.split(","),n=!1,r=[],s=0;e.length>0;s++){var i=e.shift();if(!0===n){var o=(r.pop()+","+i).replace(/\\,/g,",");r.push(o),n=!1}else r.push(i);"\\"===i.substr(-1,1)&&(n=!0)}return(r=r.map((function(t){return t.replace("/","\\/")}))).reverse(),"/"+r.join("/")},ct.asn1.x509.RDN=function(t){ct.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new ct.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var e=ct.asn1.x509.RDN.parseString(t),n=0;n<e.length;n++)this.addByString(e[n])},this.getEncodedHex=function(){var t=new ct.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.addByMultiValuedString(t.str)},s.lang.extend(ct.asn1.x509.RDN,ct.asn1.ASN1Object),ct.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),n=!1,r=[],s=0;e.length>0;s++){var i=e.shift();if(!0===n){var o=(r.pop()+"+"+i).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(i);"\\"===i.substr(-1,1)&&(n=!0)}var a=!1,l=[];for(s=0;r.length>0;s++){if(i=r.shift(),!0===a){var c=l.pop();i.match(/"$/)?(o=(c+"+"+i).replace(/^([^=]+)="(.*)"$/,"$1=$2"),l.push(o),a=!1):l.push(c+"+"+i)}else l.push(i);i.match(/^[^=]+="/)&&(a=!0)}return l},ct.asn1.x509.AttributeTypeAndValue=function(t){ct.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var e=ct.asn1;this.setByString=function(t){var e=t.match(/^([^=]+)=(.+)$/);if(!e)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(e[1],e[2])},this.setByAttrTypeAndValueStr=function(t,e){this.typeObj=ct.asn1.x509.OID.atype2obj(t);var n="utf8";"C"==t&&(n="prn"),this.valueObj=this.getValueObj(n,e)},this.getValueObj=function(t,n){if("utf8"==t)return new e.DERUTF8String({str:n});if("prn"==t)return new e.DERPrintableString({str:n});if("tel"==t)return new e.DERTeletexString({str:n});if("ia5"==t)return new e.DERIA5String({str:n});throw"unsupported directory string type: type="+t+" value="+n},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.setByString(t.str)},s.lang.extend(ct.asn1.x509.AttributeTypeAndValue,ct.asn1.ASN1Object),ct.asn1.x509.SubjectPublicKeyInfo=function(t){ct.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=ct.asn1,n=e.DERInteger,r=e.DERBitString,s=e.DERObjectIdentifier,i=e.DERSequence,o=e.ASN1Util.newObject,a=e.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new i({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this.setPubKey=function(t){try{if(t instanceof rt){var e=o({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).getEncodedHex();this.asn1AlgId=new a({name:"rsaEncryption"}),this.asn1SubjPKey=new r({hex:"00"+e})}}catch(c){}try{if(t instanceof ct.crypto.ECDSA){var i=new s({name:t.curveName});this.asn1AlgId=new a({name:"ecPublicKey",asn1params:i}),this.asn1SubjPKey=new r({hex:"00"+t.pubKeyHex})}}catch(c){}try{if(t instanceof ct.crypto.DSA){i=new o({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}),this.asn1AlgId=new a({name:"dsa",asn1params:i});var l=new n({bigint:t.y});this.asn1SubjPKey=new r({hex:"00"+l.getEncodedHex()})}}catch(c){}},void 0!==t&&this.setPubKey(t)},s.lang.extend(ct.asn1.x509.SubjectPublicKeyInfo,ct.asn1.ASN1Object),ct.asn1.x509.Time=function(t){ct.asn1.x509.Time.superclass.constructor.call(this);var e=ct.asn1,n=e.DERUTCTime,r=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new r(this.timeParams):"utc"==this.type?new n:new r,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},s.lang.extend(ct.asn1.x509.Time,ct.asn1.ASN1Object),ct.asn1.x509.AlgorithmIdentifier=function(t){ct.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=ct.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=e.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];null!==this.asn1Params&&t.push(this.asn1Params);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new e.DERNull)}},s.lang.extend(ct.asn1.x509.AlgorithmIdentifier,ct.asn1.ASN1Object),ct.asn1.x509.GeneralName=function(t){ct.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},n=ct.asn1,r=n.DEROctetString,s=n.DERIA5String,i=n.DERTaggedObject,o=n.ASN1Object,a=n.x509.X500Name,l=It;this.explicit=!1,this.setByParam=function(t){var n=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",n=new s({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",n=new s({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",n=new s({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",this.explicit=!0,n=new a({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",this.explicit=!0,n=new a({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var c=null;if((h=t.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(c=l(h)),null==c)throw"certissuer param not cert";(d=new $t).hex=c;var u=d.getIssuerHex();(n=new o).hTLV=u}if(void 0!==t.certsubj){var h,d;if(this.type="dn",this.explicit=!0,c=null,(h=t.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(c=l(h)),null==c)throw"certsubj param not cert";(d=new $t).hex=c,u=d.getSubjectHex(),(n=new o).hTLV=u}if(void 0!==t.ip){this.type="ip",this.explicit=!1;var f,p=t.ip,g="malformed IP address";if(p.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(f=Bt("["+p.split(".").join(",")+"]")).length)throw g}else if(p.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))f=Ot(p);else{if(!p.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw g;f=p}n=new r({hex:f})}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new i({explicit:this.explicit,tag:e[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},s.lang.extend(ct.asn1.x509.GeneralName,ct.asn1.ASN1Object),ct.asn1.x509.GeneralNames=function(t){ct.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=ct.asn1;this.setByParamArray=function(t){for(var n=0;n<t.length;n++){var r=new e.x509.GeneralName(t[n]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new e.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},s.lang.extend(ct.asn1.x509.GeneralNames,ct.asn1.ASN1Object),ct.asn1.x509.DistributionPointName=function(t){ct.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=ct.asn1,n=e.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==t){if(!e.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},s.lang.extend(ct.asn1.x509.DistributionPointName,ct.asn1.ASN1Object),ct.asn1.x509.DistributionPoint=function(t){ct.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=ct.asn1;this.getEncodedHex=function(){var t=new e.DERSequence;if(null!=this.asn1DP){var n=new e.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(n)}return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.dpobj&&(this.asn1DP=t.dpobj)},s.lang.extend(ct.asn1.x509.DistributionPoint,ct.asn1.ASN1Object),ct.asn1.x509.OID=new function(t){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var e=new ct.asn1.DERObjectIdentifier({oid:this.name2oidList[t]});return this.objCache[t]=e,e},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.atype2oidList[t])throw"AttributeType name undefined: "+t;var e=new ct.asn1.DERObjectIdentifier({oid:this.atype2oidList[t]});return this.objCache[t]=e,e}},ct.asn1.x509.OID.oid2name=function(t){var e=ct.asn1.x509.OID.name2oidList;for(var n in e)if(e[n]==t)return n;return""},ct.asn1.x509.OID.oid2atype=function(t){var e=ct.asn1.x509.OID.atype2oidList;for(var n in e)if(e[n]==t)return n;return t},ct.asn1.x509.OID.name2oid=function(t){var e=ct.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},ct.asn1.x509.X509Util={},ct.asn1.x509.X509Util.newCertPEM=function(t){var e=ct.asn1.x509,n=e.Certificate,r=new(0,e.TBSCertificate);if(void 0===t.serial)throw"serial number undefined.";if(r.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(r.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(r.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(r.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(r.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(r.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(r.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var s=0;s<t.ext.length;s++)for(key in t.ext[s])r.appendExtensionByName(key,t.ext[s][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var i=null;return t.cakey&&(i=new n({tbscertobj:r,prvkeyobj:!0===t.cakey.isPrivate?t.cakey:Lt.getKey.apply(null,t.cakey)})).sign(),t.sighex&&(i=new n({tbscertobj:r})).setSignatureHex(t.sighex),i.getPEMString()},void 0!==ct&&ct||(ct={}),void 0!==ct.asn1&&ct.asn1||(ct.asn1={}),void 0!==ct.asn1.cms&&ct.asn1.cms||(ct.asn1.cms={}),ct.asn1.cms.Attribute=function(t){var e=ct.asn1;e.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var t,n,r;t=new e.DERObjectIdentifier({oid:this.attrTypeOid}),n=new e.DERSet({array:this.valueList});try{n.getEncodedHex()}catch(s){throw"fail valueSet.getEncodedHex in Attribute(1)/"+s}r=new e.DERSequence({array:[t,n]});try{this.hTLV=r.getEncodedHex()}catch(s){throw"failed seq.getEncodedHex in Attribute(2)/"+s}return this.hTLV}},s.lang.extend(ct.asn1.cms.Attribute,ct.asn1.ASN1Object),ct.asn1.cms.ContentType=function(t){var e=ct.asn1;e.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var n=null;void 0!==t&&(n=new e.DERObjectIdentifier(t),this.valueList=[n])},s.lang.extend(ct.asn1.cms.ContentType,ct.asn1.cms.Attribute),ct.asn1.cms.MessageDigest=function(t){var e,n=ct,r=n.asn1,s=r.DEROctetString,i=r.cms;i.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==t&&(t.eciObj instanceof i.EncapsulatedContentInfo&&"string"==typeof t.hashAlg?((e=new s({hex:n.crypto.Util.hashHex(t.eciObj.eContentValueHex,t.hashAlg)})).getEncodedHex(),this.valueList=[e]):((e=new s(t)).getEncodedHex(),this.valueList=[e]))},s.lang.extend(ct.asn1.cms.MessageDigest,ct.asn1.cms.Attribute),ct.asn1.cms.SigningTime=function(t){var e=ct.asn1;if(e.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==t){var n=new e.x509.Time(t);try{n.getEncodedHex()}catch(a){throw"SigningTime.getEncodedHex() failed/"+a}this.valueList=[n]}},s.lang.extend(ct.asn1.cms.SigningTime,ct.asn1.cms.Attribute),ct.asn1.cms.SigningCertificate=function(t){var e=ct,n=e.asn1,r=n.DERSequence,s=n.cms;s.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(t){for(var i=[],o=0;o<t.length;o++){var a=It(t[o]),l=e.crypto.Util.hashHex(a,"sha1"),c=new n.DEROctetString({hex:l});c.getEncodedHex();var u=new s.IssuerAndSerialNumber({cert:t[o]});u.getEncodedHex();var h=new r({array:[c,u]});h.getEncodedHex(),i.push(h)}var d=new r({array:i});d.getEncodedHex(),this.valueList=[d]},void 0!==t&&"object"==typeof t.array&&this.setCerts(t.array)},s.lang.extend(ct.asn1.cms.SigningCertificate,ct.asn1.cms.Attribute),ct.asn1.cms.SigningCertificateV2=function(t){var e=ct.asn1,n=e.DERSequence,r=e.x509,s=e.cms,i=ct.crypto;if(s.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(t,o){for(var a=[],l=0;l<t.length;l++){var c=It(t[l]),u=[];"sha256"!==o&&u.push(new r.AlgorithmIdentifier({name:o}));var h=i.Util.hashHex(c,o),d=new e.DEROctetString({hex:h});d.getEncodedHex(),u.push(d);var f=new s.IssuerAndSerialNumber({cert:t[l]});f.getEncodedHex(),u.push(f);var p=new n({array:u});p.getEncodedHex(),a.push(p)}var g=new n({array:a});g.getEncodedHex(),this.valueList=[g]},void 0!==t&&"object"==typeof t.array){var o="sha256";"string"==typeof t.hashAlg&&(o=t.hashAlg),this.setCerts(t.array,o)}},s.lang.extend(ct.asn1.cms.SigningCertificateV2,ct.asn1.cms.Attribute),ct.asn1.cms.IssuerAndSerialNumber=function(t){var e=ct.asn1,n=e.DERInteger,r=e.x509.X500Name,s=$t;e.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(t){var e=It(t),i=new s;i.hex=e;var o=i.getIssuerHex();this.dIssuer=new r,this.dIssuer.hTLV=o;var a=i.getSerialNumberHex();this.dSerial=new n({hex:a})},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),t.issuer&&t.serial&&(this.dIssuer=t.issuer instanceof r?t.issuer:new r(t.issuer),this.dSerial=t.serial instanceof n?t.serial:new n(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},s.lang.extend(ct.asn1.cms.IssuerAndSerialNumber,ct.asn1.ASN1Object),ct.asn1.cms.AttributeList=function(t){var e=ct.asn1,n=e.cms;n.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof n.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},s.lang.extend(ct.asn1.cms.AttributeList,ct.asn1.ASN1Object),ct.asn1.cms.SignerInfo=function(t){var e=ct.asn1,n=e.DERTaggedObject,r=e.cms,s=r.AttributeList,i=r.ContentType,o=r.EncapsulatedContentInfo,a=r.MessageDigest,l=r.SignedData,c=e.x509.AlgorithmIdentifier,u=ct.crypto,h=Lt;r.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new e.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new s,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new s,this.setSignerIdentifier=function(t){"string"==typeof t&&-1!=t.indexOf("CERTIFICATE")&&-1!=t.indexOf("BEGIN")&&-1!=t.indexOf("END")&&(this.dSignerIdentifier=new r.IssuerAndSerialNumber({cert:t}))},this.setForContentAndHash=function(t){void 0!==t&&(t.eciObj instanceof o&&(this.dSignedAttrs.add(new i({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new a({eciObj:t.eciObj,hashAlg:t.hashAlg}))),void 0!==t.sdObj&&t.sdObj instanceof l&&-1==t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new c({name:t.hashAlg})))},this.sign=function(t,n){this.dSigAlg=new c({name:n});var r=this.dSignedAttrs.getEncodedHex(),s=h.getKey(t),i=new u.Signature({alg:n});i.init(s),i.updateHex(r);var o=i.sign();this.dSig=new e.DEROctetString({hex:o})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof s&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var t=new n({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),r=null;this.dUnsignedAttrs.length()>0&&(r=new n({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var i=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,t,this.dSigAlg,this.dSig];null!=r&&i.push(r);var o=new e.DERSequence({array:i});return this.hTLV=o.getEncodedHex(),this.hTLV}},s.lang.extend(ct.asn1.cms.SignerInfo,ct.asn1.ASN1Object),ct.asn1.cms.EncapsulatedContentInfo=function(t){var e=ct.asn1,n=e.DERTaggedObject,r=e.DERSequence,s=e.DERObjectIdentifier,i=e.DEROctetString;e.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new s({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){this.dEContentType=t.match(/^[0-2][.][0-9.]+$/)?new s({oid:t}):new s({name:t})},this.setContentValue=function(t){void 0!==t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=St(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=St(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new i({hex:this.eContentValueHex});this.dEContent=new n({obj:t,tag:"a0",explicit:!0});var e=[this.dEContentType];this.isDetached||e.push(this.dEContent);var s=new r({array:e});return this.hTLV=s.getEncodedHex(),this.hTLV}},s.lang.extend(ct.asn1.cms.EncapsulatedContentInfo,ct.asn1.ASN1Object),ct.asn1.cms.ContentInfo=function(t){var e=ct.asn1,n=e.DERTaggedObject,r=e.DERSequence,s=e.x509;ct.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=s.OID.name2obj(t))},this.getEncodedHex=function(){var t=new n({obj:this.dContent,tag:"a0",explicit:!0}),e=new r({array:[this.dContentType,t]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof e.ASN1Object&&(this.dContent=t.obj))},s.lang.extend(ct.asn1.cms.ContentInfo,ct.asn1.ASN1Object),ct.asn1.cms.SignedData=function(t){var e=ct.asn1,n=e.ASN1Object,r=e.DERInteger,s=e.DERSet,i=e.DERSequence,o=e.DERTaggedObject,a=e.cms,l=a.EncapsulatedContentInfo,c=a.SignerInfo,u=a.ContentInfo,h=e.x509.AlgorithmIdentifier;ct.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new r({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new l,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new c],this.addCertificatesByPEM=function(t){var e=It(t),r=new n;r.hTLV=e,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],e=0;e<this.digestAlgNameList.length;e++){var n=new h({name:this.digestAlgNameList[e]});t.push(n)}this.dDigestAlgs=new s({array:t})}var r=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var a=new s({array:this.certificateList});this.dCerts=new o({obj:a,tag:"a0",explicit:!1})}null!=this.dCerts&&r.push(this.dCerts);var l=new s({array:this.signerInfoList});r.push(l);var c=new i({array:r});return this.hTLV=c.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new u({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return Tt(this.getContentInfoEncodedHex(),"CMS")}},s.lang.extend(ct.asn1.cms.SignedData,ct.asn1.ASN1Object),ct.asn1.cms.CMSUtil=new function(){},ct.asn1.cms.CMSUtil.newSignedData=function(t){var e=ct.asn1,n=e.cms,r=n.SignerInfo,s=n.SigningTime,i=n.SigningCertificate,o=n.SigningCertificateV2,a=e.cades.SignaturePolicyIdentifier,l=new(0,n.SignedData);if(l.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var c=0;c<t.certs.length;c++)l.addCertificatesByPEM(t.certs[c]);for(l.signerInfoList=[],c=0;c<t.signerInfos.length;c++){var u=t.signerInfos[c],h=new r;for(attrName in h.setSignerIdentifier(u.signerCert),h.setForContentAndHash({sdObj:l,eciObj:l.dEncapContentInfo,hashAlg:u.hashAlg}),u.sAttr){var d=u.sAttr[attrName];if("SigningTime"==attrName){var f=new s(d);h.dSignedAttrs.add(f)}"SigningCertificate"==attrName&&(f=new i(d),h.dSignedAttrs.add(f)),"SigningCertificateV2"==attrName&&(f=new o(d),h.dSignedAttrs.add(f)),"SignaturePolicyIdentifier"==attrName&&(f=new a(d),h.dSignedAttrs.add(f))}h.sign(u.signerPrvKey,u.sigAlg),l.signerInfoList.push(h)}return l},ct.asn1.cms.CMSUtil.verifySignedData=function(t){var e=dt.getVbyList,n=dt.getTLVbyList,r=dt.getIdxbyList,s=dt.getChildIdx,i=dt.getTLV,o=dt.oidname,a=ct.crypto.Util.hashHex;void 0===t.cms&&(0,ct.lang.String.isHex)(t.cms);var l=t.cms,c=function(t,i){var a=i.idx;i.signerid_issuer1=n(t,a,[1,0],"30"),i.signerid_serial1=e(t,a,[1,1],"02"),i.hashalg=o(e(t,a,[2,0],"06"));var l=r(t,a,[3],"a0");i.idxSignedAttrs=l,u(t,i,l);var c=s(t,a).length;if(c<6)throw"malformed SignerInfo";i.sigalg=o(e(t,a,[c-2,0],"06")),i.sigval=e(t,a,[c-1],"04")},u=function(t,n,r){var i=s(t,r);n.signedAttrIdxList=i;for(var o=0;o<i.length;o++){var a,l=i[o],c=e(t,l,[0],"06");"2a864886f70d010905"===c?(a=_t(e(t,l,[1,0])),n.saSigningTime=a):"2a864886f70d010904"===c&&(a=e(t,l,[1,0],"04"),n.saMessageDigest=a)}},h=function(t,e,n,r){n.verifyDetail={};var o=n.verifyDetail,l=e.parse.econtent,c=n.hashalg,u=n.saMessageDigest;o.validMessageDigest=!1,a(l,c)===u&&(o.validMessageDigest=!0),function(t,e,n,r){var o,a=e.parse.certsIdx;if(void 0===e.certs){o=[],e.certkeys=[];for(var l=s(t,a),c=0;c<l.length;c++){var u=i(t,l[c]),h=new $t;h.readCertHex(u),o[c]=h,e.certkeys[c]=h.getPublicKey()}e.certs=o}else o=e.certs;for(e.cccc=o.length,e.cccci=l.length,c=0;c<o.length;c++){var d=h.getIssuerHex(),f=h.getSerialNumberHex();n.signerid_issuer1===d&&n.signerid_serial1===f&&(n.certkey_idx=c)}}(t,e,n),o.validSignatureValue=!1;var h=n.sigalg,d="31"+i(t,n.idxSignedAttrs).substr(2);n.signedattrshex=d;var f=e.certs[n.certkey_idx].getPublicKey(),p=new ct.crypto.Signature({alg:h});p.init(f),p.updateHex(d);var g=p.verify(n.sigval);o.validSignatureValue_isValid=g,!0===g&&(o.validSignatureValue=!0),n.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(n.isValid=!0)},d={isValid:!1,parse:{}};return function(t,n){if("2a864886f70d010702"!==e(t,0,[0],"06"))return n;n.cmsType="signedData",n.econtent=e(t,0,[1,0,2,1,0]),function(t,e){for(var n,s=3;s<6;s++)if(void 0!==(n=r(t,0,[1,0,s]))){var i=t.substr(n,2);"a0"===i&&(e.certsIdx=n),"a1"===i&&(e.revinfosIdx=n),"31"===i&&(e.signerinfosIdx=n)}}(t,n),n.signerInfos=[],function(t,e){var n=e.signerinfosIdx;if(void 0!==n){var r=s(t,n);e.signerInfoIdxList=r;for(var i=0;i<r.length;i++){var o={idx:r[i]};c(t,o),e.signerInfos.push(o)}}}(t,n)}(l,d.parse),function(t,e){for(var n=e.parse.signerInfos,r=n.length,s=!0,i=0;i<r;i++){var o=n[i];h(t,e,o),o.isValid||(s=!1)}e.isValid=s}(l,d),d},void 0!==ct&&ct||(ct={}),void 0!==ct.asn1&&ct.asn1||(ct.asn1={}),void 0!==ct.asn1.tsp&&ct.asn1.tsp||(ct.asn1.tsp={}),ct.asn1.tsp.Accuracy=function(t){var e=ct.asn1,n=e.DERInteger,r=e.DERSequence,s=e.DERTaggedObject;e.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,e=null,i=null,o=[];if(null!=this.seconds&&(t=new n({int:this.seconds}),o.push(t)),null!=this.millis){var a=new n({int:this.millis});e=new s({obj:a,tag:"80",explicit:!1}),o.push(e)}if(null!=this.micros){var l=new n({int:this.micros});i=new s({obj:l,tag:"81",explicit:!1}),o.push(i)}var c=new r({array:o});return this.hTLV=c.getEncodedHex(),this.hTLV},void 0!==t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},s.lang.extend(ct.asn1.tsp.Accuracy,ct.asn1.ASN1Object),ct.asn1.tsp.MessageImprint=function(t){var e=ct.asn1,n=e.DERSequence,r=e.DEROctetString,s=e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new n({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new s({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new r({hex:t.hashValue})))},s.lang.extend(ct.asn1.tsp.MessageImprint,ct.asn1.ASN1Object),ct.asn1.tsp.TimeStampReq=function(t){var e=ct.asn1,n=e.DERSequence,r=e.DERInteger,s=e.DERBoolean,i=e.DERObjectIdentifier,o=e.tsp,a=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){t instanceof a?this.dMessageImprint=t:"object"==typeof t&&(this.dMessageImprint=new a(t))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new s);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new i(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new r(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},s.lang.extend(ct.asn1.tsp.TimeStampReq,ct.asn1.ASN1Object),ct.asn1.tsp.TSTInfo=function(t){var e=ct.asn1,n=e.DERSequence,r=e.DERInteger,s=e.DERBoolean,i=e.DERGeneralizedTime,o=e.DERObjectIdentifier,a=e.tsp,l=a.MessageImprint,c=a.Accuracy,u=e.x509.X500Name;if(a.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new l(t.messageImprint)),void 0!==t.serialNumber&&(this.dSerialNumber=new r(t.serialNumber)),void 0!==t.genTime&&(this.dGenTime=new i(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new c(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new s),void 0!==t.nonce&&(this.dNonce=new r(t.nonce)),void 0!==t.tsa&&(this.dTsa=new u(t.tsa))}},s.lang.extend(ct.asn1.tsp.TSTInfo,ct.asn1.ASN1Object),ct.asn1.tsp.TimeStampResp=function(t){var e=ct.asn1,n=e.DERSequence,r=e.ASN1Object,s=e.tsp,i=s.PKIStatusInfo;s.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new i(t.status)),void 0!==t.tst&&t.tst instanceof r&&(this.dTST=t.tst.getContentInfo()))},s.lang.extend(ct.asn1.tsp.TimeStampResp,ct.asn1.ASN1Object),ct.asn1.tsp.PKIStatusInfo=function(t){var e=ct.asn1,n=e.DERSequence,r=e.tsp,s=r.PKIStatus,i=r.PKIFreeText,o=r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new s(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new i({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new o(t.failinfo)))},s.lang.extend(ct.asn1.tsp.PKIStatusInfo,ct.asn1.ASN1Object),ct.asn1.tsp.PKIStatus=function(t){var e=ct.asn1,n=e.DERInteger,r=e.tsp,s=r.PKIStatus;if(r.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==t)if(void 0!==t.name){var i=s.valueList;if(void 0===i[t.name])throw"name undefined: "+t.name;this.dStatus=new n({int:i[t.name]})}else this.dStatus=new n(t)},s.lang.extend(ct.asn1.tsp.PKIStatus,ct.asn1.ASN1Object),ct.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},ct.asn1.tsp.PKIFreeText=function(t){var e=ct.asn1,n=e.DERSequence,r=e.DERUTF8String;e.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var t=[],e=0;e<this.textList.length;e++)t.push(new r({str:this.textList[e]}));var s=new n({array:t});return this.hTLV=s.getEncodedHex(),this.hTLV},void 0!==t&&"object"==typeof t.array&&(this.textList=t.array)},s.lang.extend(ct.asn1.tsp.PKIFreeText,ct.asn1.ASN1Object),ct.asn1.tsp.PKIFailureInfo=function(t){var e=ct.asn1,n=e.DERBitString,r=e.tsp.PKIFailureInfo;if(r.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),e=new n;return e.setByBinaryString(t),this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t)if("string"==typeof t.name){var s=r.valueList;if(void 0===s[t.name])throw"name undefined: "+t.name;this.value=s[t.name]}else"number"==typeof t.int&&(this.value=t.int)},s.lang.extend(ct.asn1.tsp.PKIFailureInfo,ct.asn1.ASN1Object),ct.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},ct.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},ct.asn1.tsp.SimpleTSAAdapter=function(t){var e=ct.asn1.tsp,n=ct.crypto.Util.hashHex;e.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,r){var s=n(t,r);this.params.tstInfo.messageImprint={hashAlg:r,hashValue:s},this.params.tstInfo.serialNumber={int:this.serial++};var i=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:i},e.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},s.lang.extend(ct.asn1.tsp.SimpleTSAAdapter,ct.asn1.tsp.AbstractTSAAdapter),ct.asn1.tsp.FixedTSAAdapter=function(t){var e=ct.asn1.tsp,n=ct.crypto.Util.hashHex;e.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,r){var s=n(t,r);return this.params.tstInfo.messageImprint={hashAlg:r,hashValue:s},e.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},s.lang.extend(ct.asn1.tsp.FixedTSAAdapter,ct.asn1.tsp.AbstractTSAAdapter),ct.asn1.tsp.TSPUtil=new function(){},ct.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var e=ct.asn1,n=e.cms,r=e.tsp.TSTInfo,s=new n.SignedData,i=new r(t.tstInfo).getEncodedHex();if(s.dEncapContentInfo.setContentValue({hex:i}),s.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var o=0;o<t.certs.length;o++)s.addCertificatesByPEM(t.certs[o]);var a=s.signerInfoList[0];a.setSignerIdentifier(t.signerCert),a.setForContentAndHash({sdObj:s,eciObj:s.dEncapContentInfo,hashAlg:t.hashAlg});var l=new n.SigningCertificate({array:[t.signerCert]});return a.dSignedAttrs.add(l),a.sign(t.signerPrvKey,t.sigAlg),s},ct.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=dt,n=e.getV,r=e.getTLV,s={certreq:!1},i=(0,e.getChildIdx)(t,0);if(i.length<2)throw"TimeStampReq must have at least 2 items";var o=r(t,i[1]);s.mi=ct.asn1.tsp.TSPUtil.parseMessageImprint(o);for(var a=2;a<i.length;a++){var l=i[a],c=t.substr(l,2);if("06"==c){var u=n(t,l);s.policy=e.hextooidstr(u)}"02"==c&&(s.nonce=n(t,l)),"01"==c&&(s.certreq=!0)}return s},ct.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=dt,n=e.getChildIdx,r=e.getV,s=e.getIdxbyList,i={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";n(t,0);var o=r(t,s(t,0,[0,0])),a=e.hextooidstr(o),l=ct.asn1.x509.OID.oid2name(a);if(""==l)throw"hashAlg name undefined: "+a;var c=l,u=s(t,0,[1]);return i.hashAlg=c,i.hashValue=r(t,u),i},void 0!==ct&&ct||(ct={}),void 0!==ct.asn1&&ct.asn1||(ct.asn1={}),void 0!==ct.asn1.cades&&ct.asn1.cades||(ct.asn1.cades={}),ct.asn1.cades.SignaturePolicyIdentifier=function(t){var e=ct.asn1,n=e.DERObjectIdentifier,r=e.DERSequence,s=e.cades,i=s.OtherHashAlgAndValue;if(s.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==t&&"string"==typeof t.oid&&"object"==typeof t.hash){var o=new r({array:[new n({oid:t.oid}),new i(t.hash)]});this.valueList=[o]}},s.lang.extend(ct.asn1.cades.SignaturePolicyIdentifier,ct.asn1.cms.Attribute),ct.asn1.cades.OtherHashAlgAndValue=function(t){var e=ct.asn1,n=e.DERSequence,r=e.DEROctetString,s=e.x509.AlgorithmIdentifier;e.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new n({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new s({name:t.alg}),this.dHash=new r({hex:t.hash}))},s.lang.extend(ct.asn1.cades.OtherHashAlgAndValue,ct.asn1.ASN1Object),ct.asn1.cades.SignatureTimeStamp=function(t){var e=ct.asn1,n=e.ASN1Object;if(e.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==t){if(void 0!==t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof n))throw"res param shall be ASN1Object or hex string";if(void 0!==t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var r=new n;this.tstHex=t.tst,r.hTLV=this.tstHex,r.getEncodedHex(),this.valueList=[r]}else if(!(t.tst instanceof n))throw"tst param shall be ASN1Object or hex string"}},s.lang.extend(ct.asn1.cades.SignatureTimeStamp,ct.asn1.cms.Attribute),ct.asn1.cades.CompleteCertificateRefs=function(t){var e=ct.asn1.cades;e.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(t){this.valueList=[];for(var n=0;n<t.length;n++){var r=new e.OtherCertID(t[n]);this.valueList.push(r)}},void 0!==t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},s.lang.extend(ct.asn1.cades.CompleteCertificateRefs,ct.asn1.cms.Attribute),ct.asn1.cades.OtherCertID=function(t){var e=ct.asn1,n=e.cms,r=e.cades;r.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new r.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),"object"==typeof t&&(!1===t.hasis&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},s.lang.extend(ct.asn1.cades.OtherCertID,ct.asn1.ASN1Object),ct.asn1.cades.OtherHash=function(t){var e=ct.asn1,n=e.cades,r=n.OtherHashAlgAndValue,s=ct.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(-1==t.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var e=It(t),n=s(e,this.alg);this.dOtherHash=new r({alg:this.alg,hash:n})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==t)if("string"==typeof t)if(-1!=t.indexOf("-----BEGIN "))this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new e.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new r(t))},s.lang.extend(ct.asn1.cades.OtherHash,ct.asn1.ASN1Object),ct.asn1.cades.CAdESUtil=new function(){},ct.asn1.cades.CAdESUtil.addSigTS=function(t,e,n){},ct.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=dt.getChildIdx,n=dt.getTLV,r=dt.getIdxbyList,s=ct.asn1,i=s.ASN1Object,o=s.cms.SignedData,a=s.cades.CAdESUtil,l={};if("06092a864886f70d010702"!=(0,dt.getTLVbyList)(t,0,[0]))throw"hex is not CMS SignedData";var c=e(t,r(t,0,[1,0]));if(c.length<4)throw"num of SignedData elem shall be 4 at least";var u=c.shift();l.version=n(t,u);var h=c.shift();l.algs=n(t,h);var d=c.shift();l.encapcontent=n(t,d),l.certs=null,l.revs=null,l.si=[];var f=c.shift();"a0"==t.substr(f,2)&&(l.certs=n(t,f),f=c.shift()),"a1"==t.substr(f,2)&&(l.revs=n(t,f),f=c.shift());var p=f;if("31"!=t.substr(p,2))throw"Can't find signerInfos";for(var g=e(t,p),m=0;m<g.length;m++){var y=a.parseSignerInfoForAddingUnsigned(t,g[m],m);l.si[m]=y}var v=null;for(l.obj=new o,(v=new i).hTLV=l.version,l.obj.dCMSVersion=v,(v=new i).hTLV=l.algs,l.obj.dDigestAlgs=v,(v=new i).hTLV=l.encapcontent,l.obj.dEncapContentInfo=v,(v=new i).hTLV=l.certs,l.obj.dCerts=v,l.obj.signerInfoList=[],m=0;m<l.si.length;m++)l.obj.signerInfoList.push(l.si[m].obj);return l},ct.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,n){var r=dt.getTLV,s=dt.getV,i=ct.asn1,o=i.ASN1Object,a=i.cms,l=a.AttributeList,c=a.SignerInfo,u={},h=(0,dt.getChildIdx)(t,e);if(6!=h.length)throw"not supported items for SignerInfo (!=6)";var d=h.shift();u.version=r(t,d);var f=h.shift();u.si=r(t,f);var p=h.shift();u.digalg=r(t,p);var g=h.shift();u.sattrs=r(t,g);var m=h.shift();u.sigalg=r(t,m);var y=h.shift();u.sig=r(t,y),u.sigval=s(t,y);var v=null;return u.obj=new c,(v=new o).hTLV=u.version,u.obj.dCMSVersion=v,(v=new o).hTLV=u.si,u.obj.dSignerIdentifier=v,(v=new o).hTLV=u.digalg,u.obj.dDigestAlgorithm=v,(v=new o).hTLV=u.sattrs,u.obj.dSignedAttrs=v,(v=new o).hTLV=u.sigalg,u.obj.dSigAlg=v,(v=new o).hTLV=u.sig,u.obj.dSig=v,u.obj.dUnsignedAttrs=new l,u},void 0!==ct.asn1.csr&&ct.asn1.csr||(ct.asn1.csr={}),ct.asn1.csr.CertificationRequest=function(t){var e=ct,n=e.asn1,r=n.DERBitString,s=n.DERSequence,i=n.x509;n.csr.CertificationRequest.superclass.constructor.call(this),this.sign=function(t,n){null==this.prvKey&&(this.prvKey=n),this.asn1SignatureAlg=new i.AlgorithmIdentifier({name:t}),sig=new e.crypto.Signature({alg:t}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var o=new s({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=o.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return Tt(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==t&&void 0!==t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},s.lang.extend(ct.asn1.csr.CertificationRequest,ct.asn1.ASN1Object),ct.asn1.csr.CertificationRequestInfo=function(t){var e=ct.asn1,n=e.DERInteger,r=e.DERSequence,s=e.DERSet,i=e.DERNull,o=e.DERTaggedObject,a=e.DERObjectIdentifier,l=e.x509,c=l.X500Name,u=l.Extension,h=Lt;e.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new n({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new c(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=h.getKey(t);this.asn1SubjPKey=new l.SubjectPublicKeyInfo(e)},this.appendExtensionByName=function(t,e){u.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new r({array:this.extensionsArray}),e=new s({array:[t]}),n=new r({array:[new a({oid:"1.2.840.113549.1.9.14"}),e]}),l=new o({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(l)}else l=new o({explicit:!1,tag:"a0",obj:new i}),this.asn1Array.push(l);var c=new r({array:this.asn1Array});return this.hTLV=c.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},s.lang.extend(ct.asn1.csr.CertificationRequestInfo,ct.asn1.ASN1Object),ct.asn1.csr.CSRUtil=new function(){},ct.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=Lt,n=ct.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var r=new n.CertificationRequestInfo;if(r.setSubjectByParam(t.subject),r.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var s=0;s<t.ext.length;s++)for(key in t.ext[s])r.appendExtensionByName(key,t.ext[s][key]);var i=new n.CertificationRequest({csrinfo:r}),o=e.getKey(t.sbjprvkey);return i.sign(t.sigalg,o),i.getPEMString()},ct.asn1.csr.CSRUtil.getInfo=function(t){var e=dt.getTLVbyList,n={subject:{},pubkey:{}};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var r=It(t,"CERTIFICATE REQUEST");return n.subject.hex=e(r,0,[0,1]),n.subject.name=$t.hex2dn(n.subject.hex),n.pubkey.hex=e(r,0,[0,2]),n.pubkey.obj=Lt.getKey(n.pubkey.hex,null,"pkcs8pub"),n},void 0!==ct&&ct||(ct={}),void 0!==ct.asn1&&ct.asn1||(ct.asn1={}),void 0!==ct.asn1.ocsp&&ct.asn1.ocsp||(ct.asn1.ocsp={}),ct.asn1.ocsp.DEFAULT_HASH="sha1",ct.asn1.ocsp.CertID=function(t){var e=ct.asn1,n=e.DEROctetString,r=e.DERInteger,s=e.DERSequence,i=e.x509.AlgorithmIdentifier,o=e.ocsp,a=o.DEFAULT_HASH,l=ct.crypto.Util.hashHex,c=$t,u=dt;if(o.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,e,s,o){void 0===o&&(o=a),this.dHashAlg=new i({name:o}),this.dIssuerNameHash=new n({hex:t}),this.dIssuerKeyHash=new n({hex:e}),this.dSerialNumber=new r({hex:s})},this.setByCert=function(t,e,n){void 0===n&&(n=a);var r=new c;r.readCertPEM(e);var s=new c;s.readCertPEM(t);var i=s.getPublicKeyHex(),o=u.getTLVbyList(i,0,[1,0],"30"),h=r.getSerialNumberHex(),d=l(s.getSubjectHex(),n),f=l(o,n);this.setByValue(d,f,h,n),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=new s({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){var h=t;if(void 0!==h.issuerCert&&void 0!==h.subjectCert){var d=a;void 0===h.alg&&(d=void 0),this.setByCert(h.issuerCert,h.subjectCert,d)}else{if(void 0===h.namehash||void 0===h.keyhash||void 0===h.serial)throw"invalid constructor arguments";d=a,void 0===h.alg&&(d=void 0),this.setByValue(h.namehash,h.keyhash,h.serial,d)}}},s.lang.extend(ct.asn1.ocsp.CertID,ct.asn1.ASN1Object),ct.asn1.ocsp.Request=function(t){var e=ct.asn1,n=e.DERSequence,r=e.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var s=new r.CertID(t);this.dReqCert=s}},s.lang.extend(ct.asn1.ocsp.Request,ct.asn1.ASN1Object),ct.asn1.ocsp.TBSRequest=function(t){var e=ct.asn1,n=e.DERSequence,r=e.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],n=0;n<t.length;n++){var s=new r.Request(t[0]);e.push(s)}this.dRequestList=e},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new n({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},s.lang.extend(ct.asn1.ocsp.TBSRequest,ct.asn1.ASN1Object),ct.asn1.ocsp.OCSPRequest=function(t){var e=ct.asn1,n=e.DERSequence,r=e.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList){var s=new r.TBSRequest(t);this.dTbsRequest=s}},s.lang.extend(ct.asn1.ocsp.OCSPRequest,ct.asn1.ASN1Object),ct.asn1.ocsp.OCSPUtil={},ct.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,n){var r=ct.asn1.ocsp;return void 0===n&&(n=r.DEFAULT_HASH),new r.OCSPRequest({reqList:[{alg:n,issuerCert:t,subjectCert:e}]}).getEncodedHex()},ct.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=dt.getVbyList,n=dt.getIdxbyList,r=(e=dt.getVbyList,dt.getV),s={};try{var o=e(t,0,[0],"0a");s.responseStatus=parseInt(o,16)}catch(i){}if(0!==s.responseStatus)return s;try{var a=n(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(a,2)?s.certStatus="good":"a1"===t.substr(a,2)?(s.certStatus="revoked",s.revocationTime=_t(e(t,a,[0]))):"82"===t.substr(a,2)&&(s.certStatus="unknown")}catch(i){}try{var l=n(t,0,[1,0,1,0,0,2,0,2]);s.thisUpdate=_t(r(t,l))}catch(i){}try{var c=n(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(c,2)&&(s.nextUpdate=_t(e(t,c,[0])))}catch(i){}return s},void 0!==ct&&ct||(ct={}),void 0!==ct.lang&&ct.lang||(ct.lang={}),ct.lang.String=function(){},"function"==typeof Buffer?(ut=function(t){return yt(new Buffer(t,"utf8").toString("base64"))},ht=function(t){return new Buffer(vt(t),"base64").toString("utf8")}):(ut=function(t){return wt(Pt(jt(t)))},ht=function(t){return decodeURIComponent(Rt(bt(t)))}),ct.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},ct.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},ct.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},ct.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=vt(t),ct.lang.String.isBase64(t))},ct.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==ct&&ct||(ct={}),void 0!==ct.crypto&&ct.crypto||(ct.crypto={}),ct.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:m.algo.MD5,sha1:m.algo.SHA1,sha224:m.algo.SHA224,sha256:m.algo.SHA256,sha384:m.algo.SHA384,sha512:m.algo.SHA512,ripemd160:m.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,n){var r=this.getDigestInfoHex(t,e),s=n/4;if(r.length+22>s)throw"key is too short for SigAlg: keylen="+n+","+e;for(var i="0001",o="00"+r,a="",l=s-i.length-o.length,c=0;c<l;c+=2)a+="ff";return i+a+o},this.hashString=function(t,e){return new ct.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new ct.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return new ct.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new ct.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new ct.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new ct.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new ct.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)}},ct.crypto.Util.md5=function(t){return new ct.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},ct.crypto.Util.ripemd160=function(t){return new ct.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},ct.crypto.Util.SECURERANDOMGEN=new tt,ct.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return ct.crypto.Util.SECURERANDOMGEN.nextBytes(e),gt(e)},ct.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new _(ct.crypto.Util.getRandomHexOfNbytes(t),16)},ct.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,n=new Array((t-e)/8+1);return ct.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<e&255^255)&n[0],gt(n)},ct.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new _(ct.crypto.Util.getRandomHexOfNbits(t),16)},ct.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var n=ct.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(n))return n}},ct.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var n=t.compareTo(e);if(1==n)throw"biMin is greater than biMax";if(0==n)return t;var r=e.subtract(t);return ct.crypto.Util.getRandomBigIntegerZeroToMax(r).add(t)},ct.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=ct.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=ct.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=ct.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(i){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+i}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=m.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(m.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(i){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+i}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=ct.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ct.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},ct.crypto.MessageDigest.getHashLength=function(t){var e=ct.crypto.MessageDigest,n=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[n])throw"not supported algorithm: "+t;return e.HASHLENGTH[n]},ct.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ct.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=ct.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var n=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==e){try{this.mac=m.algo.HMAC.create(ct.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n],this.pass)}catch(h){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+h}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=m.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(m.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=Ct(t)),void(this.pass=m.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;if(e=null,void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=St(t.utf8)),void 0!==t.rstr&&(e=Ct(t.rstr)),void 0!==t.b64&&(e=b(t.b64)),void 0!==t.b64u&&(e=bt(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=m.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=ct.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ct.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var n="",r=e/4-t.length,s=0;s<r;s++)n+="0";return n+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ct.crypto.MessageDigest({alg:this.mdAlgName})}catch(n){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+n}this.init=function(t,e){var n=null;try{n=void 0===e?Lt.getKey(t):Lt.getKey(t,e)}catch(r){throw"init failed:"+r}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var t=new ct.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof rt&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof rt&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ct.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ct.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new ct.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,t,this.ecpubhex);if(this.pubKey instanceof rt&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof rt&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==ct.crypto.ECDSA&&this.pubKey instanceof ct.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==ct.crypto.DSA&&this.pubKey instanceof ct.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,this.provName=void 0===t.prov?ct.crypto.Util.DEFAULTPROVIDER[this.algName]:t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=Lt.getKey(t.prvkeypem),this.init(e)}catch(u){throw"fatal error to load pem private key: "+u}}},ct.crypto.Cipher=function(t){},ct.crypto.Cipher.encrypt=function(t,e,n){if(e instanceof rt&&e.isPublic){var r=ct.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.encrypt(t);if("RSAOAEP"===r)return e.encryptOAEP(t,"sha1");var s=r.match(/^RSAOAEP(\d+)$/);if(null!==s)return e.encryptOAEP(t,"sha"+s[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},ct.crypto.Cipher.decrypt=function(t,e,n){if(e instanceof rt&&e.isPrivate){var r=ct.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.decrypt(t);if("RSAOAEP"===r)return e.decryptOAEP(t,"sha1");var s=r.match(/^RSAOAEP(\d+)$/);if(null!==s)return e.decryptOAEP(t,"sha"+s[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},ct.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof rt){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},ct.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ct&&ct||(ct={}),void 0!==ct.crypto&&ct.crypto||(ct.crypto={}),ct.crypto.ECDSA=function(t){var e=new tt;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new _(t.bitLength(),e).mod(t.subtract(_.ONE)).add(_.ONE)},this.setNamedCurve=function(t){this.ecparams=ct.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var n={};return n.x=t.substr(2,e),n.y=t.substr(2+e),n},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.getBigRandom(this.ecparams.n),e=this.ecparams.G.multiply(t),n=e.getX().toBigInteger(),r=e.getY().toBigInteger(),s=this.ecparams.keylen/4,i=("0000000000"+t.toString(16)).slice(-s),o="04"+("0000000000"+n.toString(16)).slice(-s)+("0000000000"+r.toString(16)).slice(-s);return this.setPrivateKeyHex(i),this.setPublicKeyHex(o),{ecprvhex:i,ecpubhex:o}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new _(e,16),r=this.ecparams.n,s=new _(t,16);do{var i=this.getBigRandom(r),o=this.ecparams.G.multiply(i).getX().toBigInteger().mod(r)}while(o.compareTo(_.ZERO)<=0);var a=i.modInverse(r).multiply(s.add(n.multiply(o))).mod(r);return ct.crypto.ECDSA.biRSSigToASN1Sig(o,a)},this.sign=function(t,e){var n=e,r=this.ecparams.n,s=_.fromByteArrayUnsigned(t);do{var i=this.getBigRandom(r),o=this.ecparams.G.multiply(i).getX().toBigInteger().mod(r)}while(o.compareTo(_.ZERO)<=0);var a=i.modInverse(r).multiply(s.add(n.multiply(o))).mod(r);return this.serializeSig(o,a)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,n){var r,s,i,o=ct.crypto.ECDSA.parseSigHex(e);r=o.r,s=o.s,i=ot.decodeFromHex(this.ecparams.curve,n);var a=new _(t,16);return this.verifyRaw(a,r,s,i)},this.verify=function(t,e,n){var r,s,i;if(Bitcoin.Util.isArray(e)){var o=this.parseSig(e);r=o.r,s=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";r=e.r,s=e.s}if(n instanceof ot)i=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";i=ot.decodeFrom(this.ecparams.curve,n)}var a=_.fromByteArrayUnsigned(t);return this.verifyRaw(a,r,s,i)},this.verifyRaw=function(t,e,n,r){var s=this.ecparams.n,i=this.ecparams.G;if(e.compareTo(_.ONE)<0||e.compareTo(s)>=0)return!1;if(n.compareTo(_.ONE)<0||n.compareTo(s)>=0)return!1;var o=n.modInverse(s),a=t.multiply(o).mod(s),l=e.multiply(o).mod(s);return i.multiply(a).add(r.multiply(l)).getX().toBigInteger().mod(s).equals(e)},this.serializeSig=function(t,e){var n=t.toByteArraySigned(),r=e.toByteArraySigned(),s=[];return s.push(2),s.push(n.length),(s=s.concat(n)).push(2),s.push(r.length),(s=s.concat(r)).unshift(s.length),s.unshift(48),s},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:_.fromByteArrayUnsigned(n),s:_.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:_.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:_.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},this.readPKCS5PrvKeyHex=function(t){var e,n,r,s=ct.crypto.ECDSA.getName,i=dt.getVbyList;if(!1===dt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=i(t,0,[2,0],"06"),n=i(t,0,[1],"04");try{r=i(t,0,[3,0],"03").substr(2)}catch(l){}}catch(l){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){var e,n,r,s=ct.crypto.ECDSA.getName,i=dt.getVbyList;if(!1===dt.isASN1HEX(t))throw"not ASN.1 hex string";try{i(t,0,[1,0],"06"),e=i(t,0,[1,1],"06"),n=i(t,0,[2,0,1],"04");try{r=i(t,0,[2,0,2,0],"03").substr(2)}catch(o){}}catch(o){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){var e,n,r=ct.crypto.ECDSA.getName,s=dt.getVbyList;if(!1===dt.isASN1HEX(t))throw"not ASN.1 hex string";try{s(t,0,[0,0],"06"),e=s(t,0,[0,1],"06"),n=s(t,0,[1],"03").substr(2)}catch(l){throw"malformed PKCS#8 ECC public key"}if(this.curveName=r(e),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(t,e){5!==e&&(e=6);var n,r,s=ct.crypto.ECDSA.getName,i=dt.getVbyList;if(!1===dt.isASN1HEX(t))throw"not ASN.1 hex string";try{n=i(t,0,[0,e,0,1],"06"),r=i(t,0,[0,e,1],"03").substr(2)}catch(l){throw"malformed X.509 certificate ECC public key"}if(this.curveName=s(n),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},ct.crypto.ECDSA.parseSigHex=function(t){var e=ct.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new _(e.r,16),s:new _(e.s,16)}},ct.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=dt.getChildIdx,n=dt.getV;if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var r=e(t,0);if(2!=r.length)throw"number of signature ASN.1 sequence elements seem wrong";var s=r[0],i=r[1];if("02"!=t.substr(s,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(i,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(t,s),s:n(t,i)}},ct.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=ct.crypto.ECDSA.parseSigHexInHexRS(t),n=e.r,r=e.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return n+r},ct.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),n=t.substr(t.length/2);return ct.crypto.ECDSA.hexRSSigToASN1Sig(e,n)},ct.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var n=new _(t,16),r=new _(e,16);return ct.crypto.ECDSA.biRSSigToASN1Sig(n,r)},ct.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var n=ct.asn1,r=new n.DERInteger({bigint:t}),s=new n.DERInteger({bigint:e});return new n.DERSequence({array:[r,s]}).getEncodedHex()},ct.crypto.ECDSA.getName=function(t){return"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==ct&&ct||(ct={}),void 0!==ct.crypto&&ct.crypto||(ct.crypto={}),ct.crypto.ECParameterDB=new function(){var t={},e={};function n(t){return new _(t,16)}this.getByName=function(n){var r=n;if(void 0!==e[r]&&(r=e[n]),void 0!==t[r])return t[r];throw"unregistered EC curve name: "+r},this.regist=function(r,s,i,o,a,l,c,u,h,d,f,p){t[r]={};var g=n(i),m=n(o),y=n(a),v=n(l),w=n(c),b=new at(g,m,y),S=b.decodePointHex("04"+u+h);t[r].name=r,t[r].keylen=s,t[r].curve=b,t[r].G=S,t[r].n=v,t[r].h=w,t[r].oid=f,t[r].info=p;for(var _=0;_<d.length;_++)e[d[_]]=r}},ct.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ct.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ct.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ct.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ct.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ct.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ct.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ct.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ct.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ct.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==ct&&ct||(ct={}),void 0!==ct.crypto&&ct.crypto||(ct.crypto={}),ct.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,e,n,r,s){this.isPrivate=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=s},this.setPrivateHex=function(t,e,n,r,s){var i,o,a,l,c;i=new _(t,16),o=new _(e,16),a=new _(n,16),l="string"==typeof r&&r.length>1?new _(r,16):null,c=new _(s,16),this.setPrivate(i,o,a,l,c)},this.setPublic=function(t,e,n,r){this.isPublic=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=null},this.setPublicHex=function(t,e,n,r){var s,i,o,a;s=new _(t,16),i=new _(e,16),o=new _(n,16),a=new _(r,16),this.setPublic(s,i,o,a)},this.signWithMessageHash=function(t){var e=this.p,n=this.q,r=this.g,s=this.x,i=ct.crypto.Util.getRandomBigIntegerMinToMax(_.ONE.add(_.ONE),n.subtract(_.ONE)),o=new _(t.substr(0,n.bitLength()/4),16),a=r.modPow(i,e).mod(n),l=i.modInverse(n).multiply(o.add(s.multiply(a))).mod(n);return ct.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:l}}]})},this.verifyWithMessageHash=function(t,e){var n=this.p,r=this.q,s=this.g,i=this.y,o=this.parseASN1Signature(e),a=o[0],l=o[1],c=new _(t.substr(0,r.bitLength()/4),16);if(_.ZERO.compareTo(a)>0||a.compareTo(r)>0)throw"invalid DSA signature";if(_.ZERO.compareTo(l)>=0||l.compareTo(r)>0)throw"invalid DSA signature";var u=l.modInverse(r),h=c.multiply(u).mod(r),d=a.multiply(u).mod(r);return 0==s.modPow(h,n).multiply(i.modPow(d,n)).mod(n).mod(r).compareTo(a)},this.parseASN1Signature=function(t){try{return[new _(dt.getVbyList(t,0,[0],"02"),16),new _(dt.getVbyList(t,0,[1],"02"),16)]}catch(a){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(t){var e,n,r,s,o,a=dt.getVbyList;if(!1===dt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=a(t,0,[1],"02"),n=a(t,0,[2],"02"),r=a(t,0,[3],"02"),s=a(t,0,[4],"02"),o=a(t,0,[5],"02")}catch(i){throw console.log("EXCEPTION:"+i),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(e,n,r,s,o)},this.readPKCS8PrvKeyHex=function(t){var e,n,r,s,i=dt.getVbyList;if(!1===dt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=i(t,0,[1,1,0],"02"),n=i(t,0,[1,1,1],"02"),r=i(t,0,[1,1,2],"02"),s=i(t,0,[2,0],"02")}catch(o){throw console.log("EXCEPTION:"+o),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(e,n,r,null,s)},this.readPKCS8PubKeyHex=function(t){var e,n,r,s,i=dt.getVbyList;if(!1===dt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=i(t,0,[0,1,0],"02"),n=i(t,0,[0,1,1],"02"),r=i(t,0,[0,1,2],"02"),s=i(t,0,[1,0],"02")}catch(o){throw console.log("EXCEPTION:"+o),"malformed PKCS#8 DSA public key"}this.setPublicHex(e,n,r,s)},this.readCertPubKeyHex=function(t,e){var n,r,s,o;5!==e&&(e=6);var a=dt.getVbyList;if(!1===dt.isASN1HEX(t))throw"not ASN.1 hex string";try{n=a(t,0,[0,e,0,1,0],"02"),r=a(t,0,[0,e,0,1,1],"02"),s=a(t,0,[0,e,0,1,2],"02"),o=a(t,0,[0,e,1,0],"02")}catch(i){throw console.log("EXCEPTION:"+i),"malformed X.509 certificate DSA public key"}this.setPublicHex(n,r,s,o)}};var Lt=function(){var t=function(t,n,r){return e(m.AES,t,n,r)},e=function(t,e,n,r){var s=m.enc.Hex.parse(e),i=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),a={};a.key=i,a.iv=o,a.ciphertext=s;var l=t.decrypt(a,i,{iv:o});return m.enc.Hex.stringify(l)},n=function(t,e,n){return r(m.AES,t,e,n)},r=function(t,e,n,r){var s=m.enc.Hex.parse(e),i=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),a=t.encrypt(s,i,{iv:o}),l=m.enc.Hex.parse(a.toString());return m.enc.Base64.stringify(l)},s={"AES-256-CBC":{proc:t,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,n,r){return e(m.TripleDES,t,n,r)},eproc:function(t,e,n){return r(m.TripleDES,t,e,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,n,r){return e(m.DES,t,n,r)},eproc:function(t,e,n){return r(m.DES,t,e,n)},keylen:8,ivlen:8}},i=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(e.type=r[1]);var s=-1,i=0;-1!=t.indexOf("\r\n\r\n")&&(s=t.indexOf("\r\n\r\n"),i=2),-1!=t.indexOf("\n\n")&&(s=t.indexOf("\n\n"),i=1);var o=t.indexOf("-----END");if(-1!=s&&-1!=o){var a=t.substring(s+2*i,o-i);a=a.replace(/\s+/g,""),e.data=a}return e},o=function(t,e,n){for(var r=n.substring(0,16),i=m.enc.Hex.parse(r),o=m.enc.Utf8.parse(e),a=s[t].keylen+s[t].ivlen,l="",c=null;;){var u=m.algo.MD5.create();if(null!=c&&u.update(c),u.update(o),u.update(i),c=u.finalize(),(l+=m.enc.Hex.stringify(c)).length>=2*a)break}var h={};return h.keyhex=l.substr(0,2*s[t].keylen),h.ivhex=l.substr(2*s[t].keylen,2*s[t].ivlen),h},a=function(t,e,n,r){var i=m.enc.Base64.parse(t),o=m.enc.Hex.stringify(i);return(0,s[e].proc)(o,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(t){return i(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return o(t,e,n)},decryptKeyB64:function(t,e,n,r){return a(t,e,n,r)},getDecryptedKeyHex:function(t,e){var n=i(t),r=n.cipher,s=n.ivsalt,l=n.data,c=o(r,e,s);return a(l,r,c.keyhex,s)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,r,i){var a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===s[r])throw"KEYUTIL unsupported algorithm: "+r;void 0!==i&&null!=i||(i=function(t){var e=m.lib.WordArray.random(t);return m.enc.Hex.stringify(e)}(s[r].ivlen).toUpperCase());var l=function(t,e,n,r){return(0,s[e].eproc)(t,n,r)}(e,r,o(r,n,i).keyhex,i);return a="-----BEGIN "+t+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+i+"\r\n",a+="\r\n",(a+=l.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=dt.getChildIdx,n=dt.getV,r={},s=e(t,0);if(2!=s.length)throw"malformed format: SEQUENCE(0).items != 2: "+s.length;r.ciphertext=n(t,s[1]);var i=e(t,s[0]);if(2!=i.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+i.length;if("2a864886f70d01050d"!=n(t,i[0]))throw"this only supports pkcs5PBES2";var o=e(t,i[1]);if(2!=i.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+o.length;var a=e(t,o[1]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+a.length;if("2a864886f70d0307"!=n(t,a[0]))throw"this only supports TripleDES";r.encryptionSchemeAlg="TripleDES",r.encryptionSchemeIV=n(t,a[1]);var l=e(t,o[0]);if(2!=l.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+l.length;if("2a864886f70d01050c"!=n(t,l[0]))throw"this only supports pkcs5PBKDF2";var c=e(t,l[1]);if(c.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+c.length;r.pbkdf2Salt=n(t,c[0]);var u=n(t,c[1]);try{r.pbkdf2Iter=parseInt(u,16)}catch(h){throw"malformed format pbkdf2Iter: "+u}return r},getPBKDF2KeyHexFromParam:function(t,e){var n=m.enc.Hex.parse(t.pbkdf2Salt),r=m.PBKDF2(e,n,{keySize:6,iterations:t.pbkdf2Iter});return m.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=It(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),s=Lt.getPBKDF2KeyHexFromParam(r,e),i={};i.ciphertext=m.enc.Hex.parse(r.ciphertext);var o=m.enc.Hex.parse(s),a=m.enc.Hex.parse(r.encryptionSchemeIV),l=m.TripleDES.decrypt(i,o,{iv:a});return m.enc.Hex.stringify(l)},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(t){var e=dt,n=e.getChildIdx,r=e.getV,s={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var i=n(t,0);if(3!=i.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(i[1],2))throw"malformed PKCS8 private key(code:003)";var o=n(t,i[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(s.algoid=r(t,o[0]),"06"==t.substr(o[1],2)&&(s.algparam=r(t,o[1])),"04"!=t.substr(i[2],2))throw"malformed PKCS8 private key(code:006)";return s.keyidx=e.getVidx(t,i[2]),s},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=It(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e,n=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==n.algoid)e=new rt;else if("2a8648ce380401"==n.algoid)e=new ct.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";e=new ct.crypto.ECDSA}return e.readPKCS8PrvKeyHex(t),e},_getKeyFromPublicPKCS8Hex:function(t){var e,n=dt.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===n)e=new rt;else if("2a8648ce380401"===n)e=new ct.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";e=new ct.crypto.ECDSA}return e.readPKCS8PubKeyHex(t),e},parsePublicRawRSAKeyHex:function(t){var e=dt.getChildIdx,n=dt.getV,r={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var s=e(t,0);if(2!=s.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(s[0],2))throw"malformed RSA key(code:003)";if(r.n=n(t,s[0]),"02"!=t.substr(s[1],2))throw"malformed RSA key(code:004)";return r.e=n(t,s[1]),r},parsePublicPKCS8Hex:function(t){var e=dt,n=e.getChildIdx,r=e.getV,s={algparam:null},i=n(t,0);if(2!=i.length)throw"outer DERSequence shall have 2 elements: "+i.length;var o=i[0];if("30"!=t.substr(o,2))throw"malformed PKCS8 public key(code:001)";var a=n(t,o);if(2!=a.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(a[0],2))throw"malformed PKCS8 public key(code:003)";if(s.algoid=r(t,a[0]),"06"==t.substr(a[1],2)?s.algparam=r(t,a[1]):"30"==t.substr(a[1],2)&&(s.algparam={},s.algparam.p=e.getVbyList(t,a[1],[0],"02"),s.algparam.q=e.getVbyList(t,a[1],[1],"02"),s.algparam.g=e.getVbyList(t,a[1],[2],"02")),"03"!=t.substr(i[1],2))throw"malformed PKCS8 public key(code:004)";return s.key=r(t,i[1]).substr(2),s}}}();Lt.getKey=function(t,e,n){var r,s=(w=dt).getChildIdx,i=w.getVbyList,o=ct.crypto,a=o.ECDSA,l=o.DSA,c=rt,u=It,h=Lt;if(void 0!==c&&t instanceof c)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==l&&t instanceof l)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new a({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new a({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(D=new c).setPublic(t.n,t.e),D;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(D=new c).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),D;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(D=new c).setPrivate(t.n,t.e,t.d),D;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(D=new l).setPublic(t.p,t.q,t.g,t.y),D;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(D=new l).setPrivate(t.p,t.q,t.g,t.y,t.x),D;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(D=new c).setPublic(bt(t.n),bt(t.e)),D;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(D=new c).setPrivateEx(bt(t.n),bt(t.e),bt(t.d),bt(t.p),bt(t.q),bt(t.dp),bt(t.dq),bt(t.qi)),D;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(D=new c).setPrivate(bt(t.n),bt(t.e),bt(t.d)),D;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var d=(k=new a({curve:t.crv})).ecparams.keylen/4,f=("0000000000"+bt(t.x)).slice(-d),p=("0000000000"+bt(t.y)).slice(-d);return k.setPublicKeyHex(g="04"+f+p),k}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){d=(k=new a({curve:t.crv})).ecparams.keylen/4;var g="04"+(f=("0000000000"+bt(t.x)).slice(-d))+(p=("0000000000"+bt(t.y)).slice(-d)),m=("0000000000"+bt(t.d)).slice(-d);return k.setPublicKeyHex(g),k.setPrivateKeyHex(m),k}if("pkcs5prv"===n){var y,v=t,w=dt;if(9===(y=s(v,0)).length)(D=new c).readPKCS5PrvKeyHex(v);else if(6===y.length)(D=new l).readPKCS5PrvKeyHex(v);else{if(!(y.length>2&&"04"===v.substr(y[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(D=new a).readPKCS5PrvKeyHex(v)}return D}if("pkcs8prv"===n)return h.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===n)return h._getKeyFromPublicPKCS8Hex(t);if("x509pub"===n)return $t.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return $t.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var b=It(t,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(b)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var S=u(t,"RSA PRIVATE KEY");return h.getKey(S,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var x=i(r=u(t,"DSA PRIVATE KEY"),0,[1],"02"),C=i(r,0,[2],"02"),E=i(r,0,[3],"02"),A=i(r,0,[4],"02"),F=i(r,0,[5],"02");return(D=new l).setPrivate(new _(x,16),new _(C,16),new _(E,16),new _(A,16),new _(F,16)),D}if(-1!=t.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var T=h.getDecryptedKeyHex(t,e),I=new rt;return I.readPKCS5PrvKeyHex(T),I}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var k,D=i(r=h.getDecryptedKeyHex(t,e),0,[1],"04"),P=i(r,0,[2,0],"06"),R=i(r,0,[3,0],"03").substr(2);if(void 0===ct.crypto.OID.oidhex2name[P])throw"undefined OID(hex) in KJUR.crypto.OID: "+P;return(k=new a({curve:ct.crypto.OID.oidhex2name[P]})).setPublicKeyHex(R),k.setPrivateKeyHex(D),k.isPublic=!1,k}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED"))return x=i(r=h.getDecryptedKeyHex(t,e),0,[1],"02"),C=i(r,0,[2],"02"),E=i(r,0,[3],"02"),A=i(r,0,[4],"02"),F=i(r,0,[5],"02"),(D=new l).setPrivate(new _(x,16),new _(C,16),new _(E,16),new _(A,16),new _(F,16)),D;if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(t,e);throw"not supported argument"},Lt.generateKeypair=function(t,e){if("RSA"==t){var n=e;(o=new rt).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new rt,s=o.n.toString(16),i=o.e.toString(16);return r.setPublic(s,i),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}if("EC"==t){var o,a,l=e,c=new ct.crypto.ECDSA({curve:l}).generateKeyPairHex();return(o=new ct.crypto.ECDSA({curve:l})).setPublicKeyHex(c.ecpubhex),o.setPrivateKeyHex(c.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new ct.crypto.ECDSA({curve:l})).setPublicKeyHex(c.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}throw"unknown algorithm: "+t},Lt.getPEM=function(t,e,n,r,s,i){var o=ct.asn1,a=o.DERObjectIdentifier,l=o.DERInteger,c=o.ASN1Util.newObject,u=ct.crypto,h=u.DSA,d=u.ECDSA,f=rt;function p(t){return c({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function g(t){return c({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function y(t){return c({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==f&&t instanceof f||void 0!==h&&t instanceof h||void 0!==d&&t instanceof d)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return Tt(S=new(0,o.x509.SubjectPublicKeyInfo)(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==f&&t instanceof f&&(void 0===n||null==n)&&1==t.isPrivate)return Tt(S=p(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==d&&t instanceof d&&(void 0===n||null==n)&&1==t.isPrivate){var v=new a({name:t.curveName}).getEncodedHex(),w=g(t).getEncodedHex(),b="";return(b+=Tt(v,"EC PARAMETERS"))+Tt(w,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==h&&t instanceof h&&(void 0===n||null==n)&&1==t.isPrivate)return Tt(S=y(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==f&&t instanceof f&&void 0!==n&&null!=n&&1==t.isPrivate){var S=p(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",S,n,r,i)}if("PKCS5PRV"==e&&void 0!==d&&t instanceof d&&void 0!==n&&null!=n&&1==t.isPrivate)return S=g(t).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",S,n,r,i);if("PKCS5PRV"==e&&void 0!==h&&t instanceof h&&void 0!==n&&null!=n&&1==t.isPrivate)return S=y(t).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",S,n,r,i);var _=function(t,e){var n=x(t,e);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},x=function(t,e){var n=m.lib.WordArray.random(8),r=m.lib.WordArray.random(8),s=m.PBKDF2(e,n,{keySize:6,iterations:100}),i=m.enc.Hex.parse(t),o=m.TripleDES.encrypt(i,s,{iv:r})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=m.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=m.enc.Hex.stringify(r),a};if("PKCS8PRV"==e&&null!=f&&t instanceof f&&1==t.isPrivate){var C=p(t).getEncodedHex();return S=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:C}}]}).getEncodedHex(),void 0===n||null==n?Tt(S,"PRIVATE KEY"):Tt(w=_(S,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==d&&t instanceof d&&1==t.isPrivate)return C=new c({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),S=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:C}}]}).getEncodedHex(),void 0===n||null==n?Tt(S,"PRIVATE KEY"):Tt(w=_(S,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==e&&void 0!==h&&t instanceof h&&1==t.isPrivate)return C=new l({bigint:t.x}).getEncodedHex(),S=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:C}}]}).getEncodedHex(),void 0===n||null==n?Tt(S,"PRIVATE KEY"):Tt(w=_(S,n),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Lt.getKeyFromCSRPEM=function(t){var e=It(t,"CERTIFICATE REQUEST");return Lt.getKeyFromCSRHex(e)},Lt.getKeyFromCSRHex=function(t){var e=Lt.parseCSRHex(t);return Lt.getKey(e.p8pubkeyhex,null,"pkcs8pub")},Lt.parseCSRHex=function(t){var e=dt.getChildIdx,n=dt.getTLV,r={},s=t;if("30"!=s.substr(0,2))throw"malformed CSR(code:001)";var i=e(s,0);if(i.length<1)throw"malformed CSR(code:002)";if("30"!=s.substr(i[0],2))throw"malformed CSR(code:003)";var o=e(s,i[0]);if(o.length<3)throw"malformed CSR(code:004)";return r.p8pubkeyhex=n(s,o[2]),r},Lt.getJWKFromKey=function(t){var e={};if(t instanceof rt&&t.isPrivate)return e.kty="RSA",e.n=wt(t.n.toString(16)),e.e=wt(t.e.toString(16)),e.d=wt(t.d.toString(16)),e.p=wt(t.p.toString(16)),e.q=wt(t.q.toString(16)),e.dp=wt(t.dmp1.toString(16)),e.dq=wt(t.dmq1.toString(16)),e.qi=wt(t.coeff.toString(16)),e;if(t instanceof rt&&t.isPublic)return e.kty="RSA",e.n=wt(t.n.toString(16)),e.e=wt(t.e.toString(16)),e;if(t instanceof ct.crypto.ECDSA&&t.isPrivate){if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=t.getPublicKeyXYHex();return e.kty="EC",e.crv=r,e.x=wt(n.x),e.y=wt(n.y),e.d=wt(t.prvKeyHex),e}if(t instanceof ct.crypto.ECDSA&&t.isPublic){var r;if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;return n=t.getPublicKeyXYHex(),e.kty="EC",e.crv=r,e.x=wt(n.x),e.y=wt(n.y),e}throw"not supported key object"},rt.getPosArrayOfChildrenFromHex=function(t){return dt.getChildIdx(t,0)},rt.getHexValueArrayOfChildrenFromHex=function(t){var e,n=dt.getV,r=n(t,(e=rt.getPosArrayOfChildrenFromHex(t))[0]),s=n(t,e[1]),i=n(t,e[2]),o=n(t,e[3]),a=n(t,e[4]),l=n(t,e[5]),c=n(t,e[6]),u=n(t,e[7]),h=n(t,e[8]);return(e=new Array).push(r,s,i,o,a,l,c,u,h),e},rt.prototype.readPrivateKeyFromPEMString=function(t){var e=It(t),n=rt.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},rt.prototype.readPKCS5PrvKeyHex=function(t){var e=rt.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},rt.prototype.readPKCS8PrvKeyHex=function(t){var e,n,r,s,i,o,a,l,c=dt.getVbyList;if(!1===dt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=c(t,0,[2,0,1],"02"),n=c(t,0,[2,0,2],"02"),r=c(t,0,[2,0,3],"02"),s=c(t,0,[2,0,4],"02"),i=c(t,0,[2,0,5],"02"),o=c(t,0,[2,0,6],"02"),a=c(t,0,[2,0,7],"02"),l=c(t,0,[2,0,8],"02")}catch(p){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(e,n,r,s,i,o,a,l)},rt.prototype.readPKCS5PubKeyHex=function(t){var e=dt,n=e.getV;if(!1===e.isASN1HEX(t))throw"keyHex is not ASN.1 hex string";var r=e.getChildIdx(t,0);if(2!==r.length||"02"!==t.substr(r[0],2)||"02"!==t.substr(r[1],2))throw"wrong hex for PKCS#5 public key";var s=n(t,r[0]),i=n(t,r[1]);this.setPublic(s,i)},rt.prototype.readPKCS8PubKeyHex=function(t){var e=dt;if(!1===e.isASN1HEX(t))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==e.getTLVbyList(t,0,[0,0]))throw"not PKCS8 RSA public key";var n=e.getTLVbyList(t,0,[1,0]);this.readPKCS5PubKeyHex(n)},rt.prototype.readCertPubKeyHex=function(t,e){var n,r;(n=new $t).readCertHex(t),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};var Mt=new RegExp("");function Ut(t,e){for(var n="",r=e/4-t.length,s=0;s<r;s++)n+="0";return n+t}function qt(t,e,n){for(var r="",s=0;r.length<e;)r+=xt(n(Ct(t+String.fromCharCode.apply(String,[(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s])))),s+=1;return r}function Kt(t){for(var e in ct.crypto.Util.DIGESTINFOHEAD){var n=ct.crypto.Util.DIGESTINFOHEAD[e],r=n.length;if(t.substring(0,r)==n)return[e,t.substring(r)]}return[]}function $t(){var t=dt,e=t.getChildIdx,n=t.getV,r=t.getTLV,s=t.getVbyList,i=t.getTLVbyList,o=t.getIdxbyList,a=t.getVidx,l=t.oidname,c=$t,h=It;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==i(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return s(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return l(s(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return i(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return c.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return i(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return c.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var t=s(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getNotAfter=function(){var t=s(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getPublicKeyHex=function(){return t.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return o(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return o(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return Lt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return l(s(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmName(),n=this.getSignatureValueHex(),r=i(this.hex,0,[0],"30"),s=new ct.crypto.Signature({alg:e});return s.init(t),s.updateHex(r),s.verify(n)},this.parseExt=function(){if(3!==this.version)return-1;var n=o(this.hex,0,[0,7,0],"30"),r=e(this.hex,n);this.aExtInfo=new Array;for(var i=0;i<r.length;i++){var l={critical:!1},c=0;3===e(this.hex,r[i]).length&&(l.critical=!0,c=1),l.oid=t.hextooidstr(s(this.hex,r[i],[0],"06"));var u=o(this.hex,r[i],[1+c]);l.vidx=a(this.hex,u),this.aExtInfo.push(l)}},this.getExtInfo=function(t){var e=this.aExtInfo,n=t;if(t.match(/^[0-9.]+$/)||(n=ct.asn1.x509.OID.name2oid(t)),""!==n)for(var r=0;r<e.length;r++)if(e[r].oid===n)return e[r]},this.getExtBasicConstraints=function(){var t=this.getExtInfo("basicConstraints");if(void 0===t)return t;var e=n(this.hex,t.vidx);if(""===e)return{};if("0101ff"===e)return{cA:!0};if("0101ff02"===e.substr(0,8)){var r=n(e,6);return{cA:!0,pathLen:parseInt(r,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";var e=n(this.hex,t.vidx);if(e.length%2!=0||e.length<=2)throw"malformed key usage value";var r=parseInt(e.substr(0,2)),s=parseInt(e.substr(2),16).toString(2);return s.substr(0,s.length-r)},this.getExtKeyUsageString=function(){for(var t=this.getExtKeyUsageBin(),e=new Array,n=0;n<t.length;n++)"1"==t.substr(n,1)&&e.push($t.KEYUSAGE_NAME[n]);return e.join(",")},this.getExtSubjectKeyIdentifier=function(){var t=this.getExtInfo("subjectKeyIdentifier");return void 0===t?t:n(this.hex,t.vidx)},this.getExtAuthorityKeyIdentifier=function(){var t=this.getExtInfo("authorityKeyIdentifier");if(void 0===t)return t;for(var s={},i=r(this.hex,t.vidx),o=e(i,0),a=0;a<o.length;a++)"80"===i.substr(o[a],2)&&(s.kid=n(i,o[a]));return s},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var s=new Array,i=r(this.hex,t.vidx);if(""===i)return s;for(var o=e(i,0),a=0;a<o.length;a++)s.push(l(n(i,o[a])));return s},this.getExtSubjectAltName=function(){for(var t=this.getExtSubjectAltName2(),e=new Array,n=0;n<t.length;n++)"DNS"===t[n][0]&&e.push(t[n][1]);return e},this.getExtSubjectAltName2=function(){var t,s,i,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var a=new Array,l=r(this.hex,o.vidx),c=e(l,0),u=0;u<c.length;u++)i=l.substr(c[u],2),t=n(l,c[u]),"81"===i&&(s=_t(t),a.push(["MAIL",s])),"82"===i&&(s=_t(t),a.push(["DNS",s])),"84"===i&&(s=$t.hex2dn(t,0),a.push(["DN",s])),"86"===i&&(s=_t(t),a.push(["URI",s])),"87"===i&&(s=Ht(t),a.push(["IP",s]));return a},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var n=new Array,r=e(this.hex,t.vidx),i=0;i<r.length;i++)try{var o=_t(s(this.hex,r[i],[0,0,0],"86"));n.push(o)}catch(a){}return n},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var n={ocsp:[],caissuer:[]},r=e(this.hex,t.vidx),i=0;i<r.length;i++){var o=s(this.hex,r[i],[0],"06"),a=s(this.hex,r[i],[1],"86");"2b06010505073001"===o&&n.ocsp.push(_t(a)),"2b06010505073002"===o&&n.caissuer.push(_t(a))}return n},this.getExtCertificatePolicies=function(){var t=this.getExtInfo("certificatePolicies");if(void 0===t)return t;for(var i=r(this.hex,t.vidx),o=[],a=e(i,0),c=0;c<a.length;c++){var u={},h=e(i,a[c]);if(u.id=l(n(i,h[0])),2===h.length)for(var d=e(i,h[1]),f=0;f<d.length;f++){var p=s(i,d[f],[0],"06");"2b06010505070201"===p?u.cps=_t(s(i,d[f],[1])):"2b06010505070202"===p&&(u.unotice=_t(s(i,d[f],[1,0])))}o.push(u)}return o},this.readCertPEM=function(t){this.readCertHex(h(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{o(this.hex,0,[0,7],"a3"),this.parseExt()}catch(u){}},this.getInfo=function(){var t,e,n;if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+Vt(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+Vt(e.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var r=0;r<n.length;r++){var s=n[r],i=ct.asn1.x509.OID.oid2name(s.oid);""===i&&(i=s.oid);var o="";if(!0===s.critical&&(o="CRITICAL"),t+="  "+i+" "+o+":\n","basicConstraints"===i){var a=this.getExtBasicConstraints();void 0===a.cA?t+="    {}\n":(t+="    cA=true",void 0!==a.pathLen&&(t+=", pathLen="+a.pathLen),t+="\n")}else if("keyUsage"===i)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===i)t+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===i){var l=this.getExtAuthorityKeyIdentifier();void 0!==l.kid&&(t+="    kid="+l.kid+"\n")}else if("extKeyUsage"===i)t+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===i)t+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===i)t+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===i){var c=this.getExtAIAInfo();void 0!==c.ocsp&&(t+="    ocsp: "+c.ocsp.join(",")+"\n"),void 0!==c.caissuer&&(t+="    caissuer: "+c.caissuer.join(",")+"\n")}else if("certificatePolicies"===i)for(var u=this.getExtCertificatePolicies(),h=0;h<u.length;h++)void 0!==u[h].id&&(t+="    policy oid: "+u[h].id+"\n"),void 0!==u[h].cps&&(t+="    cps: "+u[h].cps+"\n")}}return(t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}Mt.compile("[^0-9a-f]","gi"),rt.prototype.sign=function(t,e){var n=function(t){return ct.crypto.Util.hashString(t,e)}(t);return this.signWithMessageHash(n,e)},rt.prototype.signWithMessageHash=function(t,e){var n=et(ct.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return Ut(this.doPrivate(n).toString(16),this.n.bitLength())},rt.prototype.signPSS=function(t,e,n){var r,s=(r=Ct(t),ct.crypto.Util.hashHex(r,e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(s,e,n)},rt.prototype.signWithMessageHashPSS=function(t,e,n){var r,s=xt(t),i=s.length,o=this.n.bitLength()-1,a=Math.ceil(o/8),l=function(t){return ct.crypto.Util.hashHex(t,e)};if(-1===n||void 0===n)n=i;else if(-2===n)n=a-i-2;else if(n<-2)throw"invalid salt length";if(a<i+n+2)throw"data too long";var c="";n>0&&(c=new Array(n),(new tt).nextBytes(c),c=String.fromCharCode.apply(String,c));var u=xt(l(Ct("\0\0\0\0\0\0\0\0"+s+c))),h=[];for(r=0;r<a-n-i-2;r+=1)h[r]=0;var d=String.fromCharCode.apply(String,h)+"\x01"+c,f=qt(u,d.length,l),p=[];for(r=0;r<d.length;r+=1)p[r]=d.charCodeAt(r)^f.charCodeAt(r);for(p[0]&=~(65280>>8*a-o&255),r=0;r<i;r++)p.push(u.charCodeAt(r));return p.push(188),Ut(this.doPrivate(new _(p)).toString(16),this.n.bitLength())},rt.prototype.verify=function(t,e){var n=et(e=(e=e.replace(Mt,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=Kt(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var s=r[0];return r[1]==function(t){return ct.crypto.Util.hashString(t,s)}(t)},rt.prototype.verifyWithMessageHash=function(t,e){var n=et(e=(e=e.replace(Mt,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=Kt(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==t},rt.prototype.verifyPSS=function(t,e,n,r){var s,i=(s=Ct(t),ct.crypto.Util.hashHex(s,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(i,e,n,r)},rt.prototype.verifyWithMessageHashPSS=function(t,e,n,r){var s=new _(e,16);if(s.bitLength()>this.n.bitLength())return!1;var i,o=function(t){return ct.crypto.Util.hashHex(t,n)},a=xt(t),l=a.length,c=this.n.bitLength()-1,u=Math.ceil(c/8);if(-1===r||void 0===r)r=l;else if(-2===r)r=u-l-2;else if(r<-2)throw"invalid salt length";if(u<l+r+2)throw"data too long";var h=this.doPublic(s).toByteArray();for(i=0;i<h.length;i+=1)h[i]&=255;for(;h.length<u;)h.unshift(0);if(188!==h[u-1])throw"encoded message does not end in 0xbc";var d=(h=String.fromCharCode.apply(String,h)).substr(0,u-l-1),f=h.substr(d.length,l),p=65280>>8*u-c&255;if(0!=(d.charCodeAt(0)&p))throw"bits beyond keysize not zero";var g=qt(f,d.length,o),m=[];for(i=0;i<d.length;i+=1)m[i]=d.charCodeAt(i)^g.charCodeAt(i);m[0]&=~p;var y=u-l-r-2;for(i=0;i<y;i+=1)if(0!==m[i])throw"leftmost octets not zero";if(1!==m[y])throw"0x01 marker not found";return f===xt(o(Ct("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,m.slice(-r)))))},rt.SALT_LEN_HLEN=-1,rt.SALT_LEN_MAX=-2,rt.SALT_LEN_RECOVER=-2,$t.hex2dn=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed DN";for(var n=new Array,r=dt.getChildIdx(t,e),s=0;s<r.length;s++)n.push($t.hex2rdn(t,r[s]));return"/"+(n=n.map((function(t){return t.replace("/","\\/")}))).join("/")},$t.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw"malformed RDN";for(var n=new Array,r=dt.getChildIdx(t,e),s=0;s<r.length;s++)n.push($t.hex2attrTypeValue(t,r[s]));return(n=n.map((function(t){return t.replace("+","\\+")}))).join("+")},$t.hex2attrTypeValue=function(t,e){var n=dt,r=n.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed attribute type and value";var s=n.getChildIdx(t,e);2!==s.length||t.substr(s[0],2);var i=r(t,s[0]),o=ct.asn1.ASN1Util.oidHexToInt(i);return ct.asn1.x509.OID.oid2atype(o)+"="+xt(r(t,s[1]))},$t.getPublicKeyFromCertHex=function(t){var e=new $t;return e.readCertHex(t),e.getPublicKey()},$t.getPublicKeyFromCertPEM=function(t){var e=new $t;return e.readCertPEM(t),e.getPublicKey()},$t.getPublicKeyInfoPropOfCertPEM=function(t){var e,n,r=dt.getVbyList,s={algparam:null};return(e=new $t).readCertPEM(t),n=e.getPublicKeyHex(),s.keyhex=r(n,0,[1],"03").substr(2),s.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===s.algoid&&(s.algparam=r(n,0,[0,1],"06")),s},$t.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ct&&ct||(ct={}),void 0!==ct.jws&&ct.jws||(ct.jws={}),ct.jws.JWS=function(){var t=ct.jws.JWS.isSafeJSONString;this.parseJWS=function(e,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var s=r[1],i=r[2],o=r[3],a=s+"."+i;if(this.parsedJWS={},this.parsedJWS.headB64U=s,this.parsedJWS.payloadB64U=i,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=a,!n){var l=bt(o),c=et(l,16);this.parsedJWS.sigvalH=l,this.parsedJWS.sigvalBI=c}var u=ht(s),h=ht(i);if(this.parsedJWS.headS=u,this.parsedJWS.payloadS=h,!t(u,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+u}}},ct.jws.JWS.sign=function(t,e,n,r,s){var i,o,a,l=ct.jws.JWS,c=l.readSafeJSONString,u=l.isSafeJSONString,h=ct.crypto,d=h.Mac,f=h.Signature,p=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(i=p.stringify(o=e)),"string"==typeof e){if(!u(i=e))throw"JWS Head is not safe JSON string: "+i;o=c(i)}if(a=n,"object"==typeof n&&(a=p.stringify(n)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,i=p.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var g=null;if(void 0===l.jwsalg2sigalg[t])throw"unsupported alg name: "+t;g=l.jwsalg2sigalg[t];var m=ut(i)+"."+ut(a),y="";if("Hmac"==g.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var v=new d({alg:g,prov:"cryptojs",pass:r});v.updateString(m),y=v.doFinal()}else{var w;-1!=g.indexOf("withECDSA")?((w=new f({alg:g})).init(r,s),w.updateString(m),hASN1Sig=w.sign(),y=ct.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=g&&((w=new f({alg:g})).init(r,s),w.updateString(m),y=w.sign())}return m+"."+wt(y)},ct.jws.JWS.verify=function(t,e,n){var r,s=ct.jws.JWS,i=s.readSafeJSONString,o=ct.crypto,a=o.ECDSA,l=o.Mac,c=o.Signature;r=rt;var u=t.split(".");if(3!==u.length)return!1;var h,d=u[0]+"."+u[1],f=bt(u[2]),p=i(ht(u[0])),g=null;if(void 0===p.alg)throw"algorithm not specified in header";if(h=(g=p.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=Lt.getKey(e)),!("RS"!=h&&"PS"!=h||e instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==h&&!(e instanceof a))throw"key shall be a ECDSA obj for ES* algs";var m=null;if(void 0===s.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+g;if("none"==(m=s.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==m.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var y=new l({alg:m,pass:e});return y.updateString(d),f==y.doFinal()}if(-1!=m.indexOf("withECDSA")){var v,w=null;try{w=a.concatSigToASN1Sig(f)}catch(b){return!1}return(v=new c({alg:m})).init(e),v.updateString(d),v.verify(w)}return(v=new c({alg:m})).init(e),v.updateString(d),v.verify(f)},ct.jws.JWS.parse=function(t){var e,n,r=t.split("."),s={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=r[1],3==r.length&&(n=r[2]),s.headerObj=ct.jws.JWS.readSafeJSONString(ht(r[0])),s.payloadObj=ct.jws.JWS.readSafeJSONString(ht(e)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),s.payloadPP=null==s.payloadObj?ht(e):JSON.stringify(s.payloadObj,null,"  "),void 0!==n&&(s.sigHex=bt(n)),s},ct.jws.JWS.verifyJWT=function(t,e,n){var r=ct.jws,s=r.JWS,i=s.readSafeJSONString,o=s.inArray,a=s.includedArray,l=t.split("."),c=l[0],u=l[1],h=(bt(l[2]),i(ht(c))),d=i(ht(u));if(void 0===h.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(h.alg,n.alg))return!1;if(void 0!==d.iss&&"object"==typeof n.iss&&!o(d.iss,n.iss))return!1;if(void 0!==d.sub&&"object"==typeof n.sub&&!o(d.sub,n.sub))return!1;if(void 0!==d.aud&&"object"==typeof n.aud)if("string"==typeof d.aud){if(!o(d.aud,n.aud))return!1}else if("object"==typeof d.aud&&!a(d.aud,n.aud))return!1;var f=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(f=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==d.exp&&"number"==typeof d.exp&&d.exp+n.gracePeriod<f||void 0!==d.nbf&&"number"==typeof d.nbf&&f<d.nbf-n.gracePeriod||void 0!==d.iat&&"number"==typeof d.iat&&f<d.iat-n.gracePeriod||void 0!==d.jti&&void 0!==n.jti&&d.jti!==n.jti||!s.verify(t,e,n.alg))},ct.jws.JWS.includedArray=function(t,e){var n=ct.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e))return!1;return!0},ct.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},ct.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ct.jws.JWS.isSafeJSONString=function(t,e,n){var r=null;try{return"object"!=typeof(r=lt(t))?0:r.constructor===Array?0:(e&&(e[n]=r),1)}catch(o){return 0}},ct.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=lt(t))?null:e.constructor===Array?null:e}catch(o){return null}},ct.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},ct.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var n=Ct(e);return wt(ct.crypto.Util.hashHex(n,"sha256"))},ct.jws.IntDate={},ct.jws.IntDate.get=function(t){var e=ct.jws.IntDate,n=e.getNow,r=e.getZulu;if("now"==t)return n();if("now + 1hour"==t)return n()+3600;if("now + 1day"==t)return n()+86400;if("now + 1month"==t)return n()+2592e3;if("now + 1year"==t)return n()+31536e3;if(t.match(/Z$/))return r(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},ct.jws.IntDate.getZulu=function(t){return Dt(t)},ct.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ct.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},ct.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==ct&&ct||(ct={}),void 0!==ct.jws&&ct.jws||(ct.jws={}),ct.jws.JWSJS=function(){var t=ct.jws.JWS,e=t.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,n,r){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var s=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var i=ct.jws.JWS.sign(t,e,this.sPayload,n,r).split(".");this.aHeader.push(i[0]),this.aSignature.push(i[2])}catch(p){throw this.aHeader.length>s&&this.aHeader.pop(),this.aSignature.length>s&&this.aSignature.pop(),"addSignature failed: "+p}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(2!==n.length)return!1;if(!1===this.verifyNth(e,n[0],n[1]))return!1}return!0},this.verifyNth=function(e,n,r){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var s=this.aHeader[e]+"."+this.sPayload+"."+this.aSignature[e],i=!1;try{i=t.verify(s,n,r)}catch(p){return!1}return i},this.readJWSJS=function(t){if("string"==typeof t){var n=e(t);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.aSignatures=t.signatures}catch(i){throw"malformed JWS-JS JSON object: "+i}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},e.SecureRandom=tt,e.rng_seed_time=W,e.BigInteger=_,e.RSAKey=rt,e.ECDSA=ct.crypto.ECDSA,e.DSA=ct.crypto.DSA,e.Signature=ct.crypto.Signature,e.MessageDigest=ct.crypto.MessageDigest,e.Mac=ct.crypto.Mac,e.Cipher=ct.crypto.Cipher,e.KEYUTIL=Lt,e.ASN1HEX=dt,e.X509=$t,e.CryptoJS=m,e.b64tohex=b,e.b64toBA=S,e.stoBA=ft,e.BAtos=pt,e.BAtohex=gt,e.stohex=mt,e.stob64=function(t){return w(mt(t))},e.stob64u=function(t){return yt(w(mt(t)))},e.b64utos=function(t){return pt(S(vt(t)))},e.b64tob64u=yt,e.b64utob64=vt,e.hex2b64=w,e.hextob64u=wt,e.b64utohex=bt,e.utf8tob64u=ut,e.b64utoutf8=ht,e.utf8tob64=function(t){return w(Pt(jt(t)))},e.b64toutf8=function(t){return decodeURIComponent(Rt(b(t)))},e.utf8tohex=St,e.hextoutf8=_t,e.hextorstr=xt,e.rstrtohex=Ct,e.hextob64=Et,e.hextob64nl=At,e.b64nltohex=Ft,e.hextopem=Tt,e.pemtohex=It,e.hextoArrayBuffer=function(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),n=new DataView(e),r=0;r<t.length/2;r++)n.setUint8(r,parseInt(t.substr(2*r,2),16));return e},e.ArrayBuffertohex=function(t){for(var e="",n=new DataView(t),r=0;r<t.byteLength;r++)e+=("00"+n.getUint8(r).toString(16)).slice(-2);return e},e.zulutomsec=kt,e.zulutosec=Dt,e.zulutodate=function(t){return new Date(kt(t))},e.datetozulu=function(t,e,n){var r,s=t.getUTCFullYear();if(e){if(s<1950||2049<s)throw"not proper year for UTCTime: "+s;r=(""+s).slice(-2)}else r=("000"+s).slice(-4);if(r+=("0"+(t.getUTCMonth()+1)).slice(-2),r+=("0"+t.getUTCDate()).slice(-2),r+=("0"+t.getUTCHours()).slice(-2),r+=("0"+t.getUTCMinutes()).slice(-2),r+=("0"+t.getUTCSeconds()).slice(-2),n){var i=t.getUTCMilliseconds();0!==i&&(r+="."+(i=(i=("00"+i).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},e.uricmptohex=Pt,e.hextouricmp=Rt,e.ipv6tohex=Ot,e.hextoipv6=Nt,e.hextoip=Ht,e.iptohex=function(t){var e="malformed IP address";if(!(t=t.toLowerCase(t)).match(/^[0-9.]+$/)){if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return Ot(t);throw e}var n=t.split(".");if(4!==n.length)throw e;var r="";try{for(var s=0;s<4;s++)r+=("0"+parseInt(n[s]).toString(16)).slice(-2);return r}catch(f){throw e}},e.encodeURIComponentAll=jt,e.newline_toUnix=function(t){return t.replace(/\r\n/gm,"\n")},e.newline_toDos=function(t){return(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},e.hextoposhex=Vt,e.intarystrtohex=Bt,e.strdiffidx=function(t,e){var n=t.length;t.length>e.length&&(n=e.length);for(var r=0;r<n;r++)if(t.charCodeAt(r)!=e.charCodeAt(r))return r;return t.length!=e.length?n:-1},e.KJUR=ct,e.crypto=ct.crypto,e.asn1=ct.asn1,e.jws=ct.jws,e.lang=ct.lang},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let s=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const u=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:s,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(s))try{s.call(this)}catch(o){e=o instanceof u?d(o.errors):[o]}if(l(i)){let t=-1,n=i.length;for(;++t<n;){const n=i[t];if(c(n))try{n.unsubscribe()}catch(o){e=e||[],o instanceof u?e=e.concat(d(o.errors)):e.push(o)}}}if(e)throw new u(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof u?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,s){let i;super(),this._parentSubscriber=t;let o=this;r(e)?i=e:e&&(i=e.next,n=e.error,s=e.complete,e!==a&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;i.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=i;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return i.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(){}function v(...t){return w(t)}function w(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:y}let b=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,s=function(t,e,n){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(s.add(r?r.call(s,this.source):this.source||i.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),i.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(t){try{return this._subscribe(t)}catch(e){i.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=S(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(s){n(s),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:w(t)(this)}toPromise(t){return new(t=S(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function S(t){if(t||(t=i.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const _=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class x extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class C extends p{constructor(t){super(t),this.destination=t}}let E=(()=>{class t extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new C(this)}lift(t){const e=new A(this,this);return e.operator=t,e}next(t){if(this.closed)throw new _;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].next(t)}}error(t){if(this.closed)throw new _;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].error(t);this.observers.length=0}complete(){if(this.closed)throw new _;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new _;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new _;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new x(this,t))}asObservable(){const t=new b;return t.source=this,t}}return t.create=(t,e)=>new A(t,e),t})();class A extends E{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function F(t){return t&&"function"==typeof t.schedule}class T extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const I=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function k(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const D=k(),P=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function R(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const O=t=>{if(t&&"function"==typeof t[m])return r=t,t=>{const e=r[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(P(t))return I(t);if(R(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t);if(t&&"function"==typeof t[D])return e=t,t=>{const n=e[D]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}var e,n,r};function N(t,e,n,r,s=new T(t,n,r)){if(!s.closed)return e instanceof b?e.subscribe(s):O(e)(s)}class H extends p{notifyNext(t,e,n,r,s){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function j(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new V(t,e))}}class V{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new B(t,this.project,this.thisArg))}}class B extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function L(t,e){return new b(n=>{const r=new h;let s=0;return r.add(e.schedule((function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function M(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new b(n=>{const r=new h;return r.add(e.schedule(()=>{const s=t[m]();r.add(s.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(R(t))return function(t,e){return new b(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(P(t))return L(t,e);if(function(t){return t&&"function"==typeof t[D]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new b(n=>{const r=new h;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(e.schedule(()=>{s=t[D](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=s.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof b?t:new b(O(t))}function U(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(U((n,r)=>M(t(n,r)).pipe(j((t,s)=>e(n,t,r,s))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new K(t,this.project,this.concurrent))}}class K extends H{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new T(this,e,n),s=this.destination;s.add(r);const i=N(this,t,void 0,void 0,r);i!==r&&s.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,s){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function $(t){return t}function z(t=Number.POSITIVE_INFINITY){return U($,t)}function G(t,e){return e?L(t,e):new b(I(t))}function W(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return F(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof b?t[0]:z(e)(G(t,n))}function J(){return function(t){return t.lift(new Z(t))}}class Z{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new Y(t,n),s=e.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class Y extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Q extends b{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new tt(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return J()(this)}}const X=(()=>{const t=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class tt extends C{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function et(){return new E}function nt(t,e,n){const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function s(...t){if(this instanceof s)return r.apply(this,t),this;const e=new s(...t);return n.annotation=e,n;function n(t,n,r){const s=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(e),t}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s}const rt=nt("Inject",t=>({token:t})),st=nt("Optional"),it=nt("Self"),ot=nt("SkipSelf");var at=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function lt(t){for(let e in t)if(t[e]===lt)return e;throw Error("Could not find renamed property on target object.")}function ct(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ht(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function dt(t){return ft(t,t[gt])||ft(t,t[vt])}function ft(t,e){return e&&e.token===t?e:null}function pt(t){return t&&(t.hasOwnProperty(mt)||t.hasOwnProperty(wt))?t[mt]:null}const gt=lt({"\u0275prov":lt}),mt=lt({"\u0275inj":lt}),yt=lt({"\u0275provFallback":lt}),vt=lt({ngInjectableDef:lt}),wt=lt({ngInjectorDef:lt});function bt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function St(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const _t=lt({__forward_ref__:lt});function xt(t){return t.__forward_ref__=xt,t.toString=function(){return bt(this())},t}function Ct(t){return Et(t)?t():t}function Et(t){return"function"==typeof t&&t.hasOwnProperty(_t)&&t.__forward_ref__===xt}const At="undefined"!=typeof globalThis&&globalThis,Ft="undefined"!=typeof window&&window,Tt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It="undefined"!=typeof global&&global,kt=At||It||Ft||Tt,Dt=lt({"\u0275cmp":lt}),Pt=lt({"\u0275dir":lt}),Rt=lt({"\u0275pipe":lt}),Ot=lt({"\u0275mod":lt}),Nt=lt({"\u0275loc":lt}),Ht=lt({"\u0275fac":lt}),jt=lt({__NG_ELEMENT_ID__:lt});class Vt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ut({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Bt=new Vt("INJECTOR",-1),Lt={},Mt=/\n/gm,Ut=lt({provide:String,useValue:lt});let qt,Kt=void 0;function $t(t){const e=Kt;return Kt=t,e}function zt(t){const e=qt;return qt=t,e}function Gt(t,e=at.Default){if(void 0===Kt)throw new Error("inject() must be called from an injection context");return null===Kt?Jt(t,void 0,e):Kt.get(t,e&at.Optional?null:void 0,e)}function Wt(t,e=at.Default){return(qt||Gt)(Ct(t),e)}function Jt(t,e,n){const r=dt(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&at.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${bt(t)}]`)}function Zt(t){const e=[];for(let n=0;n<t.length;n++){const r=Ct(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=at.Default;for(let e=0;e<r.length;e++){const s=r[e];s instanceof st||"Optional"===s.ngMetadataName||s===st?n|=at.Optional:s instanceof ot||"SkipSelf"===s.ngMetadataName||s===ot?n|=at.SkipSelf:s instanceof it||"Self"===s.ngMetadataName||s===it?n|=at.Self:t=s instanceof rt||s===rt?s.token:s}e.push(Wt(t,n))}else e.push(Wt(r))}return e}class Yt{get(t,e=Lt){if(e===Lt){const e=new Error(`NullInjectorError: No provider for ${bt(t)}!`);throw e.name="NullInjectorError",e}return e}}class Qt{}class Xt{}function te(t,e){for(let n=0;n<t.length;n++)e.push(t[n])}function ee(t,e){t.forEach(t=>Array.isArray(t)?ee(t,e):e(t))}function ne(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function re(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function se(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function ie(t,e,n){let r=ae(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let s=t.length;if(s==e)t.push(n,r);else if(1===s)t.push(r,t[0]),t[0]=n;else{for(s--,t.push(t[s-1],t[s]);s>e;)t[s]=t[s-2],s--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function oe(t,e){const n=ae(t,e);if(n>=0)return t[1|n]}function ae(t,e){return function(t,e,n){let r=0,s=t.length>>1;for(;s!==r;){const n=r+(s-r>>1),i=t[n<<1];if(e===i)return n<<1;i>e?s=n:r=n+1}return~(s<<1)}(t,e)}const le=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),ce=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}();function ue(t){return""+{toString:t}}const he={},de=[];let fe=0;function pe(t){const e=t.type,n=e.prototype,r={},s={type:e,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===le.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||de,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ce.Emulated,id:"c",styles:t.styles||de,_:null,setInput:null,schemas:t.schemas||null,tView:null};return s._=ue(()=>{const e=t.directives,n=t.features,i=t.pipes;s.id+=fe++,s.inputs=we(t.inputs,r),s.outputs=we(t.outputs),n&&n.forEach(t=>t(s)),s.directiveDefs=e?()=>("function"==typeof e?e():e).map(ge):null,s.pipeDefs=i?()=>("function"==typeof i?i():i).map(me):null}),s}function ge(t){return _e(t)||function(t){return t[Pt]||null}(t)}function me(t){return function(t){return t[Rt]||null}(t)}const ye={};function ve(t){const e={type:t.type,bootstrap:t.bootstrap||de,declarations:t.declarations||de,imports:t.imports||de,exports:t.exports||de,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&ue(()=>{ye[t.id]=t.type}),e}function we(t,e){if(null==t)return he;const n={};for(const r in t)if(t.hasOwnProperty(r)){let s=t[r],i=s;Array.isArray(s)&&(i=s[1],s=s[0]),n[s]=r,e&&(e[s]=i)}return n}const be=pe;function Se(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function _e(t){return t[Dt]||null}function xe(t,e){return t.hasOwnProperty(Ht)?t[Ht]:null}function Ce(t,e){const n=t[Ot]||null;if(!n&&!0===e)throw new Error(`Type ${bt(t)} does not have '\u0275mod' property.`);return n}function Ee(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ae(t){return Array.isArray(t)&&!0===t[1]}function Fe(t){return 0!=(8&t.flags)}function Te(t){return 2==(2&t.flags)}function Ie(t){return 1==(1&t.flags)}function ke(t){return null!==t.template}function De(t){return 0!=(512&t[2])}const Pe={lFrame:tn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Re(){return Pe.bindingsEnabled}function Oe(){return Pe.lFrame.lView}function Ne(){return Pe.lFrame.tView}function He(t){Pe.lFrame.contextLView=t}function je(){return Pe.lFrame.previousOrParentTNode}function Ve(t,e){Pe.lFrame.previousOrParentTNode=t,Pe.lFrame.isParent=e}function Be(){return Pe.lFrame.isParent}function Le(){Pe.lFrame.isParent=!1}function Me(){return Pe.checkNoChangesMode}function Ue(t){Pe.checkNoChangesMode=t}function qe(){const t=Pe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ke(){return Pe.lFrame.bindingIndex}function $e(){return Pe.lFrame.bindingIndex++}function ze(t){const e=Pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ge(t,e){const n=Pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,n.currentDirectiveIndex=e}function We(){return Pe.lFrame.currentQueryIndex}function Je(t){Pe.lFrame.currentQueryIndex=t}function Ze(t,e){const n=Xe();Pe.lFrame=n,n.previousOrParentTNode=e,n.lView=t}const Ye=en;function Qe(t,e){const n=Xe(),r=t[1];Pe.lFrame=n,n.previousOrParentTNode=e,n.isParent=!0,n.lView=t,n.tView=r,n.selectedIndex=0,n.contextLView=t,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.currentSanitizer=null,n.bindingRootIndex=-1,n.bindingIndex=r.bindingStartIndex,n.currentQueryIndex=0}function Xe(){const t=Pe.lFrame,e=null===t?null:t.child;return null===e?tn(t):e}function tn(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function en(){Pe.lFrame=Pe.lFrame.parent}function nn(){return Pe.lFrame.selectedIndex}function rn(t){Pe.lFrame.selectedIndex=t}function sn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n];e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked)),e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked)),null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}}function on(t,e,n){cn(t,e,3,n)}function an(t,e,n,r){(3&t[2])===n&&cn(t,e,n,r)}function ln(t,e){let n=t[2];(3&n)===e&&(n&=1023,n+=1,t[2]=n)}function cn(t,e,n,r){const s=null!=r?r:-1;let i=0;for(let o=void 0!==r?65535&t[18]:0;o<e.length;o++)if("number"==typeof e[o+1]){if(i=e[o],null!=r&&i>=r)break}else e[o]<0&&(t[18]+=65536),(i<s||-1==s)&&(un(t,n,e,o),t[18]=(4294901760&t[18])+o+2),o++}function un(t,e,n,r){const s=n[r]<0,i=n[r+1],o=t[s?-n[r]:n[r]];s?t[2]>>10<t[18]>>16&&(3&t[2])===e&&(t[2]+=1024,i.call(o)):i.call(o)}class hn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}let dn=void 0;function fn(){return void 0!==dn?dn:"undefined"!=typeof document?document:void 0}function pn(t){return!!t.listen}const gn={createRenderer:(t,e)=>fn()};function mn(t,e,n){const r=pn(t);let s=0;for(;s<n.length;){const i=n[s];if("number"==typeof i){if(0!==i)break;s++;const o=n[s++],a=n[s++],l=n[s++];r?t.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=i,a=n[++s];vn(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),s++}}return s}function yn(t){return 3===t||4===t||6===t}function vn(t){return 64===t.charCodeAt(0)}function wn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?n=s:0===n||bn(t,n,s,null,-1===n||2===n?e[++r]:null)}}return t}function bn(t,e,n,r,s){let i=0,o=t.length;if(-1===e)o=-1;else for(;i<t.length;){const n=t[i++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=i-1;break}}}for(;i<t.length;){const e=t[i];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==s&&(t[i+1]=s));if(r===t[i+1])return void(t[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(t.splice(o,0,e),i=o+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==s&&t.splice(i++,0,s)}function Sn(t){return-1!==t}function _n(t){return 32767&t}function xn(t){return t>>16}function Cn(t,e){let n=xn(t),r=e;for(;n>0;)r=r[15],n--;return r}function En(t){return"string"==typeof t?t:null==t?"":""+t}function An(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():En(t)}const Fn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function Tn(t){return{name:"window",target:t.ownerDocument.defaultView}}function In(t){return{name:"document",target:t.ownerDocument}}function kn(t){return t instanceof Function?t():t}let Dn=!0;function Pn(t){const e=Dn;return Dn=t,e}let Rn=0;function On(t,e){const n=Hn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Nn(r.data,t),Nn(e,null),Nn(r.blueprint,null));const s=jn(t,e),i=t.injectorIndex;if(Sn(s)){const t=_n(s),n=Cn(s,e),r=n[1].data;for(let s=0;s<8;s++)e[i+s]=n[t+s]|r[t+s]}return e[i+8]=s,i}function Nn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Hn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function jn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Vn(t,e,n){!function(t,e,n){let r="string"!=typeof n?n[jt]:n.charCodeAt(0)||0;null==r&&(r=n[jt]=Rn++);const s=255&r,i=1<<s,o=64&s,a=32&s,l=e.data;128&s?o?a?l[t+7]|=i:l[t+6]|=i:a?l[t+5]|=i:l[t+4]|=i:o?a?l[t+3]|=i:l[t+2]|=i:a?l[t+1]|=i:l[t]|=i}(t,e,n)}function Bn(t,e,n,r=at.Default,s){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t[jt];return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof s){Ze(e,t);try{const t=s();if(null!=t||r&at.Optional)return t;throw new Error(`No provider for ${An(n)}!`)}finally{Ye()}}else if("number"==typeof s){if(-1===s)return new zn(t,e);let i=null,o=Hn(t,e),a=-1,l=r&at.Host?e[16][6]:null;for((-1===o||r&at.SkipSelf)&&(a=-1===o?jn(t,e):e[o+8],$n(r,!1)?(i=e[1],o=_n(a),e=Cn(a,e)):o=-1);-1!==o;){a=e[o+8];const t=e[1];if(Kn(s,o,t.data)){const t=Mn(o,e,n,i,r,l);if(t!==Ln)return t}$n(r,e[1].data[o+8]===l)&&Kn(s,o,e)?(i=t,o=_n(a),e=Cn(a,e)):o=-1}}}if(r&at.Optional&&void 0===s&&(s=null),0==(r&(at.Self|at.Host))){const t=e[9],i=zt(void 0);try{return t?t.get(n,s,r&at.Optional):Jt(n,s,r&at.Optional)}finally{zt(i)}}if(r&at.Optional)return s;throw new Error(`NodeInjector: NOT_FOUND [${An(n)}]`)}const Ln={};function Mn(t,e,n,r,s,i){const o=e[1],a=o.data[t+8],l=Un(a,o,n,null==r?Te(a)&&Dn:r!=o&&3===a.type,s&at.Host&&i===a);return null!==l?qn(e,o,l,a):Ln}function Un(t,e,n,r,s){const i=t.providerIndexes,o=e.data,a=65535&i,l=t.directiveStart,c=i>>16,u=s?a+c:t.directiveEnd;for(let h=r?a:a+c;h<u;h++){const t=o[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(s){const t=o[l];if(t&&ke(t)&&t.type===n)return l}return null}function qn(t,e,n,r){let s=t[n];const i=e.data;if(s instanceof hn){const o=s;if(o.resolving)throw new Error(`Circular dep for ${An(i[n])}`);const a=Pn(o.canSeeViewProviders);let l;o.resolving=!0,o.injectImpl&&(l=zt(o.injectImpl)),Ze(t,r);try{s=t[n]=o.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{onChanges:r,onInit:s,doCheck:i}=e;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)),s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,s),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i))}(n,i[n],e)}finally{o.injectImpl&&zt(l),Pn(a),o.resolving=!1,Ye()}}return s}function Kn(t,e,n){const r=64&t,s=32&t;let i;return i=128&t?r?s?n[e+7]:n[e+6]:s?n[e+5]:n[e+4]:r?s?n[e+3]:n[e+2]:s?n[e+1]:n[e],!!(i&1<<t)}function $n(t,e){return!(t&at.Self||t&at.Host&&e)}class zn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Bn(this._tNode,this._lView,t,void 0,e)}}function Gn(t){const e=Object.getPrototypeOf(t.prototype).constructor,n=e[Ht]||function t(e){const n=e;if(Et(e))return()=>{const e=t(Ct(n));return e?e():null};let r=xe(n);if(null===r){const t=pt(n);r=t&&t.factory}return r||null}(e);return null!==n?n:t=>new t}function Wn(t){return t.ngDebugContext}function Jn(t){return t.ngOriginalError}function Zn(t,...e){t.error(...e)}class Yn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Zn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Wn(t)?Wn(t):this._findContext(Jn(t)):null}_findOriginalError(t){let e=Jn(t);for(;e&&Jn(e);)e=Jn(e);return e}}class Qn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}function Xn(t){return t instanceof Qn?t.changingThisBreaksApplicationSecurity:t}let tr=!0,er=!1;function nr(){return er=!0,tr}class rr{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");let e=this.inertDocument.body;if(null==e){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),e=this.inertDocument.createElement("body"),t.appendChild(e)}e.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!e.querySelector||e.querySelector("svg")?(e.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=e.querySelector&&e.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const sr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ir=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function or(t){return(t=String(t)).match(sr)||t.match(ir)?t:(nr()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function ar(t){return(t=String(t)).split(",").map(t=>or(t.trim())).join(", ")}function lr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function cr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const ur=lr("area,br,col,hr,img,wbr"),hr=lr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dr=lr("rp,rt"),fr=cr(dr,hr),pr=cr(ur,cr(hr,lr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cr(dr,lr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fr),gr=lr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mr=lr("srcset"),yr=cr(gr,mr,lr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vr=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();function wr(t){const e=function(){const t=Oe();return t&&t[12]}();return e?e.sanitize(vr.URL,t)||"":function(t,e){const n=function(t){return t instanceof Qn&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}(t,"URL")?Xn(t):or(En(t))}function br(t){for(;Array.isArray(t);)t=t[0];return t}function Sr(t,e){return br(e[t+19])}function _r(t,e){return br(e[t.index])}function xr(t,e){return t.data[e+19]}function Cr(t,e){return t[e+19]}function Er(t,e){const n=e[t];return Ee(n)?n:n[0]}function Ar(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Fr(t){return 4==(4&t[2])}function Tr(t){return 128==(128&t[2])}function Ir(t,e){return null===t||null==e?null:t[e]}function kr(t){t[18]=0}function Dr(t,e){t.__ngContext__=e}function Pr(t){throw new Error(`Multiple components match node with tagname ${t.tagName}`)}function Rr(){throw new Error("Cannot mix multi providers and regular providers")}function Or(t,e,n){let r=t.length;for(;;){const s=t.indexOf(e,n);if(-1===s)return s;if(0===s||t.charCodeAt(s-1)<=32){const n=e.length;if(s+n===r||t.charCodeAt(s+n)<=32)return s}n=s+1}}function Nr(t,e,n){let r=0;for(;r<t.length;){let s=t[r++];if(n&&"class"===s){if(s=t[r],-1!==Or(s.toLowerCase(),e,0))return!0}else if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function Hr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function jr(t,e,n){let r=4;const s=t.attrs||[],i=function(t){for(let e=0;e<t.length;e++)if(yn(t[e]))return e;return t.length}(s);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Hr(t,l,n)||""===l&&1===e.length){if(Vr(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!Nr(t.attrs,c,n)){if(Vr(r))return!1;o=!0}continue}const u=Br(8&r?"class":l,s,0==t.type&&"ng-template"!==t.tagName,n);if(-1===u){if(Vr(r))return!1;o=!0;continue}if(""!==c){let t;t=u>i?"":s[u+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Or(e,c,0)||2&r&&c!==t){if(Vr(r))return!1;o=!0}}}}else{if(!o&&!Vr(r)&&!Vr(l))return!1;if(o&&Vr(l))continue;o=!1,r=l|1&r}}return Vr(r)||o}function Vr(t){return 0==(1&t)}function Br(t,e,n,r){if(null===e)return-1;let s=0;if(r||!n){let n=!1;for(;s<e.length;){const r=e[s];if(r===t)return s;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++s];for(;"string"==typeof t;)t=e[++s];continue}if(4===r)break;if(0===r){s+=4;continue}}s+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){if(t[n]===e)return n;n++}return-1}(e,t)}function Lr(t,e,n=!1){for(let r=0;r<e.length;r++)if(jr(t,e[r],n))return!0;return!1}function Mr(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Ur(t,e){return t?":not("+e.trim()+")":e}function qr(t){let e=t[0],n=1,r=2,s="",i=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];s+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""===s||Vr(o)||(e+=Ur(i,s),s=""),r=o,i=i||!Vr(r);n++}return""!==s&&(e+=Ur(i,s)),e}const Kr={};function $r(t){const e=t[3];return Ae(e)?e[3]:e}function zr(t){Gr(Ne(),Oe(),nn()+t,Me())}function Gr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&on(e,r,n)}else{const r=t.preOrderHooks;null!==r&&an(e,r,0,n)}rn(n)}const Wr={marker:"element"},Jr={marker:"comment"};function Zr(t,e){return t<<17|e<<2}function Yr(t){return t>>17&32767}function Qr(t){return 2|t}function Xr(t){return(131068&t)>>2}function ts(t,e){return-131069&t|e<<2}function es(t){return 1|t}function ns(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],i=n[r+1];if(-1!==i){const n=t.data[i];Je(s),n.contentQueries(2,e[i],i)}}}function rs(t,e,n){return pn(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function ss(t,e,n,r,s,i,o,a,l,c){const u=e.blueprint.slice();return u[0]=s,u[2]=140|r,kr(u),u[3]=u[15]=t,u[8]=n,u[10]=o||t&&t[10],u[11]=a||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=i,u[16]=2==e.type?t[16]:u,u}function is(t,e,n,r,s,i){const o=n+19,a=t.data[o]||function(t,e,n,r,s,i){const o=je(),a=Be(),l=a?o:o&&o.parent,c=t.data[n]=gs(0,l&&l!==e?l:null,r,n,s,i);return null===t.firstChild&&(t.firstChild=c),o&&(!a||null!=o.child||null===c.parent&&2!==o.type?a||(o.next=c):o.child=c),c}(t,e,o,r,s,i);return Ve(a,!0),a}function os(t,e,n){Qe(e,e[6]);try{const r=t.viewQuery;null!==r&&Bs(1,r,n);const s=t.template;null!==s&&cs(t,e,s,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ns(t,e),t.staticViewQueries&&Bs(2,t.viewQuery,n);const i=t.components;null!==i&&function(t,e){for(let n=0;n<e.length;n++)Os(t,e[n])}(e,i)}finally{e[2]&=-5,en()}}function as(t,e,n,r){const s=e[2];if(256==(256&s))return;Qe(e,e[6]);const i=Me();try{kr(e),Pe.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&cs(t,e,n,2,r);const o=3==(3&s);if(!i)if(o){const n=t.preOrderCheckHooks;null!==n&&on(e,n,null)}else{const n=t.preOrderHooks;null!==n&&an(e,n,0,null),ln(e,0)}if(function(t){let e=t[13];for(;null!==e;){let n;if(Ae(e)&&(n=e[2])>>1==-1){for(let t=9;t<e.length;t++){const n=e[t],r=n[1];Tr(n)&&as(r,n,r.template,n[8])}0!=(1&n)&&Ps(e,t[16])}e=e[4]}}(e),null!==t.contentQueries&&ns(t,e),!i)if(o){const n=t.contentCheckHooks;null!==n&&on(e,n)}else{const n=t.contentHooks;null!==n&&an(e,n,1),ln(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,s=-1,i=-1;for(let t=0;t<n.length;t++){const o=n[t];"number"==typeof o?o<=0?(i=0-o,rn(i),r+=9+n[++t],s=r):r+=o:(null!==o&&(Ge(r,s),o(2,e[s])),s++)}}}finally{rn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Rs(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&Bs(2,l,r),!i)if(o){const n=t.viewCheckHooks;null!==n&&on(e,n)}else{const n=t.viewHooks;null!==n&&an(e,n,2),ln(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i||(e[2]&=-73)}finally{en()}}function ls(t,e,n,r){const s=e[10],i=!Me(),o=Fr(e);try{i&&!o&&s.begin&&s.begin(),o&&os(t,e,r),as(t,e,n,r)}finally{i&&!o&&s.end&&s.end()}}function cs(t,e,n,r,s){const i=nn();try{rn(-1),2&r&&e.length>19&&Gr(t,e,0,Me()),n(r,s)}finally{rn(i)}}function us(t,e,n){if(Fe(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const e=t.data[s];e.contentQueries&&e.contentQueries(1,n[s],s)}}}function hs(t,e,n){Re()&&(function(t,e,n,r){const s=n.directiveStart,i=n.directiveEnd;t.firstCreatePass||On(n,e),Dr(r,e);const o=n.initialInputs;for(let a=s;a<i;a++){const r=t.data[a],i=ke(r);i&&Fs(e,n,r);const l=qn(e,t,a,n);Dr(l,e),null!==o&&Is(0,a-s,l,r,0,o),i&&(Er(n.index,e)[8]=l)}}(t,e,n,_r(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,s=n.directiveEnd,i=t.expandoInstructions,o=t.firstCreatePass,a=n.index-19;try{rn(a);for(let n=r;n<s;n++){const r=t.data[n],s=e[n];null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Ss(r,s):o&&i.push(null)}}finally{rn(-1)}}(t,e,n))}function ds(t,e,n=_r){const r=e.localNames;if(null!==r){let s=e.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?n(e,t):t[o];t[s++]=a}}}function fs(t){return t.tView||(t.tView=ps(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts))}function ps(t,e,n,r,s,i,o,a,l,c){const u=19+r,h=u+s,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Kr);return n}(u,h);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:c}}function gs(t,e,n,r,s,i){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ms(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const s=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,s):n[r]=[e,s]}return n}function ys(t,e,n,r,s,i,o,a){const l=Sr(n,e),c=xr(t,n);let u,h=c.inputs;if(!o&&null!=h&&(u=h[r]))Ks(t,e,u,r,s),Te(c)&&function(t,e){const n=Er(e,t);16&n[2]||(n[2]|=64)}(e,n+19);else if(3===c.type){r="class"===(d=r)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d;const t=a?a(c,e):e[11];s=null!=i?i(s,c.tagName||"",r):s,pn(t)?t.setProperty(l,r,s):vn(r)||(l.setProperty?l.setProperty(r,s):l[r]=s)}var d}function vs(t,e,n,r){let s=!1;if(Re()){const i=function(t,e,n){const r=t.directiveRegistry;let s=null;if(r)for(let i=0;i<r.length;i++){const o=r[i];Lr(n,o.selectors,!1)&&(s||(s=[]),Vn(On(n,e),t,o.type),ke(o)?(2&n.flags&&Pr(n),xs(t,n),s.unshift(o)):s.push(o))}return s}(t,e,n),o=null===r?null:{"":-1};if(null!==i){let r=0;s=!0,Es(n,t.data.length,i.length);for(let t=0;t<i.length;t++){const e=i[t];e.providersResolver&&e.providersResolver(e)}_s(t,n,i.length);let a=!1,l=!1;for(let s=0;s<i.length;s++){const c=i[s];n.mergedAttrs=wn(n.mergedAttrs,c.hostAttrs),As(t,e,c),Cs(t.data.length-1,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128),!a&&(c.onChanges||c.onInit||c.doCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-19),a=!0),l||!c.onChanges&&!c.doCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-19),l=!0),ws(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,s=e.attrs,i=[];let o=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=r[l],e=t.inputs;i.push(null!==s?ks(e,s):null),o=ms(e,l,o),a=ms(t.outputs,l,a)}null!==o&&((o.hasOwnProperty("class")||o.hasOwnProperty("className"))&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=i,e.inputs=o,e.outputs=a}(t,n),bs(t,e,r)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const s=n[e[t+1]];if(null==s)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],s)}}}(n,r,o)}return n.mergedAttrs=wn(n.mergedAttrs,n.attrs),s}function ws(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function bs(t,e,n){for(let r=0;r<n;r++)e.push(Kr),t.blueprint.push(Kr),t.data.push(null)}function Ss(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function _s(t,e,n){const r=19-e.index,s=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,s,n)}function xs(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Cs(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ke(e)&&(n[""]=t)}}function Es(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function As(t,e,n){t.data.push(n);const r=n.factory||(n.factory=xe(n.type)),s=new hn(r,ke(n),null);t.blueprint.push(s),e.push(s)}function Fs(t,e,n){const r=_r(e,t),s=fs(n),i=t[10],o=Ns(t,ss(t,s,null,n.onPush?64:16,r,e,i,i.createRenderer(r,n)));t[e.index]=o}function Ts(t,e,n,r,s,i,o){const a=Sr(t,s),l=s[11];if(null==n)pn(l)?l.removeAttribute(a,e,o):a.removeAttribute(e);else{const s=xr(r,t),c=null==i?En(n):i(n,s.tagName||"",e);pn(l)?l.setAttribute(a,e,c,o):o?a.setAttributeNS(o,e,c):a.setAttribute(e,c)}}function Is(t,e,n,r,s,i){const o=i[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const s=o[e++],i=o[e++],a=o[e++];null!==t?r.setInput(n,a,s,i):n[i]=a}}}function ks(t,e){let n=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;t.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,t[s],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ds(t,e,n,r){return new Array(t,!0,-2,e,null,null,r,n,null)}function Ps(t,e){const n=t[5];for(let r=0;r<n.length;r++){const t=n[r],s=t[3][3][16];if(s!==e&&0==(16&s[2])){const e=t[1];as(e,t,e.template,t[8])}}}function Rs(t,e){const n=Er(e,t);if(Tr(n)&&80&n[2]){const t=n[1];as(t,n,t.template,n[8])}}function Os(t,e){const n=Er(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),os(r,n,n[8])}function Ns(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Hs(t){for(;t;){t[2]|=64;const e=$r(t);if(De(t)&&!e)return t;t=e}return null}function js(t,e,n){const r=e[10];r.begin&&r.begin();try{as(t,e,t.template,n)}catch(s){throw qs(e,s),s}finally{r.end&&r.end()}}function Vs(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ar(n),s=r[1];ls(s,r,s.template,n)}}(t[8])}function Bs(t,e,n){Je(0),e(t,n)}const Ls=(()=>Promise.resolve(null))();function Ms(t){return t[7]||(t[7]=[])}function Us(t){return t.cleanup||(t.cleanup=[])}function qs(t,e){const n=t[9],r=n?n.get(Yn,null):null;r&&r.handleError(e)}function Ks(t,e,n,r,s){for(let i=0;i<n.length;){const o=n[i++],a=n[i++],l=e[o],c=t.data[o];null!==c.setInput?c.setInput(l,s,r,a):l[a]=s}}function $s(t,e,n){const r=Sr(e,t),s=t[11];pn(s)?s.setValue(r,n):r.textContent=n}function zs(t,e){const n=e[3];return-1===t.index?Ae(n)?n:null:n}function Gs(t,e){const n=zs(t,e);return n?oi(e[11],n[7]):null}function Ws(t,e,n,r,s){if(null!=r){let i,o=!1;Ae(r)?i=r:Ee(r)&&(o=!0,r=r[0]);const a=br(r);0===t&&null!==n?null==s?si(e,n,a):ri(e,n,a,s||null):1===t&&null!==n?ri(e,n,a,s||null):2===t?ui(e,a,o):3===t&&e.destroyNode(a),null!=i&&function(t,e,n,r,s){const i=n[7];i!==br(n)&&Ws(e,t,r,i,s);for(let o=9;o<n.length;o++){const s=n[o];di(s[1],s,t,e,r,i)}}(e,t,i,n,s)}}function Js(t,e){return pn(e)?e.createText(t):e.createTextNode(t)}function Zs(t,e,n,r){const s=Gs(t.node,e);s&&di(t,e,e[11],n?1:2,s,r)}function Ys(t,e){const n=t[5],r=n.indexOf(e);n.splice(r,1)}function Qs(t,e){if(t.length<=9)return;const n=9+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Ys(s,r),e>0&&(t[n-1][4]=r[4]);const i=re(t,9+e);Zs(r[1],r,!1,null);const o=i[5];null!==o&&o.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Xs(t,e){if(!(256&e[2])){const n=e[11];pn(n)&&n.destroyNode&&di(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ei(t[1],t);for(;e;){let n=null;if(Ee(e))n=e[13];else{const t=e[9];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Ee(e)&&ei(e[1],e),e=ti(e,t);null===e&&(e=t),Ee(e)&&ei(e[1],e),n=e&&e[4]}e=n}}(e)}}function ti(t,e){let n;return Ee(t)&&(n=t[6])&&2===n.type?zs(n,t):t[3]===e?null:t[3]}function ei(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];t instanceof hn||n[r+1].call(t)}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const s=n[r+1],i="function"==typeof s?s(e):br(e[s]),o=t[n[r+2]],a=n[r+3];"boolean"==typeof a?i.removeEventListener(n[r],o,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&pn(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Ae(e[3])){r!==e[3]&&Ys(r,e);const n=e[5];null!==n&&n.detachView(t)}}}function ni(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?Gs(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return _r(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==ce.ShadowDom&&n!==ce.Native)return null}return _r(r,n)}function ri(t,e,n,r){pn(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function si(t,e,n){pn(t)?t.appendChild(e,n):e.appendChild(n)}function ii(t,e,n,r){null!==r?ri(t,e,n,r):si(t,e,n)}function oi(t,e){return pn(t)?t.parentNode(e):e.parentNode}function ai(t,e){if(2===t.type){const n=zs(t,e);return null===n?null:ci(n.indexOf(e,9)-9,n)}return 4===t.type||5===t.type?_r(t,e):null}function li(t,e,n,r){const s=ni(t,r,e);if(null!=s){const t=e[11],i=ai(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)ii(t,s,n[e],i);else ii(t,s,n,i)}}function ci(t,e){const n=9+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return _r(n,e);if(0===r)return ci(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return Ae(t)?ci(-1,t):br(t)}}{const r=e[16],s=r[6],i=$r(r),o=s.projection[n.projection];return null!=o?t(i,o):t(e,n.next)}}return null}(t,r)}return e[7]}function ui(t,e,n){const r=oi(t,e);r&&function(t,e,n,r){pn(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function hi(t,e,n,r,s,i,o){for(;null!=n;){const a=r[n.index],l=n.type;o&&0===e&&(a&&Dr(br(a),r),n.flags|=4),64!=(64&n.flags)&&(4===l||5===l?(hi(t,e,n.child,r,s,i,!1),Ws(e,t,s,a,i)):1===l?pi(t,e,r,n,s,i):Ws(e,t,s,a,i)),n=o?n.projectionNext:n.next}}function di(t,e,n,r,s,i){hi(n,r,t.node.child,e,s,i,!1)}function fi(t,e,n){pi(e[11],0,e,n,ni(t,n,e),ai(n.parent||e[6],e))}function pi(t,e,n,r,s,i){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Ws(e,t,s,a[l],i);else hi(t,e,a,o[3],s,i,!0)}function gi(t,e,n){pn(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function mi(t,e,n){pn(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class yi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,s,i=!1){for(;null!==r;){const o=n[r.index];if(null!==o&&s.push(br(o)),Ae(o))for(let e=9;e<o.length;e++){const n=o[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,s)}const a=r.type;if(4===a||5===a)t(e,n,r.child,s);else if(1===a){const e=n[16],i=e[6],o=$r(e);let a=i.projection[r.projection];null!==a&&null!==o&&t(o[1],o,a,s,!0)}r=i?r.projectionNext:r.next}return s}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Xs(this._lView[1],this._lView)}onDestroy(t){var e,n,r;e=this._lView[1],r=t,Ms(n=this._lView).push(r),e.firstCreatePass&&Us(e).push(n[7].length-1,null)}markForCheck(){Hs(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){js(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ue(!0);try{js(t,e,n)}finally{Ue(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,di(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class vi extends yi{constructor(t){super(t),this._view=t}detectChanges(){Vs(this._view)}checkNoChanges(){!function(t){Ue(!0);try{Vs(t)}finally{Ue(!1)}}(this._view)}get context(){return null}}let wi,bi,Si;function _i(t,e,n){return wi||(wi=class extends t{}),new wi(_r(e,n))}function xi(t,e,n,r){return bi||(bi=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ss(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[5];null!==r&&(n[5]=r.createEmbeddedView(e)),os(e,n,t);const s=new yi(n);return s._tViewNode=n[6],s}}),0===n.type?new bi(r,n,_i(e,n,r)):null}function Ci(t,e,n,r){let s;Si||(Si=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return _i(e,this._hostTNode,this._hostView)}get injector(){return new zn(this._hostTNode,this._hostView)}get parentInjector(){const t=jn(this._hostTNode,this._hostView),e=Cn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=xn(t),s=e,i=e[6];for(;r>1;)s=s[15],i=s[6],r--;return i}(t,this._hostView,this._hostTNode);return Sn(t)&&null!=n?new zn(n,e):new zn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-9}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,s){const i=n||this.parentInjector;if(!s&&null==t.ngModule&&i){const t=i.get(Qt,null);t&&(s=t)}const o=t.create(i,r,void 0,s);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ae(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Si(e,e[6],e[3]);r.detach(r.indexOf(t))}}const s=this._adjustIndex(e);return function(t,e,n,r){const s=9+r,i=n.length;r>0&&(n[s-1][4]=e),r<i-9?(e[4]=n[s],ne(n,9+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[5],r=e[3][3][16];16!=(16&r[2])&&e[16]!==r&&(t[2]|=1),null===n?t[5]=[e]:n.push(e)}(o,e);const a=e[5];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,s),Zs(r,n,!0,ci(s,this._lContainer)),t.attachToViewContainerRef(this),ne(this._lContainer[8],s,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);(function(t,e){const n=Qs(t,e);n&&Xs(n[1],n)})(this._lContainer,e),re(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Qs(this._lContainer,e);return n&&null!=re(this._lContainer[8],e)?new yi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const i=r[n.index];if(Ae(i))s=i,function(t,e){t[2]=-2}(s);else{let t;if(4===n.type)t=br(i);else if(t=r[11].createComment(""),De(r)){const e=r[11],s=_r(n,r);ri(e,oi(e,s),t,function(t,e){return pn(t)?t.nextSibling(e):e.nextSibling}(e,s))}else li(r[1],r,t,n);r[n.index]=s=Ds(i,r,t,n),Ns(r,s)}return new Si(s,n,r)}let Ei=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ai(),t})();const Ai=function(t=!1){return function(t,e,n){if(!n&&Te(t)){const n=Er(t.index,e);return new yi(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new yi(e[16],e):null}(je(),Oe(),t)},Fi=new Vt("Set Injector scope."),Ti={},Ii={},ki=[];let Di=void 0;function Pi(){return void 0===Di&&(Di=new Yt),Di}function Ri(t,e=null,n=null,r){return e=e||Pi(),new Oi(t,n,e,r)}class Oi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];e&&ee(e,n=>this.processProvider(n,t,e)),ee([t],t=>this.processInjectorType(t,[],s)),this.records.set(Bt,ji(void 0,this));const i=this.records.get(Fi);this.scope=null!=i?i.value:null,this.injectorDefTypes.forEach(t=>this.get(t)),this.source=r||("object"==typeof t?null:bt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Lt,n=at.Default){this.assertNotDestroyed();const r=$t(this);try{if(!(n&at.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(s=t)||"object"==typeof s&&s instanceof Vt)&&dt(t);e=n&&this.injectableDefInScope(n)?ji(Ni(t),Ti):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&at.Self?Pi():this.parent).get(t,e=n&at.Optional&&e===Lt?null:e)}catch(i){if("NullInjectorError"===i.name){if((i.ngTempTokenPath=i.ngTempTokenPath||[]).unshift(bt(t)),r)throw i;return function(t,e,n,r){const s=t.ngTempTokenPath;throw e.__source&&s.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let s=bt(e);if(Array.isArray(e))s=e.map(bt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):bt(r)))}s=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${t.replace(Mt,"\n  ")}`}("\n"+t.message,s,n,r),t.ngTokenPath=s,t.ngTempTokenPath=null,t}(i,t,"R3InjectorError",this.source)}throw i}finally{$t(r)}var s}toString(){const t=[];return this.records.forEach((e,n)=>t.push(bt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=Ct(t)))return!1;let r=pt(t);const s=null==r&&t.ngModule||void 0,i=void 0===s?t:s,o=-1!==n.indexOf(i);if(void 0!==s&&(r=pt(s)),null==r)return!1;if(this.injectorDefTypes.add(i),this.records.set(i,ji(r.factory,Ti)),null!=r.imports&&!o){let t;n.push(i);try{ee(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ee(r,t=>this.processProvider(t,n,r||ki))}}const a=r.providers;if(null!=a&&!o){const e=t;ee(a,t=>this.processProvider(t,e,a))}return void 0!==s&&void 0!==t.providers}processProvider(t,e,n){let r=Bi(t=Ct(t))?t:Ct(t&&t.provide);const s=function(t,e,n){return Vi(t)?ji(void 0,t.useValue):ji(Hi(t,e,n),Ti)}(t,e,n);if(Bi(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&Rr()}else{let e=this.records.get(r);e?void 0===e.multi&&Rr():(e=ji(void 0,Ti,!0),e.factory=()=>Zt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,s)}hydrate(t,e){var n;return e.value===Ii?function(t){throw new Error(`Cannot instantiate cyclic dependency! ${t}`)}(bt(t)):e.value===Ti&&(e.value=Ii,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Ni(t){const e=dt(t),n=null!==e?e.factory:xe(t);if(null!==n)return n;const r=pt(t);if(null!==r)return r.factory;if(t instanceof Vt)throw new Error(`Token ${bt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=se(e,"?");throw new Error(`Can't resolve all parameters for ${bt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[gt]||t[vt]||t[yt]&&t[yt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in v10. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Hi(t,e,n){let r=void 0;if(Bi(t))return Ni(Ct(t));if(Vi(t))r=()=>Ct(t.useValue);else if((s=t)&&s.useFactory)r=()=>t.useFactory(...Zt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Wt(Ct(t.useExisting));else{const s=Ct(t&&(t.useClass||t.provide));if(s||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${bt(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return Ni(s);r=()=>new s(...Zt(t.deps))}var s;return r}function ji(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Vi(t){return null!==t&&"object"==typeof t&&Ut in t}function Bi(t){return"function"==typeof t}const Li=function(t,e,n){return Ri({name:n},e,t,n)};let Mi=(()=>{class t{static create(t,e){return Array.isArray(t)?Li(t,e,""):Li(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Lt,t.NULL=new Yt,t.\u0275prov=ut({token:t,providedIn:"any",factory:()=>Wt(Bt)}),t.__NG_ELEMENT_ID__=-1,t})();const Ui=new Vt("AnalyzeForEntryComponents");let qi=new Map;const Ki=new Set;function $i(t){return"string"==typeof t?t:t.text()}function zi(t,e){let n=t.styles,r=t.classes,s=0;for(let i=0;i<e.length;i++){const t=e[i];"number"==typeof t?s=t:1==s?r=St(r,t):2==s&&(n=St(n,t+": "+e[++i]+";"))}null!==n&&(t.styles=n),null!==r&&(t.classes=r)}let Gi=null;function Wi(){if(!Gi){const t=kt.Symbol;if(t&&t.iterator)Gi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Gi=n)}}}return Gi}function Ji(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}class Zi{constructor(t){this.wrapped=t}static wrap(t){return new Zi(t)}static unwrap(t){return Zi.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Zi}}function Yi(t){return!!Qi(t)&&(Array.isArray(t)||!(t instanceof Map)&&Wi()in t)}function Qi(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Xi(t,e,n){return t[e]=n}function to(t,e){return t[e]}function eo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function no(t,e,n,r){const s=eo(t,e,n);return eo(t,e+1,r)||s}function ro(t,e,n,r){const s=Oe();return eo(s,$e(),e)&&Ts(nn(),t,e,Ne(),s,n,r),ro}function so(t,e,n,r,s,i,o,a){const l=Oe(),c=Ne(),u=t+19,h=c.firstCreatePass?function(t,e,n,r,s,i,o,a,l){const c=e.consts,u=is(e,n[6],t,0,o||null,Ir(c,a));vs(e,n,u,Ir(c,l)),sn(e,u);const h=u.tViews=ps(2,-1,r,s,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),d=gs(0,null,2,-1,null,null);return d.injectorIndex=u.injectorIndex,h.node=d,null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(t,c,l,e,n,r,s,i,o):c.data[u];Ve(h,!1);const d=l[11].createComment("");li(c,l,d,h),Dr(d,l),Ns(l,l[u]=Ds(d,l,d,h)),Ie(h)&&hs(c,l,h),null!=o&&ds(l,h,a)}function io(t,e=at.Default){const n=Oe();return null==n?Wt(t,e):Bn(je(),n,Ct(t),e)}function oo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const s=n[r];if(yn(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(s===e)return n[r+1];r+=2}}}return null}(je(),t)}function ao(){throw new Error("invalid")}function lo(t,e,n){const r=Oe();if(eo(r,$e(),e)){const s=nn();ys(Ne(),r,s,t,e,n)}return lo}function co(t,e,n,r,s){const i=e.inputs,o=s?"class":"style";Ks(t,n,i[o]||s&&i.className,o,r)}function uo(t,e,n,r){const s=Oe(),i=Ne(),o=19+t,a=s[11],l=s[o]=rs(e,a,Pe.lFrame.currentNamespace),c=i.firstCreatePass?function(t,e,n,r,s,i,o){const a=e.consts,l=Ir(a,i),c=is(e,n[6],t,3,s,l);return vs(e,n,c,Ir(a,o)),null!==c.mergedAttrs&&zi(c,c.mergedAttrs),null!==e.queries&&e.queries.elementStart(e,c),c}(t,i,s,0,e,n,r):i.data[o];Ve(c,!0);const u=c.mergedAttrs;null!==u&&mn(a,l,u);const h=c.classes;null!==h&&mi(a,l,h);const d=c.styles;null!==d&&gi(a,l,d),li(i,s,l,c),0===Pe.lFrame.elementDepthCount&&Dr(l,s),Pe.lFrame.elementDepthCount++,Ie(c)&&(hs(i,s,c),us(i,c,s)),null!==r&&ds(s,c)}function ho(){let t=je();Be()?Le():(t=t.parent,Ve(t,!1));const e=t;Pe.lFrame.elementDepthCount--;const n=Ne();n.firstCreatePass&&(sn(n,t),Fe(t)&&n.queries.elementEnd(t)),null!==e.classes&&function(t){return 0!=(16&t.flags)}(e)&&co(n,e,Oe(),e.classes,!0),null!==e.styles&&function(t){return 0!=(32&t.flags)}(e)&&co(n,e,Oe(),e.styles,!1)}function fo(t,e,n,r){uo(t,e,n,r),ho()}function po(t,e,n){const r=Oe(),s=Ne(),i=t+19,o=s.firstCreatePass?function(t,e,n,r,s){const i=e.consts,o=Ir(i,r),a=is(e,n[6],t,4,"ng-container",o);return null!==o&&zi(a,o),vs(e,n,a,Ir(i,s)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,s,r,e,n):s.data[i];Ve(o,!0);const a=r[i]=r[11].createComment("");li(s,r,a,o),Dr(a,r),Ie(o)&&(hs(s,r,o),us(s,o,r)),null!=n&&ds(r,o)}function go(){let t=je();const e=Ne();Be()?Le():(t=t.parent,Ve(t,!1)),e.firstCreatePass&&(sn(e,t),Fe(t)&&e.queries.elementEnd(t))}function mo(){return Oe()}function yo(t){return!!t&&"function"==typeof t.then}function vo(t){return!!t&&"function"==typeof t.subscribe}function wo(t,e,n=!1,r){const s=Oe(),i=Ne(),o=je();return function(t,e,n,r,s,i,o=!1,a){const l=Ie(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),u=Ms(e);let h=!0;if(3===r.type){const d=_r(r,e),f=a?a(d):he,p=f.target||d,g=u.length,m=a?t=>a(br(t[r.index])).target:r.index;if(pn(n)){let o=null;if(!a&&l&&(o=function(t,e,n,r){const s=t.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const t=s[i];if(t===n&&s[i+1]===r){const t=e[7],n=s[i+2];return t.length>n?t[n]:null}"string"==typeof t&&(i+=2)}return null}(t,e,s,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=i,o.__ngLastListenerFn__=i,h=!1;else{i=So(r,e,i,!1);const t=n.listen(f.name||p,s,i);u.push(i,t),c&&c.push(s,m,g,g+1)}}else i=So(r,e,i,!0),p.addEventListener(s,i,o),u.push(i),c&&c.push(s,m,g,o)}const d=r.outputs;let f;if(h&&null!==d&&(f=d[s])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(i),o=u.length;u.push(i,t),c&&c.push(s,r.index,o,-(o+1))}}}(i,s,s[11],o,t,e,n,r),wo}function bo(t,e,n){try{return!1!==e(n)}catch(r){return qs(t,r),!1}}function So(t,e,n,r){return function s(i){if(i===Function)return n;const o=2&t.flags?Er(t.index,e):e;0==(32&e[2])&&Hs(o);let a=bo(e,n,i),l=s.__ngNextListenerFn__;for(;l;)a=bo(e,l,i)&&a,l=l.__ngNextListenerFn__;return r&&!1===a&&(i.preventDefault(),i.returnValue=!1),a}}function _o(t=1){return function(t){return(Pe.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Pe.lFrame.contextLView))[8]}(t)}function xo(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let s=0;s<e.length;s++){const i=e[s];if("*"!==i){if(null===r?Lr(t,i,!0):Mr(r,i))return s}else n=s}return n}function Co(t){const e=Oe()[16][6];if(!e.projection){const n=e.projection=se(t?t.length:1,null),r=n.slice();let s=e.child;for(;null!==s;){const e=t?xo(s,t):0;null!==e&&(r[e]?r[e].projectionNext=s:n[e]=s,r[e]=s),s=s.next}}}let Eo=!1;function Ao(t){Eo=t}function Fo(t,e=0,n){const r=Oe(),s=Ne(),i=is(s,r[6],t,1,null,n||null);null===i.projection&&(i.projection=e),Le(),Eo||fi(s,r,i)}const To=[];function Io(t,e,n,r,s){const i=t[n+1],o=null===e;let a=r?Yr(i):Xr(i),l=!1;for(;0!==a&&(!1===l||o);){const n=t[a+1];ko(t[a],e)&&(l=!0,t[a+1]=r?es(n):Qr(n)),a=r?Yr(n):Xr(n)}l&&(t[n+1]=r?Qr(i):es(i))}function ko(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ae(t,e)>=0}const Do={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Po(t){return t.substring(Do.key,Do.keyEnd)}function Ro(t,e){const n=Do.textEnd;return n===e?-1:(e=Do.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Do.key=e,n),Oo(t,e,n))}function Oo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function No(t,e){return function(t,e,n,r){const s=Oe(),i=Ne(),o=ze(2);if(i.firstUpdatePass&&Bo(i,t,o,!0),e!==Kr&&eo(s,o,e)){let r;null==n&&(r=function(){const t=Pe.lFrame;return null===t?null:t.currentSanitizer}())&&(n=r),Uo(i,i.data[nn()+19],s,s[11],t,s[o+1]=function(t,e){return null==t||("function"==typeof e?t=e(t):"string"==typeof e?t+=e:"object"==typeof t&&(t=bt(Xn(t)))),t}(e,n),!0,o)}}(t,e,null),No}function Ho(t){!function(t,e,n,r){const s=Ne(),i=ze(2);s.firstUpdatePass&&Bo(s,null,i,!0);const o=Oe();if(n!==Kr&&eo(o,i,n)){const r=s.data[nn()+19];if($o(r,!0)&&!Vo(s,i)){let t=r.classes;"string"==typeof n&&(n=St(t,n)),co(s,r,o,n,!0)}else!function(t,e,n,r,s,i,o,a){s===Kr&&(s=To);let l=0,c=0,u=0<s.length?s[0]:null,h=0<i.length?i[0]:null;for(;null!==u||null!==h;){const o=l<s.length?s[l+1]:void 0,d=c<i.length?i[c+1]:void 0;let f=null,p=void 0;u===h?(l+=2,c+=2,o!==d&&(f=h,p=d)):null===h||null!==u&&u<h?(l+=2,f=u):(c+=2,f=h,p=d),null!==f&&Uo(t,e,n,r,f,p,!0,a),u=l<s.length?s[l]:null,h=c<i.length?i[c]:null}}(s,r,o,o[11],o[i+1],o[i+1]=function(t,e,n){if(null==n||""===n)return To;const r=[];if(Array.isArray(n))for(let s=0;s<n.length;s++)t(r,n[s],!0);else if("object"==typeof n)if(n instanceof Map)n.forEach((e,n)=>t(r,n,e));else if(n instanceof Set)n.forEach(e=>t(r,e,!0));else for(const s in n)n.hasOwnProperty(s)&&t(r,s,n[s]);else"string"==typeof n&&e(r,n);return r}(t,e,n),0,i)}}(ie,jo,t)}function jo(t,e){for(let n=function(t){return function(t){Do.key=0,Do.keyEnd=0,Do.value=0,Do.valueEnd=0,Do.textEnd=t.length}(t),Ro(t,Oo(t,0,Do.textEnd))}(e);n>=0;n=Ro(e,n))ie(t,Po(e),!0)}function Vo(t,e){return e>=t.expandoStartIndex}function Bo(t,e,n,r){const s=t.data;if(null===s[n+1]){const i=s[nn()+19],o=Vo(t,n);$o(i,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const s=function(t){const e=Pe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=r?e.residualClasses:e.residualStyles;if(null===s)0===(r?e.classBindings:e.styleBindings)&&(n=Mo(n=Lo(null,t,e,n,r),e.attrs,r),i=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==s)if(n=Lo(s,t,e,n,r),null===i){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Xr(r))return t[Yr(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Lo(null,t,e,n[1],r),n=Mo(n,e.attrs,r),function(t,e,n,r){t[Yr(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else i=function(t,e,n){let r=void 0;const s=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<s;i++)r=Mo(r,t[i].hostAttrs,n);return Mo(r,e.attrs,n)}(t,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),n}(s,i,e,r),function(t,e,n,r,s,i){let o=i?e.classBindings:e.styleBindings,a=Yr(o),l=Xr(o);t[r]=n;let c,u=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ae(t,c)>0)&&(u=!0)}else c=n;if(s)if(0!==l){const e=Yr(t[a+1]);t[r+1]=Zr(e,a),0!==e&&(t[e+1]=ts(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Zr(a,0),0!==a&&(t[a+1]=ts(t[a+1],r)),a=r;else t[r+1]=Zr(l,0),0===a?a=r:t[l+1]=ts(t[l+1],r),l=r;u&&(t[r+1]=Qr(t[r+1])),Io(t,c,r,!0),Io(t,c,r,!1),function(t,e,n,r,s){const i=s?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&ae(i,e)>=0&&(n[r+1]=es(n[r+1]))}(e,c,t,r,i),o=Zr(a,l),i?e.classBindings=o:e.styleBindings=o}(s,i,e,n,o,r)}}function Lo(t,e,n,r,s){let i=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(i=e[a],r=Mo(r,i.hostAttrs,s),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Mo(t,e,n){const r=n?1:2;let s=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?s=o:s===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ie(t,o,!!n||e[++i]))}return void 0===t?null:t}function Uo(t,e,n,r,s,i,o,a){if(3!==e.type)return;const l=t.data,c=l[a+1];Ko(1==(1&c)?qo(l,e,n,s,Xr(c),o):void 0)||(Ko(i)||function(t){return 2==(2&t)}(c)&&(i=qo(l,null,n,s,a,o)),function(t,e,n,r,s){const i=pn(t);if(e)s?i?t.addClass(n,r):n.classList.add(r):i?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==s?i?t.removeStyle(n,r,e):n.style.removeProperty(r):i?t.setStyle(n,r,s,e):n.style.setProperty(r,s)}}(r,o,Sr(nn(),n),s,i))}function qo(t,e,n,r,s,i){const o=null===e;let a=void 0;for(;s>0;){const e=t[s],i=Array.isArray(e),l=i?e[1]:e,c=null===l;let u=n[s+1];u===Kr&&(u=c?To:void 0);let h=c?oe(u,r):l===r?u:void 0;if(i&&!Ko(h)&&(h=oe(e,r)),Ko(h)&&(a=h,o))return a;const d=t[s+1];s=o?Yr(d):Xr(d)}if(null!==e){let t=i?e.residualClasses:e.residualStyles;null!=t&&(a=oe(t,r))}return a}function Ko(t){return void 0!==t}function $o(t,e){return 0!=(t.flags&(e?16:32))}function zo(t,e=""){const n=Oe(),r=Ne(),s=t+19,i=r.firstCreatePass?is(r,n[6],t,3,null,null):r.data[s],o=n[s]=Js(e,n[11]);li(r,n,o,i),Ve(i,!1)}function Go(t){return Wo("",t,""),Go}function Wo(t,e,n){const r=Oe(),s=function(t,e,n,r){return eo(t,$e(),n)?e+En(n)+r:Kr}(r,t,e,n);return s!==Kr&&$s(r,nn(),s),Wo}function Jo(t,e,n){const r=Oe();if(eo(r,$e(),e)){const s=nn();ys(Ne(),r,s,t,e,n,!0)}return Jo}function Zo(t,e){const n=Ar(t)[1],r=n.data.length-1;sn(n,{directiveStart:r,directiveEnd:r+1})}function Yo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let s=void 0;if(ke(t))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");s=e.\u0275dir}if(s){if(n){r.push(s);const e=t;e.inputs=Qo(t.inputs),e.declaredInputs=Qo(t.declaredInputs),e.outputs=Qo(t.outputs);const n=s.hostBindings;n&&ea(t,n);const i=s.viewQuery,o=s.contentQueries;i&&Xo(t,i),o&&ta(t,o),ct(t.inputs,s.inputs),ct(t.declaredInputs,s.declaredInputs),ct(t.outputs,s.outputs),e.afterContentChecked=e.afterContentChecked||s.afterContentChecked,e.afterContentInit=t.afterContentInit||s.afterContentInit,e.afterViewChecked=t.afterViewChecked||s.afterViewChecked,e.afterViewInit=t.afterViewInit||s.afterViewInit,e.doCheck=t.doCheck||s.doCheck,e.onDestroy=t.onDestroy||s.onDestroy,e.onInit=t.onInit||s.onInit}const e=s.features;if(e)for(let r=0;r<e.length;r++){const s=e[r];s&&s.ngInherit&&s(t),s===Yo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const s=t[r];s.hostVars=e+=s.hostVars,s.hostAttrs=wn(s.hostAttrs,n=wn(n,s.hostAttrs))}}(r)}function Qo(t){return t===he?{}:t===de?[]:t}function Xo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ta(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,s)=>{e(t,r,s),n(t,r,s)}:e}function ea(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}class na{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ra(){return sa.ngInherit=!0,sa}function sa(t){t.type.prototype.ngOnChanges&&(t.setInput=ia,t.onChanges=function(){const t=oa(this),e=t&&t.current;if(e){const n=t.previous;if(n===he)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}})}function ia(t,e,n,r){const s=oa(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:he,current:null}),i=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[n],l=o[a];i[a]=new na(l&&l.currentValue,e,o===he),t[r]=e}function oa(t){return t.__ngSimpleChanges__||null}function aa(t,e,n,r,s){if(t=Ct(t),Array.isArray(t))for(let i=0;i<t.length;i++)aa(t[i],e,n,r,s);else{const i=Ne(),o=Oe();let a=Bi(t)?t:Ct(t.provide),l=Hi(t);const c=je(),u=65535&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>16;if(t.useClass||Bi(t)){const n=(t.useClass||t).prototype.ngOnDestroy;n&&(i.destroyHooks||(i.destroyHooks=[])).push(e.length,n)}if(Bi(t)||!t.multi){const t=new hn(l,s,io),r=ca(a,e,s?u:u+d,h);-1==r?(Vn(On(c,o),i,a),e.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=65536),n.push(t),o.push(t)):(n[r]=t,o[r]=t)}else{const t=ca(a,e,u+d,h),f=ca(a,e,u,u+d),p=t>=0&&n[t],g=f>=0&&n[f];if(s&&!g||!s&&!p){Vn(On(c,o),i,a);const t=function(t,e,n,r,s){const i=new hn(t,n,io);return i.multi=[],i.index=e,i.componentProviders=0,la(i,s,r&&!n),i}(s?ha:ua,n.length,s,r,l);!s&&g&&(n[f].providerFactory=t),e.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=65536),n.push(t),o.push(t)}else la(n[s?f:t],l,!s&&r);!s&&r&&g&&n[f].componentProviders++}}}function la(t,e,n){t.multi.push(e),n&&t.componentProviders++}function ca(t,e,n,r){for(let s=n;s<r;s++)if(e[s]===t)return s;return-1}function ua(t,e,n,r){return da(this.multi,[])}function ha(t,e,n,r){const s=this.multi;let i;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=qn(n,n[1],this.providerFactory.index,r);i=e.slice(0,t),da(s,i);for(let n=t;n<e.length;n++)i.push(e[n])}else i=[],da(s,i);return i}function da(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function fa(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ne();if(r.firstCreatePass){const s=ke(t);aa(n,r.data,r.blueprint,s,!0),aa(e,r.data,r.blueprint,s,!1)}}(n,r?r(t):t,e)}}class pa{}class ga{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${bt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ma=(()=>{class t{}return t.NULL=new ga,t})(),ya=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>va(t),t})();const va=function(t){return _i(t,je(),Oe())};class wa{}const ba=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let Sa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>_a(),t})();const _a=function(){const t=Oe(),e=Er(je().index,t);return function(t){const e=t[11];if(pn(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Ee(e)?e:t)};let xa=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>null}),t})();class Ca{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ea=new Ca("9.0.0");class Aa{constructor(){}supports(t){return Yi(t)}create(t){return new Ta(t)}}const Fa=(t,e)=>e;class Ta{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Fa}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const i=!n||e&&e.currentIndex<Pa(n,r,s)?e:n,o=Pa(i,r,s),a=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(e=e._next,null==i.previousIndex)r++;else{s||(s=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<s.length?s[n]:s[n]=0,i=r+n;e<=i&&i<t&&(s[n]=r+1)}s[i.previousIndex]=e-t}}o!==a&&t(i,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Yi(t))throw new Error(`Error trying to diff '${bt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,s=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==s&&Ji(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,n,r,e)),Ji(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,e),i=!0),s=s._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Wi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==s&&Ji(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,t,r,e)),Ji(s.item,t)||this._addIdentityChange(s,t)):(s=this._mismatch(s,t,r,e),i=!0),s=s._next,e++}),this.length=e;return this._truncate(s),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ji(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ji(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):t=this._addAfter(new Ia(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Da),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Da),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ia{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ka{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ji(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Da{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ka,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Pa(t,e,n){const r=t.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+e+s}class Ra{constructor(){}supports(t){return t instanceof Map||Qi(t)}create(){return new Oa}}class Oa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Qi(t)))throw new Error(`Error trying to diff '${bt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new Na(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Ji(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Na{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Ha=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ot,new st]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new Aa])}),t})(),ja=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ot,new st]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new Ra])}),t})();const Va=[new Ra],Ba=new Ha([new Aa]),La=new ja(Va);let Ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ua(t,ya),t})();const Ua=function(t,e){return xi(t,e,je(),Oe())};let qa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ka(t,ya),t})();const Ka=function(t,e){return Ci(t,e,je(),Oe())},$a={};function za(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ga=new Vt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Fn});class Wa extends pa{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(qr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return za(this.componentDef.inputs)}get outputs(){return za(this.componentDef.outputs)}create(t,e,n,r){const s=(r=r||this.ngModule)?function(t,e){return{get:(n,r,s)=>{const i=t.get(n,$a,s);return i!==$a||r===$a?i:e.get(n,r,s)}}}(t,r.injector):t,i=s.get(wa,gn),o=s.get(xa,null),a=i.createRenderer(null,this.componentDef),l=n?function(t,e,n){if(pn(t))return t.selectRootElement(e,n===ce.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):rs(this.componentDef.selectors[0][0]||"div",i.createRenderer(null,this.componentDef),null),c=this.componentDef.onPush?576:528,u="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),h={components:[],scheduler:Fn,clean:Ls,playerHandler:null,flags:0},d=ps(0,-1,null,1,0,null,null,null,null,null),f=ss(null,d,h,c,null,null,i,a,o,s),p=n&&l?Ea.full:null;let g,m;Qe(f,null);try{const t=function(t,e,n,r,s,i,o){const a=n[1];n[19]=t;const l=is(a,null,0,3,null,null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(zi(l,c),null!==t&&(mn(s,t,c),null!==l.classes&&mi(s,t,l.classes),null!==l.styles&&gi(s,t,l.styles)));const u=r.createRenderer(t,e);null!==t&&i&&(pn(s)?s.setAttribute(t,"ng-version",i):t.setAttribute("ng-version",i));const h=ss(n,fs(e),null,e.onPush?64:16,n[19],l,r,u,null);return a.firstCreatePass&&(Vn(On(l,n),a,e.type),xs(a,l),Es(l,n.length,1)),Ns(n,h),n[19]=h}(l,this.componentDef,f,i,a,p);m=xr(f[1],0),e&&(m.projection=e.map(t=>Array.from(t))),g=function(t,e,n,r,s){const i=n[1],o=function(t,e,n){const r=je();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),_s(t,r,1),As(t,e,n));const s=qn(e,t,e.length-1,r);Dr(s,e);const i=_r(r,e);return i&&Dr(i,e),s}(i,n,e);r.components.push(o),t[8]=o,s&&s.forEach(t=>t(o,e)),e.contentQueries&&e.contentQueries(1,o,n.length-1);const a=je();if(i.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){rn(a.index-19);const t=n[1];ws(t,e),bs(t,n,e.hostVars),Ss(e,o)}return o}(t,this.componentDef,f,h,[Zo]),os(d,f,null)}finally{en()}const y=new Ja(this.componentType,g,_i(ya,m,f),f,m);return n&&!u||(y.hostView._tViewNode.child=m),y}}class Ja extends class{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new vi(r),this.hostView._tViewNode=function(t,e,n,r){let s=t.node;return null==s&&(t.node=s=gs(0,null,2,-1,null,null)),r[6]=s}(r[1],0,0,r),this.componentType=t}get injector(){return new zn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Za=void 0;var Ya=["en",[["a","p"],["AM","PM"],Za],[["AM","PM"],Za,Za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Za,"{1} 'at' {0}",Za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Qa={};function Xa(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=tl(e);if(n)return n;const r=e.split("-")[0];if(n=tl(r),n)return n;if("en"===r)return Ya;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[el.PluralCase]}function tl(t){return t in Qa||(Qa[t]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[t]),Qa[t]}const el=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),nl=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,rl=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,sl=/\ufffd(\/?[#*!]\d+):?\d*\ufffd/gi,il=/\ufffd(\d+):?\d*\ufffd/gi,ol=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi;function al(t){if(!t)return[];let e=0;const n=[],r=[],s=/[{}]/g;let i;for(s.lastIndex=0;i=s.exec(t);){const s=i.index;if("}"==i[0]){if(n.pop(),0==n.length){const n=t.substring(e,s);nl.test(n)?r.push(ll(n)):r.push(n),e=s+1}}else{if(0==n.length){const n=t.substring(e,s);r.push(n),e=s+1}n.push("{")}}const o=t.substring(e);return r.push(o),r}function ll(t){const e=[],n=[];let r=1,s=0;const i=al(t=t.replace(nl,(function(t,e,n){return r="select"===n?0:1,s=parseInt(e.substr(1),10),""})));for(let o=0;o<i.length;){let t=i[o++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const s=al(i[o++]);e.length>n.length&&n.push(s)}return{type:r,mainBinding:s,cases:e,values:n}}function cl(t){let e,n,r="",s=0,i=!1;for(;null!==(e=rl.exec(t));)i?e[0]===`\ufffd/*${n}\ufffd`&&(s=e.index,i=!1):(r+=t.substring(s,e.index+e[0].length),n=e[1],i=!0);return r+=t.substr(s),r}function ul(t,e,n,r=null){const s=[null,null],i=t.split(il);let o=0;for(let a=0;a<i.length;a++){const t=i[a];if(1&a){const e=parseInt(t,10);s.push(-1-e),o|=pl(e)}else""!==t&&s.push(t)}return s.push(e<<2|(n?1:0)),n&&s.push(n,r),s[0]=o,s[1]=s.length-2,s}function hl(t,e=0){let n;e|=pl(t.mainBinding);for(let r=0;r<t.values.length;r++){const s=t.values[r];for(let t=0;t<s.length;t++){const r=s[t];if("string"==typeof r)for(;n=il.exec(r);)e|=pl(parseInt(n[1],10));else e=hl(r,e)}}return e}const dl=[];let fl=-1;function pl(t){return 1<<Math.min(t,31)}const gl=[];let ml;function yl(t,e,n,r,s){const i=e.next;r||(r=n),r===n&&e!==n.child?(e.next=n.child,n.child=e):r!==n&&e!==r.next?(e.next=r.next,r.next=e):e.next=null,n!==s[6]&&(e.parent=n);let o=e.next;for(;o;)o.next===e&&(o.next=i),o=o.next;if(1===e.type)return fi(t,s,e),e;li(t,s,_r(e,s),e);const a=s[e.index];return 0!==e.type&&Ae(a)&&li(t,s,a[7],e),e}function vl(t,e,n,r,s,i){const o=je();e[n+19]=s;const a=is(t,e[6],n,r,i,null);return o&&o.next===a&&(o.next=null),a}function wl(t,e,n,r){const s=r[11];let i=null,o=null;const a=[];for(let l=0;l<e.length;l++){const c=e[l];if("string"==typeof c){const t=Js(c,s),u=e[++l];o=i,i=vl(n,r,u,3,t,null),a.push(u),Le()}else if("number"==typeof c)switch(7&c){case 1:const s=c>>>17;let u;u=s===t?r[6]:xr(n,s),o=yl(n,i,u,o,r);break;case 0:const h=c>>>3;a.push(h),o=i,i=xr(n,h),i&&Ve(i,3===i.type);break;case 5:o=i=xr(n,c>>>3),Ve(i,!1);break;case 4:Ts(c>>>3,e[++l],e[++l],n,r);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}else switch(c){case Jr:const t=e[++l],u=e[++l],h=s.createComment(t);o=i,i=vl(n,r,u,5,h,null),a.push(u),Dr(h,r),i.activeCaseIndex=null,Le();break;case Wr:const d=e[++l],f=e[++l];o=i,i=vl(n,r,f,3,s.createElement(d),d),a.push(f);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}}return Le(),a}function bl(t,e,n,r){const s=xr(t,n),i=Sr(n,e);i&&ui(e[11],i);const o=Cr(e,n);if(Ae(o)){const t=o;0!==s.type&&ui(e[11],t[7])}r&&(s.flags|=64)}function Sl(t,e,n){(function(t,e,n){const r=Ne();dl[++fl]=t,Ao(!0),r.firstCreatePass&&null===r.data[t+19]&&function(t,e,n,r,s){const i=e.blueprint.length-19;ml=0;const o=je(),a=Be()?o:o&&o.parent;let l=a&&a!==t[6]?a.index-19:n,c=0;gl[c]=l;const u=[];n>0&&o!==a&&u.push(o.index<<3|0);const h=[],d=[],f=(p=function(t,e){if("number"!=typeof e)return cl(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return cl(t.substring(n,r))}}(r,s),p.replace(Dl," ")).split(sl);var p;for(let g=0;g<f.length;g++){let t=f[g];if(1&g)if("/"===t.charAt(0)){if("#"===t.charAt(1)){const e=parseInt(t.substr(2),10);l=gl[--c],u.push(e<<3|5)}}else{const e=parseInt(t.substr(1),10);u.push(e<<3|0,l<<17|1),"#"===t.charAt(0)&&(gl[++c]=l=e)}else{const e=al(t);for(let t=0;t<e.length;t++)if(1&t){const n=i+ml++;u.push(Jr,"",n,l<<17|1);const r=e[t],s=hl(r);Tl(d,r,n,n);const o=d.length-1;h.push(pl(r.mainBinding),3,-1-r.mainBinding,n<<2|2,o,s,2,n<<2|3,o)}else if(""!==e[t]){const n=e[t],r=n.match(il),s=i+ml++;u.push(r?"":n,s,l<<17|1),r&&te(ul(n,s),h)}}}ml>0&&function(t,e,n){if(n>0&&t.firstCreatePass){for(let r=0;r<n;r++)t.blueprint.push(null),t.data.push(null),e.push(null);t.expandoInstructions?t.expandoInstructions.push(n):t.expandoStartIndex+=n}}(e,t,ml),e.data[n+19]={vars:ml,create:u,update:h,icus:d.length?d:null}}(Oe(),r,t,e,n)})(t,e,n),function(){const t=Oe();!function(t,e){const n=dl[fl--],r=t.data[n+19],s=je(),i=wl(n,r.create,t,e);let o=n+1;for(;o<=s.index-19;){-1===i.indexOf(o)&&bl(t,e,o,!0);const n=xr(t,o);!n||3!==n.type&&4!==n.type||null===n.localNames||(o+=n.localNames.length>>1),o++}}(Ne(),t),Ao(!1)}()}function _l(t,e){!function(t,e,n,r){const s=je().index-19,i=[];for(let o=0;o<r.length;o+=2){const a=r[o],l=r[o+1].split(ol);for(let r=0;r<l.length;r++){const o=l[r];if(1&r)throw new Error("ICU expressions are not yet supported in attributes");if(""!==o)if(o.match(il))e.firstCreatePass&&null===e.data[n+19]&&te(ul(o,s,a),i);else{const n=xr(e,s);3===n.type&&Ts(s,a,o,e,t);const r=null!==n.inputs&&n.inputs[a];r&&Ks(e,t,r,a,o)}}}e.firstCreatePass&&null===e.data[n+19]&&(e.data[n+19]=i)}(Oe(),Ne(),t,e)}let xl=0,Cl=0;function El(t){return eo(Oe(),$e(),t)&&(xl|=1<<Cl),Cl++,El}function Al(t){if(Cl){const e=Ne(),n=e.data[t+19];let r,s=null;Array.isArray(n)?r=n:(r=n.update,s=n.icus);const i=Ke()-Cl-1,o=Oe();!function t(e,n,r,s,i,o,a=!1){let l=!1;for(let c=0;c<e.length;c++){const u=e[c],h=e[++c];if(a||u&s){let a="";for(let u=c+1;u<=c+h;u++){const c=e[u];if("string"==typeof c)a+=c;else if("number"==typeof c)if(c<0)a+=En(o[r-c]);else{const h=c>>>2;let d,f,p;switch(3&c){case 1:ys(i,o,h,e[++u],a,e[++u]);break;case 0:$s(o,h,a);break;case 2:if(d=e[++u],f=n[d],p=xr(i,h),null!==p.activeCaseIndex){const t=f.remove[p.activeCaseIndex];for(let e=0;e<t.length;e++){const r=t[e];switch(7&r){case 3:bl(i,o,r>>>3,!1);break;case 6:const s=xr(i,t[e+1]>>>3).activeCaseIndex;null!==s&&te(n[r>>>3].remove[s],t)}}}const c=Fl(f,a);p.activeCaseIndex=-1!==c?c:null,c>-1&&(wl(-1,f.create[c],i,o),l=!0);break;case 3:d=e[++u],f=n[d],p=xr(i,h),null!==p.activeCaseIndex&&t(f.update[p.activeCaseIndex],n,r,s,i,o,l)}}}}c+=h}}(r,s,i,xl,e,o),xl=0,Cl=0}}function Fl(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){switch(Xa(e)(t)){case 0:return"zero";case 1:return"one";case 2:return"two";case 3:return"few";case 4:return"many";default:return"other"}}(e,Pl);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return n}function Tl(t,e,n,r){const s=[],i=[],o=[],a=[],l=[];for(let c=0;c<e.values.length;c++){const u=e.values[c],h=[];for(let t=0;t<u.length;t++){const e=u[t];if("string"!=typeof e){const n=h.push(e)-1;u[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}const d=Il(u.join(""),n,h,t,r);s.push(d.create),i.push(d.remove),o.push(d.update),a.push(d.vars),l.push(d.childIcus)}t.push({type:e.type,vars:a,childIcus:l,cases:e.cases,create:s,remove:i,update:o}),ml+=Math.max(...a)}function Il(t,e,n,r,s){const i=new rr(fn()).getInertBodyElement(t);if(!i)throw new Error("Unable to generate inert body element");const o={vars:0,childIcus:[],create:[],remove:[],update:[]};return function t(e,n,r,s,i,o){if(e){const a=[];for(;e;){const l=e.nextSibling,c=o+ ++n.vars;switch(e.nodeType){case Node.ELEMENT_NODE:const l=e,u=l.tagName.toLowerCase();if(pr.hasOwnProperty(u)){n.create.push(Wr,u,c,r<<17|1);const a=l.attributes;for(let t=0;t<a.length;t++){const e=a.item(t),r=e.name.toLowerCase();e.value.match(il)?yr.hasOwnProperty(r)&&te(gr[r]?ul(e.value,c,e.name,or):mr[r]?ul(e.value,c,e.name,ar):ul(e.value,c,e.name),n.update):n.create.push(c<<3|4,e.name,e.value)}t(e.firstChild,n,c,s,i,o),n.remove.push(c<<3|3)}else n.vars--;break;case Node.TEXT_NODE:const h=e.textContent||"",d=h.match(il);n.create.push(d?"":h,c,r<<17|1),n.remove.push(c<<3|3),d&&te(ul(h,c),n.update);break;case Node.COMMENT_NODE:const f=kl.exec(e.textContent||"");if(f){const t=parseInt(f[1],10);n.create.push(Jr,"",c,r<<17|1),a.push([s[t],c])}else n.vars--;break;default:n.vars--}e=l}for(let t=0;t<a.length;t++){const e=a[t][0],r=a[t][1];Tl(i,e,r,o+n.vars);const s=i.length-1;n.vars+=Math.max(...i[s].vars),n.childIcus.push(s);const l=hl(e);n.update.push(pl(e.mainBinding),3,-1-e.mainBinding,r<<2|2,s,l,2,r<<2|3,s),n.remove.push(s<<3|6,r<<3|3)}}}((a=i,("content"in a&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(a)?a.content:null)||i).firstChild,o,e,n,r,s),o;var a}const kl=/\ufffd(\d+)\ufffd/,Dl=/\uE500/g;let Pl="en-US";function Rl(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Pl=t.toLowerCase().replace(/_/g,"-"))}const Ol=new Map,Nl={provide:ma,useClass:class extends ma{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=_e(t);return new Wa(e,this.ngModule)}},deps:[Qt]};class Hl extends Qt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[];const n=Ce(t),r=t[Nt]||null;r&&Rl(r),this._bootstrapComponents=kn(n.bootstrap),this._r3Injector=Ri(t,e,[{provide:Qt,useValue:this},Nl],bt(t)),this.instance=this.get(t)}get(t,e=Mi.THROW_IF_NOT_FOUND,n=at.Default){return t===Mi||t===Qt||t===Bt?this:this._r3Injector.get(t,e,n)}get componentFactoryResolver(){return this.get(ma)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class jl extends Xt{constructor(t){super(),this.moduleType=t,null!==Ce(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${bt(e)} vs ${bt(e.name)}`)})(t,Ol.get(t),e),Ol.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new Hl(this.moduleType,t)}}function Vl(t,e,n){const r=qe()+t,s=Oe();return s[r]===Kr?Xi(s,r,n?e.call(n):e()):to(s,r)}function Bl(t,e,n,r){return function(t,e,n,r,s,i){const o=e+n;return eo(t,o,s)?Xi(t,o+1,i?r.call(i,s):r(s)):to(t,o+1)}(Oe(),qe(),t,e,n,r)}function Ll(t,e,n,r,s,i,o){const a=e+n;return no(t,a,s,i)?Xi(t,a+2,o?r.call(o,s,i):r(s,i)):to(t,a+2)}function Ml(t,e){const n=Ne();let r;const s=t+19;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[s]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(s,r.onDestroy)):r=n.data[s];const i=(r.factory||(r.factory=xe(r.type)))();return function(t,e,n,r){const s=n+19;s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),e[s]=r}(n,Oe(),t,i),i}function Ul(t,e,n,r){const s=Oe(),i=Cr(s,t);return function(t,e){return Zi.isWrapped(e)&&(e=Zi.unwrap(e),t[Ke()]=Kr),e}(s,function(t,e){return t[1].data[e+19].pure}(s,t)?Ll(s,qe(),e,i.transform,n,r,i):i.transform(n,r))}class ql extends E{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,s=t=>null,i=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(s=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(i=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(s=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(i=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,s,i);return t instanceof h&&t.add(o),o}}function Kl(){return this._results[Wi()]()}class $l{constructor(){this.dirty=!0,this._results=[],this.changes=new ql,this.length=0;const t=Wi(),e=$l.prototype;e[t]||(e[t]=Kl)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?(n===e&&(n=e.slice(0,r)),t(s,n)):n!==e&&n.push(s)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class zl{constructor(t){this.queryList=t,this.matches=null}clone(){return new zl(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gl{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Gl(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==ic(t,e).matches&&this.queries[e].setDirty()}}class Wl{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Jl{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new Jl(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Zl{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Zl(this.metadata)):null}isApplyingToNode(t){return this._appliesToNextNode&&!1===this.metadata.descendants?this._declarationNodeIndex===(t.parent?t.parent.index:-1):this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let r=0;r<n.length;r++)this.matchTNodeWithReadOption(t,e,Yl(e,n[r]))}else{const n=this.metadata.predicate;n===Ma?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Un(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ya||r===qa||r===Ma&&0===e.type)this.addMatch(e.index,-2);else{const n=Un(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Yl(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ql(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?_i(ya,t,e):0===t.type?xi(Ma,ya,t,e):null}(e,t):-2===n?function(t,e,n){return n===ya?_i(ya,e,t):n===Ma?xi(Ma,ya,e,t):n===qa?Ci(qa,ya,e,t):void 0}(t,e,r):qn(t,t[1],n,e)}function Xl(t,e,n,r){const s=e[5].queries[r];if(null===s.matches){const r=t.data,i=n.matches,o=[];for(let t=0;t<i.length;t+=2){const s=i[t];o.push(s<0?null:Ql(e,r[s],i[t+1],n.metadata.read))}s.matches=o}return s.matches}function tc(t){const e=Oe(),n=Ne(),r=We();Je(r+1);const s=ic(n,r);if(t.dirty&&Fr(e)===s.metadata.isStatic){if(null===s.matches)t.reset([]);else{const i=s.crossesNgTemplate?function t(e,n,r,s){const i=e.queries.getByIndex(r),o=i.matches;if(null!==o){const a=Xl(e,n,i,r);for(let e=0;e<o.length;e+=2){const r=o[e];if(r>0)s.push(a[e/2]);else{const i=o[e+1],a=n[-r];for(let e=9;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,i,s)}if(null!==a[5]){const e=a[5];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,i,s)}}}}}return s}(n,e,r,[]):Xl(n,e,s,r);t.reset(i),t.notifyOnChanges()}return!0}return!1}function ec(t,e,n,r){!function(t,e,n,r,s,i,o,a){t.firstCreatePass&&(sc(t,new Wl(n,r,!1,s),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),rc(t,e)}(Ne(),Oe(),e,n,r,0,je(),t)}function nc(){return t=Oe(),e=We(),t[5].queries[e].queryList;var t,e}function rc(t,e){const n=new $l;!function(t,e,n,r){const s=Ms(e);s.push(n),t.firstCreatePass&&Us(t).push(r,s.length-1)}(t,e,n,n.destroy),null===e[5]&&(e[5]=new Gl),e[5].queries.push(new zl(n))}function sc(t,e,n){null===t.queries&&(t.queries=new Jl),t.queries.track(new Zl(e,n))}function ic(t,e){return t.queries.getByIndex(e)}function oc(t,e){return xi(Ma,ya,t,e)}const ac=new Vt("Application Initializer");let lc=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();yo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Wt(ac,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const cc=new Vt("AppId"),uc={provide:cc,useFactory:function(){return`${hc()}${hc()}${hc()}`},deps:[]};function hc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const dc=new Vt("Platform Initializer"),fc=new Vt("Platform ID"),pc=new Vt("appBootstrapListener");let gc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const mc=new Vt("LocaleId"),yc=new Vt("DefaultCurrencyCode");class vc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const wc=function(t){return new jl(t)},bc=wc,Sc=function(t){return Promise.resolve(wc(t))},_c=function(t){const e=wc(t),n=kn(Ce(t).declarations).reduce((t,e)=>{const n=_e(e);return n&&t.push(new Wa(n)),t},[]);return new vc(e,n)},xc=_c,Cc=function(t){return Promise.resolve(_c(t))};let Ec=(()=>{class t{constructor(){this.compileModuleSync=bc,this.compileModuleAsync=Sc,this.compileModuleAndAllComponentsSync=xc,this.compileModuleAndAllComponentsAsync=Cc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Ac=new Vt("compilerOptions"),Fc=(()=>Promise.resolve(0))();function Tc(t){"undefined"==typeof Zone?Fc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ic{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ql(!1),this.onMicrotaskEmpty=new ql(!1),this.onStable=new ql(!1),this.onError=new ql(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=kt.requestAnimationFrame,e=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(kt,()=>{t.lastRequestAnimationFrameId=-1,Rc(t),Pc(t)}),Rc(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,s,i,o,a)=>{try{return Oc(t),n.invokeTask(s,i,o,a)}finally{e&&"eventTask"===i.type&&e(),Nc(t)}},onInvoke:(e,n,r,s,i,o,a)=>{try{return Oc(t),e.invoke(r,s,i,o,a)}finally{Nc(t)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Rc(t),Pc(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ic.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ic.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+r,t,Dc,kc,kc);try{return s.runTask(i,e,n)}finally{s.cancelTask(i)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function kc(){}const Dc={};function Pc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Rc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Oc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nc(t){t._nesting--,Pc(t)}class Hc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ql,this.onMicrotaskEmpty=new ql,this.onStable=new ql,this.onError=new ql}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let jc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ic.assertNotInAngularZone(),Tc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Tc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Wt(Ic))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Vc=(()=>{class t{constructor(){this._applications=new Map,Mc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Mc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Bc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Lc,Mc=new Bc,Uc=function(t,e,n){const r=new jl(n);if(0===qi.size)return Promise.resolve(r);const s=function(t){const e=[];return t.forEach(t=>t&&e.push(...t)),e}(t.get(Ac,[]).concat(e).map(t=>t.providers));if(0===s.length)return Promise.resolve(r);const i=function(){const t=kt.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),o=Mi.create({providers:s}).get(i.ResourceLoader);return function(t){const e=[],n=new Map;function r(t){let e=n.get(t);if(!e){const r=(t=>Promise.resolve(o.get(t)))(t);n.set(t,e=r.then($i))}return e}return qi.forEach((t,n)=>{const s=[];t.templateUrl&&s.push(r(t.templateUrl).then(e=>{t.template=e}));const i=t.styleUrls,o=t.styles||(t.styles=[]),a=t.styles.length;i&&i.forEach((e,n)=>{o.push(""),s.push(r(e).then(r=>{o[a+n]=r,i.splice(i.indexOf(e),1),0==i.length&&(t.styleUrls=void 0)}))});const l=Promise.all(s).then(()=>function(t){Ki.delete(t)}(n));e.push(l)}),qi=new Map,Promise.all(e).then(()=>{})}().then(()=>r)};const qc=new Vt("AllowMultipleToken");class Kc{constructor(t,e){this.name=t,this.token=e}}function $c(t,e,n=[]){const r=`Platform: ${e}`,s=new Vt(r);return(e=[])=>{let i=zc();if(!i||i.injector.get(qc,!1))if(t)t(n.concat(e).concat({provide:s,useValue:!0}));else{const t=n.concat(e).concat({provide:s,useValue:!0},{provide:Fi,useValue:"platform"});!function(t){if(Lc&&!Lc.destroyed&&!Lc.injector.get(qc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Lc=t.get(Gc);const e=t.get(dc,null);e&&e.forEach(t=>t())}(Mi.create({providers:t,name:r}))}return function(t){const e=zc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(s)}}function zc(){return Lc&&!Lc.destroyed?Lc:null}let Gc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Hc:("zone.js"===t?void 0:t)||new Ic({enableLongStackTrace:nr(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Ic,useValue:n}];return n.run(()=>{const e=Mi.create({providers:r,parent:this.injector,name:t.moduleType.name}),s=t.create(e),i=s.injector.get(Yn,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return s.onDestroy(()=>Zc(this._modules,s)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{i.handleError(t)}})),function(t,e,n){try{const r=n();return yo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(i,n,()=>{const t=s.injector.get(lc);return t.runInitializers(),t.donePromise.then(()=>(Rl(s.injector.get(mc,"en-US")||"en-US"),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,e=[]){const n=Wc({},e);return Uc(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Jc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${bt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Wt(Mi))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Wc(t,e){return Array.isArray(e)?e.reduce(Wc,t):Object.assign(Object.assign({},t),e)}let Jc=(()=>{class t{constructor(t,e,n,r,s,i){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=nr(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new b(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new b(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ic.assertNotInAngularZone(),Tc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ic.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=W(o,a.pipe(t=>{return J()((e=et,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,X);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof pa?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Qt),s=n.create(Mi.NULL,[],e||n.selector,r);s.onDestroy(()=>{this._unloadComponent(s)});const i=s.injector.get(jc,null);return i&&s.injector.get(Vc).registerApplication(s.location.nativeElement,i),this._loadComponent(s),nr()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Zc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(pc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Zc(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Wt(Ic),Wt(gc),Wt(Mi),Wt(Yn),Wt(ma),Wt(lc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Zc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Yc{}class Qc{}const Xc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let tu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Xc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>eu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),s="NgFactory";return void 0===r&&(r="default",s=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+s]).then(t=>eu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Wt(Ec),Wt(Qc,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function eu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const nu=$c(null,"core",[{provide:fc,useValue:"unknown"},{provide:Gc,deps:[Mi]},{provide:Vc,deps:[]},{provide:gc,deps:[]}]),ru=[{provide:Jc,useClass:Jc,deps:[Ic,gc,Mi,Yn,ma,lc]},{provide:Ga,deps:[Ic],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:lc,useClass:lc,deps:[[new st,ac]]},{provide:Ec,useClass:Ec,deps:[]},uc,{provide:Ha,useFactory:function(){return Ba},deps:[]},{provide:ja,useFactory:function(){return La},deps:[]},{provide:mc,useFactory:function(t){return Rl(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new rt(mc),new st,new ot]]},{provide:yc,useValue:"USD"}];let su=(()=>{class t{constructor(t){}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Wt(Jc))},providers:ru}),t})(),iu=null;function ou(){return iu}const au=new Vt("DocumentToken");let lu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:cu,token:t,providedIn:"platform"}),t})();function cu(){return Wt(hu)}const uu=new Vt("Location Initialized");let hu=(()=>{class t extends lu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=ou().getLocation(),this._history=ou().getHistory()}getBaseHrefFromDOM(){return ou().getBaseHref(this._doc)}onPopState(t){ou().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){ou().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){du()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){du()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Wt(au))},t.\u0275prov=ut({factory:fu,token:t,providedIn:"platform"}),t})();function du(){return!!window.history.pushState}function fu(){return new hu(Wt(au))}function pu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function gu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function mu(t){return t&&"?"!==t[0]?"?"+t:t}let yu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:vu,token:t,providedIn:"root"}),t})();function vu(t){const e=Wt(au).location;return new bu(Wt(lu),e&&e.origin||"")}const wu=new Vt("appBaseHref");let bu=(()=>{class t extends yu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return pu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+mu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const s=this.prepareExternalUrl(n+mu(r));this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){const s=this.prepareExternalUrl(n+mu(r));this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Wt(lu),Wt(wu,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Su=(()=>{class t extends yu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=pu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let s=this.prepareExternalUrl(n+mu(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){let s=this.prepareExternalUrl(n+mu(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Wt(lu),Wt(wu,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),_u=(()=>{class t{constructor(t,e){this._subject=new ql,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=gu(Cu(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+mu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Cu(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Wt(yu),Wt(lu))},t.normalizeQueryParams=mu,t.joinWithSlash=pu,t.stripTrailingSlash=gu,t.\u0275prov=ut({factory:xu,token:t,providedIn:"root"}),t})();function xu(){return new _u(Wt(yu),Wt(lu))}function Cu(t){return t.replace(/\/index.html$/,"")}const Eu=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),Au=Xa;class Fu{}let Tu=(()=>{class t extends Fu{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(Au(e||this.locale)(t)){case Eu.Zero:return"zero";case Eu.One:return"one";case Eu.Two:return"two";case Eu.Few:return"few";case Eu.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Wt(mc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Iu(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,s]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let ku=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Yi(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${bt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(io(Ha),io(ja),io(ya),io(Sa))},t.\u0275dir=be({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Du{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pu=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){nr()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Du(null,this._ngForOf,-1,-1),null===r?void 0:r),s=new Ru(t,n);e.push(s)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const s=this._viewContainer.get(n);this._viewContainer.move(s,r);const i=new Ru(t,s);e.push(i)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(io(qa),io(Ma),io(Ha))},t.\u0275dir=be({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Ru{constructor(t,e){this.record=t,this.view=e}}let Ou=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Nu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Hu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Hu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(io(qa),io(Ma))},t.\u0275dir=be({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Nu{constructor(){this.$implicit=null,this.ngIf=null}}function Hu(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${bt(e)}'.`)}class ju{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Vu=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=be({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),Bu=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new ju(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(io(qa),io(Ma),io(Vu,1))},t.\u0275dir=be({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),Lu=(()=>{class t{constructor(t,e,n){n._addDefault(new ju(t,e))}}return t.\u0275fac=function(e){return new(e||t)(io(qa),io(Ma),io(Vu,1))},t.\u0275dir=be({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),Mu=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}return t.\u0275fac=function(e){return new(e||t)(io(qa))},t.\u0275dir=be({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[ra()]}),t})(),Uu=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[{provide:Fu,useClass:Tu}]}),t})(),qu=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new Ku(Wt(au),window,Wt(Yn))}),t})();class Ku{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}class $u extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new $u,iu||(iu=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Gu||(Gu=document.querySelector("base"),Gu)?Gu.getAttribute("href"):null;return null==e?null:(n=e,zu||(zu=document.createElement("a")),zu.setAttribute("href",n),"/"===zu.pathname.charAt(0)?zu.pathname:"/"+zu.pathname);var n}resetBaseElement(){Gu=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Iu(document.cookie,t)}}let zu,Gu=null;const Wu=new Vt("TRANSITION_ID"),Ju=[{provide:ac,useFactory:function(t,e,n){return()=>{n.get(lc).donePromise.then(()=>{const n=ou();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Wu,au,Mi],multi:!0}];class Zu{static init(){var t;t=new Zu,Mc=t}addToWindow(t){kt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},kt.getAllAngularTestabilities=()=>t.getAllTestabilities(),kt.getAllAngularRootElements=()=>t.getAllRootElements(),kt.frameworkStabilizers||(kt.frameworkStabilizers=[]),kt.frameworkStabilizers.push(t=>{const e=kt.getAllAngularTestabilities();let n=e.length,r=!1;const s=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(s)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?ou().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Yu=new Vt("EventManagerPlugins");let Qu=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(Wt(Yu),Wt(Ic))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Xu{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=ou().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let th=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),eh=(()=>{class t extends th{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>ou().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Wt(au))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const nh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rh=/%COMP%/g;function sh(t,e,n){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?sh(t,s,n):(s=s.replace(rh,t),n.push(s))}return n}function ih(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let oh=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ah(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ce.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new lh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case ce.Native:case ce.ShadowDom:return new ch(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=sh(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Wt(Qu),Wt(eh),Wt(cc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class ah{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(nh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=nh[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=nh[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&ba.DashCase?t.style.setProperty(e,n,r&ba.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ba.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ih(n)):this.eventManager.addEventListener(t,e,ih(n))}}class lh extends ah{constructor(t,e,n,r){super(t),this.component=n;const s=sh(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(rh,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(rh,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ch extends ah{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===ce.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const s=sh(r.id,r.styles,[]);for(let i=0;i<s.length;i++){const t=document.createElement("style");t.textContent=s[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let uh=(()=>{class t extends Xu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Wt(au))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const hh=["alt","control","meta","shift"],dh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ph={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let gh=(()=>{class t extends Xu{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const s=t.parseEventName(n),i=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ou().onAndCancel(e,s.domEventName,i))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(n.pop());let i="";if(hh.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),i+=t+".")}),i+=s,0!=n.length||0===s.length)return null;const o={};return o.domEventName=r,o.fullKey=i,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&fh.hasOwnProperty(e)&&(e=fh[e]))}return dh[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),hh.forEach(r=>{r!=n&&(0,ph[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return s=>{t.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Wt(au))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const mh=$c(nu,"browser",[{provide:fc,useValue:"browser"},{provide:dc,useValue:function(){$u.makeCurrent(),Zu.init()},multi:!0},{provide:au,useFactory:function(){return function(t){dn=t}(document),document},deps:[]}]),yh=[[],{provide:Fi,useValue:"root"},{provide:Yn,useFactory:function(){return new Yn},deps:[]},{provide:Yu,useClass:uh,multi:!0,deps:[au,Ic,fc]},{provide:Yu,useClass:gh,multi:!0,deps:[au]},[],{provide:oh,useClass:oh,deps:[Qu,eh,cc]},{provide:wa,useExisting:oh},{provide:th,useExisting:eh},{provide:eh,useClass:eh,deps:[au]},{provide:jc,useClass:jc,deps:[Ic]},{provide:Qu,useClass:Qu,deps:[Yu,Ic]},[]];let vh=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:cc,useValue:e.appId},{provide:Wu,useExisting:cc},Ju]}}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Wt(t,12))},providers:yh,imports:[Uu,su]}),t})();function wh(...t){let e=t[t.length-1];return F(e)?(t.pop(),L(t,e)):G(t)}function bh(t,e){return U(t,e,1)}function Sh(t,e){return function(n){return n.lift(new _h(t,e))}}"undefined"!=typeof window&&window;class _h{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new xh(t,this.predicate,this.thisArg))}}class xh extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class Ch{}class Eh{}class Ah{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),s=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(s):this.headers.set(r,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ah?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ah;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ah?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===s.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Fh{encodeKey(t){return Th(t)}encodeValue(t){return Th(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Th(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Ih{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Fh,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[s,i]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(s)||[];o.push(i),n.set(s,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Ih({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function kh(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Dh(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Ph(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Rh{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ah),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Ih,this.urlWithParams=e}serializeBody(){return null===this.body?null:kh(this.body)||Dh(this.body)||Ph(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ih?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:Ph(this.body)?null:Dh(this.body)?this.body.type||null:kh(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ih?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,i=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new Rh(e,n,s,{params:l,headers:a,reportProgress:o,responseType:r,withCredentials:i})}}const Oh=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class Nh{constructor(t,e=200,n="OK"){this.headers=t.headers||new Ah,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Hh extends Nh{constructor(t={}){super(t),this.type=Oh.ResponseHeader}clone(t={}){return new Hh({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class jh extends Nh{constructor(t={}){super(t),this.type=Oh.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new jh({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Vh extends Nh{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Bh(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Lh=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Rh)r=t;else{let s=void 0;s=n.headers instanceof Ah?n.headers:new Ah(n.headers);let i=void 0;n.params&&(i=n.params instanceof Ih?n.params:new Ih({fromObject:n.params})),r=new Rh(t,e,void 0!==n.body?n.body:null,{headers:s,params:i,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const s=wh(r).pipe(bh(t=>this.handler.handle(t)));if(t instanceof Rh||"events"===n.observe)return s;const i=s.pipe(Sh(t=>t instanceof jh));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return i.pipe(j(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return i.pipe(j(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return i.pipe(j(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return i.pipe(j(t=>t.body))}case"response":return i;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Ih).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Bh(n,e))}post(t,e,n={}){return this.request("POST",t,Bh(n,e))}put(t,e,n={}){return this.request("PUT",t,Bh(n,e))}}return t.\u0275fac=function(e){return new(e||t)(Wt(Ch))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Mh{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Uh=new Vt("HTTP_INTERCEPTORS");let qh=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Kh=/^\)\]\}',?\n/;class $h{}let zh=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Gh=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new b(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let s=null;const i=()=>{if(null!==s)return s;const e=1223===n.status?204:n.status,r=n.statusText||"OK",i=new Ah(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return s=new Hh({headers:i,status:e,statusText:r,url:o}),s},o=()=>{let{headers:r,status:s,statusText:o,url:a}=i(),l=null;204!==s&&(l=void 0===n.response?n.responseText:n.response),0===s&&(s=l?200:0);let c=s>=200&&s<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(Kh,"");try{l=""!==l?JSON.parse(l):null}catch(u){l=t,c&&(c=!1,l={error:u,text:l})}}c?(e.next(new jh({body:l,headers:r,status:s,statusText:o,url:a||void 0})),e.complete()):e.error(new Vh({error:l,headers:r,status:s,statusText:o,url:a||void 0}))},a=t=>{const{url:r}=i(),s=new Vh({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(s)};let l=!1;const c=r=>{l||(e.next(i()),l=!0);let s={type:Oh.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(s.total=r.total),"text"===t.responseType&&n.responseText&&(s.partialText=n.responseText),e.next(s)},u=t=>{let n={type:Oh.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",u)),n.send(r),e.next({type:Oh.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",o),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",u)),n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(Wt($h))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Wh=new Vt("XSRF_COOKIE_NAME"),Jh=new Vt("XSRF_HEADER_NAME");class Zh{}let Yh=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Iu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(Wt(au),Wt(fc),Wt(Wh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Qh=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Wt(Zh),Wt(Jh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Xh=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Uh,[]);this.chain=t.reduceRight((t,e)=>new Mh(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Wt(Eh),Wt(Mi))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),td=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Qh,useClass:qh}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Wh,useValue:e.cookieName}:[],e.headerName?{provide:Jh,useValue:e.headerName}:[]]}}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[Qh,{provide:Uh,useExisting:Qh,multi:!0},{provide:Zh,useClass:Yh},{provide:Wh,useValue:"XSRF-TOKEN"},{provide:Jh,useValue:"X-XSRF-TOKEN"}]}),t})(),ed=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[Lh,{provide:Ch,useClass:Xh},Gh,{provide:Eh,useExisting:Gh},zh,{provide:$h,useExisting:zh}],imports:[[td.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();class nd extends E{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _;return this._value}next(t){super.next(this._value=t)}}const rd=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),sd={};class id{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new od(t,this.resultSelector))}}class od extends H{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(sd),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(N(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,s){const i=this.values,o=this.toRespond?i[n]===sd?--this.toRespond:this.toRespond:0;i[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const ad=new b(t=>t.complete());function ld(t){return t?function(t){return new b(e=>t.schedule(()=>e.complete()))}(t):ad}function cd(t){return new b(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?M(n):ld()).subscribe(e)})}function ud(){return z(1)}const hd=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function dd(t){return function(e){return 0===t?ld():e.lift(new fd(t))}}class fd{constructor(t){if(this.total=t,this.total<0)throw new hd}call(t,e){return e.subscribe(new pd(t,this.total))}}class pd extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<n;s++){const s=e++%n;t.next(r[s])}}t.complete()}}function gd(t=vd){return e=>e.lift(new md(t))}class md{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new yd(t,this.errorFactory))}}class yd extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function vd(){return new rd}function wd(t=null){return e=>e.lift(new bd(t))}class bd{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Sd(t,this.defaultValue))}}class Sd extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function _d(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Sh((e,n)=>t(e,n,r)):$,dd(1),n?wd(e):gd(()=>new rd))}function xd(t){return function(e){const n=new Cd(t),r=e.lift(n);return n.caught=r}}class Cd{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ed(t,this.selector,this.caught))}}class Ed extends H{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new T(this,void 0,void 0);this.add(r);const s=N(this,n,void 0,void 0,r);s!==r&&this.add(s)}}}function Ad(t){return e=>0===t?ld():e.lift(new Fd(t))}class Fd{constructor(t){if(this.total=t,this.total<0)throw new hd}call(t,e){return e.subscribe(new Td(t,this.total))}}class Td extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Id(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Sh((e,n)=>t(e,n,r)):$,Ad(1),n?wd(e):gd(()=>new rd))}class kd{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Dd(t,this.predicate,this.thisArg,this.source))}}class Dd extends p{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Pd(t,e){return"function"==typeof e?n=>n.pipe(Pd((n,r)=>M(t(n,r)).pipe(j((t,s)=>e(n,t,r,s))))):e=>e.lift(new Rd(t))}class Rd{constructor(t){this.project=t}call(t,e){return e.subscribe(new Od(t,this.project))}}class Od extends H{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new T(this,e,n),i=this.destination;i.add(s),this.innerSubscription=N(this,t,void 0,void 0,s),this.innerSubscription!==s&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,s){this.destination.next(e)}}function Nd(...t){return ud()(wh(...t))}function Hd(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new jd(t,e,n))}}class jd{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Vd(t,this.accumulator,this.seed,this.hasSeed))}}class Vd extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Bd(t,e,n){return function(r){return r.lift(new Ld(t,e,n))}}class Ld{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Md(t,this.nextOrObserver,this.error,this.complete))}}class Md extends p{constructor(t,e,n,s){super(t),this._tapNext=y,this._tapError=y,this._tapComplete=y,this._tapError=n||y,this._tapComplete=s||y,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||y,this._tapError=e.error||y,this._tapComplete=e.complete||y)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Ud{constructor(t){this.callback=t}call(t,e){return e.subscribe(new qd(t,this.callback))}}class qd extends p{constructor(t,e){super(t),this.add(new h(e))}}class Kd{constructor(t,e){this.id=t,this.url=e}}class $d extends Kd{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zd extends Kd{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gd extends Kd{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wd extends Kd{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jd extends Kd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zd extends Kd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yd extends Kd{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qd extends Kd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xd extends Kd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tf{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ef{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nf{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rf{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sf{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class of{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class af{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let lf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&fo(0,"router-outlet")},directives:function(){return[fg]},encapsulation:2}),t})();class cf{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function uf(t){return new cf(t)}function hf(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function df(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const s={};for(let i=0;i<r.length;i++){const e=r[i],n=t[i];if(e.startsWith(":"))s[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:s}}class ff{constructor(t,e){this.routes=t,this.module=e}}function pf(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];gf(r,mf(e,r))}}function gf(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&pf(t.children,e)}function mf(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function yf(t){const e=t.children&&t.children.map(yf),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=lf),n}function vf(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!wf(t[s],e[s]))return!1;return!0}function wf(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function bf(t){return Array.prototype.concat.apply([],t)}function Sf(t){return t.length>0?t[t.length-1]:null}function _f(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function xf(t){return vo(t)?t:yo(t)?M(Promise.resolve(t)):wh(t)}function Cf(t,e,n){return n?function(t,e){return vf(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Tf(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>wf(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,s){if(n.segments.length>s.length)return!!Tf(n.segments.slice(0,s.length),s)&&!r.hasChildren();if(n.segments.length===s.length){if(!Tf(n.segments,s))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=s.slice(0,n.segments.length),i=s.slice(n.segments.length);return!!Tf(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,i)}}(e,n,n.segments)}(t.root,e.root)}class Ef{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uf(this.queryParams)),this._queryParamMap}toString(){return Pf.serialize(this)}}class Af{constructor(t,e){this.segments=t,this.children=e,this.parent=null,_f(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rf(this)}}class Ff{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=uf(this.parameters)),this._parameterMap}toString(){return Bf(this)}}function Tf(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function If(t,e){let n=[];return _f(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),_f(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class kf{}class Df{parse(t){const e=new Kf(t);return new Ef(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return Rf(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return _f(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=If(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${Rf(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Nf(e)}=${Nf(t)}`).join("&"):`${Nf(e)}=${Nf(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Pf=new Df;function Rf(t){return t.segments.map(t=>Bf(t)).join("/")}function Of(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nf(t){return Of(t).replace(/%3B/gi,";")}function Hf(t){return Of(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jf(t){return decodeURIComponent(t)}function Vf(t){return jf(t.replace(/\+/g,"%20"))}function Bf(t){return`${Hf(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Hf(t)}=${Hf(e[t])}`).join("")}`;var e}const Lf=/^[^\/()?;=#]+/;function Mf(t){const e=t.match(Lf);return e?e[0]:""}const Uf=/^[^=?&#]+/,qf=/^[^?&#]+/;class Kf{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Af([],{}):new Af([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Af(t,e)),n}parseSegment(){const t=Mf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ff(jf(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Mf(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Mf(this.remaining);t&&(n=t,this.capture(n))}t[jf(e)]=jf(n)}parseQueryParam(t){const e=function(t){const e=t.match(Uf);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(qf);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Vf(e),s=Vf(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Mf(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s=void 0;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s="primary");const i=this.parseChildren();e[s]=1===Object.keys(i).length?i.primary:new Af([],i),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class $f{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=zf(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=zf(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Gf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Gf(t,this._root).map(t=>t.value)}}function zf(t,e){if(t===e.value)return e;for(const n of e.children){const e=zf(t,n);if(e)return e}return null}function Gf(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Gf(t,n);if(r.length)return r.unshift(e),r}return[]}class Wf{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Jf(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Zf extends $f{constructor(t,e){super(t),this.snapshot=e,np(this,t)}toString(){return this.snapshot.toString()}}function Yf(t,e){const n=function(t,e){const n=new tp([],{},{},"",{},"primary",e,null,t.root,-1,{});return new ep("",new Wf(n,[]))}(t,e),r=new nd([new Ff("",{})]),s=new nd({}),i=new nd({}),o=new nd({}),a=new nd(""),l=new Qf(r,s,o,a,i,"primary",e,n.root);return l.snapshot=n.root,new Zf(new Wf(l,[]),n)}class Qf{constructor(t,e,n,r,s,i,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(j(t=>uf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(j(t=>uf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xf(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class tp{constructor(t,e,n,r,s,i,o,a,l,c,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ep extends $f{constructor(t,e){super(e),this.url=t,np(this,e)}toString(){return rp(this._root)}}function np(t,e){e.value._routerState=t,e.children.forEach(e=>np(t,e))}function rp(t){const e=t.children.length>0?` { ${t.children.map(rp).join(", ")} } `:"";return`${t.value}${e}`}function sp(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,vf(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),vf(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!vf(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),vf(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ip(t,e){var n,r;return vf(t.params,e.params)&&Tf(n=t.url,r=e.url)&&n.every((t,e)=>vf(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||ip(t.parent,e.parent))}function op(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ap(t,e,n,r,s){let i={};return r&&_f(r,(t,e)=>{i[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Ef(n.root===t?e:function t(e,n,r){const s={};return _f(e.children,(e,i)=>{s[i]=e===n?r:t(e,n,r)}),new Af(e.segments,s)}(n.root,t,e),i,s)}class lp{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&op(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==Sf(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cp{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function up(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:`${t}`}function hp(t,e,n){if(t||(t=new Af([],{})),0===t.segments.length&&t.hasChildren())return dp(t,e,n);const r=function(t,e,n){let r=0,s=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(r>=n.length)return i;const e=t.segments[s],o=up(n[r]),a=r<n.length-1?n[r+1]:null;if(s>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!mp(o,a,e))return i;r+=2}else{if(!mp(o,{},e))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(t,e,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Af(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Af(t.segments.slice(r.pathIndex),t.children),dp(e,0,s)}return r.match&&0===s.length?new Af(t.segments,{}):r.match&&!t.hasChildren()?fp(t,e,n):r.match?dp(t,0,s):fp(t,e,n)}function dp(t,e,n){if(0===n.length)return new Af(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{primary:t}:void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),s={};return _f(r,(n,r)=>{null!==n&&(s[r]=hp(t.children[r],e,n))}),_f(t.children,(t,e)=>{void 0===r[e]&&(s[e]=t)}),new Af(t.segments,s)}}function fp(t,e,n){const r=t.segments.slice(0,e);let s=0;for(;s<n.length;){if("object"==typeof n[s]&&void 0!==n[s].outlets){const t=pp(n[s].outlets);return new Af(r,t)}if(0===s&&op(n[0])){r.push(new Ff(t.segments[e].path,n[0])),s++;continue}const i=up(n[s]),o=s<n.length-1?n[s+1]:null;i&&o&&op(o)?(r.push(new Ff(i,gp(o))),s+=2):(r.push(new Ff(i,{})),s++)}return new Af(r,{})}function pp(t){const e={};return _f(t,(t,n)=>{null!==t&&(e[n]=fp(new Af([],{}),0,t))}),e}function gp(t){const e={};return _f(t,(t,n)=>e[n]=`${t}`),e}function mp(t,e,n){return t==n.path&&vf(e,n.parameters)}class yp{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),sp(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Jf(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),_f(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Jf(t),s=t.value.component?n.children:e;_f(r,(t,e)=>this.deactivateRouteAndItsChildren(t,s)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Jf(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new of(t.value.snapshot))}),t.children.length&&this.forwardEvent(new rf(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(sp(r),r===s)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),vp(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),s=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=s,e.outlet&&e.outlet.activateWith(r,s),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function vp(t){sp(t.value),t.children.forEach(vp)}function wp(t){return"function"==typeof t}function bp(t){return t instanceof Ef}class Sp{constructor(t){this.segmentGroup=t||null}}class _p{constructor(t){this.urlTree=t}}function xp(t){return new b(e=>e.error(new Sp(t)))}function Cp(t){return new b(e=>e.error(new _p(t)))}function Ep(t){return new b(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Ap{constructor(t,e,n,r,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(Qt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(j(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(xd(t=>{if(t instanceof _p)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Sp)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(j(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(xd(t=>{if(t instanceof Sp)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Af([],{primary:t}):t;return new Ef(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(j(t=>new Af([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return wh({});const n=[],r=[],s={};return _f(t,(t,i)=>{const o=e(i,t).pipe(j(t=>s[i]=t));"primary"===i?n.push(o):r.push(o)}),wh.apply(null,n.concat(r)).pipe(ud(),_d(),j(()=>s))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,s,i){return wh(...n).pipe(j(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,s,i).pipe(xd(t=>{if(t instanceof Sp)return wh(null);throw t}))),ud(),Id(t=>!!t),xd((t,n)=>{if(t instanceof rd||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,s))return wh(new Af([],{}));throw new Sp(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,s,i,o){return kp(r)!==i?xp(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i):xp(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Cp(s):this.lineralizeSegments(n,s).pipe(U(n=>{const s=new Af(n,{});return this.expandSegment(t,s,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:c}=Fp(e,r,s);if(!o)return xp(e);const u=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Cp(u):this.lineralizeSegments(r,u).pipe(U(r=>this.expandSegment(t,e,n,r.concat(s.slice(l)),i,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(j(t=>(n._loadedConfig=t,new Af(r,{})))):wh(new Af(r,{}));const{matched:s,consumedSegments:i,lastChild:o}=Fp(e,n,r);if(!s)return xp(e);const a=r.slice(o);return this.getChildConfig(t,n,r).pipe(U(t=>{const n=t.module,r=t.routes,{segmentGroup:s,slicedSegments:o}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Ip(t,e,n)&&"primary"!==kp(n))}(t,n,r)?{segmentGroup:Tp(new Af(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==kp(r)&&(n[kp(r)]=new Af([],{}));return n}(r,new Af(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Ip(t,e,n))}(t,n,r)?{segmentGroup:Tp(new Af(t.segments,function(t,e,n,r){const s={};for(const i of n)Ip(t,e,i)&&!r[kp(i)]&&(s[kp(i)]=new Af([],{}));return Object.assign(Object.assign({},r),s)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,i,a,r);return 0===o.length&&s.hasChildren()?this.expandChildren(n,r,s).pipe(j(t=>new Af(i,t))):0===r.length&&0===o.length?wh(new Af(i,{})):this.expandSegment(n,s,r,o,"primary",!0).pipe(j(t=>new Af(i.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?wh(new ff(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?wh(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?M(r).pipe(j(r=>{const s=t.get(r);let i;if(function(t){return t&&wp(t.canLoad)}(s))i=s.canLoad(e,n);else{if(!wp(s))throw new Error("Invalid CanLoad guard");i=s(e,n)}return xf(i)})).pipe(ud(),(s=t=>!0===t,t=>t.lift(new kd(s,void 0,t)))):wh(!0);var s}(t.injector,e,n).pipe(U(n=>n?this.configLoader.load(t.injector,e).pipe(j(t=>(e._loadedConfig=t,t))):function(t){return new b(e=>e.error(hf(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):wh(new ff([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return wh(n);if(r.numberOfChildren>1||!r.children.primary)return Ep(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new Ef(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return _f(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const s=t.substring(1);n[r]=e[s]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let i={};return _f(e.children,(e,s)=>{i[s]=this.createSegmentGroup(t,e,n,r)}),new Af(s,i)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Fp(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||df)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Tp(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Af(t.segments.concat(e.segments),e.children)}return t}function Ip(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function kp(t){return t.outlet||"primary"}class Dp{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Pp{constructor(t,e){this.component=t,this.route=e}}function Rp(t,e,n){const r=t._root;return function t(e,n,r,s,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Jf(n);return e.children.forEach(e=>{!function(e,n,r,s,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,l=r?r.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Tf(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Tf(t.url,e.url)||!vf(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ip(t,e)||!vf(t.queryParams,e.queryParams);case"paramsChange":default:return!ip(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Dp(s)):(o.data=a.data,o._resolvedData=a._resolvedData),t(e,n,o.component?l?l.children:null:r,s,i),c&&i.canDeactivateChecks.push(new Pp(l&&l.outlet&&l.outlet.component||null,a))}else a&&Np(n,l,i),i.canActivateChecks.push(new Dp(s)),t(e,null,o.component?l?l.children:null:r,s,i)}(e,o[e.value.outlet],r,s.concat([e.value]),i),delete o[e.value.outlet]}),_f(o,(t,e)=>Np(t,r.getContext(e),i)),i}(r,e?e._root:null,n,[r.value])}function Op(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Np(t,e,n){const r=Jf(t),s=t.value;_f(r,(t,r)=>{Np(t,s.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Pp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}const Hp=Symbol("INITIAL_VALUE");function jp(){return Pd(t=>function(...t){let e=null,n=null;return F(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),G(t,n).lift(new id(e))}(...t.map(t=>t.pipe(Ad(1),function(...t){const e=t[t.length-1];return F(e)?(t.pop(),n=>Nd(t,n,e)):e=>Nd(t,e)}(Hp)))).pipe(Hd((t,e)=>{let n=!1;return e.reduce((t,r,s)=>{if(t!==Hp)return t;if(r===Hp&&(n=!0),!n){if(!1===r)return r;if(s===e.length-1||bp(r))return r}return t},t)},Hp),Sh(t=>t!==Hp),j(t=>bp(t)?t:!0===t),Ad(1)))}function Vp(t,e){return null!==t&&e&&e(new sf(t)),wh(!0)}function Bp(t,e){return null!==t&&e&&e(new nf(t)),wh(!0)}function Lp(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?wh(r.map(r=>cd(()=>{const s=Op(r,e,n);let i;if(function(t){return t&&wp(t.canActivate)}(s))i=xf(s.canActivate(e,t));else{if(!wp(s))throw new Error("Invalid CanActivate guard");i=xf(s(e,t))}return i.pipe(Id())}))).pipe(jp()):wh(!0)}function Mp(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>cd(()=>wh(e.guards.map(s=>{const i=Op(s,e.node,n);let o;if(function(t){return t&&wp(t.canActivateChild)}(i))o=xf(i.canActivateChild(r,t));else{if(!wp(i))throw new Error("Invalid CanActivateChild guard");o=xf(i(r,t))}return o.pipe(Id())})).pipe(jp())));return wh(s).pipe(jp())}class Up{}class qp{constructor(t,e,n,r,s,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=i}recognize(){try{const t=zp(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new tp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Wf(n,e),s=new ep(this.url,r);return this.inheritParamsAndData(s._root),wh(s)}catch(t){return new b(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Xf(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=If(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(s){if(!(s instanceof Up))throw s}if(this.noLeftoversInUrl(e,n,r))return[];throw new Up}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Up;if((t.outlet||"primary")!==r)throw new Up;let s,i=[],o=[];if("**"===t.path){const i=n.length>0?Sf(n).parameters:{};s=new tp(n,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jp(t),r,t.component,t,Kp(e),$p(e)+n.length,Zp(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Up;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||df)(n,t,e);if(!r)throw new Up;const s={};_f(r.posParams,(t,e)=>{s[e]=t.path});const i=r.consumed.length>0?Object.assign(Object.assign({},s),r.consumed[r.consumed.length-1].parameters):s;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:i}}(e,t,n);i=a.consumedSegments,o=n.slice(a.lastChild),s=new tp(i,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jp(t),r,t.component,t,Kp(e),$p(e)+i.length,Zp(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:c}=zp(e,i,o,a,this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const t=this.processChildren(a,l);return[new Wf(s,t)]}if(0===a.length&&0===c.length)return[new Wf(s,[])];const u=this.processSegment(a,l,c,"primary");return[new Wf(s,u)]}}function Kp(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function $p(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function zp(t,e,n,r,s){if(n.length>0&&function(t,e,n){return n.some(n=>Gp(t,e,n)&&"primary"!==Wp(n))}(t,n,r)){const s=new Af(e,function(t,e,n,r){const s={};s.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&"primary"!==Wp(i)){const n=new Af([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,s[Wp(i)]=n}return s}(t,e,r,new Af(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Gp(t,e,n))}(t,n,r)){const i=new Af(t.segments,function(t,e,n,r,s,i){const o={};for(const a of r)if(Gp(t,n,a)&&!s[Wp(a)]){const n=new Af([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===i?t.segments.length:e.length,o[Wp(a)]=n}return Object.assign(Object.assign({},s),o)}(t,e,n,r,t.children,s));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}const i=new Af(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function Gp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Wp(t){return t.outlet||"primary"}function Jp(t){return t.data||{}}function Zp(t){return t.resolve||{}}function Yp(t,e,n,r){const s=Op(t,e,r);return xf(s.resolve?s.resolve(e,n):s(e,n))}function Qp(t){return function(e){return e.pipe(Pd(e=>{const n=t(e);return n?M(n).pipe(j(()=>e)):M([e])}))}}class Xp{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const tg=new Vt("ROUTES");class eg{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(j(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new ff(bf(r.injector.get(tg)).map(yf),r)}))}loadModuleFactory(t){return"string"==typeof t?M(this.loader.load(t)):xf(t()).pipe(U(t=>t instanceof Xt?wh(t):M(this.compiler.compileModuleAsync(t))))}}class ng{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function rg(t){throw t}function sg(t,e,n){return e.parse("/")}function ig(t,e){return wh(null)}let og=(()=>{class t{constructor(t,e,n,r,s,i,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new E,this.errorHandler=rg,this.malformedUriErrorHandler=sg,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ig,afterPreactivation:ig},this.urlHandlingStrategy=new ng,this.routeReuseStrategy=new Xp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=s.get(Qt),this.console=s.get(gc);const l=s.get(Ic);this.isNgZoneEnabled=l instanceof Ic,this.resetConfig(a),this.currentUrlTree=new Ef(new Af([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new eg(i,o,t=>this.triggerEvent(new tf(t)),t=>this.triggerEvent(new ef(t))),this.routerState=Yf(this.currentUrlTree,this.rootComponentType),this.transitions=new nd({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Sh(t=>0!==t.id),j(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Pd(t=>{let n=!1,r=!1;return wh(t).pipe(Bd(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Pd(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return wh(t).pipe(Pd(t=>{const n=this.transitions.getValue();return e.next(new $d(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ad:[t]}),Pd(t=>Promise.resolve(t)),(r=this.ngModule.injector,s=this.configLoader,i=this.urlSerializer,o=this.config,function(t){return t.pipe(Pd(t=>function(t,e,n,r,s){return new Ap(t,e,n,r,s).apply()}(r,s,i,t.extractedUrl,o).pipe(j(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Bd(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,s){return function(i){return i.pipe(U(i=>function(t,e,n,r,s="emptyOnly",i="legacy"){return new qp(t,e,n,r,s,i).recognize()}(t,e,i.urlAfterRedirects,n(i.urlAfterRedirects),r,s).pipe(j(t=>Object.assign(Object.assign({},i),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Bd(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Bd(t=>{const n=new Jd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,s,i,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:s,restoredState:i,extras:o}=t,a=new $d(n,this.serializeUrl(r),s,i);e.next(a);const l=Yf(r,this.rootComponentType).snapshot;return wh(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ad}),Qp(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),Bd(t=>{const e=new Zd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),j(t=>Object.assign(Object.assign({},t),{guards:Rp(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(U(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return 0===o.length&&0===i.length?wh(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return M(t).pipe(U(t=>function(t,e,n,r,s){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?wh(i.map(i=>{const o=Op(i,e,s);let a;if(function(t){return t&&wp(t.canDeactivate)}(o))a=xf(o.canDeactivate(t,e,n,r));else{if(!wp(o))throw new Error("Invalid CanDeactivate guard");a=xf(o(t,e,n,r))}return a.pipe(Id())})).pipe(jp()):wh(!0)}(t.component,t.route,n,e,r)),Id(t=>!0!==t,!0))}(o,r,s,t).pipe(U(n=>n&&"boolean"==typeof n?function(t,e,n,r){return M(e).pipe(bh(e=>M([Bp(e.route.parent,r),Vp(e.route,r),Mp(t,e.path,n),Lp(t,e.route,n)]).pipe(ud(),Id(t=>!0!==t,!0))),Id(t=>!0!==t,!0))}(r,i,t,e):wh(n)),j(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Bd(t=>{if(bp(t.guardsResult)){const e=hf(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Bd(t=>{const e=new Yd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Sh(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Gd(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Qp(t=>{if(t.guards.canActivateChecks.length)return wh(t).pipe(Bd(t=>{const e=new Qd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(e=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(t){return t.pipe(U(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;return s.length?M(s).pipe(bh(t=>function(t,e,n,r){return function(t,e,n,r){const s=Object.keys(t);if(0===s.length)return wh({});if(1===s.length){const i=s[0];return Yp(t[i],e,n,r).pipe(j(t=>({[i]:t})))}const i={};return M(s).pipe(U(s=>Yp(t[s],e,n,r).pipe(j(t=>(i[s]=t,t))))).pipe(_d(),j(()=>i))}(t._resolve,t,e,r).pipe(j(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Xf(t,n).resolve),null)))}(t.route,r,e,n)),function(t,e){return arguments.length>=2?function(n){return v(Hd(t,e),dd(1),wd(e))(n)}:function(e){return v(Hd((e,n,r)=>t(e,n,r+1)),dd(1))(e)}}((t,e)=>t),j(e=>t)):wh(t)}))}),Bd(t=>{const e=new Xd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}));var e,n}),Qp(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),j(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=n.value;const i=function(e,n,r){return n.children.map(n=>{for(const s of r.children)if(e.shouldReuseRoute(s.value.snapshot,n.value))return t(e,n,s);return t(e,n)})}(e,n,r);return new Wf(s,i)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Qf(new nd((s=n.value).url),new nd(s.params),new nd(s.queryParams),new nd(s.fragment),new nd(s.data),s.outlet,s.component,s),i=n.children.map(n=>t(e,n));return new Wf(r,i)}}var s}(t,e._root,n?n._root:void 0);return new Zf(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Bd(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),j(t=>(new yp(o,t.targetRouterState,t.currentRouterState,a).activate(i),t))),Bd({next(){n=!0},complete(){n=!0}}),(s=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Gd(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Ud(s))),xd(n=>{if(r=!0,(s=n)&&s.ngNavigationCancelingError){const r=bp(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const s=new Gd(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(s),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Wd(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(i){t.reject(i)}}var s;return ad}));var s,i,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){pf(t),this.config=t.map(yf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:s,preserveQueryParams:i,queryParamsHandling:o,preserveFragment:a}=e;nr()&&i&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,c=a?this.currentUrlTree.fragment:s;let u=null;if(o)switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}else u=i?this.currentUrlTree.queryParams:r||null;return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,s){if(0===n.length)return ap(e.root,e.root,e,r,s);const i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new lp(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return _f(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===s?(r.split("/").forEach((r,s)=>{0==s&&"."===r||(0==s&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new lp(n,e,r)}(n);if(i.toRoot())return ap(e.root,new Af([],{}),e,r,s);const o=function(t,e,n){if(t.isAbsolute)return new cp(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new cp(n.snapshot._urlSegment,!0,0);const r=op(t.commands[0])?0:1;return function(t,e,n){let r=t,s=e,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new cp(r,!1,s-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(i,e,t),a=o.processChildren?dp(o.segmentGroup,o.index,i.commands):hp(o.segmentGroup,o.index,i.commands);return ap(o.segmentGroup,a,e,r,s)}(l,this.currentUrlTree,t,u,c)}navigateByUrl(t,e={skipLocationChange:!1}){nr()&&this.isNgZoneEnabled&&!Ic.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=bp(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(bp(t))return Cf(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Cf(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new zd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,s){const i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);let o,a,l;s?(o=s.resolve,a=s.reject,l=s.promise):l=new Promise((t,e)=>{o=t,a=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const s=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(s)||e?this.location.replaceState(s,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(s,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(t){ao()},t.\u0275dir=be({type:t}),t})(),ag=(()=>{class t{constructor(t,e,n,r,s){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(s.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){nr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:cg(this.skipLocationChange),replaceUrl:cg(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:cg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:cg(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(io(og),io(Qf),oo("tabindex"),io(Sa),io(ya))},t.\u0275dir=be({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&wo("click",(function(t){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),t})(),lg=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof zd&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){nr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:cg(this.skipLocationChange),replaceUrl:cg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:cg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:cg(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(io(og),io(Qf),io(yu))},t.\u0275dir=be({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&wo("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(Jo("href",e.href,wr),ro("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[ra()]}),t})();function cg(t){return""===t||!!t}let ug=(()=>{class t{constructor(t,e,n,r,s){this.router=t,this.element=e,this.renderer=n,this.link=r,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(t=>{t instanceof zd&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(t=>this.update()),this.linksWithHrefs.changes.subscribe(t=>this.update()),this.update()}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(io(og),io(ya),io(Sa),io(ag,8),io(lg,8))},t.\u0275dir=be({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var r;1&t&&(ec(n,ag,!0),ec(n,lg,!0)),2&t&&(tc(r=nc())&&(e.links=r),tc(r=nc())&&(e.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[ra()]}),t})();class hg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new dg,this.attachRef=null}}class dg{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new hg,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let fg=(()=>{class t{constructor(t,e,n,r,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new ql,this.deactivateEvents=new ql,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,s=new pg(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(io(dg),io(qa),io(ma),oo("name"),io(Ei))},t.\u0275dir=be({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class pg{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Qf?this.route:t===dg?this.childContexts:this.parent.get(t,e)}}class gg{}class mg{preload(t,e){return wh(null)}}let yg=(()=>{class t{constructor(t,e,n,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new eg(e,n,e=>t.triggerEvent(new tf(e)),e=>t.triggerEvent(new ef(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Sh(t=>t instanceof zd),bh(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Qt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return M(n).pipe(z(),j(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Wt(og),Wt(Yc),Wt(Ec),Wt(Mi),Wt(gg))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),vg=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $d?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof af&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new af(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(t){ao()},t.\u0275dir=be({type:t}),t})();const wg=new Vt("ROUTER_CONFIGURATION"),bg=new Vt("ROUTER_FORROOT_GUARD"),Sg=[_u,{provide:kf,useClass:Df},{provide:og,useFactory:function(t,e,n,r,s,i,o,a,l={},c,u){const h=new og(null,e,n,r,s,i,o,bf(a));if(c&&(h.urlHandlingStrategy=c),u&&(h.routeReuseStrategy=u),l.errorHandler&&(h.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(h.malformedUriErrorHandler=l.malformedUriErrorHandler),l.enableTracing){const t=ou();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return l.onSameUrlNavigation&&(h.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.urlUpdateStrategy&&(h.urlUpdateStrategy=l.urlUpdateStrategy),l.relativeLinkResolution&&(h.relativeLinkResolution=l.relativeLinkResolution),h},deps:[Jc,kf,dg,_u,Mi,Yc,Ec,tg,wg,[class{},new st],[class{},new st]]},dg,{provide:Qf,useFactory:function(t){return t.routerState.root},deps:[og]},{provide:Yc,useClass:tu},yg,mg,class{preload(t,e){return e().pipe(xd(()=>wh(null)))}},{provide:wg,useValue:{enableTracing:!1}}];function _g(){return new Kc("Router",og)}let xg=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Sg,Fg(e),{provide:bg,useFactory:Ag,deps:[[og,new st,new ot]]},{provide:wg,useValue:n||{}},{provide:yu,useFactory:Eg,deps:[lu,[new rt(wu),new st],wg]},{provide:vg,useFactory:Cg,deps:[og,qu,wg]},{provide:gg,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:mg},{provide:Kc,multi:!0,useFactory:_g},[Tg,{provide:ac,multi:!0,useFactory:Ig,deps:[Tg]},{provide:Dg,useFactory:kg,deps:[Tg]},{provide:pc,multi:!0,useExisting:Dg}]]}}static forChild(e){return{ngModule:t,providers:[Fg(e)]}}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Wt(bg,8),Wt(og,8))}}),t})();function Cg(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new vg(t,e,n)}function Eg(t,e,n={}){return n.useHash?new Su(t,e):new bu(t,e)}function Ag(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Fg(t){return[{provide:Ui,multi:!0,useValue:t},{provide:tg,multi:!0,useValue:t}]}let Tg=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new E}appInitializer(){return this.injector.get(uu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(og),r=this.injector.get(wg);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?wh(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(wg),n=this.injector.get(yg),r=this.injector.get(vg),s=this.injector.get(og),i=this.injector.get(Jc);t===i.components[0]&&(this.isLegacyEnabled(e)?s.initialNavigation():this.isLegacyDisabled(e)&&s.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),s.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Wt(Mi))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Ig(t){return t.appInitializer.bind(t)}function kg(t){return t.bootstrapListener.bind(t)}const Dg=new Vt("Router Initializer");function Pg(t,e,n,r){var s,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(e,n,o):s(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function Rg(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{l(r.next(t))}catch(e){i(e)}}function a(t){try{l(r.throw(t))}catch(e){i(e)}}function l(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(o,a)}l((r=r.apply(t,e||[])).next())}))}class Og{call(t,e){return e.subscribe(new Ng(t))}}class Ng extends H{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){let e=t[n],r=N(this,e,e,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}}notifyNext(t,e,n,r,s){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}function Hg(t,e){return new b(e?n=>e.schedule(jg,0,{error:t,subscriber:n}):e=>e.error(t))}function jg({error:t,subscriber:e}){e.error(t)}class Vg extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class Bg extends Vg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(s){n=!0,r=!!s&&s||new Error(s)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let Lg=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Mg extends Lg{constructor(t,e=Lg.now){super(t,()=>Mg.delegate&&Mg.delegate!==this?Mg.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Mg.delegate&&Mg.delegate!==this?Mg.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Ug=new Mg(Bg);function qg(t){return t instanceof Date&&!isNaN(+t)}let Kg=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return wh(this.value);case"E":return Hg(this.error);case"C":return ld()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function $g(t,e=Ug){const n=qg(t)?+t-e.now():Math.abs(t);return t=>t.lift(new zg(n,e))}class zg{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new Gg(t,this.delay,this.scheduler))}}class Gg extends p{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,s=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(s);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(Gg.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new Wg(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(Kg.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(Kg.createComplete()),this.unsubscribe()}}class Wg{constructor(t,e){this.time=t,this.notification=e}}const Jg=(()=>{function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t})();class Zg{constructor(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}call(t,e){return e.subscribe(new Yg(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class Yg extends H{constructor(t,e,n,r,s){super(t),this.absoluteTimeout=e,this.waitFor=n,this.withObservable=r,this.scheduler=s,this.action=null,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(N(t,e))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(Yg.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=null,this.scheduler=null,this.withObservable=null}}var Qg=n("gfpf");class Xg{}class tm{}function em(t){const e=t.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function nm(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}class rm{}let sm=(()=>{class t{getHashFragmentParams(t){let e=t||window.location.hash;if(e=decodeURIComponent(e),0!==e.indexOf("#"))return{};const n=e.indexOf("?");return e=e.substr(n>-1?n+1:1),this.parseQueryString(e)}parseQueryString(t){const e={};let n,r,s,i,o,a,l;if(null===t)return e;n=t.split("&");for(let c=0;c<n.length;c++)r=n[c],s=r.indexOf("="),-1===s?(i=r,o=null):(i=r.substr(0,s),o=r.substr(s+1)),a=decodeURIComponent(i),l=decodeURIComponent(o),"/"===a.substr(0,1)&&(a=a.substr(1)),e[a]=l;return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class im{constructor(t){this.type=t}}class om extends im{constructor(t,e=null){super(t),this.info=e}}class am extends im{constructor(t,e=null){super(t),this.info=e}}class lm extends im{constructor(t,e,n=null){super(t),this.reason=e,this.params=n}}class cm{constructor(t){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret=null,this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.openUri=t=>{location.href=t},t&&Object.assign(this,t)}}class um{encodeKey(t){return encodeURIComponent(t)}encodeValue(t){return encodeURIComponent(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}class hm{}let dm=(()=>{class t extends cm{constructor(t,e,n,r,s,i,o,a){super(),this.ngZone=t,this.http=e,this.config=s,this.urlHelper=i,this.logger=o,this.crypto=a,this.discoveryDocumentLoaded=!1,this.state="",this.eventsSubject=new E,this.discoveryDocumentLoadedSubject=new E,this.grantTypesSupported=[],this.inImplicitFlow=!1,this.debug("angular-oauth2-oidc v8-beta"),this.discoveryDocumentLoaded$=this.discoveryDocumentLoadedSubject.asObservable(),this.events=this.eventsSubject.asObservable(),r&&(this.tokenValidationHandler=r),s&&this.configure(s);try{n?this.setStorage(n):"undefined"!=typeof sessionStorage&&this.setStorage(sessionStorage)}catch(l){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",l)}this.setupRefreshTimer()}configure(t){Object.assign(this,new cm,t),this.config=Object.assign({},new cm,t),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()}configChanged(){this.setupRefreshTimer()}restartSessionChecksIfStillLoggedIn(){this.hasValidIdToken()&&this.initSessionCheck()}restartRefreshTimerIfStillLoggedIn(){this.setupExpirationTimers()}setupSessionCheck(){this.events.pipe(Sh(t=>"token_received"===t.type)).subscribe(t=>{this.initSessionCheck()})}setupAutomaticSilentRefresh(t={},e,n=!0){let r=!0;this.events.pipe(Bd(t=>{"token_received"===t.type?r=!0:"logout"===t.type&&(r=!1)}),Sh(t=>"token_expires"===t.type)).subscribe(s=>{null!=e&&"any"!==e&&s.info!==e||!r||this.refreshInternal(t,n).catch(t=>{this.debug("Automatic silent refresh did not work")})}),this.restartRefreshTimerIfStillLoggedIn()}refreshInternal(t,e){return"code"===this.responseType?this.refreshToken():this.silentRefresh(t,e)}loadDiscoveryDocumentAndTryLogin(t=null){return this.loadDiscoveryDocument().then(e=>this.tryLogin(t))}loadDiscoveryDocumentAndLogin(t=null){return this.loadDiscoveryDocumentAndTryLogin(t).then(t=>!(!this.hasValidIdToken()||!this.hasValidAccessToken())||(this.initImplicitFlow(),!1))}debug(...t){this.showDebugInformation&&this.logger.debug.apply(console,t)}validateUrlFromDiscoveryDocument(t){const e=[],n=this.validateUrlForHttps(t),r=this.validateUrlAgainstIssuer(t);return n||e.push("https for all urls required. Also for urls received by discovery."),r||e.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),e}validateUrlForHttps(t){if(!t)return!0;const e=t.toLowerCase();return!1===this.requireHttps||!(!e.match(/^http:\/\/localhost($|[:\/])/)&&!e.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps)||e.startsWith("https://")}validateUrlAgainstIssuer(t){return!this.strictDiscoveryDocumentValidation||!t||t.toLowerCase().startsWith(this.issuer.toLowerCase())}setupRefreshTimer(){"undefined"!=typeof window?(this.hasValidIdToken()&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.events.pipe(Sh(t=>"token_received"===t.type)).subscribe(t=>{this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()})):this.debug("timer not supported on this plattform")}setupExpirationTimers(){const t=this.getIdTokenExpiration()||Number.MAX_VALUE,e=(this.getAccessTokenExpiration()||Number.MAX_VALUE)<=t;this.hasValidAccessToken()&&e&&this.setupAccessTokenTimer(),this.hasValidIdToken()&&!e&&this.setupIdTokenTimer()}setupAccessTokenTimer(){const t=this.getAccessTokenExpiration(),e=this.getAccessTokenStoredAt(),n=this.calcTimeout(e,t);this.ngZone.runOutsideAngular(()=>{this.accessTokenTimeoutSubscription=wh(new am("token_expires","access_token")).pipe($g(n)).subscribe(t=>{this.ngZone.run(()=>{this.eventsSubject.next(t)})})})}setupIdTokenTimer(){const t=this.getIdTokenExpiration(),e=this.getIdTokenStoredAt(),n=this.calcTimeout(e,t);this.ngZone.runOutsideAngular(()=>{this.idTokenTimeoutSubscription=wh(new am("token_expires","id_token")).pipe($g(n)).subscribe(t=>{this.ngZone.run(()=>{this.eventsSubject.next(t)})})})}clearAccessTokenTimer(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()}clearIdTokenTimer(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()}calcTimeout(t,e){const n=Date.now();return Math.max(0,(e-t)*this.timeoutFactor-(n-t))}setStorage(t){this._storage=t,this.configChanged()}loadDiscoveryDocument(t=null){return new Promise((e,n)=>{t||((t=this.issuer||"").endsWith("/")||(t+="/"),t+=".well-known/openid-configuration"),this.validateUrlForHttps(t)?this.http.get(t).subscribe(t=>{if(!this.validateDiscoveryDocument(t))return this.eventsSubject.next(new lm("discovery_document_validation_error",null)),void n("discovery_document_validation_error");this.loginUrl=t.authorization_endpoint,this.logoutUrl=t.end_session_endpoint||this.logoutUrl,this.grantTypesSupported=t.grant_types_supported,this.issuer=t.issuer,this.tokenEndpoint=t.token_endpoint,this.userinfoEndpoint=t.userinfo_endpoint,this.jwksUri=t.jwks_uri,this.sessionCheckIFrameUrl=t.check_session_iframe||this.sessionCheckIFrameUrl,this.discoveryDocumentLoaded=!0,this.discoveryDocumentLoadedSubject.next(t),this.sessionChecksEnabled&&this.restartSessionChecksIfStillLoggedIn(),this.loadJwks().then(n=>{const r=new om("discovery_document_loaded",{discoveryDocument:t,jwks:n});this.eventsSubject.next(r),e(r)}).catch(t=>{this.eventsSubject.next(new lm("discovery_document_load_error",t)),n(t)})},t=>{this.logger.error("error loading discovery document",t),this.eventsSubject.next(new lm("discovery_document_load_error",t)),n(t)}):n("issuer must use https, or config value for property requireHttps must allow http")})}loadJwks(){return new Promise((t,e)=>{this.jwksUri?this.http.get(this.jwksUri).subscribe(e=>{this.jwks=e,this.eventsSubject.next(new om("discovery_document_loaded")),t(e)},t=>{this.logger.error("error loading jwks",t),this.eventsSubject.next(new lm("jwks_load_error",t)),e(t)}):t(null)})}validateDiscoveryDocument(t){let e;return this.skipIssuerCheck||t.issuer===this.issuer?(e=this.validateUrlFromDiscoveryDocument(t.authorization_endpoint),e.length>0?(this.logger.error("error validating authorization_endpoint in discovery document",e),!1):(e=this.validateUrlFromDiscoveryDocument(t.end_session_endpoint),e.length>0?(this.logger.error("error validating end_session_endpoint in discovery document",e),!1):(e=this.validateUrlFromDiscoveryDocument(t.token_endpoint),e.length>0&&this.logger.error("error validating token_endpoint in discovery document",e),e=this.validateUrlFromDiscoveryDocument(t.userinfo_endpoint),e.length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",e),!1):(e=this.validateUrlFromDiscoveryDocument(t.jwks_uri),e.length>0?(this.logger.error("error validating jwks_uri in discovery document",e),!1):(this.sessionChecksEnabled&&!t.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0))))):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+t.issuer),!1)}fetchTokenUsingPasswordFlowAndLoadUserProfile(t,e,n=new Ah){return this.fetchTokenUsingPasswordFlow(t,e,n).then(()=>this.loadUserProfile())}loadUserProfile(){if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use https, or config value for property requireHttps must allow http");return new Promise((t,e)=>{const n=(new Ah).set("Authorization","Bearer "+this.getAccessToken());this.http.get(this.userinfoEndpoint,{headers:n}).subscribe(n=>{this.debug("userinfo received",n);const r=this.getIdentityClaims()||{};this.skipSubjectCheck||!this.oidc||r.sub&&n.sub===r.sub?(n=Object.assign({},r,n),this._storage.setItem("id_token_claims_obj",JSON.stringify(n)),this.eventsSubject.next(new om("user_profile_loaded")),t(n)):e("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false")},t=>{this.logger.error("error loading user info",t),this.eventsSubject.next(new lm("user_profile_load_error",t)),e(t)})})}fetchTokenUsingPasswordFlow(t,e,n=new Ah){if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");return new Promise((r,s)=>{let i=new Ih({encoder:new um}).set("grant_type","password").set("scope",this.scope).set("username",t).set("password",e);if(this.useHttpBasicAuth){const t=btoa(`${this.clientId}:${this.dummyClientSecret}`);n=n.set("Authorization","Basic "+t)}if(this.useHttpBasicAuth||(i=i.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(i=i.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const t of Object.getOwnPropertyNames(this.customQueryParams))i=i.set(t,this.customQueryParams[t]);n=n.set("Content-Type","application/x-www-form-urlencoded"),this.http.post(this.tokenEndpoint,i,{headers:n}).subscribe(t=>{this.debug("tokenResponse",t),this.storeAccessTokenResponse(t.access_token,t.refresh_token,t.expires_in,t.scope),this.eventsSubject.next(new om("token_received")),r(t)},t=>{this.logger.error("Error performing password flow",t),this.eventsSubject.next(new lm("token_error",t)),s(t)})})}refreshToken(){if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");return new Promise((t,e)=>{let n=(new Ih).set("grant_type","refresh_token").set("client_id",this.clientId).set("scope",this.scope).set("refresh_token",this._storage.getItem("refresh_token"));if(this.dummyClientSecret&&(n=n.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const s of Object.getOwnPropertyNames(this.customQueryParams))n=n.set(s,this.customQueryParams[s]);const r=(new Ah).set("Content-Type","application/x-www-form-urlencoded");this.http.post(this.tokenEndpoint,n,{headers:r}).pipe(Pd(t=>t.id_token?M(this.processIdToken(t.id_token,t.access_token,!0)).pipe(Bd(t=>this.storeIdToken(t)),j(e=>t)):wh(t))).subscribe(e=>{this.debug("refresh tokenResponse",e),this.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in,e.scope),this.eventsSubject.next(new om("token_received")),this.eventsSubject.next(new om("token_refreshed")),t(e)},t=>{this.logger.error("Error performing password flow",t),this.eventsSubject.next(new lm("token_refresh_error",t)),e(t)})})}removeSilentRefreshEventListener(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)}setupSilentRefreshEventListener(){this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=t=>{const e=this.processMessageEventMessage(t);this.tryLogin({customHashFragment:e,preventClearHashAfterLogin:!0,onLoginError:t=>{this.eventsSubject.next(new lm("silent_refresh_error",t))},onTokenReceived:()=>{this.eventsSubject.next(new om("silently_refreshed"))}}).catch(t=>this.debug("tryLogin during silent refresh failed",t))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)}silentRefresh(t={},e=!0){const n=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(t.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");if("undefined"==typeof document)throw new Error("silent refresh is not supported on this platform");const r=document.getElementById(this.silentRefreshIFrameName);r&&document.body.removeChild(r),this.silentRefreshSubject=n.sub;const s=document.createElement("iframe");return s.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,e,t).then(t=>{s.setAttribute("src",t),this.silentRefreshShowIFrame||(s.style.display="none"),document.body.appendChild(s)}),function(...t){if(1===t.length){if(!l(t[0]))return t[0];t=t[0]}return G(t,void 0).lift(new Og)}([this.events.pipe(Sh(t=>t instanceof lm),Id()),this.events.pipe(Sh(t=>"silently_refreshed"===t.type),Id()),wh(new lm("silent_refresh_timeout",null)).pipe($g(this.silentRefreshTimeout))]).pipe(Bd(t=>{"silent_refresh_timeout"===t.type&&this.eventsSubject.next(t)}),j(t=>{if(t instanceof lm)throw t;return t})).toPromise()}initImplicitFlowInPopup(t){return t=t||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then(e=>new Promise((n,r)=>{let s=window.open(e,"_blank",this.calculatePopupFeatures(t));const i=()=>{window.removeEventListener("message",o),s.close(),s=null},o=t=>{const e=this.processMessageEventMessage(t);this.tryLogin({customHashFragment:e,preventClearHashAfterLogin:!0}).then(()=>{i(),n()},t=>{i(),r(t)})};window.addEventListener("message",o)}))}calculatePopupFeatures(t){const e=t.height||470,n=t.width||500,r=screen.width/2-n/2;return`location=no,toolbar=no,width=${n},height=${e},top=${screen.height/2-e/2},left=${r}`}processMessageEventMessage(t){let e="#";if(this.silentRefreshMessagePrefix&&(e+=this.silentRefreshMessagePrefix),!t||!t.data||"string"!=typeof t.data)return;const n=t.data;return n.startsWith(e)?"#"+n.substr(e.length):void 0}canPerformSessionCheck(){return!!this.sessionChecksEnabled&&(this.sessionCheckIFrameUrl?this.getSessionState()?"undefined"!=typeof document:(console.warn("sessionChecksEnabled is activated but there is no session_state"),!1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),!1))}setupSessionCheckEventListener(){this.removeSessionCheckEventListener(),this.sessionCheckEventListener=t=>{const e=t.origin.toLowerCase(),n=this.issuer.toLowerCase();switch(this.debug("sessionCheckEventListener"),n.startsWith(e)||this.debug("sessionCheckEventListener","wrong origin",e,"expected",n),t.data){case"unchanged":this.handleSessionUnchanged();break;case"changed":this.ngZone.run(()=>{this.handleSessionChange()});break;case"error":this.ngZone.run(()=>{this.handleSessionError()})}this.debug("got info from session check inframe",t)},this.ngZone.runOutsideAngular(()=>{window.addEventListener("message",this.sessionCheckEventListener)})}handleSessionUnchanged(){this.debug("session check","session unchanged")}handleSessionChange(){this.eventsSubject.next(new am("session_changed")),this.stopSessionCheckTimer(),this.silentRefreshRedirectUri?(this.silentRefresh().catch(t=>this.debug("silent refresh failed after session changed")),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new am("session_terminated")),this.logOut(!0))}waitForSilentRefreshAfterSessionChange(){this.events.pipe(Sh(t=>"silently_refreshed"===t.type||"silent_refresh_timeout"===t.type||"silent_refresh_error"===t.type),Id()).subscribe(t=>{"silently_refreshed"!==t.type&&(this.debug("silent refresh did not work after session changed"),this.eventsSubject.next(new am("session_terminated")),this.logOut(!0))})}handleSessionError(){this.stopSessionCheckTimer(),this.eventsSubject.next(new am("session_error"))}removeSessionCheckEventListener(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)}initSessionCheck(){if(!this.canPerformSessionCheck())return;const t=document.getElementById(this.sessionCheckIFrameName);t&&document.body.removeChild(t);const e=document.createElement("iframe");e.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),e.setAttribute("src",this.sessionCheckIFrameUrl),e.style.display="none",document.body.appendChild(e),this.startSessionCheckTimer()}startSessionCheckTimer(){this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular(()=>{this.sessionCheckTimer=setInterval(this.checkSession.bind(this),this.sessionCheckIntervall)})}stopSessionCheckTimer(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)}checkSession(){const t=document.getElementById(this.sessionCheckIFrameName);t||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);const e=this.getSessionState();e||this.stopSessionCheckTimer(),t.contentWindow.postMessage(this.clientId+" "+e,this.issuer)}createLoginUrl(t="",e="",n="",r=!1,s={}){return Rg(this,void 0,void 0,(function*(){let i;i=n||this.redirectUri;const o=yield this.createAndSaveNonce();if(t=t?o+this.config.nonceStateSeparator+t:o,!this.requestAccessToken&&!this.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");this.responseType=this.config.responseType?this.config.responseType:this.oidc&&this.requestAccessToken?"id_token token":this.oidc&&!this.requestAccessToken?"id_token":"token";const a=this.loginUrl.indexOf("?")>-1?"&":"?";let l=this.scope;this.oidc&&!l.match(/(^|\s)openid($|\s)/)&&(l="openid "+l);let c=this.loginUrl+a+"response_type="+encodeURIComponent(this.responseType)+"&client_id="+encodeURIComponent(this.clientId)+"&state="+encodeURIComponent(t)+"&redirect_uri="+encodeURIComponent(i)+"&scope="+encodeURIComponent(l);if("code"===this.responseType&&!this.disablePKCE){const[t,e]=yield this.createChallangeVerifierPairForPKCE();this._storage.setItem("PKCI_verifier",e),c+="&code_challenge="+t,c+="&code_challenge_method=S256"}e&&(c+="&login_hint="+encodeURIComponent(e)),this.resource&&(c+="&resource="+encodeURIComponent(this.resource)),this.oidc&&(c+="&nonce="+encodeURIComponent(o)),r&&(c+="&prompt=none");for(const t of Object.keys(s))c+="&"+encodeURIComponent(t)+"="+encodeURIComponent(s[t]);if(this.customQueryParams)for(const t of Object.getOwnPropertyNames(this.customQueryParams))c+="&"+t+"="+encodeURIComponent(this.customQueryParams[t]);return c}))}initImplicitFlowInternal(t="",e=""){if(this.inImplicitFlow)return;if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl must use https, or config value for property requireHttps must allow http");let n={},r=null;"string"==typeof e?r=e:"object"==typeof e&&(n=e),this.createLoginUrl(t,r,null,!1,n).then(this.config.openUri).catch(t=>{console.error("Error in initImplicitFlow",t),this.inImplicitFlow=!1})}initImplicitFlow(t="",e=""){""!==this.loginUrl?this.initImplicitFlowInternal(t,e):this.events.pipe(Sh(t=>"discovery_document_loaded"===t.type)).subscribe(n=>this.initImplicitFlowInternal(t,e))}resetImplicitFlow(){this.inImplicitFlow=!1}callOnTokenReceivedIfExists(t){const e=this;if(t.onTokenReceived){const n={idClaims:e.getIdentityClaims(),idToken:e.getIdToken(),accessToken:e.getAccessToken(),state:e.state};t.onTokenReceived(n)}}storeAccessTokenResponse(t,e,n,r){if(this._storage.setItem("access_token",t),r&&this._storage.setItem("granted_scopes",JSON.stringify(r.split("+"))),this._storage.setItem("access_token_stored_at",""+Date.now()),n){const t=1e3*n,e=(new Date).getTime()+t;this._storage.setItem("expires_at",""+e)}e&&this._storage.setItem("refresh_token",e)}tryLogin(t=null){return"code"===this.config.responseType?this.tryLoginCodeFlow().then(t=>!0):this.tryLoginImplicitFlow(t)}parseQueryString(t){return t&&0!==t.length?("?"===t.charAt(0)&&(t=t.substr(1)),this.urlHelper.parseQueryString(t)):{}}tryLoginCodeFlow(){const t=this.parseQueryString(window.location.search),e=t.code,n=t.state,r=location.href.replace(/[&\?]code=[^&\$]*/,"").replace(/[&\?]scope=[^&\$]*/,"").replace(/[&\?]state=[^&\$]*/,"").replace(/[&\?]session_state=[^&\$]*/,"");history.replaceState(null,window.name,r);let[s,i]=this.parseState(n);if(this.state=i,t.error){this.debug("error trying to login"),this.handleLoginError({},t);const e=new lm("code_error",{},t);return this.eventsSubject.next(e),Promise.reject(e)}if(!s)return Promise.resolve();if(!this.validateNonce(s)){const t=new lm("invalid_nonce_in_state",null);return this.eventsSubject.next(t),Promise.reject(t)}return e?new Promise((t,n)=>{this.getTokenFromCode(e).then(e=>{t()}).catch(t=>{n(t)})}):Promise.resolve()}getTokenFromCode(t){let e=(new Ih).set("grant_type","authorization_code").set("code",t).set("redirect_uri",this.redirectUri);if(!this.disablePKCE){const t=this._storage.getItem("PKCI_verifier");t?e=e.set("code_verifier",t):console.warn("No PKCI verifier found in oauth storage!")}return this.fetchAndProcessToken(e)}fetchAndProcessToken(t){let e=(new Ah).set("Content-Type","application/x-www-form-urlencoded");if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use Http. Also check property requireHttps.");if(this.useHttpBasicAuth){const t=btoa(`${this.clientId}:${this.dummyClientSecret}`);e=e.set("Authorization","Basic "+t)}return this.useHttpBasicAuth||(t=t.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(t=t.set("client_secret",this.dummyClientSecret)),new Promise((n,r)=>{if(this.customQueryParams)for(let e of Object.getOwnPropertyNames(this.customQueryParams))t=t.set(e,this.customQueryParams[e]);this.http.post(this.tokenEndpoint,t,{headers:e}).subscribe(t=>{this.debug("refresh tokenResponse",t),this.storeAccessTokenResponse(t.access_token,t.refresh_token,t.expires_in,t.scope),this.oidc&&t.id_token?this.processIdToken(t.id_token,t.access_token).then(e=>{this.storeIdToken(e),this.eventsSubject.next(new om("token_received")),this.eventsSubject.next(new om("token_refreshed")),n(t)}).catch(t=>{this.eventsSubject.next(new lm("token_validation_error",t)),console.error("Error validating tokens"),console.error(t),r(t)}):(this.eventsSubject.next(new om("token_received")),this.eventsSubject.next(new om("token_refreshed")),n(t))},t=>{console.error("Error getting token",t),this.eventsSubject.next(new lm("token_refresh_error",t)),r(t)})})}tryLoginImplicitFlow(t=null){let e;e=(t=t||{}).customHashFragment?this.urlHelper.getHashFragmentParams(t.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",e);const n=e.state;let[r,s]=this.parseState(n);if(this.state=s,e.error){this.debug("error trying to login"),this.handleLoginError(t,e);const n=new lm("token_error",{},e);return this.eventsSubject.next(n),Promise.reject(n)}const i=e.access_token,o=e.id_token,a=e.session_state,l=e.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!i)return Promise.resolve(!1);if(this.requestAccessToken&&!t.disableOAuth2StateCheck&&!n)return Promise.resolve(!1);if(this.oidc&&!o)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!a&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!t.disableOAuth2StateCheck&&!this.validateNonce(r)){const t=new lm("invalid_nonce_in_state",null);return this.eventsSubject.next(t),Promise.reject(t)}return this.requestAccessToken&&this.storeAccessTokenResponse(i,null,e.expires_in||this.fallbackAccessTokenExpirationTimeInSec,l),this.oidc?this.processIdToken(o,i).then(e=>t.validationHandler?t.validationHandler({accessToken:i,idClaims:e.idTokenClaims,idToken:e.idToken,state:n}).then(t=>e):e).then(e=>(this.storeIdToken(e),this.storeSessionState(a),this.clearHashAfterLogin&&(location.hash=""),this.eventsSubject.next(new om("token_received")),this.callOnTokenReceivedIfExists(t),this.inImplicitFlow=!1,!0)).catch(t=>(this.eventsSubject.next(new lm("token_validation_error",t)),this.logger.error("Error validating tokens"),this.logger.error(t),Promise.reject(t))):(this.eventsSubject.next(new om("token_received")),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&(location.hash=""),this.callOnTokenReceivedIfExists(t),Promise.resolve(!0))}parseState(t){let e=t,n="";if(t){const r=t.indexOf(this.config.nonceStateSeparator);r>-1&&(e=t.substr(0,r),n=t.substr(r+this.config.nonceStateSeparator.length))}return[e,n]}validateNonce(t){const e=this._storage.getItem("nonce");return e===t||(console.error("Validating access_token failed, wrong state/nonce.",e,t),!1)}storeIdToken(t){this._storage.setItem("id_token",t.idToken),this._storage.setItem("id_token_claims_obj",t.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+t.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+Date.now())}storeSessionState(t){this._storage.setItem("session_state",t)}getSessionState(){return this._storage.getItem("session_state")}handleLoginError(t,e){t.onLoginError&&t.onLoginError(e),this.clearHashAfterLogin&&(location.hash="")}processIdToken(t,e,n=!1){const r=t.split("."),s=em(this.padBase64(r[0])),i=JSON.parse(s),o=em(this.padBase64(r[1])),a=JSON.parse(o),l=this._storage.getItem("nonce");if(Array.isArray(a.aud)){if(a.aud.every(t=>t!==this.clientId)){const t="Wrong audience: "+a.aud.join(",");return this.logger.warn(t),Promise.reject(t)}}else if(a.aud!==this.clientId){const t="Wrong audience: "+a.aud;return this.logger.warn(t),Promise.reject(t)}if(!a.sub){const t="No sub claim in id_token";return this.logger.warn(t),Promise.reject(t)}if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==a.sub){const t="After refreshing, we got an id_token for another user (sub). "+`Expected sub: ${this.silentRefreshSubject}, received sub: ${a.sub}`;return this.logger.warn(t),Promise.reject(t)}if(!a.iat){const t="No iat claim in id_token";return this.logger.warn(t),Promise.reject(t)}if(!this.skipIssuerCheck&&a.iss!==this.issuer){const t="Wrong issuer: "+a.iss;return this.logger.warn(t),Promise.reject(t)}if(!n&&a.nonce!==l){const t="Wrong nonce: "+a.nonce;return this.logger.warn(t),Promise.reject(t)}if(!this.disableAtHashCheck&&this.requestAccessToken&&!a.at_hash){const t="An at_hash is needed!";return this.logger.warn(t),Promise.reject(t)}const c=Date.now(),u=1e3*a.iat,h=1e3*a.exp,d=1e3*(this.clockSkewInSec||600);if(u-d>=c||h+d<=c){const t="Token has expired";return console.error(t),console.error({now:c,issuedAtMSec:u,expiresAtMSec:h}),Promise.reject(t)}const f={accessToken:e,idToken:t,jwks:this.jwks,idTokenClaims:a,idTokenHeader:i,loadKeys:()=>this.loadJwks()};return this.checkAtHash(f).then(e=>{if(!this.disableAtHashCheck&&this.requestAccessToken&&!e){const t="Wrong at_hash";return this.logger.warn(t),Promise.reject(t)}return this.checkSignature(f).then(e=>({idToken:t,idTokenClaims:a,idTokenClaimsJson:o,idTokenHeader:i,idTokenHeaderJson:s,idTokenExpiresAt:h}))})}getIdentityClaims(){const t=this._storage.getItem("id_token_claims_obj");return t?JSON.parse(t):null}getGrantedScopes(){const t=this._storage.getItem("granted_scopes");return t?JSON.parse(t):null}getIdToken(){return this._storage?this._storage.getItem("id_token"):null}padBase64(t){for(;t.length%4!=0;)t+="=";return t}getAccessToken(){return this._storage?this._storage.getItem("access_token"):null}getRefreshToken(){return this._storage?this._storage.getItem("refresh_token"):null}getAccessTokenExpiration(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null}getAccessTokenStoredAt(){return parseInt(this._storage.getItem("access_token_stored_at"),10)}getIdTokenStoredAt(){return parseInt(this._storage.getItem("id_token_stored_at"),10)}getIdTokenExpiration(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null}hasValidAccessToken(){if(this.getAccessToken()){const t=this._storage.getItem("expires_at"),e=new Date;return!(t&&parseInt(t,10)<e.getTime())}return!1}hasValidIdToken(){if(this.getIdToken()){const t=this._storage.getItem("id_token_expires_at"),e=new Date;return!(t&&parseInt(t,10)<e.getTime())}return!1}authorizationHeader(){return"Bearer "+this.getAccessToken()}logOut(t=!1){const e=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this._storage.removeItem("nonce"),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.silentRefreshSubject=null,this.eventsSubject.next(new am("logout")),!this.logoutUrl)return;if(t)return;if(!e&&!this.postLogoutRedirectUri)return;let n;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl must use https, or config value for property requireHttps must allow http");if(this.logoutUrl.indexOf("{{")>-1)n=this.logoutUrl.replace(/\{\{id_token\}\}/,e).replace(/\{\{client_id\}\}/,this.clientId);else{let t=new Ih;e&&(t=t.set("id_token_hint",e));const r=this.postLogoutRedirectUri||this.redirectUri;r&&(t=t.set("post_logout_redirect_uri",r)),n=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+t.toString()}this.config.openUri(n)}createAndSaveNonce(){const t=this;return this.createNonce().then((function(e){return t._storage.setItem("nonce",e),e}))}ngOnDestroy(){this.clearAccessTokenTimer(),this.clearIdTokenTimer()}createNonce(){return new Promise(t=>{if(this.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");const e="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-";let n=45,r="";const s=self.crypto||self.msCrypto;if(s){const t=s.getRandomValues(new Uint8Array(n));for(;0<n--;)r+=e[63&t[n]]}else for(;0<n--;)r+=e[64*Math.random()|0];t(r)})}checkAtHash(t){return Rg(this,void 0,void 0,(function*(){return this.tokenValidationHandler?this.tokenValidationHandler.validateAtHash(t):(this.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),!0)}))}checkSignature(t){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(t):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))}initLoginFlow(t="",e={}){return"code"===this.responseType?this.initCodeFlow(t,e):this.initImplicitFlow(t,e)}initCodeFlow(t="",e={}){""!==this.loginUrl?this.initCodeFlowInternal(t,e):this.events.pipe(Sh(t=>"discovery_document_loaded"===t.type)).subscribe(n=>this.initCodeFlowInternal(t,e))}initCodeFlowInternal(t="",e={}){if(!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl must use Http. Also check property requireHttps.");this.createLoginUrl(t,"",null,!1,e).then((function(t){location.href=t})).catch(t=>{console.error("Error in initAuthorizationCodeFlow"),console.error(t)})}createChallangeVerifierPairForPKCE(){return Rg(this,void 0,void 0,(function*(){if(!this.crypto)throw new Error("PKCI support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");const t=yield this.createNonce();return[nm(yield this.crypto.calcHash(t,"sha-256")),t]}))}}return t.\u0275fac=function(e){return new(e||t)(Wt(Ic),Wt(Lh),Wt(tm,8),Wt(rm,8),Wt(cm,8),Wt(sm),Wt(Xg),Wt(hm,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class fm{}class pm{}class gm{handleError(t){return Hg(t)}}let mm=(()=>{class t{constructor(t,e,n,r){this.authStorage=t,this.oAuthService=e,this.errorHandler=n,this.moduleConfig=r}checkUrl(t){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(t):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find(e=>t.startsWith(e))}intercept(t,e){const n=t.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer?this.moduleConfig.resourceServer.allowedUrls&&!this.checkUrl(n)?e.handle(t):this.moduleConfig.resourceServer.sendAccessToken?W(wh(this.oAuthService.getAccessToken()).pipe(Sh(t=>!!t)),this.oAuthService.events.pipe(Sh(t=>"token_received"===t.type),function(t,e=Ug){return function(t,e,n=Ug){return r=>{let s=qg(t),i=s?+t-n.now():Math.abs(t);return r.lift(new Zg(i,s,e,n))}}(t,Hg(new Jg),e)}(this.oAuthService.waitForTokenInMsec||0),xd(t=>wh(null)),j(t=>this.oAuthService.getAccessToken()))).pipe(Ad(1),U(n=>{if(n){const e=t.headers.set("Authorization","Bearer "+n);t=t.clone({headers:e})}return e.handle(t).pipe(xd(t=>this.errorHandler.handleError(t)))})):e.handle(t).pipe(xd(t=>this.errorHandler.handleError(t))):e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Wt(tm),Wt(dm),Wt(pm),Wt(fm,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function ym(){return console}function vm(){return"undefined"!=typeof sessionStorage?sessionStorage:null}class wm extends class{validateAtHash(t){return Rg(this,void 0,void 0,(function*(){let e=this.inferHashAlgorithm(t.idTokenHeader),n=yield this.calcHash(t.accessToken,e),r=nm(n.substr(0,n.length/2)),s=t.idTokenClaims.at_hash.replace(/=/g,"");return r!==s&&(console.error("exptected at_hash: "+r),console.error("actual at_hash: "+s)),r===s}))}inferHashAlgorithm(t){let e=t.alg;if(!e.match(/^.S[0-9]{3}$/))throw new Error("Algorithm not supported: "+e);return"sha-"+e.substr(2)}}{constructor(){super(...arguments),this.allowedAlgorithms=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","PS256","PS384","PS512"],this.gracePeriodInSec=600}validateSignature(t,e=!1){if(!t.idToken)throw new Error("Parameter idToken expected!");if(!t.idTokenHeader)throw new Error("Parameter idTokenHandler expected.");if(!t.jwks)throw new Error("Parameter jwks expected!");if(!t.jwks.keys||!Array.isArray(t.jwks.keys)||0===t.jwks.keys.length)throw new Error("Array keys in jwks missing!");let n,r=t.idTokenHeader.kid,s=t.jwks.keys,i=t.idTokenHeader.alg;if(r)n=s.find(t=>t.kid===r);else{let t=this.alg2kty(i),e=s.filter(e=>e.kty===t&&"sig"===e.use);if(e.length>1){let t="More than one matching key found. Please specify a kid in the id_token header.";return console.error(t),Promise.reject(t)}1===e.length&&(n=e[0])}if(!n&&!e&&t.loadKeys)return t.loadKeys().then(e=>t.jwks=e).then(e=>this.validateSignature(t,!0));if(!n&&e&&!r){let t="No matching key found.";return console.error(t),Promise.reject(t)}if(!n&&e&&r){let t="expected key not found in property jwks. This property is most likely loaded with the discovery document. Expected key id (kid): "+r;return console.error(t),Promise.reject(t)}let o=Qg.KEYUTIL.getKey(n);return Qg.KJUR.jws.JWS.verifyJWT(t.idToken,o,{alg:this.allowedAlgorithms,gracePeriod:this.gracePeriodInSec})?Promise.resolve():Promise.reject("Signature not valid")}alg2kty(t){switch(t.charAt(0)){case"R":return"RSA";case"E":return"EC";default:throw new Error("Cannot infer kty from alg: "+t)}}calcHash(t,e){let n=new Qg.KJUR.crypto.MessageDigest({alg:e}).digestString(t),r=this.toByteArrayAsString(n);return Promise.resolve(r)}toByteArrayAsString(t){let e="";for(let n=0;n<t.length;n+=2){let r=t.charAt(n)+t.charAt(n+1),s=parseInt(r,16);e+=String.fromCharCode(s)}return e}}let bm=(()=>{class t{static forRoot(e=null,n=class{validateSignature(t){return Promise.resolve(null)}validateAtHash(t){return Promise.resolve(!0)}}){return{ngModule:t,providers:[dm,sm,{provide:Xg,useFactory:ym},{provide:tm,useFactory:vm},{provide:rm,useClass:n},{provide:hm,useClass:wm},{provide:pm,useClass:gm},{provide:fm,useValue:e},{provide:Uh,useClass:mm,multi:!0}]}}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu]]}),t})(),Sm=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu]]}),t})(),_m=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu]]}),t})(),xm=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu,_m]]}),t})(),Cm=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu]]}),t})(),Em=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu]]}),t})(),Am=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu,xg,Sm,_m,xm,Cm,Em],Sm,_m,xm,Cm,Em]}),t})(),Fm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-forbidden"]],decls:6,vars:0,template:function(t,e){1&t&&(uo(0,"h1"),zo(1,"Oooppss... "),fo(2,"br"),zo(3,"You do not have access to this area!"),ho(),uo(4,"p"),zo(5,"Please try to login or ask your administrator."),ho())},encapsulation:2}),t})(),Tm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-page-not-found"]],decls:4,vars:0,template:function(t,e){1&t&&(uo(0,"h1"),zo(1,"Oooppss... "),fo(2,"br"),zo(3,"This page does not exist!"),ho())},encapsulation:2}),t})(),Im=(()=>{class t{constructor(){this.baseUrl="api"}get apiUrl(){return`${this.baseUrl}`}createRawUrl(t){return`${t}`}createApiUrl(t){return`${this.baseUrl}/${t}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function km(t){const e=t.prototype.ngOnDestroy;t.prototype.ngOnDestroy=function(){for(const t in this){const e=this[t];e&&"function"==typeof e.unsubscribe&&e.unsubscribe()}e&&"function"==typeof e&&e.apply(this,arguments)}}let Dm=(()=>{class t{constructor(t,e){this.http=t,this.api=e}get(t,e){const n=this.api.createApiUrl(t);return this.http.get(n,{params:e})}post(t,e){const n=this.api.createApiUrl(t);return this.http.post(n,e)}postFile(t,e,n=!1){const r=this.api.createApiUrl(t),s=new FormData;s.append("file",e);const i=new Rh("POST",r,s,{reportProgress:n});return this.http.request(i)}put(t,e){const n=this.api.createApiUrl(t);return this.http.put(n,e)}delete(t){const e=this.api.createApiUrl(t);return this.http.delete(e)}getBlob(t){const e=this.api.createApiUrl(t);return this.http.get(e,{responseType:"blob"})}handleError(t){if(t.error instanceof ErrorEvent)console.error("An error occured:",t.error.message);else{if(400===t.status)return Hg({succeeded:!1,errors:t.error[""]});console.error(`Backend returned code ${t.status}: ${t.error.title}`)}return Hg("Somehting went wrong. Please try again later.")}}return t.\u0275fac=function(e){return new(e||t)(Wt(Lh),Wt(Im))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Pm=(()=>{class t{constructor(t,e){this.oauthService=t,this.router=e}canActivate(){const t=this.oauthService.hasValidAccessToken();return t||this.router.navigate(["forbidden"]),t}canActivateChild(){return this.canActivate()}}return t.\u0275fac=function(e){return new(e||t)(Wt(dm),Wt(og))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Rm=(()=>{class t{constructor(){this.subscribers={}}subsribe(t){const e=(new Date).valueOf();return this.subscribers[e]=t,e}unsubscribe(t){delete this.subscribers[t]}publish(t){const e=this.getSubscribersForMessage(t);0!==e.length&&e.forEach(e=>{e.onMessage(t)})}getSubscribersForMessage(t){const e=new Array;for(const n in this.subscribers)if(this.subscribers.hasOwnProperty(n)){const r=this.subscribers[n];r.getType()===t.getType()&&e.push(r)}return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Om{}var Nm=function(t){return t[t.Success=0]="Success",t[t.Info=1]="Info",t[t.Warning=2]="Warning",t[t.Danger=3]="Danger",t}({});let Hm=(()=>{class t extends Om{constructor(t,e,n,r){super(),this.title=t,this.message=e,this.level=n,this._hasAction=!1,this._viewed=!1,this.action=void 0,this.level=void 0!==n?n:Nm.Info,r&&(this._hasAction=!0,this.action=r)}get viewed(){return this._viewed}set viewed(t){this._viewed=t,this._viewed&&this.hasAction&&delete this.action}get hasAction(){return this._hasAction}getType(){return t.KEY}}return t.KEY="StatusMessage",t})(),jm=(()=>{class t{constructor(){this.username=t.ANONYMOUS,this.claims=new Array}get isAuthenticated(){return this.username!==t.ANONYMOUS}get userName(){return this.username}get userClaims(){return this.claims}reset(){this.setProperties()}hasClaim(t){return!(!this.claims||!t)&&this.claims.some(e=>e===t)}setProperties(e=null){if(e){const t=JSON.parse(window.atob(e.split(".")[1]));return this.username=t.name,void(this.claims=Array.isArray(t.role)?t.role:[t.role])}this.username=t.ANONYMOUS,this.claims=new Array}}return t.ANONYMOUS="anonymous",t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Vm=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu,ed]]}),t})(),Bm=(()=>{class t extends Om{constructor(t){super(),this.source=t}getType(){return t.KEY}}return t.KEY="RefreshMessage",t})(),Lm=(()=>{class t{constructor(t){this.http=t}load(){return this.http.get("client/config/spaclient-code").toPromise().then(t=>{this.config=t})}}return t.\u0275fac=function(e){return new(e||t)(Wt(Dm))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:Vm}),t})();function Mm(t){return()=>t.load()}let Um=(()=>{class t{constructor(){this.items=new Array}ngOnDestroy(){this.items=[]}register(t){this.items.some(e=>e.id===t.id)||this.items.push(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),qm=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[Um],imports:[[Uu,xg,_m]]}),t})(),Km=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu,xg,Am,qm]]}),t})(),$m=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu,_m]]}),t})(),zm=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu,xg,Am,$m]]}),t})(),Gm=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu,Km,zm],Km,zm]}),t})(),Wm=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu]]}),t})();function Jm(...t){if(1===t.length){const e=t[0];if(l(e))return Zm(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Zm(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Zm(t=1===t.length&&l(t[0])?t[0]:t,null).pipe(j(t=>e(...t)))}return Zm(t,null)}function Zm(t,e){return new b(n=>{const r=t.length;if(0===r)return void n.complete();const s=new Array(r);let i=0,o=0;for(let a=0;a<r;a++){const l=M(t[a]);let c=!1;n.add(l.subscribe({next:t=>{c||(c=!0,o++),s[a]=t},error:t=>n.error(t),complete:()=>{i++,i!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=s[n],t),{}):s),n.complete())}}))}})}const Ym=new Vt("NgValueAccessor"),Qm={provide:Ym,useExisting:xt(()=>Xm),multi:!0};let Xm=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(io(Sa),io(ya))},t.\u0275dir=be({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&wo("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(t){return e.onTouched()}))},features:[fa([Qm])]}),t})();const ty={provide:Ym,useExisting:xt(()=>ny),multi:!0},ey=new Vt("CompositionEventMode");let ny=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=ou()?ou().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(io(Sa),io(ya),io(ey,8))},t.\u0275dir=be({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&wo("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(t){return e.onTouched()}))("compositionstart",(function(t){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[fa([ty])]}),t})(),ry=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=be({type:t}),t})(),sy=(()=>{class t extends ry{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return iy(e||t)},t.\u0275dir=be({type:t,features:[Yo]}),t})();const iy=Gn(sy);function oy(){throw new Error("unimplemented")}class ay extends ry{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return oy()}get asyncValidator(){return oy()}}class ly{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let cy=(()=>{class t extends ly{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(io(ay,2))},t.\u0275dir=be({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&No("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Yo]}),t})(),uy=(()=>{class t extends ly{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(io(sy,2))},t.\u0275dir=be({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&No("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Yo]}),t})();function hy(t){return null==t||0===t.length}const dy=new Vt("NgValidators"),fy=new Vt("NgAsyncValidators"),py=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class gy{static min(t){return e=>{if(hy(e.value)||hy(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(hy(e.value)||hy(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return hy(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return hy(t.value)?null:py.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(hy(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return gy.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(hy(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(my);return 0==e.length?null:function(t){return vy(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(my);return 0==e.length?null:function(t){return Jm(function(t,e){return e.map(e=>e(t))}(t,e).map(yy)).pipe(j(vy))}}}function my(t){return null!=t}function yy(t){const e=yo(t)?M(t):t;if(!vo(e))throw new Error("Expected validator to return Promise or Observable.");return e}function vy(t){const e=t.reduce((t,e)=>null!=e?Object.assign(Object.assign({},t),e):t,{});return 0===Object.keys(e).length?null:e}function wy(t){return t.validate?e=>t.validate(e):t}function by(t){return t.validate?e=>t.validate(e):t}const Sy={provide:Ym,useExisting:xt(()=>_y),multi:!0};let _y=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(io(Sa),io(ya))},t.\u0275dir=be({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&wo("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(t){return e.onTouched()}))},features:[fa([Sy])]}),t})();const xy={provide:Ym,useExisting:xt(()=>Ey),multi:!0};let Cy=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Ey=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(ay),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(io(Sa),io(ya),io(Cy),io(Mi))},t.\u0275dir=be({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&wo("change",(function(t){return e.onChange()}))("blur",(function(t){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[fa([xy])]}),t})();const Ay={provide:Ym,useExisting:xt(()=>Fy),multi:!0};let Fy=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(io(Sa),io(ya))},t.\u0275dir=be({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&wo("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(t){return e.onTouched()}))},features:[fa([Ay])]}),t})();const Ty='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Iy='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',ky='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';class Dy{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Ty}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${Iy}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${ky}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${Ty}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Iy}`)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const Py={provide:Ym,useExisting:xt(()=>Oy),multi:!0};function Ry(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Oy=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ji}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=Ry(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(io(Sa),io(ya))},t.\u0275dir=be({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&wo("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(t){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[fa([Py])]}),t})(),Ny=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Ry(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(io(ya),io(Sa),io(Oy,9))},t.\u0275dir=be({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Hy={provide:Ym,useExisting:xt(()=>Vy),multi:!0};function jy(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Vy=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ji}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),s=this._getOptionValue(r.value);n.push(s)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(io(Sa),io(ya))},t.\u0275dir=be({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&wo("change",(function(t){return e.onChange(t.target)}))("blur",(function(t){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[fa([Hy])]}),t})(),By=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(jy(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(jy(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(io(ya),io(Sa),io(Vy,9))},t.\u0275dir=be({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function Ly(t,e){return[...e.path,t]}function My(t,e){t||$y(e,"Cannot find control with"),e.valueAccessor||$y(e,"No value accessor for form control with"),t.validator=gy.compose([t.validator,e.validator]),t.asyncValidator=gy.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Uy(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Uy(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function Uy(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function qy(t,e){null==t&&$y(e,"Cannot find control with"),t.validator=gy.compose([t.validator,e.validator]),t.asyncValidator=gy.composeAsync([t.asyncValidator,e.asyncValidator])}function Ky(t){return $y(t,"There is no FormControl instance attached to form control element with")}function $y(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function zy(t){return null!=t?gy.compose(t.map(wy)):null}function Gy(t){return null!=t?gy.composeAsync(t.map(by)):null}function Wy(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Ji(e,n.currentValue)}const Jy=[Xm,Fy,_y,Oy,Vy,Ey];function Zy(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Yy(t,e){if(!e)return null;Array.isArray(e)||$y(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,s=void 0;return e.forEach(e=>{var i;e.constructor===ny?n=e:(i=e,Jy.some(t=>i.constructor===t)?(r&&$y(t,"More than one built-in value accessor matches form control with"),r=e):(s&&$y(t,"More than one custom value accessor matches form control with"),s=e))}),s||r||n||($y(t,"No valid value accessor for form control with"),null)}function Qy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Xy(t){const e=ev(t)?t.validators:t;return Array.isArray(e)?zy(e):e||null}function tv(t,e){const n=ev(e)?e.asyncValidators:t;return Array.isArray(n)?Gy(n):n||null}function ev(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class nv{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=Xy(t)}setAsyncValidators(t){this.asyncValidator=tv(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=yy(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length?null:e.reduce((t,e)=>t instanceof sv?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof iv&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ql,this.statusChanges=new ql}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ev(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class rv extends nv{constructor(t=null,e,n){super(Xy(e),tv(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class sv extends nv{constructor(t,e,n){super(Xy(e),tv(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof rv?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class iv extends nv{constructor(t,e,n){super(Xy(e),tv(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof rv?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const ov={provide:sy,useExisting:xt(()=>lv)},av=(()=>Promise.resolve(null))();let lv=(()=>{class t extends sy{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new ql,this.form=new sv({},zy(t),Gy(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){av.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),My(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){av.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Qy(this._directives,t)})}addFormGroup(t){av.then(()=>{const e=this._findContainer(t.path),n=new sv({});qy(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){av.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){av.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Zy(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(io(dy,10),io(fy,10))},t.\u0275dir=be({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&wo("submit",(function(t){return e.onSubmit(t)}))("reset",(function(t){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fa([ov]),Yo]}),t})(),cv=(()=>{class t extends sy{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Ly(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return zy(this._validators)}get asyncValidator(){return Gy(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return uv(e||t)},t.\u0275dir=be({type:t,features:[Yo]}),t})();const uv=Gn(cv);class hv{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${Ty}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${Iy}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${ky}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${Iy}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${ky}`)}}const dv={provide:sy,useExisting:xt(()=>fv)};let fv=(()=>{class t extends cv{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof lv||hv.modelGroupParentException()}}return t.\u0275fac=function(e){return new(e||t)(io(sy,5),io(dy,10),io(fy,10))},t.\u0275dir=be({type:t,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[fa([dv]),Yo]}),t})();const pv={provide:ay,useExisting:xt(()=>mv)},gv=(()=>Promise.resolve(null))();let mv=(()=>{class t extends ay{constructor(t,e,n,r){super(),this.control=new rv,this._registered=!1,this.update=new ql,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Yy(this,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Wy(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Ly(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return zy(this._rawValidators)}get asyncValidator(){return Gy(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){My(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof fv)&&this._parent instanceof cv?hv.formGroupNameException():this._parent instanceof fv||this._parent instanceof lv||hv.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||hv.missingNameException()}_updateValue(t){gv.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;gv.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(io(sy,9),io(dy,10),io(fy,10),io(Ym,10))},t.\u0275dir=be({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[fa([pv]),Yo,ra()]}),t})(),yv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=be({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const vv=new Vt("NgModelWithFormControlWarning"),wv={provide:sy,useExisting:xt(()=>bv)};let bv=(()=>{class t extends sy{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new ql}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return My(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Qy(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);qy(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);qy(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Zy(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>Ky(e)),e.valueAccessor.registerOnTouched(()=>Ky(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&My(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=zy(this._validators);this.form.validator=gy.compose([this.form.validator,t]);const e=Gy(this._asyncValidators);this.form.asyncValidator=gy.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||Dy.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(io(dy,10),io(fy,10))},t.\u0275dir=be({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&wo("submit",(function(t){return e.onSubmit(t)}))("reset",(function(t){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fa([wv]),Yo,ra()]}),t})();const Sv={provide:sy,useExisting:xt(()=>_v)};let _v=(()=>{class t extends cv{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){Ev(this._parent)&&Dy.groupParentException()}}return t.\u0275fac=function(e){return new(e||t)(io(sy,13),io(dy,10),io(fy,10))},t.\u0275dir=be({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[fa([Sv]),Yo]}),t})();const xv={provide:sy,useExisting:xt(()=>Cv)};let Cv=(()=>{class t extends sy{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Ly(null==this.name?this.name:this.name.toString(),this._parent)}get validator(){return zy(this._validators)}get asyncValidator(){return Gy(this._asyncValidators)}_checkParentType(){Ev(this._parent)&&Dy.arrayParentException()}}return t.\u0275fac=function(e){return new(e||t)(io(sy,13),io(dy,10),io(fy,10))},t.\u0275dir=be({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[fa([xv]),Yo]}),t})();function Ev(t){return!(t instanceof _v||t instanceof bv||t instanceof Cv)}const Av={provide:ay,useExisting:xt(()=>Fv)};let Fv=(()=>{class t extends ay{constructor(t,e,n,r,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new ql,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Yy(this,r)}set isDisabled(t){Dy.disabledAttrWarning()}ngOnChanges(e){var n,r;this._added||this._setUpControl(),Wy(e,this.viewModel)&&("formControlName",n=t,this,r=this._ngModelWarningConfig,nr()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(Dy.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Ly(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return zy(this._rawValidators)}get asyncValidator(){return Gy(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof _v)&&this._parent instanceof cv?Dy.ngModelGroupException():this._parent instanceof _v||this._parent instanceof bv||this._parent instanceof Cv||Dy.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(io(sy,13),io(dy,10),io(fy,10),io(Ym,10),io(vv,8))},t.\u0275dir=be({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[fa([Av]),Yo,ra()]}),t._ngModelWarningSentOnce=!1,t})();const Tv={provide:dy,useExisting:xt(()=>Iv),multi:!0};let Iv=(()=>{class t{ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=gy.pattern(this.pattern)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=be({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&ro("pattern",e.pattern?e.pattern:null)},inputs:{pattern:"pattern"},features:[fa([Tv]),ra()]}),t})(),kv=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})(),Dv=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,s=null,i=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,s=null!=e.asyncValidators?e.asyncValidators:null,i=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,s=null!=e.asyncValidator?e.asyncValidator:null)),new sv(n,{asyncValidators:s,updateOn:i,validators:r})}control(t,e,n){return new rv(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new iv(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof rv||t instanceof sv||t instanceof iv?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Pv=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[Cy],imports:[kv]}),t})(),Rv=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:vv,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[Dv,Cy],imports:[kv]}),t})(),Ov=(()=>{class t{}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Uu,Pv]]}),t})(),Nv=(()=>{class t{constructor(){this._registry=new Map}register(t){this._registry.set(t.key,t)}get(t){return this._registry.get(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Hv{static getValidators(t){const e=new Array;return t.required&&e.push(gy.required),t.min&&e.push(gy.min(t.min)),t.max&&e.push(gy.max(t.max)),t.minLength&&e.push(gy.minLength(t.minLength)),t.maxLength&&e.push(gy.maxLength(t.maxLength)),gy.compose(e)}}let jv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=be({type:t,inputs:{slot:"slot",form:"form"}}),t})();class Vv{constructor(t){"string"==typeof t&&(this.key=this.value=t),"object"==typeof t&&(this.key=t.key,this.value=t.value)}static byKey(t,e){return e.find(e=>e.key===t)}static byValue(t,e){return e.find(e=>e.value===t)}}let Bv=(()=>{class t{constructor(t){this._elementRef=t,this.clickOutside=new ql}onClick(t,e){e&&(this._elementRef.nativeElement.contains(e)||this.clickOutside.emit(t))}}return t.\u0275fac=function(e){return new(e||t)(io(ya))},t.\u0275dir=be({type:t,selectors:[["","tw-clickoutside",""]],hostBindings:function(t,e){1&t&&wo("click",(function(t){return e.onClick(t,t.target)}),!1,In)},outputs:{clickOutside:"clickOutside"}}),t})(),Lv=(()=>{class t{transform(t,e){return t&&e?t.filter(t=>this.applyFilter(t,e)):t}applyFilter(t,e){return!(e.value&&t.value&&-1===t.value.toLowerCase().indexOf(e.value.toLowerCase()))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Se({name:"tw2ListFilter",type:t,pure:!1}),t})();var Mv,Uv,qv,Kv;function $v(t,e){1&t&&(uo(0,"span",7),Sl(1,Mv),ho())}function zv(t,e){if(1&t){const t=mo();uo(0,"span",8),zo(1),uo(2,"a",9),wo("click",(function(n){He(t);const r=e.$implicit;return _o().onItemClick(r)})),zo(3,"x"),ho(),ho()}if(2&t){const t=e.$implicit;zr(1),Wo(" ",t.value," ")}}function Gv(t,e){1&t&&(uo(0,"div"),Sl(1,Uv),ho())}function Wv(t,e){1&t&&(uo(0,"div"),Sl(1,qv),ho())}function Jv(t,e){if(1&t){const t=mo();uo(0,"li",15),wo("click",(function(e){return He(t),_o(2).toggleSelectAll()})),fo(1,"input",16),so(2,Gv,2,0,"div",17),so(3,Wv,2,0,"div",17),ho()}if(2&t){const t=_o(2);zr(1),lo("checked",t.isAllItemsSelected())("disabled",t.disabled),zr(1),lo("ngIf",!t.isAllItemsSelected()),zr(1),lo("ngIf",t.isAllItemsSelected())}}function Zv(t,e){if(1&t){const t=mo();uo(0,"li",18),uo(1,"input",19),wo("ngModelChange",(function(e){return He(t),_o(2).filter.value=e}))("ngModelChange",(function(e){return He(t),_o(2).onFilterTextChange(e)})),ho(),ho()}if(2&t){const t=_o(2);zr(1),lo("placeholder","Search")("readOnly",t.disabled)("ngModel",t.filter.value)}}function Yv(t,e){if(1&t){const t=mo();uo(0,"li",20),wo("click",(function(n){He(t);const r=e.$implicit;return _o(2).onItemClick(r)}))("keydown",(function(n){He(t);const r=e.$implicit;return _o(2).onKeyDown(n,r)})),fo(1,"input",21),uo(2,"div"),zo(3),ho(),ho()}if(2&t){const t=e.$implicit,n=_o(2);zr(1),lo("checked",n.isSelected(t))("disabled",n.disabled||!n.isSelected(t)),zr(2),Go(t.value)}}function Qv(t,e){1&t&&(uo(0,"li",22),uo(1,"h5"),Sl(2,Kv),ho(),ho())}function Xv(t,e){if(1&t&&(uo(0,"div",10),uo(1,"ul"),so(2,Jv,4,4,"li",11),so(3,Zv,2,3,"li",12),ho(),uo(4,"ul"),so(5,Yv,4,3,"li",13),Ml(6,"tw2ListFilter"),so(7,Qv,3,0,"li",14),ho(),ho()),2&t){const t=_o();zr(2),lo("ngIf",!t.singleSelection),zr(1),lo("ngIf",t._data.length>0),zr(2),lo("ngForOf",Ul(6,4,t._data,t.filter)),zr(2),lo("ngIf",0==t._data.length)}}Mv=$localize`:␟bed964343d091227840225218f5a842b0a92a2e6␟2128281321884182008:select items`,Uv=$localize`:␟64a31389d384f6f12001f0f79281b044496f6671␟3168852737904108032:select all`,qv=$localize`:␟e3897d9ce000709991391dc75185b8bd9eedf7d6␟4134355673206848669:unselect all`,Kv=$localize`:␟a20b711473ad9abe188c2a3a938eeab4defd4ce7␟4459924971192057766:No data!`;const tw={provide:Ym,useExisting:xt(()=>nw),multi:!0},ew=()=>{};let nw=(()=>{class t{constructor(){this._data=[],this.filter=new Vv(this.data),this.selectedItems=[],this.isDropdownOpen=!1,this.disabled=!1,this.singleSelection=!1,this.bindingBehavior="key",this.filterChange=new ql,this.dropDownClose=new ql,this.select=new ql,this.selectAll=new ql,this.deSelect=new ql,this.deSelectAll=new ql,this.onTouchedCallback=ew,this.onChangeCallback=ew}set data(t){this._data=t?t.map(t=>new Vv(t)):[]}onFilterTextChange(t){this.filterChange.emit(t)}onKeyDown(t,e){32===t.keyCode&&(t.preventDefault(),this.onItemClick(e))}onItemClick(t){this.disabled||(this.isSelected(t)?this.removeSelected(t):this.addSelected(t),this.singleSelection&&this.closeDropdown())}writeValue(t){null!=t&&t.length>0?(Array.isArray(t)||(t=[t]),this.selectedItems=t.map("key"===this.bindingBehavior?t=>Vv.byKey(t,this._data):t=>Vv.byValue(t,this._data))):this.selectedItems=[],this.onChangeCallback(t)}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.disabled=t}onTouched(){this.closeDropdown(),this.onTouchedCallback()}shortCuts(t){13===t.keyCode&&(t.preventDefault(),this.toggleDropdown(t))}trackByFn(t,e){return e.key}isSelected(t){let e=!1;return this.selectedItems.forEach(n=>{t.key===n.key&&(e=!0)}),e}isAllItemsSelected(){return this._data.length===this.selectedItems.length}showButton(){return!this.singleSelection}addSelected(t){this.singleSelection?(this.selectedItems=[],this.selectedItems.push(t)):this.selectedItems.push(t),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.select.emit(this.emittedValue(t))}removeSelected(t){this.selectedItems.forEach(e=>{t.key===e.key&&this.selectedItems.splice(this.selectedItems.indexOf(e),1)}),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.deSelect.emit(this.emittedValue(t))}emittedValue(t){if(this.singleSelection)return Array.isArray(t)&&t.length>0?"key"===this.bindingBehavior?t[0].key:t[0].value:Array.isArray(t)?null:"key"===this.bindingBehavior?t.key:t.value;const e=[];return Array.isArray(t)?t.map(t=>{e.push("key"===this.bindingBehavior?t.key:t.value)}):t&&e.push("key"===this.bindingBehavior?t.key:t.value),e}toggleDropdown(t){t.preventDefault(),this.disabled&&this.singleSelection||(this.isDropdownOpen=!this.isDropdownOpen,this.isDropdownOpen||this.dropDownClose.emit())}closeDropdown(){this.isDropdownOpen=!1,this.filter.value="",this.dropDownClose.emit()}toggleSelectAll(){if(this.disabled)return!1;this.isAllItemsSelected()?(this.selectedItems=[],this.deSelectAll.emit(this.emittedValue(this.selectedItems))):(this.selectedItems=this._data.slice(),this.selectAll.emit(this.emittedValue(this.selectedItems))),this.onChangeCallback(this.emittedValue(this.selectedItems))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-multi-select"]],hostBindings:function(t,e){1&t&&wo("blur",(function(t){return e.onTouched()}))("keydown",(function(t){return e.shortCuts(t)}),!1,Tn)},inputs:{singleSelection:"singleSelection",bindingBehavior:"bindingBehavior",data:"data"},outputs:{filterChange:"filterChange",dropDownClose:"dropDownClose",select:"select",selectAll:"selectAll",deSelect:"deSelect",deSelectAll:"deSelectAll"},features:[fa([tw])],decls:8,vars:7,consts:[["tabindex","0","tw-clickoutside","",1,"multiselect-dropdown",3,"blur","clickOutside"],["tabindex","-1",1,"dropdown-btn",3,"click"],["class","no-item-selected",4,"ngIf"],["class","selected-item",4,"ngFor","ngForOf","ngForTrackBy"],[2,"float","right !important","padding-right","4px"],[3,"ngClass"],["class","dropdown-list",4,"ngIf"],[1,"no-item-selected"],[1,"selected-item"],[2,"padding-top","2px","padding-left","2px","color","white",3,"click"],[1,"dropdown-list"],["class","multiselect-item-checkbox","style","border-bottom: 1px solid #ccc","tabindex","0",3,"click",4,"ngIf"],["class","filter-textbox",4,"ngIf"],["class","multiselect-item-checkbox","tabindex","0",3,"click","keydown",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],["tabindex","0",1,"multiselect-item-checkbox",2,"border-bottom","1px solid #ccc",3,"click"],["type","checkbox","aria-label","multiselect-select-all",3,"checked","disabled"],[4,"ngIf"],[1,"filter-textbox"],["type","text","aria-label","multiselect-search",3,"placeholder","readOnly","ngModel","ngModelChange"],["tabindex","0",1,"multiselect-item-checkbox",3,"click","keydown"],["type","checkbox","aria-label","multiselect-item",3,"checked","disabled"],[1,"no-data"]],template:function(t,e){1&t&&(uo(0,"div",0),wo("blur",(function(t){return e.onTouched()}))("clickOutside",(function(t){return e.closeDropdown()})),uo(1,"div"),uo(2,"span",1),wo("click",(function(t){return e.toggleDropdown(t)})),so(3,$v,2,0,"span",2),so(4,zv,4,1,"span",3),uo(5,"span",4),fo(6,"span",5),ho(),ho(),ho(),so(7,Xv,8,7,"div",6),ho()),2&t&&(zr(1),No("disabled",e.disabled),zr(2),lo("ngIf",0==e.selectedItems.length),zr(1),lo("ngForOf",e.selectedItems)("ngForTrackBy",e.trackByFn),zr(2),lo("ngClass",e.isDropdownOpen?"dropdown-up":"dropdown-down"),zr(1),lo("ngIf",e.isDropdownOpen))},directives:[Bv,Ou,Pu,ku,ny,cy,mv],pipes:[Lv],encapsulation:2}),t})();const rw={provide:Ym,useExisting:xt(()=>sw),multi:!0};let sw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){const e=new Date(t);this._renderer.setProperty(this._elementRef.nativeElement,"valueAsDate",e)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(io(Sa),io(ya))},t.\u0275dir=be({type:t,selectors:[["","twUseValueAsDate",""]],hostBindings:function(t,e){1&t&&wo("input",(function(t){return e.onChange(t.target.valueAsDate)}))("blur",(function(t){return e.onTouched()}))},features:[fa([rw])]}),t})();function iw(t,e){if(1&t&&(uo(0,"label"),zo(1),ho()),2&t){const t=_o();ro("for",t.editor.key),zr(1),Wo(" ",t.editor.label," ")}}function ow(t,e){if(1&t&&fo(0,"input",11),2&t){const t=_o();lo("formControlName",t.editor.key),ro("id",t.editor.key)}}function aw(t,e){if(1&t&&fo(0,"input",12),2&t){const t=_o();lo("formControlName",t.editor.key),ro("id",t.editor.key)}}function lw(t,e){if(1&t&&fo(0,"input",13),2&t){const t=_o();lo("formControlName",t.editor.key),ro("id",t.editor.key)}}function cw(t,e){if(1&t&&(uo(0,"label"),fo(1,"input",14),zo(2),ho()),2&t){const t=_o();zr(1),lo("formControlName",t.editor.key),ro("id",t.editor.key),zr(1),Wo(" ",t.editor.label," ")}}function uw(t,e){1&t&&fo(0,"option",18)}function hw(t,e){if(1&t&&(uo(0,"option",19),zo(1),ho()),2&t){const t=e.$implicit;lo("ngValue",t.key),zr(1),Wo(" ",t.value," ")}}function dw(t,e){if(1&t&&(uo(0,"select",15),so(1,uw,1,0,"option",16),so(2,hw,2,2,"option",17),ho()),2&t){const t=_o();lo("formControlName",t.editor.key),zr(1),lo("ngIf",!t.editor.required),zr(1),lo("ngForOf",t.editor.options)}}function fw(t,e){if(1&t&&fo(0,"tw-multi-select",20),2&t){const t=_o();lo("formControlName",t.editor.key)("singleSelection",t.editor.singleSelection)("bindingBehavior",t.editor.bindingBehaviour)("data",t.editor.options)}}function pw(t,e){if(1&t&&fo(0,"input",21),2&t){const t=_o();lo("formControlName",t.editor.key),ro("id",t.editor.key)}}function gw(t,e){if(1&t&&(uo(0,"textarea",15),zo(1,"    "),ho()),2&t){const t=_o();lo("formControlName",t.editor.key),ro("id",t.editor.key)}}function mw(t,e){if(1&t&&fo(0,"input",22),2&t){const t=_o();lo("formControlName",t.editor.key),ro("id",t.editor.key)}}var yw,vw,ww,bw,Sw;function _w(t,e){if(1&t&&(uo(0,"div"),Sl(1,yw),ho()),2&t){const t=_o(2);zr(1),El(t.editor.label),Al(1)}}function xw(t,e){if(1&t&&(uo(0,"div"),Sl(1,vw),ho()),2&t){const t=_o(2);zr(1),El(t.editor.label)(t.editor.min),Al(1)}}function Cw(t,e){if(1&t&&(uo(0,"div"),Sl(1,ww),ho()),2&t){const t=_o(2);zr(1),El(t.editor.label)(t.editor.max),Al(1)}}function Ew(t,e){if(1&t&&(uo(0,"div"),Sl(1,bw),ho()),2&t){const t=_o(2);zr(1),El(t.editor.label)(t.editor.minLength),Al(1)}}function Aw(t,e){if(1&t&&(uo(0,"div"),Sl(1,Sw),ho()),2&t){const t=_o(2);zr(1),El(t.editor.label)(t.editor.maxLength),Al(1)}}function Fw(t,e){if(1&t&&(uo(0,"div",23),so(1,_w,2,1,"div",1),so(2,xw,2,2,"div",1),so(3,Cw,2,2,"div",1),so(4,Ew,2,2,"div",1),so(5,Aw,2,2,"div",1),ho()),2&t){const t=_o();zr(1),lo("ngIf",t.control(t.editor.key).hasError("required")),zr(1),lo("ngIf",t.control(t.editor.key).hasError("min")),zr(1),lo("ngIf",t.control(t.editor.key).hasError("max")),zr(1),lo("ngIf",t.control(t.editor.key).hasError("minlength")),zr(1),lo("ngIf",t.control(t.editor.key).hasError("maxlength"))}}yw=$localize`:␟509ef24ac7fc6168f288e398135fcda032a50416␟925364148717660736: ${"\ufffd0\ufffd"}:INTERPOLATION: required. `,vw=$localize`:␟4224bb24912d5c94e5a01b9f2319eb262a1181ce␟7232929701133107067: ${"\ufffd0\ufffd"}:INTERPOLATION: must not be lower than ${"\ufffd1\ufffd"}:INTERPOLATION_1:. `,ww=$localize`:␟e15e6f057c5ca734ef9f4a5cfee6463e49cfc6dc␟1648611666212555466: ${"\ufffd0\ufffd"}:INTERPOLATION: must not be greater than ${"\ufffd1\ufffd"}:INTERPOLATION_1:. `,bw=$localize`:␟87a73832a69b06e6bd02de9fd79f4d77bb294ab2␟3761085172444266095: ${"\ufffd0\ufffd"}:INTERPOLATION: must be at least ${"\ufffd1\ufffd"}:INTERPOLATION_1: characters in length. `,Sw=$localize`:␟bd5ef74c65f72e8472162503c757ce5e9cb5a16d␟8121950195437709416: ${"\ufffd0\ufffd"}:INTERPOLATION: must not be longer than ${"\ufffd1\ufffd"}:INTERPOLATION_1: characters. `;const Tw=function(t,e,n){return{"has-danger":t,"form-group":e,checkbox:n}};let Iw=(()=>{class t{constructor(){this.hideLabel=!1}control(t){return this.form.get(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-editor"]],inputs:{hideLabel:"hideLabel",editor:"editor",form:"form"},decls:12,vars:17,consts:[[3,"ngSwitch","formGroup","ngClass"],[4,"ngIf"],["type","hidden",3,"formControlName",4,"ngSwitchCase"],["type","number","pattern","[0-9.,]*","inputmode","numeric",3,"formControlName",4,"ngSwitchCase"],["type","password",3,"formControlName",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"formControlName",4,"ngSwitchCase"],[3,"formControlName","singleSelection","bindingBehavior","data",4,"ngSwitchCase"],["type","date","twUseValueAsDate","",3,"formControlName",4,"ngSwitchCase"],["type","text",3,"formControlName",4,"ngSwitchDefault"],["class","alert alert-danger",4,"ngIf"],["type","hidden",3,"formControlName"],["type","number","pattern","[0-9.,]*","inputmode","numeric",3,"formControlName"],["type","password",3,"formControlName"],["type","checkbox",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"value"],[3,"ngValue"],[3,"formControlName","singleSelection","bindingBehavior","data"],["type","date","twUseValueAsDate","",3,"formControlName"],["type","text",3,"formControlName"],[1,"alert","alert-danger"]],template:function(t,e){var n,r,s,i,o,a;1&t&&(uo(0,"div",0),so(1,iw,2,2,"label",1),so(2,ow,1,2,"input",2),so(3,aw,1,2,"input",3),so(4,lw,1,2,"input",4),so(5,cw,3,3,"label",5),so(6,dw,3,3,"select",6),so(7,fw,1,4,"tw-multi-select",7),so(8,pw,1,2,"input",8),so(9,gw,2,2,"textarea",6),so(10,mw,1,2,"input",9),so(11,Fw,6,5,"div",10),ho()),2&t&&(lo("ngSwitch",e.editor.type)("formGroup",e.form)("ngClass",(n=13,r=Tw,s=e.control(e.editor.key).invalid,i="checkbox"!==e.editor.type,o="checkbox"===e.editor.type,function(t,e,n,r,s,i,o,a){const l=e+n;return function(t,e,n,r,s){const i=no(t,e,n,r);return eo(t,e+2,s)||i}(t,l,s,i,o)?Xi(t,l+3,a?r.call(a,s,i,o):r(s,i,o)):to(t,l+3)}(Oe(),qe(),n,r,s,i,o,a))),zr(1),lo("ngIf",!e.hideLabel&&"checkbox"!==e.editor.type&&"hidden"!==e.editor.type),zr(1),lo("ngSwitchCase","hidden"),zr(1),lo("ngSwitchCase","number"),zr(1),lo("ngSwitchCase","password"),zr(1),lo("ngSwitchCase","checkbox"),zr(1),lo("ngSwitchCase","select"),zr(1),lo("ngSwitchCase","multi-select"),zr(1),lo("ngSwitchCase","date"),zr(1),lo("ngSwitchCase","textarea"),zr(2),lo("ngIf",e.control(e.editor.key).invalid))},directives:[Vu,uy,bv,ku,Ou,Bu,Lu,ny,cy,Fv,_y,Iv,Xm,Oy,Pu,Ny,By,nw,sw],encapsulation:2}),t})();class kw{constructor(t,e){this.key=t,this.component=e}}let Dw=(()=>{class t{constructor(){this._registry=new Map}register(t){this._registry.has(t.key)||this._registry.set(t.key,t)}exists(t){return this._registry.has(t)}get(t){const e=this._registry.get(t);if(!e)throw new Error(`ComponentMetaData for key ${t} was not found!`);return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Pw=["slotContent"];function Rw(t,e){}let Ow=(()=>{class t{constructor(t){this._registry=t}set slot(t){this._slot=t}set form(t){this._form=t}ngOnInit(){if(this._slot){const t=this._registry.get(this._slot.type?this._slot.type:"single");if(t){const e=this.slotContent.injector.get(ma).resolveComponentFactory(t.component);this._componentRef=this.slotContent.createComponent(e,this.slotContent.length),this._componentRef.instance.slot=this._slot,this._componentRef.instance.form=this._form}}}ngOnDestroy(){this._componentRef&&(delete this._componentRef.instance.slot,delete this._componentRef.instance.form,this._componentRef.destroy())}}return t.\u0275fac=function(e){return new(e||t)(io(Dw))},t.\u0275cmp=pe({type:t,selectors:[["tw-slothost"]],viewQuery:function(t,e){var n,r,s,i;1&t&&(r=Pw,s=!0,i=qa,function(t,e,n,r,s,i){t.firstCreatePass&&(sc(t,new Wl(n,r,!0,s),-1),t.staticViewQueries=!0),rc(t,e)}(Ne(),Oe(),r,s,i)),2&t&&tc(n=nc())&&(e.slotContent=n.first)},inputs:{slot:"slot",form:"form"},decls:2,vars:0,consts:[["slotContent",""]],template:function(t,e){1&t&&so(0,Rw,0,0,"ng-template",null,0,oc)},encapsulation:2}),t})();function Nw(t,e){if(1&t&&fo(0,"tw-editor",3),2&t){const t=e.$implicit,n=_o(3);lo("editor",t)("form",n.form)}}function Hw(t,e){if(1&t&&(po(0),so(1,Nw,1,2,"tw-editor",2),go()),2&t){const t=_o(2);zr(1),lo("ngForOf",t.slot.editors)}}function jw(t,e){if(1&t){const t=mo();po(0),uo(1,"fieldset"),uo(2,"legend",1),wo("click",(function(e){return He(t),_o().toggle()})),zo(3),ho(),so(4,Hw,2,1,"ng-container",0),ho(),go()}if(2&t){const t=_o();zr(3),Go(t.slot.title),zr(1),lo("ngIf",!t.collapsed)}}function Vw(t,e){if(1&t&&(po(0),fo(1,"tw-slothost",5),go()),2&t){const t=e.$implicit,n=_o(2);zr(1),lo("slot",t)("form",n.form.get(t.key))}}function Bw(t,e){if(1&t&&(po(0),so(1,Vw,2,2,"ng-container",4),go()),2&t){const t=_o();zr(1),lo("ngForOf",t.slot.children)}}let Lw=(()=>{class t extends jv{constructor(){super(...arguments),this.collapsed=!1}toggle(){this.collapsed=!this.collapsed}}return t.\u0275fac=function(e){return Mw(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-slot"]],features:[Yo],decls:2,vars:2,consts:[[4,"ngIf"],[3,"click"],[3,"editor","form",4,"ngFor","ngForOf"],[3,"editor","form"],[4,"ngFor","ngForOf"],[3,"slot","form"]],template:function(t,e){1&t&&(so(0,jw,5,2,"ng-container",0),so(1,Bw,2,1,"ng-container",0)),2&t&&(lo("ngIf",e.slot.editors&&e.slot.editors.length>0),zr(1),lo("ngIf",e.slot.children&&e.slot.children.length>0))},directives:[Ou,Pu,Iw,Ow],encapsulation:2}),t})();const Mw=Gn(Lw);function Uw(t,e){if(1&t&&(uo(0,"td"),fo(1,"tw-editor",5),ho()),2&t){const t=e.$implicit,n=_o().index,r=_o(2);zr(1),lo("hideLabel",!0)("editor",t)("form",r.rows.at(n))}}function qw(t,e){if(1&t){const t=mo();uo(0,"tr"),so(1,Uw,2,3,"td",4),uo(2,"td"),uo(3,"button",2),wo("click",(function(n){He(t);const r=e.index;return _o(2).remove(r)})),zo(4,"-"),ho(),ho(),ho()}if(2&t){const t=_o(2);zr(1),lo("ngForOf",t.slot.editors)}}function Kw(t,e){if(1&t){const t=mo();po(0),uo(1,"div"),uo(2,"button",2),wo("click",(function(e){return He(t),_o().add()})),zo(3,"+"),ho(),ho(),uo(4,"div"),uo(5,"table",3),uo(6,"tbody"),so(7,qw,5,1,"tr",4),ho(),ho(),ho(),go()}if(2&t){const t=_o();zr(5),lo("formGroup",t.form),zr(2),lo("ngForOf",t.rows.controls)}}let $w=(()=>{class t extends Lw{constructor(t){super(),this._fb=t}get rows(){return this.form}add(){const t=this.createRow(this.slot);this.rows.push(t)}remove(t){this.rows.removeAt(t)}createRow(t){const e=this._fb.group({});return t.editors.forEach(t=>{e.addControl(t.key,new rv(void 0,Hv.getValidators(t)))}),e}}return t.\u0275fac=function(e){return new(e||t)(io(Dv))},t.\u0275cmp=pe({type:t,selectors:[["tw-arrayslot"]],features:[Yo],decls:4,vars:2,consts:[[3,"click"],[4,"ngIf"],["type","button",1,"button--secondary",3,"click"],[3,"formGroup"],[4,"ngFor","ngForOf"],[3,"hideLabel","editor","form"]],template:function(t,e){1&t&&(uo(0,"fieldset"),uo(1,"legend",0),wo("click",(function(t){return e.toggle()})),zo(2),ho(),so(3,Kw,8,2,"ng-container",1),ho()),2&t&&(zr(2),Go(e.slot.title),zr(1),lo("ngIf",!e.collapsed))},directives:[Ou,uy,bv,Pu,Iw],encapsulation:2}),t})(),zw=(()=>{class t{constructor(t){this.registry=t,this.registry.register(new kw("single",Lw)),this.registry.register(new kw("array",$w))}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Wt(Dw))},providers:[Nv,Dw],imports:[[Uu,Rv,Ov],Rv]}),t})(),Gw=(()=>{class t{constructor(t,e){this._fb=t,this._slotRegistry=e}toGroup(t,e){const n=this.getSlot(t);return this.toGroupRecursive(n,e)}getSlot(t){return this._slotRegistry.get(t)}toGroupRecursive(t,e){const n=this._fb.group({});if(Array.isArray(e)){const n=this._fb.array([]);for(let r=0;r<e.length;r++){const s=this._fb.group({});t.editors.forEach(t=>{s.addControl(t.key,new rv({value:e[r][t.key],disabled:!0===t.isReadOnly},Hv.getValidators(t)))}),n.push(s)}return n}return t.editors.forEach(t=>{n.addControl(t.key,new rv({value:e[t.key],disabled:!0===t.isReadOnly},Hv.getValidators(t)))}),t.children&&t.children.length>0&&t.children.forEach(t=>{n.addControl(t.key,this.toGroupRecursive(t,e[t.key]))}),n}}return t.\u0275fac=function(e){return new(e||t)(Wt(Dv),Wt(Nv))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Ww(t,e){if(1&t&&(uo(0,"li"),zo(1),ho()),2&t){const t=e.$implicit;zr(1),Go(t)}}function Jw(t,e){if(1&t&&(uo(0,"ul",1),so(1,Ww,2,1,"li",2),ho()),2&t){const t=_o();zr(1),lo("ngForOf",t.errors)}}let Zw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-validation-summary"]],inputs:{errors:"errors"},decls:1,vars:1,consts:[["class","form__validation-summary",4,"ngIf"],[1,"form__validation-summary"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&so(0,Jw,2,1,"ul",0),2&t&&lo("ngIf",e.errors)},directives:[Ou,Pu],encapsulation:2}),t})();function Yw(t,e){if(1&t&&fo(0,"tw-slot",6),2&t){const t=_o();lo("slot",t.slot)("form",t.form)}}var Qw,Xw,tb;function eb(t,e){if(1&t&&(uo(0,"button",7),Sl(1,Qw),ho()),2&t){const t=_o();lo("disabled",!t.form.valid),zr(1),El(t.getSaveLabel),Al(1)}}function nb(t,e){if(1&t){const t=mo();uo(0,"button",8),wo("click",(function(e){return He(t),_o().onReset()})),Sl(1,Xw),ho()}}function rb(t,e){if(1&t){const t=mo();uo(0,"button",8),wo("click",(function(e){return He(t),_o().onDelete()})),Sl(1,tb),ho()}}Qw=$localize`:␟d4d92b50f8daf0648d9fbda145f606d4e2495453␟6128633059669858834:${"\ufffd0\ufffd"}:INTERPOLATION:`,Xw=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,tb=$localize`:␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`;let sb=(()=>{class t{constructor(t){this.formdefService=t,this.showSave=!1,this.showCancel=!1,this.showDelete=!1,this.submitted=new ql,this.resetted=new ql,this.deleted=new ql,this.class="form",this.form=new sv({})}set viewModel(t){t&&(this._viewModel=t,this.ngOnInit())}get viewModel(){return this._viewModel}get getSaveLabel(){return this.saveTitle?this.saveTitle:"Save"}get formValue(){return this.form.value}get formIsValid(){return this.form.valid}ngOnInit(){this.viewModel&&(this.form=this.formdefService.toGroup(this.key,this.viewModel),this.slot=this.formdefService.getSlot(this.key))}onSubmit(){this.submitted.next(this.form.value)}onReset(){this.resetted.next(this.form.value)}onDelete(){this.deleted.next(this.form.value)}}return t.\u0275fac=function(e){return new(e||t)(io(Gw))},t.\u0275cmp=pe({type:t,selectors:[["tw-formdef"]],hostVars:2,hostBindings:function(t,e){2&t&&Ho(e.class)},inputs:{key:"key",viewModel:"viewModel",showSave:"showSave",saveTitle:"saveTitle",showCancel:"showCancel",showDelete:"showDelete",errors:"errors"},outputs:{submitted:"submitted",resetted:"resetted",deleted:"deleted"},features:[fa([Gw])],decls:7,vars:6,consts:[[3,"formGroup","ngSubmit"],[3,"slot","form",4,"ngIf"],[3,"errors"],[1,"button__bar"],["type","submit",3,"disabled",4,"ngIf"],["type","button","class","button--secondary",3,"click",4,"ngIf"],[3,"slot","form"],["type","submit",3,"disabled"],["type","button",1,"button--secondary",3,"click"]],template:function(t,e){1&t&&(uo(0,"form",0),wo("ngSubmit",(function(t){return e.onSubmit()})),so(1,Yw,1,2,"tw-slot",1),fo(2,"tw-validation-summary",2),uo(3,"div",3),so(4,eb,2,2,"button",4),so(5,nb,2,0,"button",5),so(6,rb,2,0,"button",5),ho(),ho()),2&t&&(lo("formGroup",e.form),zr(1),lo("ngIf",e.slot),zr(1),lo("errors",e.errors),zr(2),lo("ngIf",e.showSave),zr(1),lo("ngIf",e.showCancel),zr(1),lo("ngIf",e.showDelete))},directives:[yv,uy,bv,Ou,Zw,Lw],encapsulation:2}),t})(),ib=(()=>{class t{constructor(){this.key=t.KEY,this.type="single",this.title="Detail",this.editors=[{key:"id",type:"hidden",label:"Id",required:!0},{key:"name",type:"text",label:"Name",required:!0},{key:"description",type:"text",label:"Description"}]}}return t.KEY="ClaimtypeDetailSlot",t})(),ob=(()=>{class t{constructor(t){this.http=t}claimtypes(){return this.http.get("claimtype").pipe(xd(this.http.handleError))}claimtype(t){return this.http.get(`claimtype/${t}`).pipe(xd(this.http.handleError))}create(t){return t.id=void 0,this.http.post("claimtype",t).pipe(xd(this.http.handleError))}update(t){return this.http.put("claimtype",t).pipe(xd(this.http.handleError))}delete(t){return this.http.delete(`claimtype/${t}`).pipe(xd(this.http.handleError))}}return t.\u0275fac=function(e){return new(e||t)(Wt(Dm))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const ab=[[["","list",""]],[["","detail",""]]],lb=["[list]","[detail]"];let cb=(()=>{class t{constructor(){this.style="pane"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-pane"]],hostVars:2,hostBindings:function(t,e){2&t&&Ho(e.style)},ngContentSelectors:lb,decls:4,vars:0,consts:[[1,"pane__list"],[1,"pane__detail"]],template:function(t,e){1&t&&(Co(ab),uo(0,"div",0),Fo(1),ho(),uo(2,"div",1),Fo(3,1),ho())},styles:[""]}),t})(),ub=(()=>{class t{constructor(){this.classList=new Array(...["fa","fa-fw"])}set name(t){this.addClass(`fa-${t}`)}set size(t){this.addClass(`fa-${t}x`)}set spin(t){t?this.addClass("fa-spin"):this.removeClass("fa-spin")}addClass(t){this.classList.push(t)}removeClass(t){let e;(e=this.classList.indexOf(t))>=0&&this.classList.splice(e,1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-icon"]],inputs:{name:"name",size:"size",spin:"spin"},decls:1,vars:1,consts:[["aria-hidden","true",3,"ngClass"]],template:function(t,e){1&t&&fo(0,"i",0),2&t&&lo("ngClass",e.classList)},directives:[ku],encapsulation:2}),t})();const hb=["*"];function db(t,e){1&t&&(uo(0,"div",5),fo(1,"tw-icon",6),ho()),2&t&&(zr(1),lo("spin",!0))}function fb(t,e){1&t&&(po(0,void 0,void 0),go())}const pb=function(t,e){return{$implicit:t,rowIndex:e}};function gb(t,e){if(1&t&&so(0,fb,1,0,"ng-container",7),2&t){const t=e.$implicit,i=e.index;lo("ngTemplateOutlet",_o().itemTemplate)("ngTemplateOutletContext",(2,n=pb,r=t,s=i,Ll(Oe(),qe(),2,n,r,s,void 0)))}var n,r,s}var mb;function yb(t,e){1&t&&(uo(0,"div"),Sl(1,mb),ho())}mb=$localize`:␟a20b711473ad9abe188c2a3a938eeab4defd4ce7␟4459924971192057766:No data!`;const vb=[[["tw-header"]],[["tw-footer"]]],wb=["tw-header","tw-footer"];let bb=(()=>{class t{constructor(){this.header="list__header"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-header"]],hostVars:2,hostBindings:function(t,e){2&t&&Ho(e.header)},ngContentSelectors:hb,decls:1,vars:0,template:function(t,e){1&t&&(Co(),Fo(0))},encapsulation:2}),t})(),Sb=(()=>{class t{constructor(){this.footer="list__footer"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-footer"]],hostVars:2,hostBindings:function(t,e){2&t&&Ho(e.footer)},ngContentSelectors:hb,decls:1,vars:0,template:function(t,e){1&t&&(Co(),Fo(0))},encapsulation:2}),t})(),_b=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(io(Ma))},t.\u0275dir=be({type:t,selectors:[["","twTemplate",""]],inputs:{name:["twTemplate","name"]}}),t})(),xb=(()=>{class t{get rows(){return this._rows}set rows(t){this._rows=t,this.loading=!1,this.isEmpty||this.ngAfterContentInit()}ngOnInit(){this.loading=!0}ngAfterContentInit(){this.templates.forEach(t=>{this.itemTemplate=t.template})}isEmpty(){const t=this.rows;return null==t||0===t.length}attachRows(t){this.isEmpty()?this.rows=t:t.forEach(t=>{this.rows.push(t)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-list"]],contentQueries:function(t,e,n){var r;1&t&&(ec(n,bb,!0),ec(n,Sb,!0),ec(n,_b,!1)),2&t&&(tc(r=nc())&&(e.header=r.first),tc(r=nc())&&(e.footer=r.first),tc(r=nc())&&(e.templates=r))},inputs:{loading:"loading",rows:"rows"},ngContentSelectors:wb,decls:7,vars:3,consts:[[1,"list"],["class","list--loading",4,"ngIf"],[1,"list__content"],["ngFor","",3,"ngForOf"],[4,"ngIf"],[1,"list--loading"],["name","spinner",3,"spin"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(Co(vb),uo(0,"div",0),so(1,db,2,1,"div",1),Fo(2),uo(3,"div",2),so(4,gb,1,5,"ng-template",3),so(5,yb,2,0,"div",4),ho(),Fo(6,1),ho()),2&t&&(zr(1),lo("ngIf",e.loading),zr(3),lo("ngForOf",e.rows),zr(1),lo("ngIf",e.isEmpty()))},directives:[Ou,Pu,ub,Mu],encapsulation:2}),t})(),Cb=(()=>{class t{transform(t,e){return t?e?(e=e.toLowerCase(),t.filter(t=>JSON.stringify(t).toLowerCase().includes(e))):t:[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Se({name:"filter",type:t,pure:!0}),t})();var Eb;Eb=$localize`:␟6645623468a47649f9dfa67ae43a9b42a130a8d6␟6587396195512493624:Claimtypes`;const Ab=["placeholder",$localize`:␟6bec7734cb3740b324966b003c0f45f0148a70e8␟7158592746571420879:search`],Fb=function(t){return[".",t]};function Tb(t,e){if(1&t&&(uo(0,"div",9),uo(1,"div"),zo(2),ho(),uo(3,"div"),zo(4),ho(),ho()),2&t){const t=e.$implicit;lo("routerLink",Bl(4,Fb,null==t?null:t.id)),ro("title",null==t?null:t.name),zr(2),Go(t.name),zr(2),Go(t.description)}}const Ib=function(){return[".","new"]};let kb=(()=>{let t=class{constructor(t,e){this.service=t,this.bus=e,this.searchText="",this.claimtypes=[],this.busSubscription=this.bus.subsribe(this)}ngOnInit(){this.searchText="",this.loadData()}ngOnDestroy(){this.bus.unsubscribe(this.busSubscription)}onMessage(t){"claimtype"===t.source&&this.loadData()}getType(){return Bm.KEY}reload(){this.ngOnInit()}loadData(){this.loadClaimtypes()}loadClaimtypes(){this.claimtypes$=this.service.claimtypes().subscribe(t=>{this.claimtypes=t})}};return t.\u0275fac=function(e){return new(e||t)(io(ob),io(Rm))},t.\u0275cmp=pe({type:t,selectors:[["tw-claimtype-list"]],features:[fa([ob])],decls:14,vars:7,consts:[[3,"rows"],[1,"button__bar"],[1,"button",3,"routerLink"],["name","plus"],["type","button",3,"click"],["name","refresh"],[1,"form","list__search"],["type","text",3,"ngModel","ngModelChange",6,"placeholder"],["twTemplate","claimtype-item"],["routerLinkActive","active",1,"list__item",3,"routerLink"]],template:function(t,e){1&t&&(uo(0,"tw-list",0),Ml(1,"filter"),uo(2,"tw-header"),uo(3,"h3"),Sl(4,Eb),ho(),uo(5,"div",1),uo(6,"a",2),fo(7,"tw-icon",3),ho(),uo(8,"button",4),wo("click",(function(t){return e.reload()})),fo(9,"tw-icon",5),ho(),ho(),uo(10,"div",6),uo(11,"input",7),_l(12,Ab),wo("ngModelChange",(function(t){return e.searchText=t})),ho(),ho(),ho(),so(13,Tb,5,6,"ng-template",8),ho()),2&t&&(lo("rows",Ul(1,3,e.claimtypes,e.searchText)),zr(6),lo("routerLink",Vl(6,Ib)),zr(5),lo("ngModel",e.searchText))},directives:[xb,bb,lg,ub,ny,cy,mv,_b,ug,ag],pipes:[Cb],styles:[""]}),t=Pg([km],t),t})();const Db=[{path:"claimtypes",component:(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-claimtype-dashboard"]],decls:5,vars:0,consts:[["list",""],["detail",""]],template:function(t,e){1&t&&(uo(0,"tw-pane"),uo(1,"div",0),fo(2,"tw-claimtype-list"),ho(),uo(3,"div",1),fo(4,"router-outlet"),ho(),ho())},directives:[cb,kb,fg],styles:[""]}),t})(),canActivate:[Pm],children:[{path:":id",component:(()=>{let t=class{constructor(t,e,n,r){this.router=t,this.route=e,this.service=n,this.messageBus=r,this.key=ib.KEY,this.isNew=!1}ngOnInit(){this.routeParams$=this.route.params.subscribe(t=>{t.id&&this.init(t.id)})}submitted(t){this.claimtype$=this.isNew?this.service.create(t).subscribe(t=>{t&&(this.changesSaved(),this.back())}):this.service.update(t).subscribe(()=>{this.changesSaved(),this.back()})}deleted(t){this.isNew||(this.claimtype$=this.service.delete(t.id).subscribe(t=>{this.changesSaved(),this.back()}))}back(){this.router.navigate(["claimtypes"])}init(t){"new"!==t?this.load(t.toString()):this.create()}load(t){this.isNew=!1,this.claimtype$=this.service.claimtype(t).subscribe(t=>{this.key=ib.KEY,this.viewModel=t})}create(){this.isNew=!0,this.viewModel={id:"new",name:void 0,description:void 0}}changesSaved(){this.messageBus.publish(new Hm(void 0,"Your changes have been saved...",Nm.Success)),this.messageBus.publish(new Bm("claimtype"))}};return t.\u0275fac=function(e){return new(e||t)(io(og),io(Qf),io(ob),io(Rm))},t.\u0275cmp=pe({type:t,selectors:[["tw-claimtype-detail"]],features:[fa([ob])],decls:2,vars:4,consts:[[3,"key","viewModel","showSave","showDelete","submitted","deleted"],["formDef",""]],template:function(t,e){1&t&&(uo(0,"tw-formdef",0,1),wo("submitted",(function(t){return e.submitted(t)}))("deleted",(function(t){return e.deleted(t)})),ho()),2&t&&lo("key",e.key)("viewModel",e.viewModel)("showSave",!0)("showDelete",!e.isNew)},directives:[sb],styles:[""]}),t=Pg([km],t),t})()}]}];let Pb=(()=>{class t{constructor(t){this.slotRegistry=t,this.slotRegistry.register(new ib)}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Wt(Nv))},providers:[ob],imports:[[Uu,Pv,xg.forChild(Db),Am,zw]]}),t})(),Rb=(()=>{class t{constructor(){this.key=t.KEY,this.type="single",this.title="Detail",this.editors=[{key:"id",type:"hidden",label:"Id",required:!0},{key:"name",type:"text",label:"Name",required:!0}]}}return t.KEY="RoleDetailSlot",t})(),Ob=(()=>{class t{constructor(t){this.http=t}roles(){return this.http.get("role").pipe(xd(this.http.handleError))}role(t){return this.http.get(`role/${t}`).pipe(xd(this.http.handleError))}create(t){return t.id=void 0,this.http.post("role",t).pipe(xd(this.http.handleError))}update(t){return this.http.put("role",t).pipe(xd(this.http.handleError))}delete(t){return this.http.delete(`role/${t}`).pipe(xd(this.http.handleError))}}return t.\u0275fac=function(e){return new(e||t)(Wt(Dm))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();var Nb;Nb=$localize`:␟9610487cbeb5796d34d8601b5ac0c0a65f9e1d19␟795890916060309463:Roles`;const Hb=["placeholder",$localize`:␟6bec7734cb3740b324966b003c0f45f0148a70e8␟7158592746571420879:search`],jb=function(t){return[".",t]};function Vb(t,e){if(1&t&&(uo(0,"div",9),uo(1,"div"),zo(2),ho(),ho()),2&t){const t=e.$implicit;lo("routerLink",Bl(3,jb,null==t?null:t.id)),ro("title",null==t?null:t.name),zr(2),Go(t.name)}}const Bb=function(){return[".","new"]};let Lb=(()=>{let t=class{constructor(t,e){this.service=t,this.bus=e,this.searchText="",this.roles=[],this.busSubscription=this.bus.subsribe(this)}ngOnInit(){this.searchText="",this.loadData()}ngOnDestroy(){this.bus.unsubscribe(this.busSubscription)}onMessage(t){"role"===t.source&&this.loadData()}getType(){return Bm.KEY}reload(){this.ngOnInit()}loadData(){this.loadRoles()}loadRoles(){this.roles$=this.service.roles().subscribe(t=>{this.roles=t})}};return t.\u0275fac=function(e){return new(e||t)(io(Ob),io(Rm))},t.\u0275cmp=pe({type:t,selectors:[["tw-role-list"]],features:[fa([Ob])],decls:14,vars:7,consts:[[3,"rows"],[1,"button__bar"],[1,"button",3,"routerLink"],["name","plus"],["type","button",3,"click"],["name","refresh"],[1,"form","list__search"],["type","text",3,"ngModel","ngModelChange",6,"placeholder"],["twTemplate","role-item"],["routerLinkActive","active",1,"list__item",3,"routerLink"]],template:function(t,e){1&t&&(uo(0,"tw-list",0),Ml(1,"filter"),uo(2,"tw-header"),uo(3,"h3"),Sl(4,Nb),ho(),uo(5,"div",1),uo(6,"a",2),fo(7,"tw-icon",3),ho(),uo(8,"button",4),wo("click",(function(t){return e.reload()})),fo(9,"tw-icon",5),ho(),ho(),uo(10,"div",6),uo(11,"input",7),_l(12,Hb),wo("ngModelChange",(function(t){return e.searchText=t})),ho(),ho(),ho(),so(13,Vb,3,5,"ng-template",8),ho()),2&t&&(lo("rows",Ul(1,3,e.roles,e.searchText)),zr(6),lo("routerLink",Vl(6,Bb)),zr(5),lo("ngModel",e.searchText))},directives:[xb,bb,lg,ub,ny,cy,mv,_b,ug,ag],pipes:[Cb],styles:[""]}),t=Pg([km],t),t})();const Mb=[{path:"roles",component:(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-role-dashboard"]],decls:5,vars:0,consts:[["list",""],["detail",""]],template:function(t,e){1&t&&(uo(0,"tw-pane"),uo(1,"div",0),fo(2,"tw-role-list"),ho(),uo(3,"div",1),fo(4,"router-outlet"),ho(),ho())},directives:[cb,Lb,fg],styles:[""]}),t})(),canActivate:[Pm],children:[{path:":id",component:(()=>{let t=class{constructor(t,e,n,r){this.router=t,this.route=e,this.service=n,this.messageBus=r,this.key=Rb.KEY,this.isNew=!1}ngOnInit(){this.routeParams$=this.route.params.subscribe(t=>{t.id&&this.init(t.id)})}submitted(t){this.role$=this.isNew?this.service.create(t).subscribe(t=>{t&&(this.changesSaved(),this.back())}):this.service.update(t).subscribe(()=>{this.changesSaved(),this.back()})}deleted(t){this.isNew||(this.role$=this.service.delete(t.id).subscribe(t=>{this.changesSaved(),this.back()}))}back(){this.router.navigate(["roles"])}init(t){"new"!==t?this.load(t.toString()):this.create()}load(t){this.isNew=!1,this.role$=this.service.role(t).subscribe(t=>{this.key=Rb.KEY,this.viewModel=t})}create(){this.isNew=!0,this.viewModel={id:"new",name:void 0}}changesSaved(){this.messageBus.publish(new Hm(void 0,"Your changes have been saved...",Nm.Success)),this.messageBus.publish(new Bm("role"))}};return t.\u0275fac=function(e){return new(e||t)(io(og),io(Qf),io(Ob),io(Rm))},t.\u0275cmp=pe({type:t,selectors:[["tw-role-detail"]],features:[fa([Ob])],decls:2,vars:4,consts:[[3,"key","viewModel","showSave","showDelete","submitted","deleted"],["formDef",""]],template:function(t,e){1&t&&(uo(0,"tw-formdef",0,1),wo("submitted",(function(t){return e.submitted(t)}))("deleted",(function(t){return e.deleted(t)})),ho()),2&t&&lo("key",e.key)("viewModel",e.viewModel)("showSave",!0)("showDelete",!e.isNew)},directives:[sb],styles:[""]}),t=Pg([km],t),t})()}]}];let Ub=(()=>{class t{constructor(t){this.slotRegistry=t,this.slotRegistry.register(new Rb)}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Wt(Nv))},providers:[Ob],imports:[[Uu,Pv,xg.forChild(Mb),Am,zw]]}),t})(),qb=(()=>{class t{constructor(t,e,n){this.http=t,this.claimsService=e,this.roleService=n}users(){return this.http.get("account/users").pipe(xd(this.http.handleError))}user(t){return Jm({user:this.http.get(`account/user/${t}`),claims:this.claimsService.claimtypes(),roles:this.roleService.roles()}).pipe(j(t=>({user:t.user,claims:t.claims.map(t=>t.name),roles:t.roles.map(t=>t.name)}))).pipe(xd(this.http.handleError))}register(t){return this.http.post("account/register",t).pipe(xd(this.http.handleError))}changePassword(t){return this.http.post("account/changepassword",t).pipe(xd(this.http.handleError))}update(t){return this.http.put("account/user",t).pipe(xd(this.http.handleError))}delete(t){return this.http.delete(`account/user/${t}`).pipe(xd(this.http.handleError))}}return t.\u0275fac=function(e){return new(e||t)(Wt(Dm),Wt(ob),Wt(Ob))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();var Kb;Kb=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`;const $b=["placeholder",$localize`:␟6bec7734cb3740b324966b003c0f45f0148a70e8␟7158592746571420879:search`],zb=function(t){return[".",t]};function Gb(t,e){if(1&t&&(uo(0,"div",9),uo(1,"div"),zo(2),ho(),uo(3,"div"),zo(4),ho(),ho()),2&t){const t=e.$implicit;lo("routerLink",Bl(4,zb,null==t?null:t.id)),ro("title",null==t?null:t.userName),zr(2),Go(t.userName),zr(2),Go(t.email)}}const Wb=function(){return[".","register"]};let Jb=(()=>{let t=class{constructor(t,e){this.service=t,this.bus=e,this.searchText="",this.users=[],this.busSubscription=this.bus.subsribe(this)}ngOnInit(){this.searchText="",this.loadData()}ngOnDestroy(){this.bus.unsubscribe(this.busSubscription)}onMessage(t){"user"===t.source&&this.loadData()}getType(){return Bm.KEY}reload(){this.ngOnInit()}loadData(){this.loadUsers()}loadUsers(){this.users$=this.service.users().subscribe(t=>{this.users=t})}};return t.\u0275fac=function(e){return new(e||t)(io(qb),io(Rm))},t.\u0275cmp=pe({type:t,selectors:[["tw-user-list"]],features:[fa([qb])],decls:14,vars:7,consts:[[3,"rows"],[1,"button__bar"],[1,"button",3,"routerLink"],["name","plus"],["type","button",3,"click"],["name","refresh"],[1,"form","list__search"],["type","text",3,"ngModel","ngModelChange",6,"placeholder"],["twTemplate","user-item"],["routerLinkActive","active",1,"list__item",3,"routerLink"]],template:function(t,e){1&t&&(uo(0,"tw-list",0),Ml(1,"filter"),uo(2,"tw-header"),uo(3,"h3"),Sl(4,Kb),ho(),uo(5,"div",1),uo(6,"a",2),fo(7,"tw-icon",3),ho(),uo(8,"button",4),wo("click",(function(t){return e.reload()})),fo(9,"tw-icon",5),ho(),ho(),uo(10,"div",6),uo(11,"input",7),_l(12,$b),wo("ngModelChange",(function(t){return e.searchText=t})),ho(),ho(),ho(),so(13,Gb,5,6,"ng-template",8),ho()),2&t&&(lo("rows",Ul(1,3,e.users,e.searchText)),zr(6),lo("routerLink",Vl(6,Wb)),zr(5),lo("ngModel",e.searchText))},directives:[xb,bb,lg,ub,ny,cy,mv,_b,ug,ag],pipes:[Cb],styles:[""]}),t=Pg([km],t),t})(),Zb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-user-dashboard"]],decls:5,vars:0,consts:[["list",""],["detail",""]],template:function(t,e){1&t&&(uo(0,"tw-pane"),uo(1,"div",0),fo(2,"tw-user-list"),ho(),uo(3,"div",1),fo(4,"router-outlet"),ho(),ho())},directives:[cb,Jb,fg],styles:[""]}),t})(),Yb=(()=>{class t{constructor(){this.key=t.KEY,this.type="single",this.title="Register user",this.editors=[{key:"userName",type:"text",label:"Name",required:!0},{key:"email",type:"text",label:"Email",required:!0},{key:"password",type:"password",label:"Password",required:!0,minLength:6,maxLength:100}]}}return t.KEY="RegisterUserSlot",t})(),Qb=(()=>{class t{constructor(e,n){this.key=t.KEY,this.type="single",this.title="Detail";const r=e.map(t=>({key:t,value:t})),s=n.map(t=>({key:t,value:t}));this.editors=[{key:"id",type:"hidden",label:"Id",required:!0},{key:"userName",type:"text",label:"Name",required:!0},{key:"email",type:"text",label:"Email",required:!0},{key:"lockoutEnabled",type:"checkbox",label:"Lockout enabled"},{key:"isLockedOut",type:"checkbox",label:"Is locked out",isReadOnly:!0},{key:"claims",type:"multi-select",label:"Claims",required:!1,options:r,singleSelection:!1,bindingBehaviour:"value"},{key:"roles",type:"multi-select",label:"Roles",required:!1,options:s,singleSelection:!1,bindingBehaviour:"value"}]}}return t.KEY="UserDetailSlot",t})(),Xb=(()=>{let t=class{constructor(t,e,n,r,s){this.router=t,this.route=e,this.service=n,this.slotRegistry=r,this.messageBus=s,this.key=Qb.KEY}ngOnInit(){this.routeParams$=this.route.params.subscribe(t=>{t.id&&this.init(t.id)})}submitted(t){this.user$=this.service.update(t).subscribe(()=>{this.changesSaved(),this.back()})}deleted(t){this.changesSaved()}back(){this.router.navigate(["users"])}init(t){this.load(t.toString())}load(t){this.user$=this.service.user(t).subscribe(t=>{this.slotRegistry.register(new Qb(t.claims,t.roles)),this.key=Qb.KEY,this.viewModel=t.user})}changesSaved(){this.messageBus.publish(new Hm(void 0,"Your changes have been saved...",Nm.Success)),this.messageBus.publish(new Bm("user"))}};return t.\u0275fac=function(e){return new(e||t)(io(og),io(Qf),io(qb),io(Nv),io(Rm))},t.\u0275cmp=pe({type:t,selectors:[["tw-user-detail"]],features:[fa([qb])],decls:2,vars:4,consts:[[3,"key","viewModel","showSave","showDelete","submitted"],["formDef",""]],template:function(t,e){1&t&&(uo(0,"tw-formdef",0,1),wo("submitted",(function(t){return e.submitted(t)})),ho()),2&t&&lo("key",e.key)("viewModel",e.viewModel)("showSave",!0)("showDelete",!1)},directives:[sb],styles:[""]}),t=Pg([km],t),t})();const tS=[{path:"users",component:Zb,canActivate:[Pm],children:[{path:"register",component:(()=>{let t=class{constructor(t,e,n){this.router=t,this.service=e,this.messageBus=n,this.key=Yb.KEY,this.errors=[]}ngOnInit(){this.key=Yb.KEY,this.viewModel={userName:void 0,email:void 0,password:void 0,confirmPassword:void 0}}submitted(t){t.confirmPassword=t.password,this.user$=this.service.register(t).subscribe(()=>{this.changesSaved(),this.back()},t=>{console.log(t),this.errors=t.errors})}back(){this.router.navigate(["users"])}changesSaved(){this.messageBus.publish(new Hm(void 0,"Your changes have been saved...",Nm.Success)),this.messageBus.publish(new Bm("user"))}};return t.\u0275fac=function(e){return new(e||t)(io(og),io(qb),io(Rm))},t.\u0275cmp=pe({type:t,selectors:[["tw-register-user"]],features:[fa([qb])],decls:1,vars:7,consts:[[3,"key","viewModel","showSave","saveTitle","showCancel","showDelete","errors","submitted"]],template:function(t,e){1&t&&(uo(0,"tw-formdef",0),wo("submitted",(function(t){return e.submitted(t)})),ho()),2&t&&lo("key",e.key)("viewModel",e.viewModel)("showSave",!0)("saveTitle","Register")("showCancel",!1)("showDelete",!1)("errors",e.errors)},directives:[sb],styles:[""]}),t=Pg([km],t),t})()},{path:":id",component:Xb}]}];let eS=(()=>{class t{constructor(t){this.slotRegistry=t,this.slotRegistry.register(new Yb)}}return t.\u0275mod=ve({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Wt(Nv))},providers:[qb],imports:[[Uu,Pv,xg.forChild(tS),Am,zw]]}),t})();function nS(t,e){1&t&&fo(0,"tw-icon",6),2&t&&lo("name",_o(2).$implicit.icon)}function rS(t,e){if(1&t&&(uo(0,"a",4),so(1,nS,1,1,"tw-icon",5),zo(2),ho()),2&t){const t=_o().$implicit;lo("routerLink",t.route),zr(1),lo("ngIf",t.icon),zr(1),Wo(" ",t.name," ")}}function sS(t,e){1&t&&fo(0,"tw-icon",6),2&t&&lo("name",_o(2).$implicit.icon)}function iS(t,e){1&t&&fo(0,"tw-icon",6),2&t&&lo("name",_o(2).$implicit.icon)}function oS(t,e){if(1&t&&(uo(0,"a",4),so(1,iS,1,1,"tw-icon",5),zo(2),ho()),2&t){const t=_o().$implicit;lo("routerLink",t.route),zr(1),lo("ngIf",t.icon),zr(1),Wo(" ",t.name," ")}}function aS(t,e){if(1&t&&(uo(0,"li",8),so(1,oS,3,3,"a",2),ho()),2&t){const t=e.$implicit;zr(1),lo("ngIf",t.route)}}function lS(t,e){if(1&t&&(uo(0,"ul"),so(1,aS,2,1,"li",7),ho()),2&t){const t=_o(2).$implicit;zr(1),lo("ngForOf",t.children)}}function cS(t,e){if(1&t&&(uo(0,"span"),so(1,sS,1,1,"tw-icon",5),zo(2),so(3,lS,2,1,"ul",3),ho()),2&t){const t=_o().$implicit;zr(1),lo("ngIf",t.icon),zr(1),Wo(" ",t.name," "),zr(1),lo("ngIf",t.children&&t.children.length>0)}}const uS=function(t){return{menu__item:t}};function hS(t,e){if(1&t&&(uo(0,"li",1),so(1,rS,3,3,"a",2),so(2,cS,4,3,"span",3),ho()),2&t){const t=e.$implicit;lo("ngClass",Bl(3,uS,t.route)),zr(1),lo("ngIf",t.route),zr(1),lo("ngIf",!t.route)}}let dS=(()=>{class t{constructor(t){this.service=t}get menuItems(){return this.service.items}ngOnInit(){this.service.register({id:"1",name:"Users",route:"/users",icon:"users"}),this.service.register({id:"2",name:"Roles",route:"/roles",icon:"tags"}),this.service.register({id:"3",name:"ClaimTypes",route:"/claimtypes",icon:"key"})}}return t.\u0275fac=function(e){return new(e||t)(io(Um))},t.\u0275cmp=pe({type:t,selectors:[["tw-menu"]],features:[fa([Um])],decls:1,vars:1,consts:[["routerLinkActive","item.route ? 'active' : null",3,"ngClass",4,"ngFor","ngForOf"],["routerLinkActive","item.route ? 'active' : null",3,"ngClass"],[3,"routerLink",4,"ngIf"],[4,"ngIf"],[3,"routerLink"],[3,"name",4,"ngIf"],[3,"name"],["routerLinkActive","active","class","menu__item",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"menu__item"]],template:function(t,e){1&t&&so(0,hS,3,5,"li",0),2&t&&lo("ngForOf",e.menuItems)},directives:[Pu,ug,ku,Ou,lg,ub],encapsulation:2}),t})();function fS(t,e){1&t&&(uo(0,"div"),zo(1,"STS Admin"),ho())}function pS(t,e){1&t&&(uo(0,"span",10),uo(1,"b"),zo(2,">"),ho(),ho())}function gS(t,e){1&t&&(uo(0,"span",11),uo(1,"b"),zo(2,"<"),ho(),ho())}function mS(t,e){1&t&&fo(0,"tw-menu")}function yS(t,e){if(1&t){const t=mo();uo(0,"li",12),uo(1,"a",13),wo("click",(function(e){return He(t),_o().login()})),zo(2," Login "),ho(),ho()}}function vS(t,e){if(1&t){const t=mo();uo(0,"li",12),uo(1,"a",13),wo("click",(function(e){return He(t),_o().logout()})),zo(2," Logout "),ho(),ho()}}let wS=(()=>{class t{constructor(t){this.user=t,this.collapsed=!1,this.classlist=this.getClassList(),this.loginClick=new ql}get isAuthenticated(){return this.user.isAuthenticated}get isAdmin(){return this.user.hasClaim("Administrator")}get userName(){return this.user.userName}toggle(){this.collapsed=!this.collapsed,this.classlist=this.getClassList()}login(){this.loginClick.next("login")}logout(){this.loginClick.next("logout")}getClassList(){return this.collapsed?"sidebar sidebar--collapsed":"sidebar"}}return t.\u0275fac=function(e){return new(e||t)(io(jm))},t.\u0275cmp=pe({type:t,selectors:[["tw-sidebar"]],hostVars:2,hostBindings:function(t,e){2&t&&Ho(e.classlist)},outputs:{loginClick:"loginClick"},decls:15,vars:7,consts:[[1,"sidebar__header",3,"click"],[4,"ngIf"],["type","button"],["name","arrow-right",4,"ngIf"],["name","arrow-left",4,"ngIf"],[1,"sidebar__content"],["routerLinkActive","active",1,"menu__item"],["routerLink","/"],[1,"sidebar__footer"],["routerLinkActive","active",4,"ngIf"],["name","arrow-right"],["name","arrow-left"],["routerLinkActive","active"],["href","javascript:void(0)",3,"click"]],template:function(t,e){1&t&&(uo(0,"div",0),wo("click",(function(t){return e.toggle()})),so(1,fS,2,0,"div",1),uo(2,"button",2),so(3,pS,3,0,"span",3),so(4,gS,3,0,"span",4),ho(),ho(),uo(5,"div",5),uo(6,"ul"),uo(7,"li",6),uo(8,"a",7),zo(9),ho(),ho(),so(10,mS,1,0,"tw-menu",1),ho(),ho(),uo(11,"div",8),uo(12,"ul"),so(13,yS,3,0,"li",9),so(14,vS,3,0,"li",9),ho(),ho()),2&t&&(zr(1),lo("ngIf",!e.collapsed),zr(2),lo("ngIf",e.collapsed),zr(1),lo("ngIf",!e.collapsed),zr(5),Wo(" ",e.userName," "),zr(1),lo("ngIf",e.isAuthenticated&&e.isAdmin),zr(3),lo("ngIf",!e.isAuthenticated),zr(1),lo("ngIf",e.isAuthenticated))},directives:[Ou,ug,lg,dS],styles:[""]}),t})(),bS=(()=>{class t{constructor(t){this.messageBus=t,this.status$=new nd(null),this.messageBus.subsribe(this)}get status(){return this.status$.asObservable()}onMessage(t){this.setStatus(t)}getType(){return Hm.KEY}setStatus(t){this.status$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Wt(Rm))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function SS(t,e){if(1&t){const t=mo();uo(0,"div"),uo(1,"button",3),wo("click",(function(e){return He(t),_o(2).action()})),fo(2,"tw-icon",4),ho(),ho()}}function _S(t,e){if(1&t){const t=mo();uo(0,"div"),so(1,SS,3,0,"div",0),uo(2,"div"),zo(3),uo(4,"span",1),uo(5,"span",2),wo("click",(function(e){return He(t),_o().close()})),zo(6,"\xd7"),ho(),ho(),ho(),ho()}if(2&t){const t=_o();zr(1),lo("ngIf",t.hasAction),zr(2),Wo(" ",t.statusMessage," ")}}let xS=(()=>{class t{constructor(t){this.service=t,this.styles=this.getStyles(),this.hasAction=!1}get statusMessage(){return this.status&&this.status.title&&this.status.title.length>0?`${this.status.title}: ${this.status.message}`:this.status.message}get status(){return this.message}ngOnInit(){this.service.status.subscribe(t=>{t&&(this.message=t,this.hasAction=this.message.hasAction,this.fadeOut(),this.styles=this.getStyles(this.getStatusClass()))})}displayStatusBar(){return this.message&&!this.message.viewed}close(){this.message.viewed=!0,this.styles=this.getStyles()}action(){this.message.action(),this.close()}fadeOut(){this.message&&this.message.level===Nm.Success&&setTimeout(()=>{this.close()},5e3)}getStyles(t=null){return t?`workspace__status ${t}`:"workspace__status"}getStatusClass(){let t="success";switch(this.message.level){case Nm.Info:t="info";break;case Nm.Warning:t="warning";break;case Nm.Danger:t="danger"}return`workspace__status--${t}`}}return t.\u0275fac=function(e){return new(e||t)(io(bS))},t.\u0275cmp=pe({type:t,selectors:[["tw-statusbar"]],hostVars:2,hostBindings:function(t,e){2&t&&Ho(e.styles)},features:[fa([bS])],decls:1,vars:1,consts:[[4,"ngIf"],[1,"workspace__status-close"],[3,"click"],["type","button",1,"close",3,"click"],["name","bolt"]],template:function(t,e){1&t&&so(0,_S,7,2,"div",0),2&t&&lo("ngIf",e.displayStatusBar())},directives:[Ou,ub],encapsulation:2}),t})(),CS=(()=>{class t{constructor(){this.style="workspace"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["tw-workspace"]],hostVars:2,hostBindings:function(t,e){2&t&&Ho(e.style)},decls:4,vars:0,consts:[[1,"workspace__header"],[1,"workspace__content"]],template:function(t,e){1&t&&(fo(0,"div",0),fo(1,"tw-statusbar"),uo(2,"div",1),fo(3,"router-outlet"),ho())},directives:[xS,fg],styles:[""]}),t})(),ES=(()=>{class t{constructor(t,e,n,r){this.router=t,this.user=e,this.oauthService=n,this.clientConfigProvider=r,this.title="ClientApp",this.style="shell"}get isAuthenticated(){return this.user.isAuthenticated}get username(){return this.user.userName}get claims(){return this.user.userClaims}ngOnInit(){this.configure()}loginClick(t){"login"===t?this.login():this.logout()}login(){this.oauthService.initLoginFlow()}logout(){this.oauthService.logOut(!1),this.user.reset(),this.router.navigate(["/"])}configure(){const t=this.clientConfigProvider.config;this.oauthService.configure({clientId:t.clientId,issuer:t.issuer,redirectUri:t.redirectUri||window.location.origin,responseType:t.responseType||void 0,scope:t.scope,loginUrl:t.loginUrl,logoutUrl:t.logoutUrl,requireHttps:!1}),this.oauthService.tokenValidationHandler=new wm,this.oauthService.events.subscribe(t=>{"token_received"!==t.type&&"token_refreshed"!==t.type||this.user.setProperties(this.oauthService.getAccessToken())}),this.oauthService.loadDiscoveryDocumentAndLogin({onTokenReceived:t=>{this.user.setProperties(t.accessToken)}})}}return t.\u0275fac=function(e){return new(e||t)(io(og),io(jm),io(dm),io(Lm))},t.\u0275cmp=pe({type:t,selectors:[["tw-root"]],hostVars:2,hostBindings:function(t,e){2&t&&Ho(e.style)},decls:2,vars:0,consts:[[3,"loginClick"]],template:function(t,e){1&t&&(uo(0,"tw-sidebar",0),wo("loginClick",(function(t){return e.loginClick(t)})),ho(),fo(1,"tw-workspace"))},directives:[wS,CS],styles:[""]}),t})();const AS=[{path:"",redirectTo:"forbidden",pathMatch:"full"},{path:"forbidden",component:Fm},{path:"**",component:Tm}];let FS=(()=>{class t{}return t.\u0275mod=ve({type:t,bootstrap:[ES]}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[{provide:ac,useFactory:Mm,deps:[Lm],multi:!0}],imports:[[vh,ed,xg.forRoot(AS),bm.forRoot(),Am,Vm,Gm,Wm,Pb,Ub,eS]]}),t})();(function(){if(er)throw new Error("Cannot enable prod mode after platform setup.");tr=!1})(),mh().bootstrapModule(FS).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);