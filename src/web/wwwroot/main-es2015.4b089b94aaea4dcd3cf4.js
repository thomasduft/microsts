(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},gfpf:function(t,e){var n={userAgent:!1},r={};if(void 0===s)var s={};s.lang={extend:function(t,e,r){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var s=function(){};if(s.prototype=e.prototype,t.prototype=new s,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),r){var i;for(i in r)t.prototype[i]=r[i];var l=function(){},a=["toString","valueOf"];try{/MSIE/.test(n.userAgent)&&(l=function(t,e){for(i=0;i<a.length;i+=1){var n=a[i],r=e[n];"function"==typeof r&&r!=Object.prototype[n]&&(t[n]=r)}})}catch(o){}l(t.prototype,r)}}};var i,o,l,a,u,c,h,d,p,f,g,m=m||(i=Math,l=(o={}).lib={},a=l.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=l.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,s=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<s;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else for(i=0;i<s;i+=4)e[r+i>>>2]=n[i>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=i.ceil(e/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(4294967296*i.random()|0);return new u.init(e,t)}}),c=o.enc={},h=c.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++){var i=e[s>>>2]>>>24-s%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new u.init(n,e/2)}},d=c.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++)r.push(String.fromCharCode(e[s>>>2]>>>24-s%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new u.init(n,e)}},p=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},f=l.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,n=e.words,r=e.sigBytes,s=this.blockSize,o=r/(4*s),l=(o=t?i.ceil(o):i.max((0|o)-this._minBufferSize,0))*s,a=i.min(4*l,r);if(l){for(var c=0;c<l;c+=s)this._doProcessBlock(n,c);var h=n.splice(0,l);e.sigBytes-=a}return new u.init(h,a)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),l.Hasher=f.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new g.HMAC.init(t,n).finalize(e)}}}),g=o.algo={},o);!function(t){var e,n=(e=m).lib,r=n.Base,s=n.WordArray;(e=e.x64={}).Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),e.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push(i.high),n.push(i.low)}return s.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,s=0;s<n;s++)e[s]=e[s].clone();return t}})}(),m.lib.Cipher||function(t){var e=(p=m).lib,n=e.Base,r=e.WordArray,s=e.BufferedBlockAlgorithm,i=p.enc.Base64,o=p.algo.EvpKDF,l=e.Cipher=s.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?f:d).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?f:d).decrypt(t,e,n,r)}}}});e.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var a=p.mode={},u=function(t,e,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var s=0;s<n;s++)t[e+s]^=r[s]},c=(e.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();c.Encryptor=c.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;u.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),c.Decryptor=c.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,s=t.slice(e,e+r);n.decryptBlock(t,e),u.call(this,t,e,r),this._prevBlock=s}}),a=a.CBC=c,c=(p.pad={}).Pkcs7={pad:function(t,e){for(var n,s=(n=(n=4*e)-t.sigBytes%n)<<24|n<<16|n<<8|n,i=[],o=0;o<n;o+=4)i.push(s);n=r.create(i,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=l.extend({cfg:l.cfg.extend({mode:a,padding:c}),reset:function(){l.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=e.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),d=(a=(p.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?r.create([1398893684,1701076831]).concat(t).concat(e):e).toString(i)},parse:function(t){var e=(t=i.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var n=r.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:n})}},e.SerializableCipher=n.extend({cfg:n.extend({format:a}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var s=t.createEncryptor(n,r);return e=s.finalize(e),h.create({ciphertext:e,key:n,iv:(s=s.cfg).iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),p=(p.kdf={}).OpenSSL={execute:function(t,e,n,s){return s||(s=r.random(8)),t=o.create({keySize:e+n}).compute(t,s),n=r.create(t.words.slice(e),4*n),t.sigBytes=4*e,h.create({key:t,iv:n,salt:s})}},f=e.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:p}),encrypt:function(t,e,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,(t=d.encrypt.call(this,t,e,n.key,r)).mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,d.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=m,e=t.lib.BlockCipher,n=t.algo,r=[],s=[],i=[],o=[],l=[],a=[],u=[],c=[],h=[],d=[],p=[],f=0;256>f;f++)p[f]=128>f?f<<1:f<<1^283;var g=0,v=0;for(f=0;256>f;f++){var y;r[g]=y=(y=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&y^99,s[y]=g;var w=p[g],b=p[w],S=p[b],_=257*p[y]^16843008*y;i[g]=_<<24|_>>>8,o[g]=_<<16|_>>>16,l[g]=_<<8|_>>>24,a[g]=_,u[y]=(_=16843009*S^65537*b^257*w^16843008*g)<<24|_>>>8,c[y]=_<<16|_>>>16,h[y]=_<<8|_>>>24,d[y]=_,g?(g=w^p[p[p[S^w]]],v^=p[p[v]]):g=v=1}var C=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=e.extend({_doReset:function(){for(var t=(n=this._key).words,e=n.sigBytes/4,n=4*((this._nRounds=e+6)+1),s=this._keySchedule=[],i=0;i<n;i++)if(i<e)s[i]=t[i];else{var o=s[i-1];i%e?6<e&&4==i%e&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=C[i/e|0]<<24),s[i]=s[i-e]^o}for(t=this._invKeySchedule=[],e=0;e<n;e++)i=n-e,o=e%4?s[i]:s[i-4],t[e]=4>e||4>=i?o:u[r[o>>>24]]^c[r[o>>>16&255]]^h[r[o>>>8&255]]^d[r[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,i,o,l,a,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,c,h,d,s),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,s,i,o,l){for(var a=this._nRounds,u=t[e]^n[0],c=t[e+1]^n[1],h=t[e+2]^n[2],d=t[e+3]^n[3],p=4,f=1;f<a;f++){var g=r[u>>>24]^s[c>>>16&255]^i[h>>>8&255]^o[255&d]^n[p++],m=r[c>>>24]^s[h>>>16&255]^i[d>>>8&255]^o[255&u]^n[p++],v=r[h>>>24]^s[d>>>16&255]^i[u>>>8&255]^o[255&c]^n[p++];d=r[d>>>24]^s[u>>>16&255]^i[c>>>8&255]^o[255&h]^n[p++],u=g,c=m,h=v}g=(l[u>>>24]<<24|l[c>>>16&255]<<16|l[h>>>8&255]<<8|l[255&d])^n[p++],m=(l[c>>>24]<<24|l[h>>>16&255]<<16|l[d>>>8&255]<<8|l[255&u])^n[p++],v=(l[h>>>24]<<24|l[d>>>16&255]<<16|l[u>>>8&255]<<8|l[255&c])^n[p++],d=(l[d>>>24]<<24|l[u>>>16&255]<<16|l[c>>>8&255]<<8|l[255&h])^n[p++],t[e]=g,t[e+1]=m,t[e+2]=v,t[e+3]=d},keySize:8}),t.AES=e._createHelper(n)}(),function(){function t(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function e(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var n,r=m,s=(n=r.lib).WordArray,i=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=i.DES=(n=n.BlockCipher).extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;56>n;n++){var r=o[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(t=this._subKeys=[],r=0;16>r;r++){var s=t[r]=[],i=a[r];for(n=0;24>n;n++)s[n/6|0]|=e[(l[n]-1+i)%28]<<31-n%6,s[4+(n/6|0)]|=e[28+(l[n+24]-1+i)%28]<<31-n%6;for(s[0]=s[0]<<1|s[0]>>>31,n=1;7>n;n++)s[n]>>>=4*(n-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(e=this._invSubKeys=[],n=0;16>n;n++)e[n]=t[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(n,r,s){this._lBlock=n[r],this._rBlock=n[r+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var i=0;16>i;i++){for(var o=s[i],l=this._lBlock,a=this._rBlock,h=0,d=0;8>d;d++)h|=u[d][((a^o[d])&c[d])>>>0];this._lBlock=a,this._rBlock=l^h}s=this._lBlock,this._lBlock=this._rBlock,this._rBlock=s,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=n._createHelper(h),i=i.TripleDES=n.extend({_doReset:function(){var t=this._key.words;this._des1=h.createEncryptor(s.create(t.slice(0,2))),this._des2=h.createEncryptor(s.create(t.slice(2,4))),this._des3=h.createEncryptor(s.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=n._createHelper(i)}(),function(){var t=m.lib.WordArray;m.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var s=0;s<n;s+=3)for(var i=(e[s>>>2]>>>24-s%4*8&255)<<16|(e[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|e[s+2>>>2]>>>24-(s+2)%4*8&255,o=0;4>o&&s+.75*o<n;o++)t.push(r.charAt(i>>>6*(3-o)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(e){var n=e.length,r=this._map;(s=r.charAt(64))&&-1!=(s=e.indexOf(s))&&(n=s);for(var s=[],i=0,o=0;o<n;o++)if(o%4){var l=r.indexOf(e.charAt(o-1))<<o%4*2,a=r.indexOf(e.charAt(o))>>>6-o%4*2;s[i>>>2]|=(l|a)<<24-i%4*8,i++}return t.create(s,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,r,s,i,o){return((t=t+(e&n|~e&r)+s+o)<<i|t>>>32-i)+e}function n(t,e,n,r,s,i,o){return((t=t+(e&r|n&~r)+s+o)<<i|t>>>32-i)+e}function r(t,e,n,r,s,i,o){return((t=t+(e^n^r)+s+o)<<i|t>>>32-i)+e}function s(t,e,n,r,s,i,o){return((t=t+(n^(e|~r))+s+o)<<i|t>>>32-i)+e}for(var i=m,o=(a=i.lib).WordArray,l=a.Hasher,a=i.algo,u=[],c=0;64>c;c++)u[c]=4294967296*t.abs(t.sin(c+1))|0;a=a.MD5=l.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,i){for(var o=0;16>o;o++)t[l=i+o]=16711935&((a=t[l])<<8|a>>>24)|4278255360&(a<<24|a>>>8);var l,a=t[i+1],c=t[i+2],h=t[i+3],d=t[i+4],p=t[i+5],f=t[i+6],g=t[i+7],m=t[i+8],v=t[i+9],y=t[i+10],w=t[i+11],b=t[i+12],S=t[i+13],_=t[i+14],C=t[i+15],x=e(x=(o=this._hash.words)[0],F=o[1],A=o[2],E=o[3],l=t[i+0],7,u[0]),E=e(E,x,F,A,a,12,u[1]),A=e(A,E,x,F,c,17,u[2]),F=e(F,A,E,x,h,22,u[3]);x=e(x,F,A,E,d,7,u[4]),E=e(E,x,F,A,p,12,u[5]),A=e(A,E,x,F,f,17,u[6]),F=e(F,A,E,x,g,22,u[7]),x=e(x,F,A,E,m,7,u[8]),E=e(E,x,F,A,v,12,u[9]),A=e(A,E,x,F,y,17,u[10]),F=e(F,A,E,x,w,22,u[11]),x=e(x,F,A,E,b,7,u[12]),E=e(E,x,F,A,S,12,u[13]),A=e(A,E,x,F,_,17,u[14]),x=n(x,F=e(F,A,E,x,C,22,u[15]),A,E,a,5,u[16]),E=n(E,x,F,A,f,9,u[17]),A=n(A,E,x,F,w,14,u[18]),F=n(F,A,E,x,l,20,u[19]),x=n(x,F,A,E,p,5,u[20]),E=n(E,x,F,A,y,9,u[21]),A=n(A,E,x,F,C,14,u[22]),F=n(F,A,E,x,d,20,u[23]),x=n(x,F,A,E,v,5,u[24]),E=n(E,x,F,A,_,9,u[25]),A=n(A,E,x,F,h,14,u[26]),F=n(F,A,E,x,m,20,u[27]),x=n(x,F,A,E,S,5,u[28]),E=n(E,x,F,A,c,9,u[29]),A=n(A,E,x,F,g,14,u[30]),x=r(x,F=n(F,A,E,x,b,20,u[31]),A,E,p,4,u[32]),E=r(E,x,F,A,m,11,u[33]),A=r(A,E,x,F,w,16,u[34]),F=r(F,A,E,x,_,23,u[35]),x=r(x,F,A,E,a,4,u[36]),E=r(E,x,F,A,d,11,u[37]),A=r(A,E,x,F,g,16,u[38]),F=r(F,A,E,x,y,23,u[39]),x=r(x,F,A,E,S,4,u[40]),E=r(E,x,F,A,l,11,u[41]),A=r(A,E,x,F,h,16,u[42]),F=r(F,A,E,x,f,23,u[43]),x=r(x,F,A,E,v,4,u[44]),E=r(E,x,F,A,b,11,u[45]),A=r(A,E,x,F,C,16,u[46]),x=s(x,F=r(F,A,E,x,c,23,u[47]),A,E,l,6,u[48]),E=s(E,x,F,A,g,10,u[49]),A=s(A,E,x,F,_,15,u[50]),F=s(F,A,E,x,p,21,u[51]),x=s(x,F,A,E,b,6,u[52]),E=s(E,x,F,A,h,10,u[53]),A=s(A,E,x,F,y,15,u[54]),F=s(F,A,E,x,a,21,u[55]),x=s(x,F,A,E,m,6,u[56]),E=s(E,x,F,A,C,10,u[57]),A=s(A,E,x,F,f,15,u[58]),F=s(F,A,E,x,S,21,u[59]),x=s(x,F,A,E,d,6,u[60]),E=s(E,x,F,A,w,10,u[61]),A=s(A,E,x,F,c,15,u[62]),F=s(F,A,E,x,v,21,u[63]),o[0]=o[0]+x|0,o[1]=o[1]+F|0,o[2]=o[2]+A|0,o[3]=o[3]+E|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;n[s>>>5]|=128<<24-s%32;var i=t.floor(r/4294967296);for(n[15+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(s+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),n=(e=this._hash).words,r=0;4>r;r++)n[r]=16711935&((s=n[r])<<8|s>>>24)|4278255360&(s<<24|s>>>8);return e},clone:function(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}}),i.MD5=l._createHelper(a),i.HmacMD5=l._createHmacHelper(a)}(Math),function(){var t=m,e=(s=t.lib).WordArray,n=s.Hasher,r=[],s=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,s=n[0],i=n[1],o=n[2],l=n[3],a=n[4],u=0;80>u;u++){if(16>u)r[u]=0|t[e+u];else{var c=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=c<<1|c>>>31}c=(s<<5|s>>>27)+a+r[u],c=20>u?c+(1518500249+(i&o|~i&l)):40>u?c+(1859775393+(i^o^l)):60>u?c+((i&o|i&l|o&l)-1894007588):c+((i^o^l)-899497514),a=l,l=o,o=i<<30|i>>>2,i=s,s=c}n[0]=n[0]+s|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+l|0,n[4]=n[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(s),t.HmacSHA1=n._createHmacHelper(s)}(),function(t){for(var e=m,n=(s=e.lib).WordArray,r=s.Hasher,s=e.algo,i=[],o=[],l=function(t){return 4294967296*(t-(0|t))|0},a=2,u=0;64>u;){var c;t:{for(var h=t.sqrt(c=a),d=2;d<=h;d++)if(!(c%d)){c=!1;break t}c=!0}c&&(8>u&&(i[u]=l(t.pow(a,.5))),o[u]=l(t.pow(a,1/3)),u++),a++}var p=[];s=s.SHA256=r.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],s=n[1],i=n[2],l=n[3],a=n[4],u=n[5],c=n[6],h=n[7],d=0;64>d;d++){if(16>d)p[d]=0|t[e+d];else{var f=p[d-15],g=p[d-2];p[d]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+p[d-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[d-16]}f=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&c)+o[d]+p[d],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&s^r&i^s&i),h=c,c=u,u=a,a=l+f|0,l=i,i=s,s=r,r=f+g|0}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+i|0,n[3]=n[3]+l|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+c|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=t.floor(r/4294967296),n[15+(s+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA256=r._createHelper(s),e.HmacSHA256=r._createHmacHelper(s)}(Math),function(){var t=m,e=t.lib.WordArray,n=(r=t.algo).SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=n._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=n._createHelper(r),t.HmacSHA224=n._createHmacHelper(r)}(),function(){function t(){return r.create.apply(r,arguments)}for(var e=m,n=e.lib.Hasher,r=(i=e.x64).Word,s=i.WordArray,i=e.algo,o=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],l=[],a=0;80>a;a++)l[a]=t();i=i.SHA512=n.extend({_doReset:function(){this._hash=new s.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n,r=(n=this._hash.words)[0],s=n[1],i=n[2],a=n[3],u=n[4],c=n[5],h=n[6],d=r.high,p=r.low,f=s.high,g=s.low,m=i.high,v=i.low,y=a.high,w=a.low,b=u.high,S=u.low,_=c.high,C=c.low,x=h.high,E=h.low,A=(n=n[7]).high,F=n.low,T=d,I=p,k=f,D=g,P=m,R=v,N=y,O=w,H=b,V=S,j=_,B=C,L=x,M=E,U=A,K=F,q=0;80>q;q++){var $=l[q];if(16>q)var z=$.high=0|t[e+2*q],G=$.low=0|t[e+2*q+1];else{z=((G=(z=l[q-15]).high)>>>1|(W=z.low)<<31)^(G>>>8|W<<24)^G>>>7;var W=(W>>>1|G<<31)^(W>>>8|G<<24)^(W>>>7|G<<25),Z=((G=(Z=l[q-2]).high)>>>19|(J=Z.low)<<13)^(G<<3|J>>>29)^G>>>6,J=(J>>>19|G<<13)^(J<<3|G>>>29)^(J>>>6|G<<26);$.high=z=(z=(z=z+(Y=(G=l[q-7]).high)+((G=W+G.low)>>>0<W>>>0?1:0))+Z+((G+=J)>>>0<J>>>0?1:0))+(nt=(Q=l[q-16]).high)+((G+=Q=Q.low)>>>0<Q>>>0?1:0),$.low=G}var Y=H&j^~H&L,Q=V&B^~V&M,X=($=T&k^T&P^k&P,I&D^I&R^D&R),tt=(J=o[q]).high,et=J.low,nt=U+((H>>>14|V<<18)^(H>>>18|V<<14)^(H<<23|V>>>9))+((J=K+((V>>>14|H<<18)^(V>>>18|H<<14)^(V<<23|H>>>9)))>>>0<K>>>0?1:0);U=L,K=M,L=j,M=B,j=H,B=V,H=N+(nt=(nt=(nt=nt+Y+((J+=Q)>>>0<Q>>>0?1:0))+tt+((J+=et)>>>0<et>>>0?1:0))+z+((J+=G)>>>0<G>>>0?1:0))+((V=O+J|0)>>>0<O>>>0?1:0)|0,N=P,O=R,P=k,R=D,k=T,D=I,T=nt+($=(W=(T>>>28|I<<4)^(T<<30|I>>>2)^(T<<25|I>>>7))+$+((G=(Z=(I>>>28|T<<4)^(I<<30|T>>>2)^(I<<25|T>>>7))+X)>>>0<Z>>>0?1:0))+((I=J+G|0)>>>0<J>>>0?1:0)|0}p=r.low=p+I,r.high=d+T+(p>>>0<I>>>0?1:0),g=s.low=g+D,s.high=f+k+(g>>>0<D>>>0?1:0),v=i.low=v+R,i.high=m+P+(v>>>0<R>>>0?1:0),w=a.low=w+O,a.high=y+N+(w>>>0<O>>>0?1:0),S=u.low=S+V,u.high=b+H+(S>>>0<V>>>0?1:0),C=c.low=C+B,c.high=_+j+(C>>>0<B>>>0?1:0),E=h.low=E+M,h.high=x+L+(E>>>0<M>>>0?1:0),F=n.low=F+K,n.high=A+U+(F>>>0<K>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),e.SHA512=n._createHelper(i),e.HmacSHA512=n._createHmacHelper(i)}(),function(){var t=m,e=(s=t.x64).Word,n=s.WordArray,r=(s=t.algo).SHA512,s=s.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=r._createHelper(s),t.HmacSHA384=r._createHmacHelper(s)}(),function(){var t=m,e=(r=t.lib).WordArray,n=r.Hasher,r=t.algo,s=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),i=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),a=e.create([0,1518500249,1859775393,2400959708,2840853838]),u=e.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=n.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;16>n;n++)t[r=e+n]=16711935&((S=t[r])<<8|S>>>24)|4278255360&(S<<24|S>>>8);var r,c,h,d,p,f,g,m,v,y,w,b,S=a.words,_=u.words,C=s.words,x=i.words,E=o.words,A=l.words;for(g=c=(r=this._hash.words)[0],m=h=r[1],v=d=r[2],y=p=r[3],w=f=r[4],n=0;80>n;n+=1)b=c+t[e+C[n]]|0,b=16>n?b+((h^d^p)+S[0]):32>n?b+((h&d|~h&p)+S[1]):48>n?b+(((h|~d)^p)+S[2]):64>n?b+((h&p|d&~p)+S[3]):b+((h^(d|~p))+S[4]),b=(b=(b|=0)<<E[n]|b>>>32-E[n])+f|0,c=f,f=p,p=d<<10|d>>>22,d=h,h=b,b=g+t[e+x[n]]|0,b=16>n?b+((m^(v|~y))+_[0]):32>n?b+((m&y|v&~y)+_[1]):48>n?b+(((m|~v)^y)+_[2]):64>n?b+((m&v|~m&y)+_[3]):b+((m^v^y)+_[4]),b=(b=(b|=0)<<A[n]|b>>>32-A[n])+w|0,g=w,w=y,y=v<<10|v>>>22,v=m,m=b;b=r[1]+d+y|0,r[1]=r[2]+p+w|0,r[2]=r[3]+f+g|0,r[3]=r[4]+c+m|0,r[4]=r[0]+h+v|0,r[0]=b},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;for(e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,n=0;5>n;n++)e[n]=16711935&((r=e[n])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}}),t.RIPEMD160=n._createHelper(r),t.HmacRIPEMD160=n._createHmacHelper(r)}(Math),function(){var t=m.enc.Utf8;m.algo.HMAC=m.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,s=4*r;n.sigBytes>s&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),o=this._iKey=n.clone(),l=i.words,a=o.words,u=0;u<r;u++)l[u]^=1549556828,a[u]^=909522486;i.sigBytes=o.sigBytes=s,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t,e=m,n=(t=e.lib).Base,r=t.WordArray,s=(t=e.algo).HMAC,i=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=s.create((c=this.cfg).hasher,t),i=r.create(),o=r.create([1]),l=i.words,a=o.words,u=c.keySize,c=c.iterations;l.length<u;){var h=n.update(e).finalize(o);n.reset();for(var d=h.words,p=d.length,f=h,g=1;g<c;g++){f=n.finalize(f),n.reset();for(var m=f.words,v=0;v<p;v++)d[v]^=m[v]}i.concat(h),a[0]++}return i.sigBytes=4*u,i}});e.PBKDF2=function(t,e,n){return i.create(n).compute(t,e)}}();var v,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w="=";function b(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=y.charAt(n>>6)+y.charAt(63&n);if(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=y.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=y.charAt(n>>2)+y.charAt((3&n)<<4)),w)for(;(3&r.length)>0;)r+=w;return r}function S(t){var e,n,r,s="",i=0;for(e=0;e<t.length&&t.charAt(e)!=w;++e)(r=y.indexOf(t.charAt(e)))<0||(0==i?(s+=I(r>>2),n=3&r,i=1):1==i?(s+=I(n<<2|r>>4),n=15&r,i=2):2==i?(s+=I(n),s+=I(r>>2),n=3&r,i=3):(s+=I(n<<2|r>>4),s+=I(15&r),i=0));return 1==i&&(s+=I(n<<2)),s}function _(t){var e,n=S(t),r=new Array;for(e=0;2*e<n.length;++e)r[e]=parseInt(n.substring(2*e,2*e+2),16);return r}function C(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):this.fromString(t,null==e&&"string"!=typeof t?256:e))}function x(){return new C(null)}"Microsoft Internet Explorer"==n.appName?(C.prototype.am=function(t,e,n,r,s,i){for(var o=32767&e,l=e>>15;--i>=0;){var a=32767&this[t],u=this[t++]>>15,c=l*a+u*o;s=((a=o*a+((32767&c)<<15)+n[r]+(1073741823&s))>>>30)+(c>>>15)+l*u+(s>>>30),n[r++]=1073741823&a}return s},v=30):"Netscape"!=n.appName?(C.prototype.am=function(t,e,n,r,s,i){for(;--i>=0;){var o=e*this[t++]+n[r]+s;s=Math.floor(o/67108864),n[r++]=67108863&o}return s},v=26):(C.prototype.am=function(t,e,n,r,s,i){for(var o=16383&e,l=e>>14;--i>=0;){var a=16383&this[t],u=this[t++]>>14,c=l*a+u*o;s=((a=o*a+((16383&c)<<14)+n[r]+s)>>28)+(c>>14)+l*u,n[r++]=268435455&a}return s},v=28),C.prototype.DB=v,C.prototype.DM=(1<<v)-1,C.prototype.DV=1<<v,C.prototype.FV=Math.pow(2,52),C.prototype.F1=52-v,C.prototype.F2=2*v-52;var E,A,F="0123456789abcdefghijklmnopqrstuvwxyz",T=new Array;for(E="0".charCodeAt(0),A=0;A<=9;++A)T[E++]=A;for(E="a".charCodeAt(0),A=10;A<36;++A)T[E++]=A;for(E="A".charCodeAt(0),A=10;A<36;++A)T[E++]=A;function I(t){return F.charAt(t)}function k(t,e){var n=T[t.charCodeAt(e)];return null==n?-1:n}function D(t){var e=x();return e.fromInt(t),e}function P(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function R(t){this.m=t}function N(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function O(t,e){return t&e}function H(t,e){return t|e}function V(t,e){return t^e}function j(t,e){return t&~e}function B(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function L(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function M(){}function U(t){return t}function K(t){this.r2=x(),this.q3=x(),C.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}R.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},R.prototype.revert=function(t){return t},R.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},R.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},R.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},N.prototype.convert=function(t){var e=x();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(C.ZERO)>0&&this.m.subTo(e,e),e},N.prototype.revert=function(t){var e=x();return t.copyTo(e),this.reduce(e),e},N.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},N.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},N.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},C.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},C.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},C.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,s=!1,i=0;--r>=0;){var o=8==n?255&t[r]:k(t,r);o<0?"-"==t.charAt(r)&&(s=!0):(s=!1,0==i?this[this.t++]=o:i+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-i)-1)<<i,this[this.t++]=o>>this.DB-i):this[this.t-1]|=o<<i,(i+=n)>=this.DB&&(i-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),s&&C.ZERO.subTo(this,this)},C.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},C.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},C.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},C.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,s=this.DB-r,i=(1<<s)-1,o=Math.floor(t/this.DB),l=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+o+1]=this[n]>>s|l,l=(this[n]&i)<<r;for(n=o-1;n>=0;--n)e[n]=0;e[o]=l,e.t=this.t+o+1,e.s=this.s,e.clamp()},C.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,s=this.DB-r,i=(1<<r)-1;e[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)e[o-n-1]|=(this[o]&i)<<s,e[o-n]=this[o]>>r;r>0&&(e[this.t-n-1]|=(this.s&i)<<s),e.t=this.t-n,e.clamp()}},C.prototype.subTo=function(t,e){for(var n=0,r=0,s=Math.min(t.t,this.t);n<s;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},C.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),s=n.t;for(e.t=s+r.t;--s>=0;)e[s]=0;for(s=0;s<r.t;++s)e[s+n.t]=n.am(0,r[s],e,s,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&C.ZERO.subTo(e,e)},C.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},C.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var s=this.abs();if(s.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=x());var i=x(),o=this.s,l=t.s,a=this.DB-P(r[r.t-1]);a>0?(r.lShiftTo(a,i),s.lShiftTo(a,n)):(r.copyTo(i),s.copyTo(n));var u=i.t,c=i[u-1];if(0!=c){var h=c*(1<<this.F1)+(u>1?i[u-2]>>this.F2:0),d=this.FV/h,p=(1<<this.F1)/h,f=1<<this.F2,g=n.t,m=g-u,v=null==e?x():e;for(i.dlShiftTo(m,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),C.ONE.dlShiftTo(u,v),v.subTo(i,i);i.t<u;)i[i.t++]=0;for(;--m>=0;){var y=n[--g]==c?this.DM:Math.floor(n[g]*d+(n[g-1]+f)*p);if((n[g]+=i.am(0,y,n,m,0,u))<y)for(i.dlShiftTo(m,v),n.subTo(v,n);n[g]<--y;)n.subTo(v,n)}null!=e&&(n.drShiftTo(u,e),o!=l&&C.ZERO.subTo(e,e)),n.t=u,n.clamp(),a>0&&n.rShiftTo(a,n),o<0&&C.ZERO.subTo(n,n)}}},C.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},C.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},C.prototype.exp=function(t,e){if(t>4294967295||t<1)return C.ONE;var n=x(),r=x(),s=e.convert(this),i=P(t)-1;for(s.copyTo(n);--i>=0;)if(e.sqrTo(n,r),(t&1<<i)>0)e.mulTo(r,s,n);else{var o=n;n=r,r=o}return e.revert(n)},C.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,s=!1,i="",o=this.t,l=this.DB-o*this.DB%e;if(o-- >0)for(l<this.DB&&(n=this[o]>>l)>0&&(s=!0,i=I(n));o>=0;)l<e?(n=(this[o]&(1<<l)-1)<<e-l,n|=this[--o]>>(l+=this.DB-e)):(n=this[o]>>(l-=e)&r,l<=0&&(l+=this.DB,--o)),n>0&&(s=!0),s&&(i+=I(n));return s?i:"0"},C.prototype.negate=function(){var t=x();return C.ZERO.subTo(this,t),t},C.prototype.abs=function(){return this.s<0?this.negate():this},C.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},C.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+P(this[this.t-1]^this.s&this.DM)},C.prototype.mod=function(t){var e=x();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(C.ZERO)>0&&t.subTo(e,e),e},C.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new R(e):new N(e),this.exp(t,n)},C.ZERO=D(0),C.ONE=D(1),M.prototype.convert=U,M.prototype.revert=U,M.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},M.prototype.sqrTo=function(t,e){t.squareTo(e)},K.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=x();return t.copyTo(e),this.reduce(e),e},K.prototype.revert=function(t){return t},K.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},K.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},K.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var q=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],$=(1<<26)/q[q.length-1];function z(){this.i=0,this.j=0,this.S=new Array}C.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},C.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=D(n),s=x(),i=x(),o="";for(this.divRemTo(r,s,i);s.signum()>0;)o=(n+i.intValue()).toString(t).substr(1)+o,s.divRemTo(r,s,i);return i.intValue().toString(t)+o},C.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),s=!1,i=0,o=0,l=0;l<t.length;++l){var a=k(t,l);a<0?"-"==t.charAt(l)&&0==this.signum()&&(s=!0):(o=e*o+a,++i>=n&&(this.dMultiply(r),this.dAddOffset(o,0),i=0,o=0))}i>0&&(this.dMultiply(Math.pow(e,i)),this.dAddOffset(o,0)),s&&C.ZERO.subTo(this,this)},C.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(C.ONE.shiftLeft(t-1),H,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(C.ONE.shiftLeft(t-1),this);else{var r=new Array,s=7&t;r.length=1+(t>>3),e.nextBytes(r),s>0?r[0]&=(1<<s)-1:r[0]=0,this.fromString(r,256)}},C.prototype.bitwiseTo=function(t,e,n){var r,s,i=Math.min(t.t,this.t);for(r=0;r<i;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(s=t.s&this.DM,r=i;r<this.t;++r)n[r]=e(this[r],s);n.t=this.t}else{for(s=this.s&this.DM,r=i;r<t.t;++r)n[r]=e(s,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},C.prototype.changeBit=function(t,e){var n=C.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},C.prototype.addTo=function(t,e){for(var n=0,r=0,s=Math.min(t.t,this.t);n<s;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},C.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},C.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},C.prototype.multiplyLowerTo=function(t,e,n){var r,s=Math.min(this.t+t.t,e);for(n.s=0,n.t=s;s>0;)n[--s]=0;for(r=n.t-this.t;s<r;++s)n[s+this.t]=this.am(0,t[s],n,s,0,this.t);for(r=Math.min(t.t,e);s<r;++s)this.am(0,t[s],n,s,0,e-s);n.clamp()},C.prototype.multiplyUpperTo=function(t,e,n){var r=n.t=this.t+t.t- --e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},C.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},C.prototype.millerRabin=function(t){var e=this.subtract(C.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>q.length&&(t=q.length);for(var s=x(),i=0;i<t;++i){s.fromInt(q[Math.floor(Math.random()*q.length)]);var o=s.modPow(r,this);if(0!=o.compareTo(C.ONE)&&0!=o.compareTo(e)){for(var l=1;l++<n&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo(C.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},C.prototype.clone=function(){var t=x();return this.copyTo(t),t},C.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},C.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},C.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},C.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},C.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,s=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[s++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==s&&(128&this.s)!=(128&n)&&++s,(s>0||n!=this.s)&&(e[s++]=n);return e},C.prototype.equals=function(t){return 0==this.compareTo(t)},C.prototype.min=function(t){return this.compareTo(t)<0?this:t},C.prototype.max=function(t){return this.compareTo(t)>0?this:t},C.prototype.and=function(t){var e=x();return this.bitwiseTo(t,O,e),e},C.prototype.or=function(t){var e=x();return this.bitwiseTo(t,H,e),e},C.prototype.xor=function(t){var e=x();return this.bitwiseTo(t,V,e),e},C.prototype.andNot=function(t){var e=x();return this.bitwiseTo(t,j,e),e},C.prototype.not=function(){for(var t=x(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},C.prototype.shiftLeft=function(t){var e=x();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},C.prototype.shiftRight=function(t){var e=x();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},C.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+B(this[t]);return this.s<0?this.t*this.DB:-1},C.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=L(this[n]^e);return t},C.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},C.prototype.setBit=function(t){return this.changeBit(t,H)},C.prototype.clearBit=function(t){return this.changeBit(t,j)},C.prototype.flipBit=function(t){return this.changeBit(t,V)},C.prototype.add=function(t){var e=x();return this.addTo(t,e),e},C.prototype.subtract=function(t){var e=x();return this.subTo(t,e),e},C.prototype.multiply=function(t){var e=x();return this.multiplyTo(t,e),e},C.prototype.divide=function(t){var e=x();return this.divRemTo(t,e,null),e},C.prototype.remainder=function(t){var e=x();return this.divRemTo(t,null,e),e},C.prototype.divideAndRemainder=function(t){var e=x(),n=x();return this.divRemTo(t,e,n),new Array(e,n)},C.prototype.modPow=function(t,e){var n,r,s=t.bitLength(),i=D(1);if(s<=0)return i;n=s<18?1:s<48?3:s<144?4:s<768?5:6,r=s<8?new R(e):e.isEven()?new K(e):new N(e);var o=new Array,l=3,a=n-1,u=(1<<n)-1;if(o[1]=r.convert(this),n>1){var c=x();for(r.sqrTo(o[1],c);l<=u;)o[l]=x(),r.mulTo(c,o[l-2],o[l]),l+=2}var h,d,p=t.t-1,f=!0,g=x();for(s=P(t[p])-1;p>=0;){for(s>=a?h=t[p]>>s-a&u:(h=(t[p]&(1<<s+1)-1)<<a-s,p>0&&(h|=t[p-1]>>this.DB+s-a)),l=n;0==(1&h);)h>>=1,--l;if((s-=l)<0&&(s+=this.DB,--p),f)o[h].copyTo(i),f=!1;else{for(;l>1;)r.sqrTo(i,g),r.sqrTo(g,i),l-=2;l>0?r.sqrTo(i,g):(d=i,i=g,g=d),r.mulTo(g,o[h],i)}for(;p>=0&&0==(t[p]&1<<s);)r.sqrTo(i,g),d=i,i=g,g=d,--s<0&&(s=this.DB-1,--p)}return r.revert(i)},C.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return C.ZERO;for(var n=t.clone(),r=this.clone(),s=D(1),i=D(0),o=D(0),l=D(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(s.isEven()&&i.isEven()||(s.addTo(this,s),i.subTo(t,i)),s.rShiftTo(1,s)):i.isEven()||i.subTo(t,i),i.rShiftTo(1,i);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&l.isEven()||(o.addTo(this,o),l.subTo(t,l)),o.rShiftTo(1,o)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);n.compareTo(r)>=0?(n.subTo(r,n),e&&s.subTo(o,s),i.subTo(l,i)):(r.subTo(n,r),e&&o.subTo(s,o),l.subTo(i,l))}return 0!=r.compareTo(C.ONE)?C.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l},C.prototype.pow=function(t){return this.exp(t,new M)},C.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var s=e.getLowestSetBit(),i=n.getLowestSetBit();if(i<0)return e;for(s<i&&(i=s),i>0&&(e.rShiftTo(i,e),n.rShiftTo(i,n));e.signum()>0;)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=n.getLowestSetBit())>0&&n.rShiftTo(s,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return i>0&&n.lShiftTo(i,n),n},C.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=q[q.length-1]){for(e=0;e<q.length;++e)if(n[0]==q[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<q.length;){for(var r=q[e],s=e+1;s<q.length&&r<$;)r*=q[s++];for(r=n.modInt(r);e<s;)if(r%q[e++]==0)return!1}return n.millerRabin(t)},C.prototype.square=function(){var t=x();return this.squareTo(t),t},z.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)r=this.S[e],this.S[e]=this.S[n=n+this.S[e]+t[e%t.length]&255],this.S[n]=r;this.i=0,this.j=0},z.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var G,W,Z,J=256;function Y(){!function(t){W[Z++]^=255&t,W[Z++]^=t>>8&255,W[Z++]^=t>>16&255,W[Z++]^=t>>24&255,Z>=J&&(Z-=J)}((new Date).getTime())}if(null==W){var Q;if(W=new Array,Z=0,void 0!==r&&(void 0!==r.crypto||void 0!==r.msCrypto)){var X=r.crypto||r.msCrypto;if(X.getRandomValues){var tt=new Uint8Array(32);for(X.getRandomValues(tt),Q=0;Q<32;++Q)W[Z++]=tt[Q]}else if("Netscape"==n.appName&&n.appVersion<"5"){var et=r.crypto.random(32);for(Q=0;Q<et.length;++Q)W[Z++]=255&et.charCodeAt(Q)}}for(;Z<J;)Q=Math.floor(65536*Math.random()),W[Z++]=Q>>>8,W[Z++]=255&Q;Z=0,Y()}function nt(){if(null==G){for(Y(),(G=new z).init(W),Z=0;Z<W.length;++Z)W[Z]=0;Z=0}return G.next()}function rt(){}function st(t,e){return new C(t,e)}function it(t,e,n){for(var r="",s=0;r.length<e;)r+=n(String.fromCharCode.apply(String,t.concat([(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s]))),s+=1;return r}function ot(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function lt(t,e,n){for(var r="",s=0;r.length<e;)r+=n(t+String.fromCharCode.apply(String,[(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s])),s+=1;return r}function at(t,e){this.x=e,this.q=t}function ut(t,e,n,r){this.curve=t,this.x=e,this.y=n,this.z=null==r?C.ONE:r,this.zinv=null}function ct(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new ut(this,null,null)}rt.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=nt()},ot.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},ot.prototype.setPublic=function(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=st(t,16),this.e=parseInt(e,16)}},ot.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var n=new Array,r=t.length-1;r>=0&&e>0;){var s=t.charCodeAt(r--);s<128?n[--e]=s:s>127&&s<2048?(n[--e]=63&s|128,n[--e]=s>>6|192):(n[--e]=63&s|128,n[--e]=s>>6&63|128,n[--e]=s>>12|224)}n[--e]=0;for(var i=new rt,o=new Array;e>2;){for(o[0]=0;0==o[0];)i.nextBytes(o);n[--e]=o[0]}return n[--e]=2,n[--e]=0,new C(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},ot.prototype.encryptOAEP=function(t,e,n){var r=function(t,e,n,r){var s=dt.crypto.MessageDigest,i=dt.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=s.getCanonicalAlgName(n),r=s.getHashLength(o),n=function(t){return At(i.hashHex(Ft(t),o))}),t.length+2*r+2>e)throw"Message too long for RSA";var l,a="";for(l=0;l<e-t.length-2*r-2;l+=1)a+="\0";var u=n("")+a+"\x01"+t,c=new Array(r);(new rt).nextBytes(c);var h=it(c,u.length,n),d=[];for(l=0;l<u.length;l+=1)d[l]=u.charCodeAt(l)^h.charCodeAt(l);var p=it(d,c.length,n),f=[0];for(l=0;l<c.length;l+=1)f[l+1]=c[l]^p.charCodeAt(l);return new C(f.concat(d))}(t,this.n.bitLength()+7>>3,e,n);if(null==r)return null;var s=this.doPublic(r);if(null==s)return null;var i=s.toString(16);return 0==(1&i.length)?i:"0"+i},ot.prototype.type="RSA",ot.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},ot.prototype.setPrivate=function(t,e,n){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=e,this.d=n;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key";this.n=st(t,16),this.e=parseInt(e,16),this.d=st(n,16)}},ot.prototype.setPrivateEx=function(t,e,n,r,s,i,o,l){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=st(t,16),this.e=parseInt(e,16),this.d=st(n,16),this.p=st(r,16),this.q=st(s,16),this.dmp1=st(i,16),this.dmq1=st(o,16),this.coeff=st(l,16)},ot.prototype.generate=function(t,e){var n=new rt,r=t>>1;this.e=parseInt(e,16);for(var s=new C(e,16);;){for(;this.p=new C(t-r,1,n),0!=this.p.subtract(C.ONE).gcd(s).compareTo(C.ONE)||!this.p.isProbablePrime(10););for(;this.q=new C(r,1,n),0!=this.q.subtract(C.ONE).gcd(s).compareTo(C.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var i=this.p;this.p=this.q,this.q=i}var o=this.p.subtract(C.ONE),l=this.q.subtract(C.ONE),a=o.multiply(l);if(0==a.gcd(s).compareTo(C.ONE)){this.n=this.p.multiply(this.q),this.d=s.modInverse(a),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(l),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},ot.prototype.decrypt=function(t){var e=st(t,16),n=this.doPrivate(e);return null==n?null:function(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=e-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var s="";++r<n.length;){var i=255&n[r];i<128?s+=String.fromCharCode(i):i>191&&i<224?(s+=String.fromCharCode((31&i)<<6|63&n[r+1]),++r):(s+=String.fromCharCode((15&i)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return s}(n,this.n.bitLength()+7>>3)},ot.prototype.decryptOAEP=function(t,e,n){var r=st(t,16),s=this.doPrivate(r);return null==s?null:function(t,e,n,r){var s=dt.crypto.MessageDigest,i=dt.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=s.getCanonicalAlgName(n),r=s.getHashLength(o),n=function(t){return At(i.hashHex(Ft(t),o))}),t=t.toByteArray(),l=0;l<t.length;l+=1)t[l]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*r+2)throw"Cipher too short";var l,a=t.substr(1,r),u=t.substr(r+1),c=lt(u,r,n),h=[];for(l=0;l<a.length;l+=1)h[l]=a.charCodeAt(l)^c.charCodeAt(l);var d=lt(String.fromCharCode.apply(String,h),t.length-r,n),p=[];for(l=0;l<u.length;l+=1)p[l]=u.charCodeAt(l)^d.charCodeAt(l);if((p=String.fromCharCode.apply(String,p)).substr(0,r)!==n(""))throw"Hash mismatch";var f=(p=p.substr(r)).indexOf("\x01");if((-1!=f?p.substr(0,f).lastIndexOf("\0"):-1)+1!=f)throw"Malformed data";return p.substr(f+1)}(s,this.n.bitLength()+7>>3,e,n)},at.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},at.prototype.toBigInteger=function(){return this.x},at.prototype.negate=function(){return new at(this.q,this.x.negate().mod(this.q))},at.prototype.add=function(t){return new at(this.q,this.x.add(t.toBigInteger()).mod(this.q))},at.prototype.subtract=function(t){return new at(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},at.prototype.multiply=function(t){return new at(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},at.prototype.square=function(){return new at(this.q,this.x.square().mod(this.q))},at.prototype.divide=function(t){return new at(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},ut.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ut.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ut.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(C.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(C.ZERO))},ut.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(C.ZERO)&&!this.y.toBigInteger().equals(C.ZERO)},ut.prototype.negate=function(){return new ut(this.curve,this.x,this.y.negate(),this.z)},ut.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(C.ZERO.equals(n))return C.ZERO.equals(e)?this.twice():this.curve.getInfinity();var r=new C("3"),s=this.x.toBigInteger(),i=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),n.square()),l=o.multiply(n),a=s.multiply(o),u=e.square().multiply(this.z),c=u.subtract(a.shiftLeft(1)).multiply(t.z).subtract(l).multiply(n).mod(this.curve.q),h=a.multiply(r).multiply(e).subtract(i.multiply(l)).subtract(u.multiply(e)).multiply(t.z).add(e.multiply(l)).mod(this.curve.q),d=l.multiply(this.z).multiply(t.z).mod(this.curve.q);return new ut(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(h),d)},ut.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new C("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),s=r.multiply(n).mod(this.curve.q),i=this.curve.a.toBigInteger(),o=e.square().multiply(t);C.ZERO.equals(i)||(o=o.add(this.z.square().multiply(i)));var l=(o=o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(s)).shiftLeft(1).multiply(r).mod(this.curve.q),a=o.multiply(t).multiply(e).subtract(s.shiftLeft(1)).shiftLeft(2).multiply(s).subtract(o.square().multiply(o)).mod(this.curve.q),u=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new ut(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(a),u)},ut.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new C("3")),s=this.negate(),i=this;for(e=r.bitLength()-2;e>0;--e){i=i.twice();var o=r.testBit(e);o!=n.testBit(e)&&(i=i.add(o?this:s))}return i},ut.prototype.multiplyTwo=function(t,e,n){var r;r=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var s=this.curve.getInfinity(),i=this.add(e);r>=0;)s=s.twice(),t.testBit(r)?s=n.testBit(r)?s.add(i):s.add(this):n.testBit(r)&&(s=s.add(e)),--r;return s},ct.prototype.getQ=function(){return this.q},ct.prototype.getA=function(){return this.a},ct.prototype.getB=function(){return this.b},ct.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},ct.prototype.getInfinity=function(){return this.infinity},ct.prototype.fromBigInteger=function(t){return new at(this.q,t)},ct.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,n=t.substr(2,e),r=t.substr(e+2,e);return new ut(this,this.fromBigInteger(new C(n,16)),this.fromBigInteger(new C(r,16)));default:return null}},at.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ut.prototype.getEncoded=function(t){var e=function(t,e){var n=t.toByteArrayUnsigned();if(e<n.length)n=n.slice(n.length-e);else for(;e>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),s=e(n,32);return t?r.isEven()?s.unshift(2):s.unshift(3):(s.unshift(4),s=s.concat(e(r,32))),s},ut.decodeFrom=function(t,e){var n=e.length-1,r=e.slice(1,1+n/2),s=e.slice(1+n/2,1+n);r.unshift(0),s.unshift(0);var i=new C(r),o=new C(s);return new ut(t,t.fromBigInteger(i),t.fromBigInteger(o))},ut.decodeFromHex=function(t,e){e.substr(0,2);var n=e.length-2,r=e.substr(2,n/2),s=e.substr(2+n/2,n/2),i=new C(r,16),o=new C(s,16);return new ut(t,t.fromBigInteger(i),t.fromBigInteger(o))},ut.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),n=t.y.subtract(this.y).divide(e),r=n.square().subtract(this.x).subtract(t.x),s=n.multiply(this.x.subtract(r)).subtract(this.y);return new ut(this.curve,r,s)},ut.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(C.valueOf(2)),e=this.curve.fromBigInteger(C.valueOf(3)),n=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),r=n.square().subtract(this.x.multiply(t)),s=n.multiply(this.x.subtract(r)).subtract(this.y);return new ut(this.curve,r,s)},ut.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new C("3")),s=this.negate(),i=this;for(e=r.bitLength()-2;e>0;--e){i=i.twice();var o=r.testBit(e);o!=n.testBit(e)&&(i=i.add2D(o?this:s))}return i},ut.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),s=this.curve.getQ(),i=e.multiply(e).mod(s),o=t.multiply(t).multiply(t).add(n.multiply(t)).add(r).mod(s);return i.equals(o)},ut.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ut.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(e.compareTo(C.ONE)<0||e.compareTo(t.subtract(C.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(C.ONE)<0||n.compareTo(t.subtract(C.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ht=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(t,e,r){return e?n[e]:String.fromCharCode(parseInt(r,16))}var s=new String(""),i=(Object,Array,Object.hasOwnProperty);return function(n,o){var l,a,u=n.match(t),c=u[0],h=!1;"{"===c?l={}:"["===c?l=[]:(l=[],h=!0);for(var d=[l],p=1-h,f=u.length;p<f;++p){var g;switch((c=u[p]).charCodeAt(0)){default:(g=d[0])[a||g.length]=+c,a=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(e,r)),g=d[0],!a){if(!(g instanceof Array)){a=c||s;break}a=g.length}g[a]=c,a=void 0;break;case 91:d.unshift((g=d[0])[a||g.length]=[]),a=void 0;break;case 93:d.shift();break;case 102:(g=d[0])[a||g.length]=!1,a=void 0;break;case 110:(g=d[0])[a||g.length]=null,a=void 0;break;case 116:(g=d[0])[a||g.length]=!0,a=void 0;break;case 123:d.unshift((g=d[0])[a||g.length]={}),a=void 0;break;case 125:d.shift()}}if(h){if(1!==d.length)throw new Error;l=l[0]}else if(d.length)throw new Error;if(o){var m=function(t,e){var n=t[e];if(n&&"object"==typeof n){var r=null;for(var s in n)if(i.call(n,s)&&n!==t){var l=m(n,s);void 0!==l?n[s]=l:(r||(r=[]),r.push(s))}if(r)for(var a=r.length;--a>=0;)delete n[r[a]]}return o.call(t,e,n)};l=m({"":l},"")}return l}}();void 0!==dt&&dt||(dt={}),void 0!==dt.asn1&&dt.asn1||(dt.asn1={}),dt.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1).length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",s=0;s<n;s++)r+="f";e=new C(r,16).xor(t).add(C.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return Dt(t,e)},this.newObject=function(t){var e=dt.asn1,n=e.DERBoolean,r=e.DERInteger,s=e.DERBitString,i=e.DEROctetString,o=e.DERNull,l=e.DERObjectIdentifier,a=e.DEREnumerated,u=e.DERUTF8String,c=e.DERNumericString,h=e.DERPrintableString,d=e.DERTeletexString,p=e.DERIA5String,f=e.DERUTCTime,g=e.DERGeneralizedTime,m=e.DERSequence,v=e.DERSet,y=e.DERTaggedObject,w=e.ASN1Util.newObject,b=Object.keys(t);if(1!=b.length)throw"key of param shall be only one.";var S=b[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+S+":"))throw"undefined key: "+S;if("bool"==S)return new n(t[S]);if("int"==S)return new r(t[S]);if("bitstr"==S)return new s(t[S]);if("octstr"==S)return new i(t[S]);if("null"==S)return new o(t[S]);if("oid"==S)return new l(t[S]);if("enum"==S)return new a(t[S]);if("utf8str"==S)return new u(t[S]);if("numstr"==S)return new c(t[S]);if("prnstr"==S)return new h(t[S]);if("telstr"==S)return new d(t[S]);if("ia5str"==S)return new p(t[S]);if("utctime"==S)return new f(t[S]);if("gentime"==S)return new g(t[S]);if("seq"==S){for(var _=t[S],C=[],x=0;x<_.length;x++){var E=w(_[x]);C.push(E)}return new m({array:C})}if("set"==S){for(_=t[S],C=[],x=0;x<_.length;x++)E=w(_[x]),C.push(E);return new v({array:C})}if("tag"==S){var A=t[S];if("[object Array]"===Object.prototype.toString.call(A)&&3==A.length){var F=w(A[2]);return new y({tag:A[0],explicit:A[1],obj:F})}var T={};if(void 0!==A.explicit&&(T.explicit=A.explicit),void 0!==A.tag&&(T.tag=A.tag),void 0===A.obj)throw"obj shall be specified for 'tag'.";return T.obj=w(A.obj),new y(T)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},dt.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=(e=Math.floor(n/40)+"."+n%40,""),s=2;s<t.length;s+=2){var i=("00000000"+parseInt(t.substr(s,2),16).toString(2)).slice(-8);r+=i.substr(1,7),"0"==i.substr(0,1)&&(e=e+"."+new C(r,2).toString(10),r="")}return e},dt.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new C(t,10).toString(2),s=7-r.length%7;7==s&&(s=0);for(var i="",o=0;o<s;o++)i+="0";for(r=i+r,o=0;o<r.length-1;o+=7){var l=r.substr(o,7);o!=r.length-7&&(l="1"+l),n+=e(parseInt(l,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",s=t.split("."),i=40*parseInt(s[0])+parseInt(s[1]);r+=e(i),s.splice(0,2);for(var o=0;o<s.length;o++)r+=n(s[o]);return r},dt.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var n=e.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+n).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},dt.asn1.DERAbstractString=function(t){dt.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=xt(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},s.lang.extend(dt.asn1.DERAbstractString,dt.asn1.ASN1Object),dt.asn1.DERAbstractTime=function(t){dt.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,n){var r=this.zeroPadding,s=this.localDateToUTC(t),i=String(s.getFullYear());"utc"==e&&(i=i.substr(2,2));var o=i+r(String(s.getMonth()+1),2)+r(String(s.getDate()),2)+r(String(s.getHours()),2)+r(String(s.getMinutes()),2)+r(String(s.getSeconds()),2);if(!0===n){var l=s.getMilliseconds();if(0!=l){var a=r(String(l),3);o=o+"."+(a=a.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=wt(t)},this.setByDateValue=function(t,e,n,r,s,i){var o=new Date(Date.UTC(t,e-1,n,r,s,i,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},s.lang.extend(dt.asn1.DERAbstractTime,dt.asn1.ASN1Object),dt.asn1.DERAbstractStructured=function(t){dt.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},s.lang.extend(dt.asn1.DERAbstractStructured,dt.asn1.ASN1Object),dt.asn1.DERBoolean=function(){dt.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},s.lang.extend(dt.asn1.DERBoolean,dt.asn1.ASN1Object),dt.asn1.DERInteger=function(t){dt.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=dt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new C(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},s.lang.extend(dt.asn1.DERInteger,dt.asn1.ASN1Object),dt.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=dt.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}dt.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var n=0;n<=e;n++)t+="0";var r="";for(n=0;n<t.length-1;n+=8){var s=t.substr(n,8),i=parseInt(s,2).toString(16);1==i.length&&(i="0"+i),r+=i}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)e+=1==t[n]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},s.lang.extend(dt.asn1.DERBitString,dt.asn1.ASN1Object),dt.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=dt.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}dt.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},s.lang.extend(dt.asn1.DEROctetString,dt.asn1.DERAbstractString),dt.asn1.DERNull=function(){dt.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},s.lang.extend(dt.asn1.DERNull,dt.asn1.ASN1Object),dt.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new C(t,10).toString(2),s=7-r.length%7;7==s&&(s=0);for(var i="",o=0;o<s;o++)i+="0";for(r=i+r,o=0;o<r.length-1;o+=7){var l=r.substr(o,7);o!=r.length-7&&(l="1"+l),n+=e(parseInt(l,2))}return n};dt.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",s=t.split("."),i=40*parseInt(s[0])+parseInt(s[1]);r+=e(i),s.splice(0,2);for(var o=0;o<s.length;o++)r+=n(s[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=dt.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},s.lang.extend(dt.asn1.DERObjectIdentifier,dt.asn1.ASN1Object),dt.asn1.DEREnumerated=function(t){dt.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=dt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new C(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},s.lang.extend(dt.asn1.DEREnumerated,dt.asn1.ASN1Object),dt.asn1.DERUTF8String=function(t){dt.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},s.lang.extend(dt.asn1.DERUTF8String,dt.asn1.DERAbstractString),dt.asn1.DERNumericString=function(t){dt.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},s.lang.extend(dt.asn1.DERNumericString,dt.asn1.DERAbstractString),dt.asn1.DERPrintableString=function(t){dt.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},s.lang.extend(dt.asn1.DERPrintableString,dt.asn1.DERAbstractString),dt.asn1.DERTeletexString=function(t){dt.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},s.lang.extend(dt.asn1.DERTeletexString,dt.asn1.DERAbstractString),dt.asn1.DERIA5String=function(t){dt.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},s.lang.extend(dt.asn1.DERIA5String,dt.asn1.DERAbstractString),dt.asn1.DERUTCTime=function(t){dt.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=wt(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=wt(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},s.lang.extend(dt.asn1.DERUTCTime,dt.asn1.DERAbstractTime),dt.asn1.DERGeneralizedTime=function(t){dt.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=wt(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=wt(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},s.lang.extend(dt.asn1.DERGeneralizedTime,dt.asn1.DERAbstractTime),dt.asn1.DERSequence=function(t){dt.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].getEncodedHex();return this.hV=t,this.hV}},s.lang.extend(dt.asn1.DERSequence,dt.asn1.DERAbstractStructured),dt.asn1.DERSet=function(t){dt.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++)t.push(this.asn1Array[e].getEncodedHex());return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},s.lang.extend(dt.asn1.DERSet,dt.asn1.DERAbstractStructured),dt.asn1.DERTaggedObject=function(t){dt.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,n){this.hT=e,this.isExplicit=t,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},s.lang.extend(dt.asn1.DERTaggedObject,dt.asn1.ASN1Object);var dt,pt,ft,gt=new function(){};function mt(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function vt(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}function yt(t){for(var e="",n=0;n<t.length;n++){var r=t[n].toString(16);1==r.length&&(r="0"+r),e+=r}return e}function wt(t){return yt(mt(t))}function bt(t){return(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function St(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function _t(t){return t.length%2==1&&(t="0"+t),bt(b(t))}function Ct(t){return S(St(t))}function xt(t){return Ot(Lt(t))}function Et(t){return decodeURIComponent(Ht(t))}function At(t){for(var e="",n=0;n<t.length-1;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e}function Ft(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e}function Tt(t){return b(t)}function It(t){return Tt(t).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function kt(t){return S(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Dt(t,e){return"-----BEGIN "+e+"-----\r\n"+It(t)+"\r\n-----END "+e+"-----\r\n"}function Pt(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return kt(t=void 0!==e?(t=t.replace("-----BEGIN "+e+"-----","")).replace("-----END "+e+"-----",""):(t=t.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function Rt(t){var e,n,r,s,i,o,l,a,u,c,h;if(h=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return a=h[1],e=parseInt(a),2===a.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),n=parseInt(h[2])-1,r=parseInt(h[3]),s=parseInt(h[4]),i=parseInt(h[5]),o=parseInt(h[6]),l=0,""!==(u=h[7])&&(c=(u.substr(1)+"00").substr(0,3),l=parseInt(c)),Date.UTC(e,n,r,s,i,o,l);throw"unsupported zulu format: "+t}function Nt(t){return~~(Rt(t)/1e3)}function Ot(t){return t.replace(/%/g,"")}function Ht(t){return t.replace(/(..)/g,"%$1")}function Vt(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var n=(t=t.toLowerCase()).split(":").length-1;if(n<2)throw e;var r=":".repeat(7-n+2),s=(t=t.replace("::",r)).split(":");if(8!=s.length)throw e;for(var i=0;i<8;i++)s[i]=("0000"+s[i]).slice(-4);return s.join("")}function jt(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var e=(t=t.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)e[n]=e[n].replace(/^0+/,""),""==e[n]&&(e[n]="0");var r=(t=":"+e.join(":")+":").match(/:(0:){2,}/g);if(null===r)return t.slice(1,-1);var s="";for(n=0;n<r.length;n++)r[n].length>s.length&&(s=r[n]);return(t=t.replace(s,"::")).slice(1,-1)}function Bt(t){var e="malformed hex value";if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8!=t.length)return 32==t.length?jt(t):t;try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(o){throw e}}function Lt(t){for(var e=encodeURIComponent(t),n="",r=0;r<e.length;r++)"%"==e[r]?(n+=e.substr(r,3),r+=2):n=n+"%"+wt(e[r]);return n}function Mt(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function Ut(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map((function(t,e,n){var r=parseInt(t);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(o){throw"malformed integer array string: "+o}}gt.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var n=parseInt(t.substr(e+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},gt.getL=function(t,e){var n=gt.getLblen(t,e);return n<1?"":t.substr(e+2,2*n)},gt.getVblen=function(t,e){var n;return""==(n=gt.getL(t,e))?-1:("8"===n.substr(0,1)?new C(n.substr(2),16):new C(n,16)).intValue()},gt.getVidx=function(t,e){var n=gt.getLblen(t,e);return n<0?n:e+2*(n+1)},gt.getV=function(t,e){var n=gt.getVidx(t,e),r=gt.getVblen(t,e);return t.substr(n,2*r)},gt.getTLV=function(t,e){return t.substr(e,2)+gt.getL(t,e)+gt.getV(t,e)},gt.getNextSiblingIdx=function(t,e){return gt.getVidx(t,e)+2*gt.getVblen(t,e)},gt.getChildIdx=function(t,e){var n=gt,r=new Array,s=n.getVidx(t,e);"03"==t.substr(e,2)?r.push(s+2):r.push(s);for(var i=n.getVblen(t,e),o=s,l=0;;){var a=n.getNextSiblingIdx(t,o);if(null==a||a-s>=2*i)break;if(l>=200)break;r.push(a),o=a,l++}return r},gt.getNthChildIdx=function(t,e,n){return gt.getChildIdx(t,e)[n]},gt.getIdxbyList=function(t,e,n,r){var s,i,o=gt;if(0==n.length){if(void 0!==r&&t.substr(e,2)!==r)throw"checking tag doesn't match: "+t.substr(e,2)+"!="+r;return e}return s=n.shift(),i=o.getChildIdx(t,e),o.getIdxbyList(t,i[s],n,r)},gt.getTLVbyList=function(t,e,n,r){var s=gt,i=s.getIdxbyList(t,e,n);if(void 0===i)throw"can't find nthList object";if(void 0!==r&&t.substr(i,2)!=r)throw"checking tag doesn't match: "+t.substr(i,2)+"!="+r;return s.getTLV(t,i)},gt.getVbyList=function(t,e,n,r,s){var i,o,l=gt;if(void 0===(i=l.getIdxbyList(t,e,n,r)))throw"can't find nthList object";return o=l.getV(t,i),!0===s&&(o=o.substr(2)),o},gt.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},n=[],r=t.substr(0,2),s=parseInt(r,16);n[0]=new String(Math.floor(s/40)),n[1]=new String(s%40);for(var i=t.substr(2),o=[],l=0;l<i.length/2;l++)o.push(parseInt(i.substr(2*l,2),16));var a=[],u="";for(l=0;l<o.length;l++)128&o[l]?u+=e((127&o[l]).toString(2),7):(u+=e((127&o[l]).toString(2),7),a.push(new String(parseInt(u,2))),u="");var c=n.join(".");return a.length>0&&(c=c+"."+a.join(".")),c},gt.dump=function(t,e,n,r){var s=gt,i=s.getV,o=s.dump,l=s.getChildIdx,a=t;t instanceof dt.asn1.ASN1Object&&(a=t.getEncodedHex());var u=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var c=e.ommit_long_octet;if("01"==a.substr(n,2))return"00"==(h=i(a,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==a.substr(n,2))return r+"INTEGER "+u(h=i(a,n),c)+"\n";if("03"==a.substr(n,2))return r+"BITSTRING "+u(h=i(a,n),c)+"\n";if("04"==a.substr(n,2)){var h=i(a,n);return s.isASN1HEX(h)?(_=r+"OCTETSTRING, encapsulates\n")+o(h,e,0,r+"  "):r+"OCTETSTRING "+u(h,c)+"\n"}if("05"==a.substr(n,2))return r+"NULL\n";if("06"==a.substr(n,2)){var d=i(a,n),p=dt.asn1.ASN1Util.oidHexToInt(d),f=dt.asn1.x509.OID.oid2name(p),g=p.replace(/\./g," ");return""!=f?r+"ObjectIdentifier "+f+" ("+g+")\n":r+"ObjectIdentifier ("+g+")\n"}if("0c"==a.substr(n,2))return r+"UTF8String '"+Et(i(a,n))+"'\n";if("13"==a.substr(n,2))return r+"PrintableString '"+Et(i(a,n))+"'\n";if("14"==a.substr(n,2))return r+"TeletexString '"+Et(i(a,n))+"'\n";if("16"==a.substr(n,2))return r+"IA5String '"+Et(i(a,n))+"'\n";if("17"==a.substr(n,2))return r+"UTCTime "+Et(i(a,n))+"\n";if("18"==a.substr(n,2))return r+"GeneralizedTime "+Et(i(a,n))+"\n";if("30"==a.substr(n,2)){if("3000"==a.substr(n,4))return r+"SEQUENCE {}\n";_=r+"SEQUENCE\n";var m=e;if((2==(w=l(a,n)).length||3==w.length)&&"06"==a.substr(w[0],2)&&"04"==a.substr(w[w.length-1],2)){f=s.oidname(i(a,w[0]));var v=JSON.parse(JSON.stringify(e));v.x509ExtName=f,m=v}for(var y=0;y<w.length;y++)_+=o(a,m,w[y],r+"  ");return _}if("31"==a.substr(n,2)){_=r+"SET\n";var w=l(a,n);for(y=0;y<w.length;y++)_+=o(a,e,w[y],r+"  ");return _}var b=parseInt(a.substr(n,2),16);if(0!=(128&b)){var S=31&b;if(0!=(32&b)){var _=r+"["+S+"]\n";for(w=l(a,n),y=0;y<w.length;y++)_+=o(a,e,w[y],r+"  ");return _}return"68747470"==(h=i(a,n)).substr(0,8)&&(h=Et(h)),"subjectAltName"===e.x509ExtName&&2==S&&(h=Et(h)),r+"["+S+"] "+h+"\n"}return r+"UNKNOWN("+a.substr(n,2)+") "+i(a,n)+"\n"},gt.isASN1HEX=function(t){var e=gt;if(t.length%2==1)return!1;var n=e.getVblen(t,0),r=t.substr(0,2),s=e.getL(t,0);return t.length-r.length-s.length==2*n},gt.oidname=function(t){var e=dt.asn1;dt.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var n=e.x509.OID.oid2name(t);return""===n&&(n=t),n},void 0!==dt&&dt||(dt={}),void 0!==dt.asn1&&dt.asn1||(dt.asn1={}),void 0!==dt.asn1.x509&&dt.asn1.x509||(dt.asn1.x509={}),dt.asn1.x509.Certificate=function(t){dt.asn1.x509.Certificate.superclass.constructor.call(this);var e=dt.asn1,n=e.DERSequence,r=e.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var t=new dt.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});t.init(this.prvKey),t.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=t.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new r({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+It(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==t&&(void 0!==t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},s.lang.extend(dt.asn1.x509.Certificate,dt.asn1.ASN1Object),dt.asn1.x509.TBSCertificate=function(t){dt.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=dt.asn1,n=e.DERSequence,r=e.DERInteger,s=e.DERTaggedObject,i=e.x509,o=i.Time,l=i.X500Name,a=i.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new s({obj:new r({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new r(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new i.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new l(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new o(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new o(t)},this.setSubjectByParam=function(t){this.asn1Subject=new l(t)},this.setSubjectPublicKey=function(t){this.asn1SubjPKey=new a(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=Kt.getKey(t);this.asn1SubjPKey=new a(e)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,e){dt.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new n({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new n({array:this.extensionsArray}),r=new s({explicit:!0,tag:"a3",obj:e});this.asn1Array.push(r)}var i=new n({array:this.asn1Array});return this.hTLV=i.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},s.lang.extend(dt.asn1.x509.TBSCertificate,dt.asn1.ASN1Object),dt.asn1.x509.Extension=function(t){dt.asn1.x509.Extension.superclass.constructor.call(this);var e=dt.asn1,n=e.DERObjectIdentifier,r=e.DEROctetString,s=e.DERBoolean,i=e.DERSequence;this.getEncodedHex=function(){var t=new n({oid:this.oid}),e=new r({hex:this.getExtnValueHex()}),o=new Array;return o.push(t),this.critical&&o.push(new s),o.push(e),new i({array:o}).getEncodedHex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},s.lang.extend(dt.asn1.x509.Extension,dt.asn1.ASN1Object),dt.asn1.x509.Extension.appendByNameToArray=function(t,e,n){var r=t.toLowerCase(),s=dt.asn1.x509;if("basicconstraints"==r){var i=new s.BasicConstraints(e);n.push(i)}else if("keyusage"==r)i=new s.KeyUsage(e),n.push(i);else if("crldistributionpoints"==r)i=new s.CRLDistributionPoints(e),n.push(i);else if("extkeyusage"==r)i=new s.ExtKeyUsage(e),n.push(i);else if("authoritykeyidentifier"==r)i=new s.AuthorityKeyIdentifier(e),n.push(i);else if("authorityinfoaccess"==r)i=new s.AuthorityInfoAccess(e),n.push(i);else if("subjectaltname"==r)i=new s.SubjectAltName(e),n.push(i);else{if("issueraltname"!=r)throw"unsupported extension name: "+t;i=new s.IssuerAltName(e),n.push(i)}},dt.asn1.x509.KeyUsage=function(t){dt.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=Wt.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==t&&(void 0!==t.bin&&(this.asn1ExtnValue=new dt.asn1.DERBitString(t)),void 0!==t.names&&void 0!==t.names.length)){for(var n=t.names,r="000000000",s=0;s<n.length;s++)for(var i=0;i<e.length;i++)n[s]===e[i]&&(r=r.substring(0,i)+"1"+r.substring(i+1,r.length));this.asn1ExtnValue=new dt.asn1.DERBitString({bin:r})}},s.lang.extend(dt.asn1.x509.KeyUsage,dt.asn1.x509.Extension),dt.asn1.x509.BasicConstraints=function(t){dt.asn1.x509.BasicConstraints.superclass.constructor.call(this,t),this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new dt.asn1.DERBoolean),this.pathLen>-1&&t.push(new dt.asn1.DERInteger({int:this.pathLen}));var e=new dt.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},s.lang.extend(dt.asn1.x509.BasicConstraints,dt.asn1.x509.Extension),dt.asn1.x509.CRLDistributionPoints=function(t){dt.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=dt.asn1,n=e.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new e.DERSequence({array:t})},this.setByOneURI=function(t){var e=new n.GeneralNames([{uri:t}]),r=new n.DistributionPointName(e),s=new n.DistributionPoint({dpobj:r});this.setByDPArray([s])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},s.lang.extend(dt.asn1.x509.CRLDistributionPoints,dt.asn1.x509.Extension),dt.asn1.x509.ExtKeyUsage=function(t){dt.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=dt.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new e.DERSequence;for(var n=0;n<t.length;n++){var r=new e.DERObjectIdentifier(t[n]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},s.lang.extend(dt.asn1.x509.ExtKeyUsage,dt.asn1.x509.Extension),dt.asn1.x509.AuthorityKeyIdentifier=function(t){dt.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=dt.asn1,n=e.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var r=new e.DERSequence({array:t});return this.asn1ExtnValue=r,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new dt.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new dt.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new dt.asn1.DERInteger(t)},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn))},s.lang.extend(dt.asn1.x509.AuthorityKeyIdentifier,dt.asn1.x509.Extension),dt.asn1.x509.AuthorityInfoAccess=function(t){dt.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,n=dt.asn1,r=n.DERSequence,s=0;s<t.length;s++){var i=new r({array:[new n.DERObjectIdentifier(t[s].accessMethod),new n.x509.GeneralName(t[s].accessLocation)]});e.push(i)}this.asn1ExtnValue=new r({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},s.lang.extend(dt.asn1.x509.AuthorityInfoAccess,dt.asn1.x509.Extension),dt.asn1.x509.SubjectAltName=function(t){dt.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new dt.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},s.lang.extend(dt.asn1.x509.SubjectAltName,dt.asn1.x509.Extension),dt.asn1.x509.IssuerAltName=function(t){dt.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new dt.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},s.lang.extend(dt.asn1.x509.IssuerAltName,dt.asn1.x509.Extension),dt.asn1.x509.CRL=function(t){dt.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new dt.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new dt.asn1.DERBitString({hex:"00"+this.hexSig});var t=new dt.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+It(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==t&&(void 0!==t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},s.lang.extend(dt.asn1.x509.CRL,dt.asn1.ASN1Object),dt.asn1.x509.TBSCertList=function(t){dt.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=dt.asn1,n=e.DERSequence,r=e.x509,s=r.Time;this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new r.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new r.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new s(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new s(t)},this.addRevokedCert=function(t,e){var n={};null!=t&&null!=t&&(n.sn=t),null!=e&&null!=e&&(n.time=e);var s=new r.CRLEntry(n);this.aRevokedCert.push(s)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var t=new n({array:this.aRevokedCert});this.asn1Array.push(t)}var e=new n({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},s.lang.extend(dt.asn1.x509.TBSCertList,dt.asn1.ASN1Object),dt.asn1.x509.CRLEntry=function(t){dt.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=dt.asn1;this.setCertSerial=function(t){this.sn=new e.DERInteger(t)},this.setRevocationDate=function(t){this.time=new e.x509.Time(t)},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},s.lang.extend(dt.asn1.x509.CRLEntry,dt.asn1.ASN1Object),dt.asn1.x509.X500Name=function(t){dt.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var e,n=dt.asn1,r=n.x509,s=Pt;this.setByString=function(t){var e=t.split("/");e.shift();for(var n=[],s=0;s<e.length;s++)if(e[s].match(/^[^=]+=.+$/))n.push(e[s]);else{var i=n.length-1;n[i]=n[i]+"/"+e[s]}for(s=0;s<n.length;s++)this.asn1Array.push(new r.RDN({str:n[s]}))},this.setByLdapString=function(t){var e=r.X500Name.ldapToOneline(t);this.setByString(e)},this.setByObject=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=new dt.asn1.x509.RDN({str:e+"="+t[e]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new n.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer&&((e=new Wt).hex=s(t.certissuer),this.hTLV=e.getIssuerHex()),void 0!==t.certsubject&&((e=new Wt).hex=s(t.certsubject),this.hTLV=e.getSubjectHex()))},s.lang.extend(dt.asn1.x509.X500Name,dt.asn1.ASN1Object),dt.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),(e=e.map((function(t){return t.replace(/,/,"\\,")}))).join(",")},dt.asn1.x509.X500Name.ldapToOneline=function(t){for(var e=t.split(","),n=!1,r=[],s=0;e.length>0;s++){var i=e.shift();if(!0===n){var o=(r.pop()+","+i).replace(/\\,/g,",");r.push(o),n=!1}else r.push(i);"\\"===i.substr(-1,1)&&(n=!0)}return(r=r.map((function(t){return t.replace("/","\\/")}))).reverse(),"/"+r.join("/")},dt.asn1.x509.RDN=function(t){dt.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new dt.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var e=dt.asn1.x509.RDN.parseString(t),n=0;n<e.length;n++)this.addByString(e[n])},this.getEncodedHex=function(){var t=new dt.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.addByMultiValuedString(t.str)},s.lang.extend(dt.asn1.x509.RDN,dt.asn1.ASN1Object),dt.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),n=!1,r=[],s=0;e.length>0;s++){var i=e.shift();if(!0===n){var o=(r.pop()+"+"+i).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(i);"\\"===i.substr(-1,1)&&(n=!0)}var l=!1,a=[];for(s=0;r.length>0;s++){if(i=r.shift(),!0===l){var u=a.pop();i.match(/"$/)?(o=(u+"+"+i).replace(/^([^=]+)="(.*)"$/,"$1=$2"),a.push(o),l=!1):a.push(u+"+"+i)}else a.push(i);i.match(/^[^=]+="/)&&(l=!0)}return a},dt.asn1.x509.AttributeTypeAndValue=function(t){dt.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var e=dt.asn1;this.setByString=function(t){var e=t.match(/^([^=]+)=(.+)$/);if(!e)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(e[1],e[2])},this.setByAttrTypeAndValueStr=function(t,e){this.typeObj=dt.asn1.x509.OID.atype2obj(t);var n="utf8";"C"==t&&(n="prn"),this.valueObj=this.getValueObj(n,e)},this.getValueObj=function(t,n){if("utf8"==t)return new e.DERUTF8String({str:n});if("prn"==t)return new e.DERPrintableString({str:n});if("tel"==t)return new e.DERTeletexString({str:n});if("ia5"==t)return new e.DERIA5String({str:n});throw"unsupported directory string type: type="+t+" value="+n},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.setByString(t.str)},s.lang.extend(dt.asn1.x509.AttributeTypeAndValue,dt.asn1.ASN1Object),dt.asn1.x509.SubjectPublicKeyInfo=function(t){dt.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=dt.asn1,n=e.DERInteger,r=e.DERBitString,s=e.DERObjectIdentifier,i=e.DERSequence,o=e.ASN1Util.newObject,l=e.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new i({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this.setPubKey=function(t){try{if(t instanceof ot){var e=o({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).getEncodedHex();this.asn1AlgId=new l({name:"rsaEncryption"}),this.asn1SubjPKey=new r({hex:"00"+e})}}catch(u){}try{if(t instanceof dt.crypto.ECDSA){var i=new s({name:t.curveName});this.asn1AlgId=new l({name:"ecPublicKey",asn1params:i}),this.asn1SubjPKey=new r({hex:"00"+t.pubKeyHex})}}catch(u){}try{if(t instanceof dt.crypto.DSA){i=new o({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}),this.asn1AlgId=new l({name:"dsa",asn1params:i});var a=new n({bigint:t.y});this.asn1SubjPKey=new r({hex:"00"+a.getEncodedHex()})}}catch(u){}},void 0!==t&&this.setPubKey(t)},s.lang.extend(dt.asn1.x509.SubjectPublicKeyInfo,dt.asn1.ASN1Object),dt.asn1.x509.Time=function(t){dt.asn1.x509.Time.superclass.constructor.call(this);var e=dt.asn1,n=e.DERUTCTime,r=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new r(this.timeParams):"utc"==this.type?new n:new r,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},s.lang.extend(dt.asn1.x509.Time,dt.asn1.ASN1Object),dt.asn1.x509.AlgorithmIdentifier=function(t){dt.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=dt.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=e.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];null!==this.asn1Params&&t.push(this.asn1Params);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new e.DERNull)}},s.lang.extend(dt.asn1.x509.AlgorithmIdentifier,dt.asn1.ASN1Object),dt.asn1.x509.GeneralName=function(t){dt.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},n=dt.asn1,r=n.DEROctetString,s=n.DERIA5String,i=n.DERTaggedObject,o=n.ASN1Object,l=n.x509.X500Name,a=Pt;this.explicit=!1,this.setByParam=function(t){var n=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",n=new s({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",n=new s({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",n=new s({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",this.explicit=!0,n=new l({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",this.explicit=!0,n=new l({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var u=null;if((h=t.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(u=a(h)),null==u)throw"certissuer param not cert";(d=new Wt).hex=u;var c=d.getIssuerHex();(n=new o).hTLV=c}if(void 0!==t.certsubj){var h,d;if(this.type="dn",this.explicit=!0,u=null,(h=t.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(u=a(h)),null==u)throw"certsubj param not cert";(d=new Wt).hex=u,c=d.getSubjectHex(),(n=new o).hTLV=c}if(void 0!==t.ip){this.type="ip",this.explicit=!1;var p,f=t.ip,g="malformed IP address";if(f.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(p=Ut("["+f.split(".").join(",")+"]")).length)throw g}else if(f.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))p=Vt(f);else{if(!f.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw g;p=f}n=new r({hex:p})}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new i({explicit:this.explicit,tag:e[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},s.lang.extend(dt.asn1.x509.GeneralName,dt.asn1.ASN1Object),dt.asn1.x509.GeneralNames=function(t){dt.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=dt.asn1;this.setByParamArray=function(t){for(var n=0;n<t.length;n++){var r=new e.x509.GeneralName(t[n]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new e.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},s.lang.extend(dt.asn1.x509.GeneralNames,dt.asn1.ASN1Object),dt.asn1.x509.DistributionPointName=function(t){dt.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=dt.asn1,n=e.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==t){if(!e.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},s.lang.extend(dt.asn1.x509.DistributionPointName,dt.asn1.ASN1Object),dt.asn1.x509.DistributionPoint=function(t){dt.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=dt.asn1;this.getEncodedHex=function(){var t=new e.DERSequence;if(null!=this.asn1DP){var n=new e.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(n)}return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.dpobj&&(this.asn1DP=t.dpobj)},s.lang.extend(dt.asn1.x509.DistributionPoint,dt.asn1.ASN1Object),dt.asn1.x509.OID=new function(t){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var e=new dt.asn1.DERObjectIdentifier({oid:this.name2oidList[t]});return this.objCache[t]=e,e},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.atype2oidList[t])throw"AttributeType name undefined: "+t;var e=new dt.asn1.DERObjectIdentifier({oid:this.atype2oidList[t]});return this.objCache[t]=e,e}},dt.asn1.x509.OID.oid2name=function(t){var e=dt.asn1.x509.OID.name2oidList;for(var n in e)if(e[n]==t)return n;return""},dt.asn1.x509.OID.oid2atype=function(t){var e=dt.asn1.x509.OID.atype2oidList;for(var n in e)if(e[n]==t)return n;return t},dt.asn1.x509.OID.name2oid=function(t){var e=dt.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},dt.asn1.x509.X509Util={},dt.asn1.x509.X509Util.newCertPEM=function(t){var e=dt.asn1.x509,n=e.Certificate,r=new(0,e.TBSCertificate);if(void 0===t.serial)throw"serial number undefined.";if(r.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(r.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(r.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(r.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(r.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(r.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(r.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var s=0;s<t.ext.length;s++)for(key in t.ext[s])r.appendExtensionByName(key,t.ext[s][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var i=null;return t.cakey&&(i=new n({tbscertobj:r,prvkeyobj:!0===t.cakey.isPrivate?t.cakey:Kt.getKey.apply(null,t.cakey)})).sign(),t.sighex&&(i=new n({tbscertobj:r})).setSignatureHex(t.sighex),i.getPEMString()},void 0!==dt&&dt||(dt={}),void 0!==dt.asn1&&dt.asn1||(dt.asn1={}),void 0!==dt.asn1.cms&&dt.asn1.cms||(dt.asn1.cms={}),dt.asn1.cms.Attribute=function(t){var e=dt.asn1;e.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var t,n,r;t=new e.DERObjectIdentifier({oid:this.attrTypeOid}),n=new e.DERSet({array:this.valueList});try{n.getEncodedHex()}catch(s){throw"fail valueSet.getEncodedHex in Attribute(1)/"+s}r=new e.DERSequence({array:[t,n]});try{this.hTLV=r.getEncodedHex()}catch(s){throw"failed seq.getEncodedHex in Attribute(2)/"+s}return this.hTLV}},s.lang.extend(dt.asn1.cms.Attribute,dt.asn1.ASN1Object),dt.asn1.cms.ContentType=function(t){var e=dt.asn1;e.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var n=null;void 0!==t&&(n=new e.DERObjectIdentifier(t),this.valueList=[n])},s.lang.extend(dt.asn1.cms.ContentType,dt.asn1.cms.Attribute),dt.asn1.cms.MessageDigest=function(t){var e,n=dt,r=n.asn1,s=r.DEROctetString,i=r.cms;i.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==t&&(t.eciObj instanceof i.EncapsulatedContentInfo&&"string"==typeof t.hashAlg?((e=new s({hex:n.crypto.Util.hashHex(t.eciObj.eContentValueHex,t.hashAlg)})).getEncodedHex(),this.valueList=[e]):((e=new s(t)).getEncodedHex(),this.valueList=[e]))},s.lang.extend(dt.asn1.cms.MessageDigest,dt.asn1.cms.Attribute),dt.asn1.cms.SigningTime=function(t){var e=dt.asn1;if(e.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==t){var n=new e.x509.Time(t);try{n.getEncodedHex()}catch(l){throw"SigningTime.getEncodedHex() failed/"+l}this.valueList=[n]}},s.lang.extend(dt.asn1.cms.SigningTime,dt.asn1.cms.Attribute),dt.asn1.cms.SigningCertificate=function(t){var e=dt,n=e.asn1,r=n.DERSequence,s=n.cms;s.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(t){for(var i=[],o=0;o<t.length;o++){var l=Pt(t[o]),a=e.crypto.Util.hashHex(l,"sha1"),u=new n.DEROctetString({hex:a});u.getEncodedHex();var c=new s.IssuerAndSerialNumber({cert:t[o]});c.getEncodedHex();var h=new r({array:[u,c]});h.getEncodedHex(),i.push(h)}var d=new r({array:i});d.getEncodedHex(),this.valueList=[d]},void 0!==t&&"object"==typeof t.array&&this.setCerts(t.array)},s.lang.extend(dt.asn1.cms.SigningCertificate,dt.asn1.cms.Attribute),dt.asn1.cms.SigningCertificateV2=function(t){var e=dt.asn1,n=e.DERSequence,r=e.x509,s=e.cms,i=dt.crypto;if(s.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(t,o){for(var l=[],a=0;a<t.length;a++){var u=Pt(t[a]),c=[];"sha256"!==o&&c.push(new r.AlgorithmIdentifier({name:o}));var h=i.Util.hashHex(u,o),d=new e.DEROctetString({hex:h});d.getEncodedHex(),c.push(d);var p=new s.IssuerAndSerialNumber({cert:t[a]});p.getEncodedHex(),c.push(p);var f=new n({array:c});f.getEncodedHex(),l.push(f)}var g=new n({array:l});g.getEncodedHex(),this.valueList=[g]},void 0!==t&&"object"==typeof t.array){var o="sha256";"string"==typeof t.hashAlg&&(o=t.hashAlg),this.setCerts(t.array,o)}},s.lang.extend(dt.asn1.cms.SigningCertificateV2,dt.asn1.cms.Attribute),dt.asn1.cms.IssuerAndSerialNumber=function(t){var e=dt.asn1,n=e.DERInteger,r=e.x509.X500Name,s=Wt;e.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(t){var e=Pt(t),i=new s;i.hex=e;var o=i.getIssuerHex();this.dIssuer=new r,this.dIssuer.hTLV=o;var l=i.getSerialNumberHex();this.dSerial=new n({hex:l})},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),t.issuer&&t.serial&&(this.dIssuer=t.issuer instanceof r?t.issuer:new r(t.issuer),this.dSerial=t.serial instanceof n?t.serial:new n(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},s.lang.extend(dt.asn1.cms.IssuerAndSerialNumber,dt.asn1.ASN1Object),dt.asn1.cms.AttributeList=function(t){var e=dt.asn1,n=e.cms;n.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof n.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},s.lang.extend(dt.asn1.cms.AttributeList,dt.asn1.ASN1Object),dt.asn1.cms.SignerInfo=function(t){var e=dt.asn1,n=e.DERTaggedObject,r=e.cms,s=r.AttributeList,i=r.ContentType,o=r.EncapsulatedContentInfo,l=r.MessageDigest,a=r.SignedData,u=e.x509.AlgorithmIdentifier,c=dt.crypto,h=Kt;r.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new e.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new s,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new s,this.setSignerIdentifier=function(t){"string"==typeof t&&-1!=t.indexOf("CERTIFICATE")&&-1!=t.indexOf("BEGIN")&&-1!=t.indexOf("END")&&(this.dSignerIdentifier=new r.IssuerAndSerialNumber({cert:t}))},this.setForContentAndHash=function(t){void 0!==t&&(t.eciObj instanceof o&&(this.dSignedAttrs.add(new i({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new l({eciObj:t.eciObj,hashAlg:t.hashAlg}))),void 0!==t.sdObj&&t.sdObj instanceof a&&-1==t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new u({name:t.hashAlg})))},this.sign=function(t,n){this.dSigAlg=new u({name:n});var r=this.dSignedAttrs.getEncodedHex(),s=h.getKey(t),i=new c.Signature({alg:n});i.init(s),i.updateHex(r);var o=i.sign();this.dSig=new e.DEROctetString({hex:o})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof s&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var t=new n({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),r=null;this.dUnsignedAttrs.length()>0&&(r=new n({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var i=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,t,this.dSigAlg,this.dSig];null!=r&&i.push(r);var o=new e.DERSequence({array:i});return this.hTLV=o.getEncodedHex(),this.hTLV}},s.lang.extend(dt.asn1.cms.SignerInfo,dt.asn1.ASN1Object),dt.asn1.cms.EncapsulatedContentInfo=function(t){var e=dt.asn1,n=e.DERTaggedObject,r=e.DERSequence,s=e.DERObjectIdentifier,i=e.DEROctetString;e.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new s({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){this.dEContentType=t.match(/^[0-2][.][0-9.]+$/)?new s({oid:t}):new s({name:t})},this.setContentValue=function(t){void 0!==t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=xt(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=xt(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new i({hex:this.eContentValueHex});this.dEContent=new n({obj:t,tag:"a0",explicit:!0});var e=[this.dEContentType];this.isDetached||e.push(this.dEContent);var s=new r({array:e});return this.hTLV=s.getEncodedHex(),this.hTLV}},s.lang.extend(dt.asn1.cms.EncapsulatedContentInfo,dt.asn1.ASN1Object),dt.asn1.cms.ContentInfo=function(t){var e=dt.asn1,n=e.DERTaggedObject,r=e.DERSequence,s=e.x509;dt.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=s.OID.name2obj(t))},this.getEncodedHex=function(){var t=new n({obj:this.dContent,tag:"a0",explicit:!0}),e=new r({array:[this.dContentType,t]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof e.ASN1Object&&(this.dContent=t.obj))},s.lang.extend(dt.asn1.cms.ContentInfo,dt.asn1.ASN1Object),dt.asn1.cms.SignedData=function(t){var e=dt.asn1,n=e.ASN1Object,r=e.DERInteger,s=e.DERSet,i=e.DERSequence,o=e.DERTaggedObject,l=e.cms,a=l.EncapsulatedContentInfo,u=l.SignerInfo,c=l.ContentInfo,h=e.x509.AlgorithmIdentifier;dt.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new r({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new a,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new u],this.addCertificatesByPEM=function(t){var e=Pt(t),r=new n;r.hTLV=e,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],e=0;e<this.digestAlgNameList.length;e++){var n=new h({name:this.digestAlgNameList[e]});t.push(n)}this.dDigestAlgs=new s({array:t})}var r=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var l=new s({array:this.certificateList});this.dCerts=new o({obj:l,tag:"a0",explicit:!1})}null!=this.dCerts&&r.push(this.dCerts);var a=new s({array:this.signerInfoList});r.push(a);var u=new i({array:r});return this.hTLV=u.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new c({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return Dt(this.getContentInfoEncodedHex(),"CMS")}},s.lang.extend(dt.asn1.cms.SignedData,dt.asn1.ASN1Object),dt.asn1.cms.CMSUtil=new function(){},dt.asn1.cms.CMSUtil.newSignedData=function(t){var e=dt.asn1,n=e.cms,r=n.SignerInfo,s=n.SigningTime,i=n.SigningCertificate,o=n.SigningCertificateV2,l=e.cades.SignaturePolicyIdentifier,a=new(0,n.SignedData);if(a.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var u=0;u<t.certs.length;u++)a.addCertificatesByPEM(t.certs[u]);for(a.signerInfoList=[],u=0;u<t.signerInfos.length;u++){var c=t.signerInfos[u],h=new r;for(attrName in h.setSignerIdentifier(c.signerCert),h.setForContentAndHash({sdObj:a,eciObj:a.dEncapContentInfo,hashAlg:c.hashAlg}),c.sAttr){var d=c.sAttr[attrName];if("SigningTime"==attrName){var p=new s(d);h.dSignedAttrs.add(p)}"SigningCertificate"==attrName&&(p=new i(d),h.dSignedAttrs.add(p)),"SigningCertificateV2"==attrName&&(p=new o(d),h.dSignedAttrs.add(p)),"SignaturePolicyIdentifier"==attrName&&(p=new l(d),h.dSignedAttrs.add(p))}h.sign(c.signerPrvKey,c.sigAlg),a.signerInfoList.push(h)}return a},dt.asn1.cms.CMSUtil.verifySignedData=function(t){var e=gt.getVbyList,n=gt.getTLVbyList,r=gt.getIdxbyList,s=gt.getChildIdx,i=gt.getTLV,o=gt.oidname,l=dt.crypto.Util.hashHex;void 0===t.cms&&(0,dt.lang.String.isHex)(t.cms);var a=t.cms,u=function(t,i){var l=i.idx;i.signerid_issuer1=n(t,l,[1,0],"30"),i.signerid_serial1=e(t,l,[1,1],"02"),i.hashalg=o(e(t,l,[2,0],"06"));var a=r(t,l,[3],"a0");i.idxSignedAttrs=a,c(t,i,a);var u=s(t,l).length;if(u<6)throw"malformed SignerInfo";i.sigalg=o(e(t,l,[u-2,0],"06")),i.sigval=e(t,l,[u-1],"04")},c=function(t,n,r){var i=s(t,r);n.signedAttrIdxList=i;for(var o=0;o<i.length;o++){var l,a=i[o],u=e(t,a,[0],"06");"2a864886f70d010905"===u?(l=Et(e(t,a,[1,0])),n.saSigningTime=l):"2a864886f70d010904"===u&&(l=e(t,a,[1,0],"04"),n.saMessageDigest=l)}},h=function(t,e,n,r){n.verifyDetail={};var o=n.verifyDetail,a=e.parse.econtent,u=n.hashalg,c=n.saMessageDigest;o.validMessageDigest=!1,l(a,u)===c&&(o.validMessageDigest=!0),function(t,e,n,r){var o,l=e.parse.certsIdx;if(void 0===e.certs){o=[],e.certkeys=[];for(var a=s(t,l),u=0;u<a.length;u++){var c=i(t,a[u]),h=new Wt;h.readCertHex(c),o[u]=h,e.certkeys[u]=h.getPublicKey()}e.certs=o}else o=e.certs;for(e.cccc=o.length,e.cccci=a.length,u=0;u<o.length;u++){var d=h.getIssuerHex(),p=h.getSerialNumberHex();n.signerid_issuer1===d&&n.signerid_serial1===p&&(n.certkey_idx=u)}}(t,e,n),o.validSignatureValue=!1;var h=n.sigalg,d="31"+i(t,n.idxSignedAttrs).substr(2);n.signedattrshex=d;var p=e.certs[n.certkey_idx].getPublicKey(),f=new dt.crypto.Signature({alg:h});f.init(p),f.updateHex(d);var g=f.verify(n.sigval);o.validSignatureValue_isValid=g,!0===g&&(o.validSignatureValue=!0),n.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(n.isValid=!0)},d={isValid:!1,parse:{}};return function(t,n){if("2a864886f70d010702"!==e(t,0,[0],"06"))return n;n.cmsType="signedData",n.econtent=e(t,0,[1,0,2,1,0]),function(t,e){for(var n,s=3;s<6;s++)if(void 0!==(n=r(t,0,[1,0,s]))){var i=t.substr(n,2);"a0"===i&&(e.certsIdx=n),"a1"===i&&(e.revinfosIdx=n),"31"===i&&(e.signerinfosIdx=n)}}(t,n),n.signerInfos=[],function(t,e){var n=e.signerinfosIdx;if(void 0!==n){var r=s(t,n);e.signerInfoIdxList=r;for(var i=0;i<r.length;i++){var o={idx:r[i]};u(t,o),e.signerInfos.push(o)}}}(t,n)}(a,d.parse),function(t,e){for(var n=e.parse.signerInfos,r=n.length,s=!0,i=0;i<r;i++){var o=n[i];h(t,e,o),o.isValid||(s=!1)}e.isValid=s}(a,d),d},void 0!==dt&&dt||(dt={}),void 0!==dt.asn1&&dt.asn1||(dt.asn1={}),void 0!==dt.asn1.tsp&&dt.asn1.tsp||(dt.asn1.tsp={}),dt.asn1.tsp.Accuracy=function(t){var e=dt.asn1,n=e.DERInteger,r=e.DERSequence,s=e.DERTaggedObject;e.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,e=null,i=null,o=[];if(null!=this.seconds&&(t=new n({int:this.seconds}),o.push(t)),null!=this.millis){var l=new n({int:this.millis});e=new s({obj:l,tag:"80",explicit:!1}),o.push(e)}if(null!=this.micros){var a=new n({int:this.micros});i=new s({obj:a,tag:"81",explicit:!1}),o.push(i)}var u=new r({array:o});return this.hTLV=u.getEncodedHex(),this.hTLV},void 0!==t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},s.lang.extend(dt.asn1.tsp.Accuracy,dt.asn1.ASN1Object),dt.asn1.tsp.MessageImprint=function(t){var e=dt.asn1,n=e.DERSequence,r=e.DEROctetString,s=e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new n({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new s({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new r({hex:t.hashValue})))},s.lang.extend(dt.asn1.tsp.MessageImprint,dt.asn1.ASN1Object),dt.asn1.tsp.TimeStampReq=function(t){var e=dt.asn1,n=e.DERSequence,r=e.DERInteger,s=e.DERBoolean,i=e.DERObjectIdentifier,o=e.tsp,l=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){t instanceof l?this.dMessageImprint=t:"object"==typeof t&&(this.dMessageImprint=new l(t))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new s);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new i(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new r(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},s.lang.extend(dt.asn1.tsp.TimeStampReq,dt.asn1.ASN1Object),dt.asn1.tsp.TSTInfo=function(t){var e=dt.asn1,n=e.DERSequence,r=e.DERInteger,s=e.DERBoolean,i=e.DERGeneralizedTime,o=e.DERObjectIdentifier,l=e.tsp,a=l.MessageImprint,u=l.Accuracy,c=e.x509.X500Name;if(l.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new a(t.messageImprint)),void 0!==t.serialNumber&&(this.dSerialNumber=new r(t.serialNumber)),void 0!==t.genTime&&(this.dGenTime=new i(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new u(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new s),void 0!==t.nonce&&(this.dNonce=new r(t.nonce)),void 0!==t.tsa&&(this.dTsa=new c(t.tsa))}},s.lang.extend(dt.asn1.tsp.TSTInfo,dt.asn1.ASN1Object),dt.asn1.tsp.TimeStampResp=function(t){var e=dt.asn1,n=e.DERSequence,r=e.ASN1Object,s=e.tsp,i=s.PKIStatusInfo;s.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new i(t.status)),void 0!==t.tst&&t.tst instanceof r&&(this.dTST=t.tst.getContentInfo()))},s.lang.extend(dt.asn1.tsp.TimeStampResp,dt.asn1.ASN1Object),dt.asn1.tsp.PKIStatusInfo=function(t){var e=dt.asn1,n=e.DERSequence,r=e.tsp,s=r.PKIStatus,i=r.PKIFreeText,o=r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new s(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new i({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new o(t.failinfo)))},s.lang.extend(dt.asn1.tsp.PKIStatusInfo,dt.asn1.ASN1Object),dt.asn1.tsp.PKIStatus=function(t){var e=dt.asn1,n=e.DERInteger,r=e.tsp,s=r.PKIStatus;if(r.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==t)if(void 0!==t.name){var i=s.valueList;if(void 0===i[t.name])throw"name undefined: "+t.name;this.dStatus=new n({int:i[t.name]})}else this.dStatus=new n(t)},s.lang.extend(dt.asn1.tsp.PKIStatus,dt.asn1.ASN1Object),dt.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},dt.asn1.tsp.PKIFreeText=function(t){var e=dt.asn1,n=e.DERSequence,r=e.DERUTF8String;e.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var t=[],e=0;e<this.textList.length;e++)t.push(new r({str:this.textList[e]}));var s=new n({array:t});return this.hTLV=s.getEncodedHex(),this.hTLV},void 0!==t&&"object"==typeof t.array&&(this.textList=t.array)},s.lang.extend(dt.asn1.tsp.PKIFreeText,dt.asn1.ASN1Object),dt.asn1.tsp.PKIFailureInfo=function(t){var e=dt.asn1,n=e.DERBitString,r=e.tsp.PKIFailureInfo;if(r.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),e=new n;return e.setByBinaryString(t),this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t)if("string"==typeof t.name){var s=r.valueList;if(void 0===s[t.name])throw"name undefined: "+t.name;this.value=s[t.name]}else"number"==typeof t.int&&(this.value=t.int)},s.lang.extend(dt.asn1.tsp.PKIFailureInfo,dt.asn1.ASN1Object),dt.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},dt.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},dt.asn1.tsp.SimpleTSAAdapter=function(t){var e=dt.asn1.tsp,n=dt.crypto.Util.hashHex;e.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,r){var s=n(t,r);this.params.tstInfo.messageImprint={hashAlg:r,hashValue:s},this.params.tstInfo.serialNumber={int:this.serial++};var i=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:i},e.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},s.lang.extend(dt.asn1.tsp.SimpleTSAAdapter,dt.asn1.tsp.AbstractTSAAdapter),dt.asn1.tsp.FixedTSAAdapter=function(t){var e=dt.asn1.tsp,n=dt.crypto.Util.hashHex;e.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,r){var s=n(t,r);return this.params.tstInfo.messageImprint={hashAlg:r,hashValue:s},e.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},s.lang.extend(dt.asn1.tsp.FixedTSAAdapter,dt.asn1.tsp.AbstractTSAAdapter),dt.asn1.tsp.TSPUtil=new function(){},dt.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var e=dt.asn1,n=e.cms,r=e.tsp.TSTInfo,s=new n.SignedData,i=new r(t.tstInfo).getEncodedHex();if(s.dEncapContentInfo.setContentValue({hex:i}),s.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var o=0;o<t.certs.length;o++)s.addCertificatesByPEM(t.certs[o]);var l=s.signerInfoList[0];l.setSignerIdentifier(t.signerCert),l.setForContentAndHash({sdObj:s,eciObj:s.dEncapContentInfo,hashAlg:t.hashAlg});var a=new n.SigningCertificate({array:[t.signerCert]});return l.dSignedAttrs.add(a),l.sign(t.signerPrvKey,t.sigAlg),s},dt.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=gt,n=e.getV,r=e.getTLV,s={certreq:!1},i=(0,e.getChildIdx)(t,0);if(i.length<2)throw"TimeStampReq must have at least 2 items";var o=r(t,i[1]);s.mi=dt.asn1.tsp.TSPUtil.parseMessageImprint(o);for(var l=2;l<i.length;l++){var a=i[l],u=t.substr(a,2);if("06"==u){var c=n(t,a);s.policy=e.hextooidstr(c)}"02"==u&&(s.nonce=n(t,a)),"01"==u&&(s.certreq=!0)}return s},dt.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=gt,n=e.getChildIdx,r=e.getV,s=e.getIdxbyList,i={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";n(t,0);var o=r(t,s(t,0,[0,0])),l=e.hextooidstr(o),a=dt.asn1.x509.OID.oid2name(l);if(""==a)throw"hashAlg name undefined: "+l;var u=a,c=s(t,0,[1]);return i.hashAlg=u,i.hashValue=r(t,c),i},void 0!==dt&&dt||(dt={}),void 0!==dt.asn1&&dt.asn1||(dt.asn1={}),void 0!==dt.asn1.cades&&dt.asn1.cades||(dt.asn1.cades={}),dt.asn1.cades.SignaturePolicyIdentifier=function(t){var e=dt.asn1,n=e.DERObjectIdentifier,r=e.DERSequence,s=e.cades,i=s.OtherHashAlgAndValue;if(s.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==t&&"string"==typeof t.oid&&"object"==typeof t.hash){var o=new r({array:[new n({oid:t.oid}),new i(t.hash)]});this.valueList=[o]}},s.lang.extend(dt.asn1.cades.SignaturePolicyIdentifier,dt.asn1.cms.Attribute),dt.asn1.cades.OtherHashAlgAndValue=function(t){var e=dt.asn1,n=e.DERSequence,r=e.DEROctetString,s=e.x509.AlgorithmIdentifier;e.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new n({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new s({name:t.alg}),this.dHash=new r({hex:t.hash}))},s.lang.extend(dt.asn1.cades.OtherHashAlgAndValue,dt.asn1.ASN1Object),dt.asn1.cades.SignatureTimeStamp=function(t){var e=dt.asn1,n=e.ASN1Object;if(e.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==t){if(void 0!==t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof n))throw"res param shall be ASN1Object or hex string";if(void 0!==t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var r=new n;this.tstHex=t.tst,r.hTLV=this.tstHex,r.getEncodedHex(),this.valueList=[r]}else if(!(t.tst instanceof n))throw"tst param shall be ASN1Object or hex string"}},s.lang.extend(dt.asn1.cades.SignatureTimeStamp,dt.asn1.cms.Attribute),dt.asn1.cades.CompleteCertificateRefs=function(t){var e=dt.asn1.cades;e.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(t){this.valueList=[];for(var n=0;n<t.length;n++){var r=new e.OtherCertID(t[n]);this.valueList.push(r)}},void 0!==t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},s.lang.extend(dt.asn1.cades.CompleteCertificateRefs,dt.asn1.cms.Attribute),dt.asn1.cades.OtherCertID=function(t){var e=dt.asn1,n=e.cms,r=e.cades;r.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new r.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),"object"==typeof t&&(!1===t.hasis&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},s.lang.extend(dt.asn1.cades.OtherCertID,dt.asn1.ASN1Object),dt.asn1.cades.OtherHash=function(t){var e=dt.asn1,n=e.cades,r=n.OtherHashAlgAndValue,s=dt.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(-1==t.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var e=Pt(t),n=s(e,this.alg);this.dOtherHash=new r({alg:this.alg,hash:n})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==t)if("string"==typeof t)if(-1!=t.indexOf("-----BEGIN "))this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new e.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new r(t))},s.lang.extend(dt.asn1.cades.OtherHash,dt.asn1.ASN1Object),dt.asn1.cades.CAdESUtil=new function(){},dt.asn1.cades.CAdESUtil.addSigTS=function(t,e,n){},dt.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=gt.getChildIdx,n=gt.getTLV,r=gt.getIdxbyList,s=dt.asn1,i=s.ASN1Object,o=s.cms.SignedData,l=s.cades.CAdESUtil,a={};if("06092a864886f70d010702"!=(0,gt.getTLVbyList)(t,0,[0]))throw"hex is not CMS SignedData";var u=e(t,r(t,0,[1,0]));if(u.length<4)throw"num of SignedData elem shall be 4 at least";var c=u.shift();a.version=n(t,c);var h=u.shift();a.algs=n(t,h);var d=u.shift();a.encapcontent=n(t,d),a.certs=null,a.revs=null,a.si=[];var p=u.shift();"a0"==t.substr(p,2)&&(a.certs=n(t,p),p=u.shift()),"a1"==t.substr(p,2)&&(a.revs=n(t,p),p=u.shift());var f=p;if("31"!=t.substr(f,2))throw"Can't find signerInfos";for(var g=e(t,f),m=0;m<g.length;m++){var v=l.parseSignerInfoForAddingUnsigned(t,g[m],m);a.si[m]=v}var y=null;for(a.obj=new o,(y=new i).hTLV=a.version,a.obj.dCMSVersion=y,(y=new i).hTLV=a.algs,a.obj.dDigestAlgs=y,(y=new i).hTLV=a.encapcontent,a.obj.dEncapContentInfo=y,(y=new i).hTLV=a.certs,a.obj.dCerts=y,a.obj.signerInfoList=[],m=0;m<a.si.length;m++)a.obj.signerInfoList.push(a.si[m].obj);return a},dt.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,n){var r=gt.getTLV,s=gt.getV,i=dt.asn1,o=i.ASN1Object,l=i.cms,a=l.AttributeList,u=l.SignerInfo,c={},h=(0,gt.getChildIdx)(t,e);if(6!=h.length)throw"not supported items for SignerInfo (!=6)";var d=h.shift();c.version=r(t,d);var p=h.shift();c.si=r(t,p);var f=h.shift();c.digalg=r(t,f);var g=h.shift();c.sattrs=r(t,g);var m=h.shift();c.sigalg=r(t,m);var v=h.shift();c.sig=r(t,v),c.sigval=s(t,v);var y=null;return c.obj=new u,(y=new o).hTLV=c.version,c.obj.dCMSVersion=y,(y=new o).hTLV=c.si,c.obj.dSignerIdentifier=y,(y=new o).hTLV=c.digalg,c.obj.dDigestAlgorithm=y,(y=new o).hTLV=c.sattrs,c.obj.dSignedAttrs=y,(y=new o).hTLV=c.sigalg,c.obj.dSigAlg=y,(y=new o).hTLV=c.sig,c.obj.dSig=y,c.obj.dUnsignedAttrs=new a,c},void 0!==dt.asn1.csr&&dt.asn1.csr||(dt.asn1.csr={}),dt.asn1.csr.CertificationRequest=function(t){var e=dt,n=e.asn1,r=n.DERBitString,s=n.DERSequence,i=n.x509;n.csr.CertificationRequest.superclass.constructor.call(this),this.sign=function(t,n){null==this.prvKey&&(this.prvKey=n),this.asn1SignatureAlg=new i.AlgorithmIdentifier({name:t}),sig=new e.crypto.Signature({alg:t}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var o=new s({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=o.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return Dt(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==t&&void 0!==t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},s.lang.extend(dt.asn1.csr.CertificationRequest,dt.asn1.ASN1Object),dt.asn1.csr.CertificationRequestInfo=function(t){var e=dt.asn1,n=e.DERInteger,r=e.DERSequence,s=e.DERSet,i=e.DERNull,o=e.DERTaggedObject,l=e.DERObjectIdentifier,a=e.x509,u=a.X500Name,c=a.Extension,h=Kt;e.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new n({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new u(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=h.getKey(t);this.asn1SubjPKey=new a.SubjectPublicKeyInfo(e)},this.appendExtensionByName=function(t,e){c.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new r({array:this.extensionsArray}),e=new s({array:[t]}),n=new r({array:[new l({oid:"1.2.840.113549.1.9.14"}),e]}),a=new o({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(a)}else a=new o({explicit:!1,tag:"a0",obj:new i}),this.asn1Array.push(a);var u=new r({array:this.asn1Array});return this.hTLV=u.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},s.lang.extend(dt.asn1.csr.CertificationRequestInfo,dt.asn1.ASN1Object),dt.asn1.csr.CSRUtil=new function(){},dt.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=Kt,n=dt.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var r=new n.CertificationRequestInfo;if(r.setSubjectByParam(t.subject),r.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var s=0;s<t.ext.length;s++)for(key in t.ext[s])r.appendExtensionByName(key,t.ext[s][key]);var i=new n.CertificationRequest({csrinfo:r}),o=e.getKey(t.sbjprvkey);return i.sign(t.sigalg,o),i.getPEMString()},dt.asn1.csr.CSRUtil.getInfo=function(t){var e=gt.getTLVbyList,n={subject:{},pubkey:{}};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var r=Pt(t,"CERTIFICATE REQUEST");return n.subject.hex=e(r,0,[0,1]),n.subject.name=Wt.hex2dn(n.subject.hex),n.pubkey.hex=e(r,0,[0,2]),n.pubkey.obj=Kt.getKey(n.pubkey.hex,null,"pkcs8pub"),n},void 0!==dt&&dt||(dt={}),void 0!==dt.asn1&&dt.asn1||(dt.asn1={}),void 0!==dt.asn1.ocsp&&dt.asn1.ocsp||(dt.asn1.ocsp={}),dt.asn1.ocsp.DEFAULT_HASH="sha1",dt.asn1.ocsp.CertID=function(t){var e=dt.asn1,n=e.DEROctetString,r=e.DERInteger,s=e.DERSequence,i=e.x509.AlgorithmIdentifier,o=e.ocsp,l=o.DEFAULT_HASH,a=dt.crypto.Util.hashHex,u=Wt,c=gt;if(o.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,e,s,o){void 0===o&&(o=l),this.dHashAlg=new i({name:o}),this.dIssuerNameHash=new n({hex:t}),this.dIssuerKeyHash=new n({hex:e}),this.dSerialNumber=new r({hex:s})},this.setByCert=function(t,e,n){void 0===n&&(n=l);var r=new u;r.readCertPEM(e);var s=new u;s.readCertPEM(t);var i=s.getPublicKeyHex(),o=c.getTLVbyList(i,0,[1,0],"30"),h=r.getSerialNumberHex(),d=a(s.getSubjectHex(),n),p=a(o,n);this.setByValue(d,p,h,n),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=new s({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){var h=t;if(void 0!==h.issuerCert&&void 0!==h.subjectCert){var d=l;void 0===h.alg&&(d=void 0),this.setByCert(h.issuerCert,h.subjectCert,d)}else{if(void 0===h.namehash||void 0===h.keyhash||void 0===h.serial)throw"invalid constructor arguments";d=l,void 0===h.alg&&(d=void 0),this.setByValue(h.namehash,h.keyhash,h.serial,d)}}},s.lang.extend(dt.asn1.ocsp.CertID,dt.asn1.ASN1Object),dt.asn1.ocsp.Request=function(t){var e=dt.asn1,n=e.DERSequence,r=e.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var s=new r.CertID(t);this.dReqCert=s}},s.lang.extend(dt.asn1.ocsp.Request,dt.asn1.ASN1Object),dt.asn1.ocsp.TBSRequest=function(t){var e=dt.asn1,n=e.DERSequence,r=e.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],n=0;n<t.length;n++){var s=new r.Request(t[0]);e.push(s)}this.dRequestList=e},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new n({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},s.lang.extend(dt.asn1.ocsp.TBSRequest,dt.asn1.ASN1Object),dt.asn1.ocsp.OCSPRequest=function(t){var e=dt.asn1,n=e.DERSequence,r=e.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new n({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList){var s=new r.TBSRequest(t);this.dTbsRequest=s}},s.lang.extend(dt.asn1.ocsp.OCSPRequest,dt.asn1.ASN1Object),dt.asn1.ocsp.OCSPUtil={},dt.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,n){var r=dt.asn1.ocsp;return void 0===n&&(n=r.DEFAULT_HASH),new r.OCSPRequest({reqList:[{alg:n,issuerCert:t,subjectCert:e}]}).getEncodedHex()},dt.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=gt.getVbyList,n=gt.getIdxbyList,r=(e=gt.getVbyList,gt.getV),s={};try{var o=e(t,0,[0],"0a");s.responseStatus=parseInt(o,16)}catch(i){}if(0!==s.responseStatus)return s;try{var l=n(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(l,2)?s.certStatus="good":"a1"===t.substr(l,2)?(s.certStatus="revoked",s.revocationTime=Et(e(t,l,[0]))):"82"===t.substr(l,2)&&(s.certStatus="unknown")}catch(i){}try{var a=n(t,0,[1,0,1,0,0,2,0,2]);s.thisUpdate=Et(r(t,a))}catch(i){}try{var u=n(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(u,2)&&(s.nextUpdate=Et(e(t,u,[0])))}catch(i){}return s},void 0!==dt&&dt||(dt={}),void 0!==dt.lang&&dt.lang||(dt.lang={}),dt.lang.String=function(){},"function"==typeof Buffer?(pt=function(t){return bt(new Buffer(t,"utf8").toString("base64"))},ft=function(t){return new Buffer(St(t),"base64").toString("utf8")}):(pt=function(t){return _t(Ot(Lt(t)))},ft=function(t){return decodeURIComponent(Ht(Ct(t)))}),dt.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},dt.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},dt.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},dt.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=St(t),dt.lang.String.isBase64(t))},dt.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==dt&&dt||(dt={}),void 0!==dt.crypto&&dt.crypto||(dt.crypto={}),dt.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:m.algo.MD5,sha1:m.algo.SHA1,sha224:m.algo.SHA224,sha256:m.algo.SHA256,sha384:m.algo.SHA384,sha512:m.algo.SHA512,ripemd160:m.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,n){var r=this.getDigestInfoHex(t,e),s=n/4;if(r.length+22>s)throw"key is too short for SigAlg: keylen="+n+","+e;for(var i="0001",o="00"+r,l="",a=s-i.length-o.length,u=0;u<a;u+=2)l+="ff";return i+l+o},this.hashString=function(t,e){return new dt.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new dt.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return new dt.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new dt.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new dt.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new dt.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new dt.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)}},dt.crypto.Util.md5=function(t){return new dt.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},dt.crypto.Util.ripemd160=function(t){return new dt.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},dt.crypto.Util.SECURERANDOMGEN=new rt,dt.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return dt.crypto.Util.SECURERANDOMGEN.nextBytes(e),yt(e)},dt.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new C(dt.crypto.Util.getRandomHexOfNbytes(t),16)},dt.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,n=new Array((t-e)/8+1);return dt.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<e&255^255)&n[0],yt(n)},dt.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new C(dt.crypto.Util.getRandomHexOfNbits(t),16)},dt.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var n=dt.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(n))return n}},dt.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var n=t.compareTo(e);if(1==n)throw"biMin is greater than biMax";if(0==n)return t;var r=e.subtract(t);return dt.crypto.Util.getRandomBigIntegerZeroToMax(r).add(t)},dt.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=dt.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=dt.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=dt.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(i){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+i}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=m.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(m.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(i){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+i}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=dt.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},dt.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},dt.crypto.MessageDigest.getHashLength=function(t){var e=dt.crypto.MessageDigest,n=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[n])throw"not supported algorithm: "+t;return e.HASHLENGTH[n]},dt.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},dt.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=dt.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var n=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==e){try{this.mac=m.algo.HMAC.create(dt.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n],this.pass)}catch(h){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+h}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=m.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(m.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=Ft(t)),void(this.pass=m.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;if(e=null,void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=xt(t.utf8)),void 0!==t.rstr&&(e=Ft(t.rstr)),void 0!==t.b64&&(e=S(t.b64)),void 0!==t.b64u&&(e=Ct(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=m.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=dt.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},dt.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var n="",r=e/4-t.length,s=0;s<r;s++)n+="0";return n+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new dt.crypto.MessageDigest({alg:this.mdAlgName})}catch(n){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+n}this.init=function(t,e){var n=null;try{n=void 0===e?Kt.getKey(t):Kt.getKey(t,e)}catch(r){throw"init failed:"+r}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var t=new dt.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof ot&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ot&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof dt.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof dt.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new dt.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,t,this.ecpubhex);if(this.pubKey instanceof ot&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ot&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==dt.crypto.ECDSA&&this.pubKey instanceof dt.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==dt.crypto.DSA&&this.pubKey instanceof dt.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,this.provName=void 0===t.prov?dt.crypto.Util.DEFAULTPROVIDER[this.algName]:t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=Kt.getKey(t.prvkeypem),this.init(e)}catch(c){throw"fatal error to load pem private key: "+c}}},dt.crypto.Cipher=function(t){},dt.crypto.Cipher.encrypt=function(t,e,n){if(e instanceof ot&&e.isPublic){var r=dt.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.encrypt(t);if("RSAOAEP"===r)return e.encryptOAEP(t,"sha1");var s=r.match(/^RSAOAEP(\d+)$/);if(null!==s)return e.encryptOAEP(t,"sha"+s[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},dt.crypto.Cipher.decrypt=function(t,e,n){if(e instanceof ot&&e.isPrivate){var r=dt.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.decrypt(t);if("RSAOAEP"===r)return e.decryptOAEP(t,"sha1");var s=r.match(/^RSAOAEP(\d+)$/);if(null!==s)return e.decryptOAEP(t,"sha"+s[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},dt.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof ot){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},dt.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==dt&&dt||(dt={}),void 0!==dt.crypto&&dt.crypto||(dt.crypto={}),dt.crypto.ECDSA=function(t){var e=new rt;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new C(t.bitLength(),e).mod(t.subtract(C.ONE)).add(C.ONE)},this.setNamedCurve=function(t){this.ecparams=dt.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var n={};return n.x=t.substr(2,e),n.y=t.substr(2+e),n},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.getBigRandom(this.ecparams.n),e=this.ecparams.G.multiply(t),n=e.getX().toBigInteger(),r=e.getY().toBigInteger(),s=this.ecparams.keylen/4,i=("0000000000"+t.toString(16)).slice(-s),o="04"+("0000000000"+n.toString(16)).slice(-s)+("0000000000"+r.toString(16)).slice(-s);return this.setPrivateKeyHex(i),this.setPublicKeyHex(o),{ecprvhex:i,ecpubhex:o}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new C(e,16),r=this.ecparams.n,s=new C(t,16);do{var i=this.getBigRandom(r),o=this.ecparams.G.multiply(i).getX().toBigInteger().mod(r)}while(o.compareTo(C.ZERO)<=0);var l=i.modInverse(r).multiply(s.add(n.multiply(o))).mod(r);return dt.crypto.ECDSA.biRSSigToASN1Sig(o,l)},this.sign=function(t,e){var n=e,r=this.ecparams.n,s=C.fromByteArrayUnsigned(t);do{var i=this.getBigRandom(r),o=this.ecparams.G.multiply(i).getX().toBigInteger().mod(r)}while(o.compareTo(C.ZERO)<=0);var l=i.modInverse(r).multiply(s.add(n.multiply(o))).mod(r);return this.serializeSig(o,l)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,n){var r,s,i,o=dt.crypto.ECDSA.parseSigHex(e);r=o.r,s=o.s,i=ut.decodeFromHex(this.ecparams.curve,n);var l=new C(t,16);return this.verifyRaw(l,r,s,i)},this.verify=function(t,e,n){var r,s,i;if(Bitcoin.Util.isArray(e)){var o=this.parseSig(e);r=o.r,s=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";r=e.r,s=e.s}if(n instanceof ut)i=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";i=ut.decodeFrom(this.ecparams.curve,n)}var l=C.fromByteArrayUnsigned(t);return this.verifyRaw(l,r,s,i)},this.verifyRaw=function(t,e,n,r){var s=this.ecparams.n,i=this.ecparams.G;if(e.compareTo(C.ONE)<0||e.compareTo(s)>=0)return!1;if(n.compareTo(C.ONE)<0||n.compareTo(s)>=0)return!1;var o=n.modInverse(s),l=t.multiply(o).mod(s),a=e.multiply(o).mod(s);return i.multiply(l).add(r.multiply(a)).getX().toBigInteger().mod(s).equals(e)},this.serializeSig=function(t,e){var n=t.toByteArraySigned(),r=e.toByteArraySigned(),s=[];return s.push(2),s.push(n.length),(s=s.concat(n)).push(2),s.push(r.length),(s=s.concat(r)).unshift(s.length),s.unshift(48),s},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:C.fromByteArrayUnsigned(n),s:C.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:C.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:C.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},this.readPKCS5PrvKeyHex=function(t){var e,n,r,s=dt.crypto.ECDSA.getName,i=gt.getVbyList;if(!1===gt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=i(t,0,[2,0],"06"),n=i(t,0,[1],"04");try{r=i(t,0,[3,0],"03").substr(2)}catch(a){}}catch(a){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){var e,n,r,s=dt.crypto.ECDSA.getName,i=gt.getVbyList;if(!1===gt.isASN1HEX(t))throw"not ASN.1 hex string";try{i(t,0,[1,0],"06"),e=i(t,0,[1,1],"06"),n=i(t,0,[2,0,1],"04");try{r=i(t,0,[2,0,2,0],"03").substr(2)}catch(o){}}catch(o){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){var e,n,r=dt.crypto.ECDSA.getName,s=gt.getVbyList;if(!1===gt.isASN1HEX(t))throw"not ASN.1 hex string";try{s(t,0,[0,0],"06"),e=s(t,0,[0,1],"06"),n=s(t,0,[1],"03").substr(2)}catch(a){throw"malformed PKCS#8 ECC public key"}if(this.curveName=r(e),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(t,e){5!==e&&(e=6);var n,r,s=dt.crypto.ECDSA.getName,i=gt.getVbyList;if(!1===gt.isASN1HEX(t))throw"not ASN.1 hex string";try{n=i(t,0,[0,e,0,1],"06"),r=i(t,0,[0,e,1],"03").substr(2)}catch(a){throw"malformed X.509 certificate ECC public key"}if(this.curveName=s(n),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},dt.crypto.ECDSA.parseSigHex=function(t){var e=dt.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new C(e.r,16),s:new C(e.s,16)}},dt.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=gt.getChildIdx,n=gt.getV;if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var r=e(t,0);if(2!=r.length)throw"number of signature ASN.1 sequence elements seem wrong";var s=r[0],i=r[1];if("02"!=t.substr(s,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(i,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(t,s),s:n(t,i)}},dt.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=dt.crypto.ECDSA.parseSigHexInHexRS(t),n=e.r,r=e.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return n+r},dt.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),n=t.substr(t.length/2);return dt.crypto.ECDSA.hexRSSigToASN1Sig(e,n)},dt.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var n=new C(t,16),r=new C(e,16);return dt.crypto.ECDSA.biRSSigToASN1Sig(n,r)},dt.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var n=dt.asn1,r=new n.DERInteger({bigint:t}),s=new n.DERInteger({bigint:e});return new n.DERSequence({array:[r,s]}).getEncodedHex()},dt.crypto.ECDSA.getName=function(t){return"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==dt&&dt||(dt={}),void 0!==dt.crypto&&dt.crypto||(dt.crypto={}),dt.crypto.ECParameterDB=new function(){var t={},e={};function n(t){return new C(t,16)}this.getByName=function(n){var r=n;if(void 0!==e[r]&&(r=e[n]),void 0!==t[r])return t[r];throw"unregistered EC curve name: "+r},this.regist=function(r,s,i,o,l,a,u,c,h,d,p,f){t[r]={};var g=n(i),m=n(o),v=n(l),y=n(a),w=n(u),b=new ct(g,m,v),S=b.decodePointHex("04"+c+h);t[r].name=r,t[r].keylen=s,t[r].curve=b,t[r].G=S,t[r].n=y,t[r].h=w,t[r].oid=p,t[r].info=f;for(var _=0;_<d.length;_++)e[d[_]]=r}},dt.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),dt.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),dt.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),dt.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),dt.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),dt.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),dt.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),dt.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),dt.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),dt.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==dt&&dt||(dt={}),void 0!==dt.crypto&&dt.crypto||(dt.crypto={}),dt.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,e,n,r,s){this.isPrivate=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=s},this.setPrivateHex=function(t,e,n,r,s){var i,o,l,a,u;i=new C(t,16),o=new C(e,16),l=new C(n,16),a="string"==typeof r&&r.length>1?new C(r,16):null,u=new C(s,16),this.setPrivate(i,o,l,a,u)},this.setPublic=function(t,e,n,r){this.isPublic=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=null},this.setPublicHex=function(t,e,n,r){var s,i,o,l;s=new C(t,16),i=new C(e,16),o=new C(n,16),l=new C(r,16),this.setPublic(s,i,o,l)},this.signWithMessageHash=function(t){var e=this.p,n=this.q,r=this.g,s=this.x,i=dt.crypto.Util.getRandomBigIntegerMinToMax(C.ONE.add(C.ONE),n.subtract(C.ONE)),o=new C(t.substr(0,n.bitLength()/4),16),l=r.modPow(i,e).mod(n),a=i.modInverse(n).multiply(o.add(s.multiply(l))).mod(n);return dt.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:l}},{int:{bigint:a}}]})},this.verifyWithMessageHash=function(t,e){var n=this.p,r=this.q,s=this.g,i=this.y,o=this.parseASN1Signature(e),l=o[0],a=o[1],u=new C(t.substr(0,r.bitLength()/4),16);if(C.ZERO.compareTo(l)>0||l.compareTo(r)>0)throw"invalid DSA signature";if(C.ZERO.compareTo(a)>=0||a.compareTo(r)>0)throw"invalid DSA signature";var c=a.modInverse(r),h=u.multiply(c).mod(r),d=l.multiply(c).mod(r);return 0==s.modPow(h,n).multiply(i.modPow(d,n)).mod(n).mod(r).compareTo(l)},this.parseASN1Signature=function(t){try{return[new C(gt.getVbyList(t,0,[0],"02"),16),new C(gt.getVbyList(t,0,[1],"02"),16)]}catch(l){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(t){var e,n,r,s,o,l=gt.getVbyList;if(!1===gt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=l(t,0,[1],"02"),n=l(t,0,[2],"02"),r=l(t,0,[3],"02"),s=l(t,0,[4],"02"),o=l(t,0,[5],"02")}catch(i){throw console.log("EXCEPTION:"+i),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(e,n,r,s,o)},this.readPKCS8PrvKeyHex=function(t){var e,n,r,s,i=gt.getVbyList;if(!1===gt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=i(t,0,[1,1,0],"02"),n=i(t,0,[1,1,1],"02"),r=i(t,0,[1,1,2],"02"),s=i(t,0,[2,0],"02")}catch(o){throw console.log("EXCEPTION:"+o),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(e,n,r,null,s)},this.readPKCS8PubKeyHex=function(t){var e,n,r,s,i=gt.getVbyList;if(!1===gt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=i(t,0,[0,1,0],"02"),n=i(t,0,[0,1,1],"02"),r=i(t,0,[0,1,2],"02"),s=i(t,0,[1,0],"02")}catch(o){throw console.log("EXCEPTION:"+o),"malformed PKCS#8 DSA public key"}this.setPublicHex(e,n,r,s)},this.readCertPubKeyHex=function(t,e){var n,r,s,o;5!==e&&(e=6);var l=gt.getVbyList;if(!1===gt.isASN1HEX(t))throw"not ASN.1 hex string";try{n=l(t,0,[0,e,0,1,0],"02"),r=l(t,0,[0,e,0,1,1],"02"),s=l(t,0,[0,e,0,1,2],"02"),o=l(t,0,[0,e,1,0],"02")}catch(i){throw console.log("EXCEPTION:"+i),"malformed X.509 certificate DSA public key"}this.setPublicHex(n,r,s,o)}};var Kt=function(){var t=function(t,n,r){return e(m.AES,t,n,r)},e=function(t,e,n,r){var s=m.enc.Hex.parse(e),i=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),l={};l.key=i,l.iv=o,l.ciphertext=s;var a=t.decrypt(l,i,{iv:o});return m.enc.Hex.stringify(a)},n=function(t,e,n){return r(m.AES,t,e,n)},r=function(t,e,n,r){var s=m.enc.Hex.parse(e),i=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),l=t.encrypt(s,i,{iv:o}),a=m.enc.Hex.parse(l.toString());return m.enc.Base64.stringify(a)},s={"AES-256-CBC":{proc:t,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,n,r){return e(m.TripleDES,t,n,r)},eproc:function(t,e,n){return r(m.TripleDES,t,e,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,n,r){return e(m.DES,t,n,r)},eproc:function(t,e,n){return r(m.DES,t,e,n)},keylen:8,ivlen:8}},i=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(e.type=r[1]);var s=-1,i=0;-1!=t.indexOf("\r\n\r\n")&&(s=t.indexOf("\r\n\r\n"),i=2),-1!=t.indexOf("\n\n")&&(s=t.indexOf("\n\n"),i=1);var o=t.indexOf("-----END");if(-1!=s&&-1!=o){var l=t.substring(s+2*i,o-i);l=l.replace(/\s+/g,""),e.data=l}return e},o=function(t,e,n){for(var r=n.substring(0,16),i=m.enc.Hex.parse(r),o=m.enc.Utf8.parse(e),l=s[t].keylen+s[t].ivlen,a="",u=null;;){var c=m.algo.MD5.create();if(null!=u&&c.update(u),c.update(o),c.update(i),u=c.finalize(),(a+=m.enc.Hex.stringify(u)).length>=2*l)break}var h={};return h.keyhex=a.substr(0,2*s[t].keylen),h.ivhex=a.substr(2*s[t].keylen,2*s[t].ivlen),h},l=function(t,e,n,r){var i=m.enc.Base64.parse(t),o=m.enc.Hex.stringify(i);return(0,s[e].proc)(o,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(t){return i(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return o(t,e,n)},decryptKeyB64:function(t,e,n,r){return l(t,e,n,r)},getDecryptedKeyHex:function(t,e){var n=i(t),r=n.cipher,s=n.ivsalt,a=n.data,u=o(r,e,s);return l(a,r,u.keyhex,s)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,r,i){var l="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===s[r])throw"KEYUTIL unsupported algorithm: "+r;void 0!==i&&null!=i||(i=function(t){var e=m.lib.WordArray.random(t);return m.enc.Hex.stringify(e)}(s[r].ivlen).toUpperCase());var a=function(t,e,n,r){return(0,s[e].eproc)(t,n,r)}(e,r,o(r,n,i).keyhex,i);return l="-----BEGIN "+t+" PRIVATE KEY-----\r\n",l+="Proc-Type: 4,ENCRYPTED\r\n",l+="DEK-Info: "+r+","+i+"\r\n",l+="\r\n",(l+=a.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=gt.getChildIdx,n=gt.getV,r={},s=e(t,0);if(2!=s.length)throw"malformed format: SEQUENCE(0).items != 2: "+s.length;r.ciphertext=n(t,s[1]);var i=e(t,s[0]);if(2!=i.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+i.length;if("2a864886f70d01050d"!=n(t,i[0]))throw"this only supports pkcs5PBES2";var o=e(t,i[1]);if(2!=i.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+o.length;var l=e(t,o[1]);if(2!=l.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+l.length;if("2a864886f70d0307"!=n(t,l[0]))throw"this only supports TripleDES";r.encryptionSchemeAlg="TripleDES",r.encryptionSchemeIV=n(t,l[1]);var a=e(t,o[0]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+a.length;if("2a864886f70d01050c"!=n(t,a[0]))throw"this only supports pkcs5PBKDF2";var u=e(t,a[1]);if(u.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+u.length;r.pbkdf2Salt=n(t,u[0]);var c=n(t,u[1]);try{r.pbkdf2Iter=parseInt(c,16)}catch(h){throw"malformed format pbkdf2Iter: "+c}return r},getPBKDF2KeyHexFromParam:function(t,e){var n=m.enc.Hex.parse(t.pbkdf2Salt),r=m.PBKDF2(e,n,{keySize:6,iterations:t.pbkdf2Iter});return m.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=Pt(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),s=Kt.getPBKDF2KeyHexFromParam(r,e),i={};i.ciphertext=m.enc.Hex.parse(r.ciphertext);var o=m.enc.Hex.parse(s),l=m.enc.Hex.parse(r.encryptionSchemeIV),a=m.TripleDES.decrypt(i,o,{iv:l});return m.enc.Hex.stringify(a)},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(t){var e=gt,n=e.getChildIdx,r=e.getV,s={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var i=n(t,0);if(3!=i.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(i[1],2))throw"malformed PKCS8 private key(code:003)";var o=n(t,i[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(s.algoid=r(t,o[0]),"06"==t.substr(o[1],2)&&(s.algparam=r(t,o[1])),"04"!=t.substr(i[2],2))throw"malformed PKCS8 private key(code:006)";return s.keyidx=e.getVidx(t,i[2]),s},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=Pt(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e,n=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==n.algoid)e=new ot;else if("2a8648ce380401"==n.algoid)e=new dt.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";e=new dt.crypto.ECDSA}return e.readPKCS8PrvKeyHex(t),e},_getKeyFromPublicPKCS8Hex:function(t){var e,n=gt.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===n)e=new ot;else if("2a8648ce380401"===n)e=new dt.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";e=new dt.crypto.ECDSA}return e.readPKCS8PubKeyHex(t),e},parsePublicRawRSAKeyHex:function(t){var e=gt.getChildIdx,n=gt.getV,r={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var s=e(t,0);if(2!=s.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(s[0],2))throw"malformed RSA key(code:003)";if(r.n=n(t,s[0]),"02"!=t.substr(s[1],2))throw"malformed RSA key(code:004)";return r.e=n(t,s[1]),r},parsePublicPKCS8Hex:function(t){var e=gt,n=e.getChildIdx,r=e.getV,s={algparam:null},i=n(t,0);if(2!=i.length)throw"outer DERSequence shall have 2 elements: "+i.length;var o=i[0];if("30"!=t.substr(o,2))throw"malformed PKCS8 public key(code:001)";var l=n(t,o);if(2!=l.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(l[0],2))throw"malformed PKCS8 public key(code:003)";if(s.algoid=r(t,l[0]),"06"==t.substr(l[1],2)?s.algparam=r(t,l[1]):"30"==t.substr(l[1],2)&&(s.algparam={},s.algparam.p=e.getVbyList(t,l[1],[0],"02"),s.algparam.q=e.getVbyList(t,l[1],[1],"02"),s.algparam.g=e.getVbyList(t,l[1],[2],"02")),"03"!=t.substr(i[1],2))throw"malformed PKCS8 public key(code:004)";return s.key=r(t,i[1]).substr(2),s}}}();Kt.getKey=function(t,e,n){var r,s=(w=gt).getChildIdx,i=w.getVbyList,o=dt.crypto,l=o.ECDSA,a=o.DSA,u=ot,c=Pt,h=Kt;if(void 0!==u&&t instanceof u)return t;if(void 0!==l&&t instanceof l)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new l({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new l({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(D=new u).setPublic(t.n,t.e),D;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(D=new u).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),D;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(D=new u).setPrivate(t.n,t.e,t.d),D;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(D=new a).setPublic(t.p,t.q,t.g,t.y),D;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(D=new a).setPrivate(t.p,t.q,t.g,t.y,t.x),D;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(D=new u).setPublic(Ct(t.n),Ct(t.e)),D;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(D=new u).setPrivateEx(Ct(t.n),Ct(t.e),Ct(t.d),Ct(t.p),Ct(t.q),Ct(t.dp),Ct(t.dq),Ct(t.qi)),D;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(D=new u).setPrivate(Ct(t.n),Ct(t.e),Ct(t.d)),D;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var d=(k=new l({curve:t.crv})).ecparams.keylen/4,p=("0000000000"+Ct(t.x)).slice(-d),f=("0000000000"+Ct(t.y)).slice(-d);return k.setPublicKeyHex(g="04"+p+f),k}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){d=(k=new l({curve:t.crv})).ecparams.keylen/4;var g="04"+(p=("0000000000"+Ct(t.x)).slice(-d))+(f=("0000000000"+Ct(t.y)).slice(-d)),m=("0000000000"+Ct(t.d)).slice(-d);return k.setPublicKeyHex(g),k.setPrivateKeyHex(m),k}if("pkcs5prv"===n){var v,y=t,w=gt;if(9===(v=s(y,0)).length)(D=new u).readPKCS5PrvKeyHex(y);else if(6===v.length)(D=new a).readPKCS5PrvKeyHex(y);else{if(!(v.length>2&&"04"===y.substr(v[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(D=new l).readPKCS5PrvKeyHex(y)}return D}if("pkcs8prv"===n)return h.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===n)return h._getKeyFromPublicPKCS8Hex(t);if("x509pub"===n)return Wt.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return Wt.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var b=Pt(t,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(b)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var S=c(t,"RSA PRIVATE KEY");return h.getKey(S,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var _=i(r=c(t,"DSA PRIVATE KEY"),0,[1],"02"),x=i(r,0,[2],"02"),E=i(r,0,[3],"02"),A=i(r,0,[4],"02"),F=i(r,0,[5],"02");return(D=new a).setPrivate(new C(_,16),new C(x,16),new C(E,16),new C(A,16),new C(F,16)),D}if(-1!=t.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var T=h.getDecryptedKeyHex(t,e),I=new ot;return I.readPKCS5PrvKeyHex(T),I}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var k,D=i(r=h.getDecryptedKeyHex(t,e),0,[1],"04"),P=i(r,0,[2,0],"06"),R=i(r,0,[3,0],"03").substr(2);if(void 0===dt.crypto.OID.oidhex2name[P])throw"undefined OID(hex) in KJUR.crypto.OID: "+P;return(k=new l({curve:dt.crypto.OID.oidhex2name[P]})).setPublicKeyHex(R),k.setPrivateKeyHex(D),k.isPublic=!1,k}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED"))return _=i(r=h.getDecryptedKeyHex(t,e),0,[1],"02"),x=i(r,0,[2],"02"),E=i(r,0,[3],"02"),A=i(r,0,[4],"02"),F=i(r,0,[5],"02"),(D=new a).setPrivate(new C(_,16),new C(x,16),new C(E,16),new C(A,16),new C(F,16)),D;if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(t,e);throw"not supported argument"},Kt.generateKeypair=function(t,e){if("RSA"==t){var n=e;(o=new ot).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new ot,s=o.n.toString(16),i=o.e.toString(16);return r.setPublic(s,i),r.isPrivate=!1,r.isPublic=!0,(l={}).prvKeyObj=o,l.pubKeyObj=r,l}if("EC"==t){var o,l,a=e,u=new dt.crypto.ECDSA({curve:a}).generateKeyPairHex();return(o=new dt.crypto.ECDSA({curve:a})).setPublicKeyHex(u.ecpubhex),o.setPrivateKeyHex(u.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new dt.crypto.ECDSA({curve:a})).setPublicKeyHex(u.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(l={}).prvKeyObj=o,l.pubKeyObj=r,l}throw"unknown algorithm: "+t},Kt.getPEM=function(t,e,n,r,s,i){var o=dt.asn1,l=o.DERObjectIdentifier,a=o.DERInteger,u=o.ASN1Util.newObject,c=dt.crypto,h=c.DSA,d=c.ECDSA,p=ot;function f(t){return u({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function g(t){return u({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function v(t){return u({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==p&&t instanceof p||void 0!==h&&t instanceof h||void 0!==d&&t instanceof d)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return Dt(S=new(0,o.x509.SubjectPublicKeyInfo)(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==p&&t instanceof p&&(void 0===n||null==n)&&1==t.isPrivate)return Dt(S=f(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==d&&t instanceof d&&(void 0===n||null==n)&&1==t.isPrivate){var y=new l({name:t.curveName}).getEncodedHex(),w=g(t).getEncodedHex(),b="";return(b+=Dt(y,"EC PARAMETERS"))+Dt(w,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==h&&t instanceof h&&(void 0===n||null==n)&&1==t.isPrivate)return Dt(S=v(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==p&&t instanceof p&&void 0!==n&&null!=n&&1==t.isPrivate){var S=f(t).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",S,n,r,i)}if("PKCS5PRV"==e&&void 0!==d&&t instanceof d&&void 0!==n&&null!=n&&1==t.isPrivate)return S=g(t).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",S,n,r,i);if("PKCS5PRV"==e&&void 0!==h&&t instanceof h&&void 0!==n&&null!=n&&1==t.isPrivate)return S=v(t).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",S,n,r,i);var _=function(t,e){var n=C(t,e);return new u({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},C=function(t,e){var n=m.lib.WordArray.random(8),r=m.lib.WordArray.random(8),s=m.PBKDF2(e,n,{keySize:6,iterations:100}),i=m.enc.Hex.parse(t),o=m.TripleDES.encrypt(i,s,{iv:r})+"",l={};return l.ciphertext=o,l.pbkdf2Salt=m.enc.Hex.stringify(n),l.pbkdf2Iter=100,l.encryptionSchemeAlg="DES-EDE3-CBC",l.encryptionSchemeIV=m.enc.Hex.stringify(r),l};if("PKCS8PRV"==e&&null!=p&&t instanceof p&&1==t.isPrivate){var x=f(t).getEncodedHex();return S=u({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:x}}]}).getEncodedHex(),void 0===n||null==n?Dt(S,"PRIVATE KEY"):Dt(w=_(S,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==d&&t instanceof d&&1==t.isPrivate)return x=new u({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),S=u({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:x}}]}).getEncodedHex(),void 0===n||null==n?Dt(S,"PRIVATE KEY"):Dt(w=_(S,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==e&&void 0!==h&&t instanceof h&&1==t.isPrivate)return x=new a({bigint:t.x}).getEncodedHex(),S=u({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:x}}]}).getEncodedHex(),void 0===n||null==n?Dt(S,"PRIVATE KEY"):Dt(w=_(S,n),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Kt.getKeyFromCSRPEM=function(t){var e=Pt(t,"CERTIFICATE REQUEST");return Kt.getKeyFromCSRHex(e)},Kt.getKeyFromCSRHex=function(t){var e=Kt.parseCSRHex(t);return Kt.getKey(e.p8pubkeyhex,null,"pkcs8pub")},Kt.parseCSRHex=function(t){var e=gt.getChildIdx,n=gt.getTLV,r={},s=t;if("30"!=s.substr(0,2))throw"malformed CSR(code:001)";var i=e(s,0);if(i.length<1)throw"malformed CSR(code:002)";if("30"!=s.substr(i[0],2))throw"malformed CSR(code:003)";var o=e(s,i[0]);if(o.length<3)throw"malformed CSR(code:004)";return r.p8pubkeyhex=n(s,o[2]),r},Kt.getJWKFromKey=function(t){var e={};if(t instanceof ot&&t.isPrivate)return e.kty="RSA",e.n=_t(t.n.toString(16)),e.e=_t(t.e.toString(16)),e.d=_t(t.d.toString(16)),e.p=_t(t.p.toString(16)),e.q=_t(t.q.toString(16)),e.dp=_t(t.dmp1.toString(16)),e.dq=_t(t.dmq1.toString(16)),e.qi=_t(t.coeff.toString(16)),e;if(t instanceof ot&&t.isPublic)return e.kty="RSA",e.n=_t(t.n.toString(16)),e.e=_t(t.e.toString(16)),e;if(t instanceof dt.crypto.ECDSA&&t.isPrivate){if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=t.getPublicKeyXYHex();return e.kty="EC",e.crv=r,e.x=_t(n.x),e.y=_t(n.y),e.d=_t(t.prvKeyHex),e}if(t instanceof dt.crypto.ECDSA&&t.isPublic){var r;if("P-256"!==(r=t.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;return n=t.getPublicKeyXYHex(),e.kty="EC",e.crv=r,e.x=_t(n.x),e.y=_t(n.y),e}throw"not supported key object"},ot.getPosArrayOfChildrenFromHex=function(t){return gt.getChildIdx(t,0)},ot.getHexValueArrayOfChildrenFromHex=function(t){var e,n=gt.getV,r=n(t,(e=ot.getPosArrayOfChildrenFromHex(t))[0]),s=n(t,e[1]),i=n(t,e[2]),o=n(t,e[3]),l=n(t,e[4]),a=n(t,e[5]),u=n(t,e[6]),c=n(t,e[7]),h=n(t,e[8]);return(e=new Array).push(r,s,i,o,l,a,u,c,h),e},ot.prototype.readPrivateKeyFromPEMString=function(t){var e=Pt(t),n=ot.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},ot.prototype.readPKCS5PrvKeyHex=function(t){var e=ot.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},ot.prototype.readPKCS8PrvKeyHex=function(t){var e,n,r,s,i,o,l,a,u=gt.getVbyList;if(!1===gt.isASN1HEX(t))throw"not ASN.1 hex string";try{e=u(t,0,[2,0,1],"02"),n=u(t,0,[2,0,2],"02"),r=u(t,0,[2,0,3],"02"),s=u(t,0,[2,0,4],"02"),i=u(t,0,[2,0,5],"02"),o=u(t,0,[2,0,6],"02"),l=u(t,0,[2,0,7],"02"),a=u(t,0,[2,0,8],"02")}catch(f){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(e,n,r,s,i,o,l,a)},ot.prototype.readPKCS5PubKeyHex=function(t){var e=gt,n=e.getV;if(!1===e.isASN1HEX(t))throw"keyHex is not ASN.1 hex string";var r=e.getChildIdx(t,0);if(2!==r.length||"02"!==t.substr(r[0],2)||"02"!==t.substr(r[1],2))throw"wrong hex for PKCS#5 public key";var s=n(t,r[0]),i=n(t,r[1]);this.setPublic(s,i)},ot.prototype.readPKCS8PubKeyHex=function(t){var e=gt;if(!1===e.isASN1HEX(t))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==e.getTLVbyList(t,0,[0,0]))throw"not PKCS8 RSA public key";var n=e.getTLVbyList(t,0,[1,0]);this.readPKCS5PubKeyHex(n)},ot.prototype.readCertPubKeyHex=function(t,e){var n,r;(n=new Wt).readCertHex(t),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};var qt=new RegExp("");function $t(t,e){for(var n="",r=e/4-t.length,s=0;s<r;s++)n+="0";return n+t}function zt(t,e,n){for(var r="",s=0;r.length<e;)r+=At(n(Ft(t+String.fromCharCode.apply(String,[(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s])))),s+=1;return r}function Gt(t){for(var e in dt.crypto.Util.DIGESTINFOHEAD){var n=dt.crypto.Util.DIGESTINFOHEAD[e],r=n.length;if(t.substring(0,r)==n)return[e,t.substring(r)]}return[]}function Wt(){var t=gt,e=t.getChildIdx,n=t.getV,r=t.getTLV,s=t.getVbyList,i=t.getTLVbyList,o=t.getIdxbyList,l=t.getVidx,a=t.oidname,u=Wt,h=Pt;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==i(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return s(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return a(s(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return i(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return u.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return i(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return u.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var t=s(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getNotAfter=function(){var t=s(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),decodeURIComponent(t)},this.getPublicKeyHex=function(){return t.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return o(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return o(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return Kt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return a(s(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmName(),n=this.getSignatureValueHex(),r=i(this.hex,0,[0],"30"),s=new dt.crypto.Signature({alg:e});return s.init(t),s.updateHex(r),s.verify(n)},this.parseExt=function(){if(3!==this.version)return-1;var n=o(this.hex,0,[0,7,0],"30"),r=e(this.hex,n);this.aExtInfo=new Array;for(var i=0;i<r.length;i++){var a={critical:!1},u=0;3===e(this.hex,r[i]).length&&(a.critical=!0,u=1),a.oid=t.hextooidstr(s(this.hex,r[i],[0],"06"));var c=o(this.hex,r[i],[1+u]);a.vidx=l(this.hex,c),this.aExtInfo.push(a)}},this.getExtInfo=function(t){var e=this.aExtInfo,n=t;if(t.match(/^[0-9.]+$/)||(n=dt.asn1.x509.OID.name2oid(t)),""!==n)for(var r=0;r<e.length;r++)if(e[r].oid===n)return e[r]},this.getExtBasicConstraints=function(){var t=this.getExtInfo("basicConstraints");if(void 0===t)return t;var e=n(this.hex,t.vidx);if(""===e)return{};if("0101ff"===e)return{cA:!0};if("0101ff02"===e.substr(0,8)){var r=n(e,6);return{cA:!0,pathLen:parseInt(r,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";var e=n(this.hex,t.vidx);if(e.length%2!=0||e.length<=2)throw"malformed key usage value";var r=parseInt(e.substr(0,2)),s=parseInt(e.substr(2),16).toString(2);return s.substr(0,s.length-r)},this.getExtKeyUsageString=function(){for(var t=this.getExtKeyUsageBin(),e=new Array,n=0;n<t.length;n++)"1"==t.substr(n,1)&&e.push(Wt.KEYUSAGE_NAME[n]);return e.join(",")},this.getExtSubjectKeyIdentifier=function(){var t=this.getExtInfo("subjectKeyIdentifier");return void 0===t?t:n(this.hex,t.vidx)},this.getExtAuthorityKeyIdentifier=function(){var t=this.getExtInfo("authorityKeyIdentifier");if(void 0===t)return t;for(var s={},i=r(this.hex,t.vidx),o=e(i,0),l=0;l<o.length;l++)"80"===i.substr(o[l],2)&&(s.kid=n(i,o[l]));return s},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var s=new Array,i=r(this.hex,t.vidx);if(""===i)return s;for(var o=e(i,0),l=0;l<o.length;l++)s.push(a(n(i,o[l])));return s},this.getExtSubjectAltName=function(){for(var t=this.getExtSubjectAltName2(),e=new Array,n=0;n<t.length;n++)"DNS"===t[n][0]&&e.push(t[n][1]);return e},this.getExtSubjectAltName2=function(){var t,s,i,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var l=new Array,a=r(this.hex,o.vidx),u=e(a,0),c=0;c<u.length;c++)i=a.substr(u[c],2),t=n(a,u[c]),"81"===i&&(s=Et(t),l.push(["MAIL",s])),"82"===i&&(s=Et(t),l.push(["DNS",s])),"84"===i&&(s=Wt.hex2dn(t,0),l.push(["DN",s])),"86"===i&&(s=Et(t),l.push(["URI",s])),"87"===i&&(s=Bt(t),l.push(["IP",s]));return l},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var n=new Array,r=e(this.hex,t.vidx),i=0;i<r.length;i++)try{var o=Et(s(this.hex,r[i],[0,0,0],"86"));n.push(o)}catch(l){}return n},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var n={ocsp:[],caissuer:[]},r=e(this.hex,t.vidx),i=0;i<r.length;i++){var o=s(this.hex,r[i],[0],"06"),l=s(this.hex,r[i],[1],"86");"2b06010505073001"===o&&n.ocsp.push(Et(l)),"2b06010505073002"===o&&n.caissuer.push(Et(l))}return n},this.getExtCertificatePolicies=function(){var t=this.getExtInfo("certificatePolicies");if(void 0===t)return t;for(var i=r(this.hex,t.vidx),o=[],l=e(i,0),u=0;u<l.length;u++){var c={},h=e(i,l[u]);if(c.id=a(n(i,h[0])),2===h.length)for(var d=e(i,h[1]),p=0;p<d.length;p++){var f=s(i,d[p],[0],"06");"2b06010505070201"===f?c.cps=Et(s(i,d[p],[1])):"2b06010505070202"===f&&(c.unotice=Et(s(i,d[p],[1,0])))}o.push(c)}return o},this.readCertPEM=function(t){this.readCertHex(h(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{o(this.hex,0,[0,7],"a3"),this.parseExt()}catch(c){}},this.getInfo=function(){var t,e,n;if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+Mt(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+Mt(e.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var r=0;r<n.length;r++){var s=n[r],i=dt.asn1.x509.OID.oid2name(s.oid);""===i&&(i=s.oid);var o="";if(!0===s.critical&&(o="CRITICAL"),t+="  "+i+" "+o+":\n","basicConstraints"===i){var l=this.getExtBasicConstraints();void 0===l.cA?t+="    {}\n":(t+="    cA=true",void 0!==l.pathLen&&(t+=", pathLen="+l.pathLen),t+="\n")}else if("keyUsage"===i)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===i)t+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===i){var a=this.getExtAuthorityKeyIdentifier();void 0!==a.kid&&(t+="    kid="+a.kid+"\n")}else if("extKeyUsage"===i)t+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===i)t+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===i)t+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===i){var u=this.getExtAIAInfo();void 0!==u.ocsp&&(t+="    ocsp: "+u.ocsp.join(",")+"\n"),void 0!==u.caissuer&&(t+="    caissuer: "+u.caissuer.join(",")+"\n")}else if("certificatePolicies"===i)for(var c=this.getExtCertificatePolicies(),h=0;h<c.length;h++)void 0!==c[h].id&&(t+="    policy oid: "+c[h].id+"\n"),void 0!==c[h].cps&&(t+="    cps: "+c[h].cps+"\n")}}return(t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}qt.compile("[^0-9a-f]","gi"),ot.prototype.sign=function(t,e){var n=function(t){return dt.crypto.Util.hashString(t,e)}(t);return this.signWithMessageHash(n,e)},ot.prototype.signWithMessageHash=function(t,e){var n=st(dt.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return $t(this.doPrivate(n).toString(16),this.n.bitLength())},ot.prototype.signPSS=function(t,e,n){var r,s=(r=Ft(t),dt.crypto.Util.hashHex(r,e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(s,e,n)},ot.prototype.signWithMessageHashPSS=function(t,e,n){var r,s=At(t),i=s.length,o=this.n.bitLength()-1,l=Math.ceil(o/8),a=function(t){return dt.crypto.Util.hashHex(t,e)};if(-1===n||void 0===n)n=i;else if(-2===n)n=l-i-2;else if(n<-2)throw"invalid salt length";if(l<i+n+2)throw"data too long";var u="";n>0&&(u=new Array(n),(new rt).nextBytes(u),u=String.fromCharCode.apply(String,u));var c=At(a(Ft("\0\0\0\0\0\0\0\0"+s+u))),h=[];for(r=0;r<l-n-i-2;r+=1)h[r]=0;var d=String.fromCharCode.apply(String,h)+"\x01"+u,p=zt(c,d.length,a),f=[];for(r=0;r<d.length;r+=1)f[r]=d.charCodeAt(r)^p.charCodeAt(r);for(f[0]&=~(65280>>8*l-o&255),r=0;r<i;r++)f.push(c.charCodeAt(r));return f.push(188),$t(this.doPrivate(new C(f)).toString(16),this.n.bitLength())},ot.prototype.verify=function(t,e){var n=st(e=(e=e.replace(qt,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=Gt(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var s=r[0];return r[1]==function(t){return dt.crypto.Util.hashString(t,s)}(t)},ot.prototype.verifyWithMessageHash=function(t,e){var n=st(e=(e=e.replace(qt,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=Gt(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==t},ot.prototype.verifyPSS=function(t,e,n,r){var s,i=(s=Ft(t),dt.crypto.Util.hashHex(s,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(i,e,n,r)},ot.prototype.verifyWithMessageHashPSS=function(t,e,n,r){var s=new C(e,16);if(s.bitLength()>this.n.bitLength())return!1;var i,o=function(t){return dt.crypto.Util.hashHex(t,n)},l=At(t),a=l.length,u=this.n.bitLength()-1,c=Math.ceil(u/8);if(-1===r||void 0===r)r=a;else if(-2===r)r=c-a-2;else if(r<-2)throw"invalid salt length";if(c<a+r+2)throw"data too long";var h=this.doPublic(s).toByteArray();for(i=0;i<h.length;i+=1)h[i]&=255;for(;h.length<c;)h.unshift(0);if(188!==h[c-1])throw"encoded message does not end in 0xbc";var d=(h=String.fromCharCode.apply(String,h)).substr(0,c-a-1),p=h.substr(d.length,a),f=65280>>8*c-u&255;if(0!=(d.charCodeAt(0)&f))throw"bits beyond keysize not zero";var g=zt(p,d.length,o),m=[];for(i=0;i<d.length;i+=1)m[i]=d.charCodeAt(i)^g.charCodeAt(i);m[0]&=~f;var v=c-a-r-2;for(i=0;i<v;i+=1)if(0!==m[i])throw"leftmost octets not zero";if(1!==m[v])throw"0x01 marker not found";return p===At(o(Ft("\0\0\0\0\0\0\0\0"+l+String.fromCharCode.apply(String,m.slice(-r)))))},ot.SALT_LEN_HLEN=-1,ot.SALT_LEN_MAX=-2,ot.SALT_LEN_RECOVER=-2,Wt.hex2dn=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed DN";for(var n=new Array,r=gt.getChildIdx(t,e),s=0;s<r.length;s++)n.push(Wt.hex2rdn(t,r[s]));return"/"+(n=n.map((function(t){return t.replace("/","\\/")}))).join("/")},Wt.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw"malformed RDN";for(var n=new Array,r=gt.getChildIdx(t,e),s=0;s<r.length;s++)n.push(Wt.hex2attrTypeValue(t,r[s]));return(n=n.map((function(t){return t.replace("+","\\+")}))).join("+")},Wt.hex2attrTypeValue=function(t,e){var n=gt,r=n.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed attribute type and value";var s=n.getChildIdx(t,e);2!==s.length||t.substr(s[0],2);var i=r(t,s[0]),o=dt.asn1.ASN1Util.oidHexToInt(i);return dt.asn1.x509.OID.oid2atype(o)+"="+At(r(t,s[1]))},Wt.getPublicKeyFromCertHex=function(t){var e=new Wt;return e.readCertHex(t),e.getPublicKey()},Wt.getPublicKeyFromCertPEM=function(t){var e=new Wt;return e.readCertPEM(t),e.getPublicKey()},Wt.getPublicKeyInfoPropOfCertPEM=function(t){var e,n,r=gt.getVbyList,s={algparam:null};return(e=new Wt).readCertPEM(t),n=e.getPublicKeyHex(),s.keyhex=r(n,0,[1],"03").substr(2),s.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===s.algoid&&(s.algparam=r(n,0,[0,1],"06")),s},Wt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==dt&&dt||(dt={}),void 0!==dt.jws&&dt.jws||(dt.jws={}),dt.jws.JWS=function(){var t=dt.jws.JWS.isSafeJSONString;this.parseJWS=function(e,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var s=r[1],i=r[2],o=r[3],l=s+"."+i;if(this.parsedJWS={},this.parsedJWS.headB64U=s,this.parsedJWS.payloadB64U=i,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=l,!n){var a=Ct(o),u=st(a,16);this.parsedJWS.sigvalH=a,this.parsedJWS.sigvalBI=u}var c=ft(s),h=ft(i);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=h,!t(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},dt.jws.JWS.sign=function(t,e,n,r,s){var i,o,l,a=dt.jws.JWS,u=a.readSafeJSONString,c=a.isSafeJSONString,h=dt.crypto,d=h.Mac,p=h.Signature,f=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(i=f.stringify(o=e)),"string"==typeof e){if(!c(i=e))throw"JWS Head is not safe JSON string: "+i;o=u(i)}if(l=n,"object"==typeof n&&(l=f.stringify(n)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,i=f.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var g=null;if(void 0===a.jwsalg2sigalg[t])throw"unsupported alg name: "+t;g=a.jwsalg2sigalg[t];var m=pt(i)+"."+pt(l),v="";if("Hmac"==g.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var y=new d({alg:g,prov:"cryptojs",pass:r});y.updateString(m),v=y.doFinal()}else{var w;-1!=g.indexOf("withECDSA")?((w=new p({alg:g})).init(r,s),w.updateString(m),hASN1Sig=w.sign(),v=dt.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=g&&((w=new p({alg:g})).init(r,s),w.updateString(m),v=w.sign())}return m+"."+_t(v)},dt.jws.JWS.verify=function(t,e,n){var r,s=dt.jws.JWS,i=s.readSafeJSONString,o=dt.crypto,l=o.ECDSA,a=o.Mac,u=o.Signature;r=ot;var c=t.split(".");if(3!==c.length)return!1;var h,d=c[0]+"."+c[1],p=Ct(c[2]),f=i(ft(c[0])),g=null;if(void 0===f.alg)throw"algorithm not specified in header";if(h=(g=f.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=Kt.getKey(e)),!("RS"!=h&&"PS"!=h||e instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==h&&!(e instanceof l))throw"key shall be a ECDSA obj for ES* algs";var m=null;if(void 0===s.jwsalg2sigalg[f.alg])throw"unsupported alg name: "+g;if("none"==(m=s.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==m.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var v=new a({alg:m,pass:e});return v.updateString(d),p==v.doFinal()}if(-1!=m.indexOf("withECDSA")){var y,w=null;try{w=l.concatSigToASN1Sig(p)}catch(b){return!1}return(y=new u({alg:m})).init(e),y.updateString(d),y.verify(w)}return(y=new u({alg:m})).init(e),y.updateString(d),y.verify(p)},dt.jws.JWS.parse=function(t){var e,n,r=t.split("."),s={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=r[1],3==r.length&&(n=r[2]),s.headerObj=dt.jws.JWS.readSafeJSONString(ft(r[0])),s.payloadObj=dt.jws.JWS.readSafeJSONString(ft(e)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),s.payloadPP=null==s.payloadObj?ft(e):JSON.stringify(s.payloadObj,null,"  "),void 0!==n&&(s.sigHex=Ct(n)),s},dt.jws.JWS.verifyJWT=function(t,e,n){var r=dt.jws,s=r.JWS,i=s.readSafeJSONString,o=s.inArray,l=s.includedArray,a=t.split("."),u=a[0],c=a[1],h=(Ct(a[2]),i(ft(u))),d=i(ft(c));if(void 0===h.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(h.alg,n.alg))return!1;if(void 0!==d.iss&&"object"==typeof n.iss&&!o(d.iss,n.iss))return!1;if(void 0!==d.sub&&"object"==typeof n.sub&&!o(d.sub,n.sub))return!1;if(void 0!==d.aud&&"object"==typeof n.aud)if("string"==typeof d.aud){if(!o(d.aud,n.aud))return!1}else if("object"==typeof d.aud&&!l(d.aud,n.aud))return!1;var p=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(p=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==d.exp&&"number"==typeof d.exp&&d.exp+n.gracePeriod<p||void 0!==d.nbf&&"number"==typeof d.nbf&&p<d.nbf-n.gracePeriod||void 0!==d.iat&&"number"==typeof d.iat&&p<d.iat-n.gracePeriod||void 0!==d.jti&&void 0!==n.jti&&d.jti!==n.jti||!s.verify(t,e,n.alg))},dt.jws.JWS.includedArray=function(t,e){var n=dt.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e))return!1;return!0},dt.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},dt.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},dt.jws.JWS.isSafeJSONString=function(t,e,n){var r=null;try{return"object"!=typeof(r=ht(t))?0:r.constructor===Array?0:(e&&(e[n]=r),1)}catch(o){return 0}},dt.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=ht(t))?null:e.constructor===Array?null:e}catch(o){return null}},dt.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},dt.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var n=Ft(e);return _t(dt.crypto.Util.hashHex(n,"sha256"))},dt.jws.IntDate={},dt.jws.IntDate.get=function(t){var e=dt.jws.IntDate,n=e.getNow,r=e.getZulu;if("now"==t)return n();if("now + 1hour"==t)return n()+3600;if("now + 1day"==t)return n()+86400;if("now + 1month"==t)return n()+2592e3;if("now + 1year"==t)return n()+31536e3;if(t.match(/Z$/))return r(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},dt.jws.IntDate.getZulu=function(t){return Nt(t)},dt.jws.IntDate.getNow=function(){return~~(new Date/1e3)},dt.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},dt.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==dt&&dt||(dt={}),void 0!==dt.jws&&dt.jws||(dt.jws={}),dt.jws.JWSJS=function(){var t=dt.jws.JWS,e=t.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,n,r){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var s=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var i=dt.jws.JWS.sign(t,e,this.sPayload,n,r).split(".");this.aHeader.push(i[0]),this.aSignature.push(i[2])}catch(f){throw this.aHeader.length>s&&this.aHeader.pop(),this.aSignature.length>s&&this.aSignature.pop(),"addSignature failed: "+f}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(2!==n.length)return!1;if(!1===this.verifyNth(e,n[0],n[1]))return!1}return!0},this.verifyNth=function(e,n,r){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var s=this.aHeader[e]+"."+this.sPayload+"."+this.aSignature[e],i=!1;try{i=t.verify(s,n,r)}catch(f){return!1}return i},this.readJWSJS=function(t){if("string"==typeof t){var n=e(t);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.aSignatures=t.signatures}catch(i){throw"malformed JWS-JS JSON object: "+i}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},e.SecureRandom=rt,e.rng_seed_time=Y,e.BigInteger=C,e.RSAKey=ot,e.ECDSA=dt.crypto.ECDSA,e.DSA=dt.crypto.DSA,e.Signature=dt.crypto.Signature,e.MessageDigest=dt.crypto.MessageDigest,e.Mac=dt.crypto.Mac,e.Cipher=dt.crypto.Cipher,e.KEYUTIL=Kt,e.ASN1HEX=gt,e.X509=Wt,e.CryptoJS=m,e.b64tohex=S,e.b64toBA=_,e.stoBA=mt,e.BAtos=vt,e.BAtohex=yt,e.stohex=wt,e.stob64=function(t){return b(wt(t))},e.stob64u=function(t){return bt(b(wt(t)))},e.b64utos=function(t){return vt(_(St(t)))},e.b64tob64u=bt,e.b64utob64=St,e.hex2b64=b,e.hextob64u=_t,e.b64utohex=Ct,e.utf8tob64u=pt,e.b64utoutf8=ft,e.utf8tob64=function(t){return b(Ot(Lt(t)))},e.b64toutf8=function(t){return decodeURIComponent(Ht(S(t)))},e.utf8tohex=xt,e.hextoutf8=Et,e.hextorstr=At,e.rstrtohex=Ft,e.hextob64=Tt,e.hextob64nl=It,e.b64nltohex=kt,e.hextopem=Dt,e.pemtohex=Pt,e.hextoArrayBuffer=function(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),n=new DataView(e),r=0;r<t.length/2;r++)n.setUint8(r,parseInt(t.substr(2*r,2),16));return e},e.ArrayBuffertohex=function(t){for(var e="",n=new DataView(t),r=0;r<t.byteLength;r++)e+=("00"+n.getUint8(r).toString(16)).slice(-2);return e},e.zulutomsec=Rt,e.zulutosec=Nt,e.zulutodate=function(t){return new Date(Rt(t))},e.datetozulu=function(t,e,n){var r,s=t.getUTCFullYear();if(e){if(s<1950||2049<s)throw"not proper year for UTCTime: "+s;r=(""+s).slice(-2)}else r=("000"+s).slice(-4);if(r+=("0"+(t.getUTCMonth()+1)).slice(-2),r+=("0"+t.getUTCDate()).slice(-2),r+=("0"+t.getUTCHours()).slice(-2),r+=("0"+t.getUTCMinutes()).slice(-2),r+=("0"+t.getUTCSeconds()).slice(-2),n){var i=t.getUTCMilliseconds();0!==i&&(r+="."+(i=(i=("00"+i).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},e.uricmptohex=Ot,e.hextouricmp=Ht,e.ipv6tohex=Vt,e.hextoipv6=jt,e.hextoip=Bt,e.iptohex=function(t){var e="malformed IP address";if(!(t=t.toLowerCase(t)).match(/^[0-9.]+$/)){if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return Vt(t);throw e}var n=t.split(".");if(4!==n.length)throw e;var r="";try{for(var s=0;s<4;s++)r+=("0"+parseInt(n[s]).toString(16)).slice(-2);return r}catch(p){throw e}},e.encodeURIComponentAll=Lt,e.newline_toUnix=function(t){return t.replace(/\r\n/gm,"\n")},e.newline_toDos=function(t){return(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},e.hextoposhex=Mt,e.intarystrtohex=Ut,e.strdiffidx=function(t,e){var n=t.length;t.length>e.length&&(n=e.length);for(var r=0;r<n;r++)if(t.charCodeAt(r)!=e.charCodeAt(r))return r;return t.length!=e.length?n:-1},e.KJUR=dt,e.crypto=dt.crypto,e.asn1=dt.asn1,e.jws=dt.jws,e.lang=dt.lang},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let s=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function o(t){setTimeout(()=>{throw t},0)}const l={closed:!0,next(t){},error(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},a=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function u(t){return null!==t&&"object"==typeof t}const c=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:s,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(s))try{s.call(this)}catch(o){e=o instanceof c?d(o.errors):[o]}if(a(i)){let t=-1,n=i.length;for(;++t<n;){const n=i[t];if(u(n))try{n.unsubscribe()}catch(o){e=e||[],o instanceof c?e=e.concat(d(o.errors)):e.push(o)}}}if(e)throw new c(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;(n=new t)._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof c?e.errors:e),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!t){this.destination=l;break}if("object"==typeof t){t instanceof f?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[p](){return this}static create(t,e,n){const r=new f(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends f{constructor(t,e,n,s){let i;super(),this._parentSubscriber=t;let o=this;r(e)?i=e:e&&(i=e.next,n=e.error,s=e.complete,e!==l&&(r((o=Object.create(e)).unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;i.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=i;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return i.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(){}function y(...t){return w(t)}function w(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:v}let b=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,s=function(t,e,n){if(t){if(t instanceof f)return t;if(t[p])return t[p]()}return t||e||n?new f(t,e,n):new f(l)}(t,e,n);if(s.add(r?r.call(s,this.source):this.source||i.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),i.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(t){try{return this._subscribe(t)}catch(e){i.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof f?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=S(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(s){n(s),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:w(t)(this)}toPromise(t){return new(t=S(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function S(t){if(t||(t=i.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const _=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class C extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class x extends f{constructor(t){super(t),this.destination=t}}let E=(()=>{class t extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new x(this)}lift(t){const e=new A(this,this);return e.operator=t,e}next(t){if(this.closed)throw new _;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].next(t)}}error(t){if(this.closed)throw new _;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].error(t);this.observers.length=0}complete(){if(this.closed)throw new _;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new _;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new _;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new C(this,t))}asObservable(){const t=new b;return t.source=this,t}}return t.create=(t,e)=>new A(t,e),t})();class A extends E{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function F(t){return t&&"function"==typeof t.schedule}class T extends f{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const I=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function k(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const D=k(),P=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function R(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const N=t=>{if(t&&"function"==typeof t[m])return(t=>e=>{const n=t[m]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(P(t))return I(t);if(R(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e))(t);if(t&&"function"==typeof t[D])return(t=>e=>{const n=t[D]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function O(t,e,n,r,s=new T(t,n,r)){if(!s.closed)return e instanceof b?e.subscribe(s):N(e)(s)}class H extends f{notifyNext(t,e,n,r,s){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function V(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new j(t,e))}}class j{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new B(t,this.project,this.thisArg))}}class B extends f{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function L(t,e){return new b(n=>{const r=new h;let s=0;return r.add(e.schedule((function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function M(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new b(n=>{const r=new h;return r.add(e.schedule(()=>{const s=t[m]();r.add(s.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(R(t))return function(t,e){return new b(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(P(t))return L(t,e);if(function(t){return t&&"function"==typeof t[D]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new b(n=>{const r=new h;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(e.schedule(()=>{s=t[D](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=s.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof b?t:new b(N(t))}function U(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(U((n,r)=>M(t(n,r)).pipe(V((t,s)=>e(n,t,r,s))),n)):("number"==typeof e&&(n=e),e=>e.lift(new K(t,n)))}class K{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new q(t,this.project,this.concurrent))}}class q extends H{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new T(this,e,n),s=this.destination;s.add(r);const i=O(this,t,void 0,void 0,r);i!==r&&s.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,s){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function $(t){return t}function z(t=Number.POSITIVE_INFINITY){return U($,t)}function G(t,e){return e?L(t,e):new b(I(t))}function W(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return F(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof b?t[0]:z(e)(G(t,n))}function Z(){return function(t){return t.lift(new J(t))}}class J{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new Y(t,n),s=e.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class Y extends f{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Q extends b{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new h).add(this.source.subscribe(new tt(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return Z()(this)}}const X=(()=>{const t=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class tt extends x{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function et(){return new E}const nt="__parameters__";function rt(t,e,n){const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function s(...t){if(this instanceof s)return r.apply(this,t),this;const e=new s(...t);return n.annotation=e,n;function n(t,n,r){const s=t.hasOwnProperty(nt)?t[nt]:Object.defineProperty(t,nt,{value:[]})[nt];for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(e),t}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s}const st=rt("Inject",t=>({token:t})),it=rt("Optional"),ot=rt("Self"),lt=rt("SkipSelf");var at=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function ut(t){for(let e in t)if(t[e]===ut)return e;throw Error("Could not find renamed property on target object.")}function ct(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ht(t){const e=t[dt];return e&&e.token===t?e:null}const dt=ut({ngInjectableDef:ut});function pt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(pt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const ft=ut({__forward_ref__:ut});function gt(t){return t.__forward_ref__=gt,t.toString=function(){return pt(this())},t}function mt(t){const e=t;return"function"==typeof e&&e.hasOwnProperty(ft)&&e.__forward_ref__===gt?e():t}const vt="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,wt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,bt="undefined"!=typeof global&&global,St=vt||bt||yt||wt;class _t{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=ct({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ct=new _t("INJECTOR",-1),xt=new Object,Et="ngTempTokenPath",At="ngTokenPath",Ft=/\n/gm,Tt="\u0275",It="__source",kt=ut({provide:String,useValue:ut});let Dt,Pt=void 0;function Rt(t){const e=Pt;return Pt=t,e}function Nt(t,e=at.Default){if(void 0===Pt)throw new Error("inject() must be called from an injection context");return null===Pt?function(t,e,n){const r=ht(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&at.Optional)return null;throw new Error(`Injector: NOT_FOUND [${pt(t)}]`)}(t,0,e):Pt.get(t,e&at.Optional?null:void 0,e)}function Ot(t,e=at.Default){return(Dt||Nt)(t,e)}class Ht{get(t,e=xt){if(e===xt){const e=new Error(`NullInjectorError: No provider for ${pt(t)}!`);throw e.name="NullInjectorError",e}return e}}function Vt(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Tt?t.substr(2):t;let s=pt(e);if(e instanceof Array)s=e.map(pt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):pt(r)))}s=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${t.replace(Ft,"\n  ")}`}class jt{}class Bt{}function Lt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Mt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Ut=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),Kt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(St))(),qt="ngDebugContext",$t="ngOriginalError",zt="ngErrorLogger";function Gt(t){return t[qt]}function Wt(t){return t[$t]}function Zt(t,...e){t.error(...e)}class Jt{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[zt]||Zt}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Gt(t)?Gt(t):this._findContext(Wt(t)):null}_findOriginalError(t){let e=Wt(t);for(;e&&Wt(e);)e=Wt(e);return e}}let Yt=!0,Qt=!1;function Xt(){return Qt=!0,Yt}class te{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const ee=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ne=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function re(t){return(t=String(t)).match(ee)||t.match(ne)?t:(Xt()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function se(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ie(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const oe=se("area,br,col,hr,img,wbr"),le=se("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ae=se("rp,rt"),ue=ie(ae,le),ce=ie(oe,ie(le,se("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ie(ae,se("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ue),he=se("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),de=se("srcset"),pe=ie(he,de,se("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),se("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fe=se("script,style,template");class ge{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ce.hasOwnProperty(e))return this.sanitizedSomething=!0,!fe.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let s=0;s<n.length;s++){const t=n.item(s),e=t.name,i=e.toLowerCase();if(!pe.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;he[i]&&(o=re(o)),de[i]&&(r=o,o=(r=String(r)).split(",").map(t=>re(t.trim())).join(", ")),this.buf.push(" ",e,'="',ye(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ce.hasOwnProperty(e)&&!oe.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ye(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const me=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ve=/([^\#-~ |!])/g;function ye(t){return t.replace(/&/g,"&amp;").replace(me,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(ve,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let we;function be(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const Se=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class _e{}const Ce=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),xe=/^url\(([^)]+)\)$/,Ee=/([A-Z])/g;function Ae(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}let Fe=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Te(),t})();const Te=(...t)=>{},Ie=new _t("The presence of this token marks an injector as being the root injector."),ke=function(t,e,n){return new Ve(t,e,n)};let De=(()=>{class t{static create(t,e){return Array.isArray(t)?ke(t,e,""):ke(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=xt,t.NULL=new Ht,t.ngInjectableDef=ct({token:t,providedIn:"any",factory:()=>Ot(Ct)}),t.__NG_ELEMENT_ID__=-1,t})();const Pe=function(t){return t},Re=[],Ne=Pe,Oe=function(){return Array.prototype.slice.call(arguments)},He="\u0275";class Ve{constructor(t,e=De.NULL,n=null){this.parent=e,this.source=n;const r=this._records=new Map;r.set(De,{token:De,fn:Pe,deps:Re,value:this,useNew:!1}),r.set(Ct,{token:Ct,fn:Pe,deps:Re,value:this,useNew:!1}),function t(e,n){if(n)if((n=mt(n))instanceof Array)for(let r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Be("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Be("Unexpected provider",n);{let t=mt(n.provide);const r=function(t){const e=function(t){let e=Re;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let r=6,s=mt(n[t]);if(s instanceof Array)for(let t=0,e=s;t<e.length;t++){const n=e[t];n instanceof it||n==it?r|=1:n instanceof lt||n==lt?r&=-3:n instanceof ot||n==ot?r&=-5:s=n instanceof st?n.token:mt(n)}e.push({token:s,options:r})}}else if(t.useExisting)e=[{token:mt(t.useExisting),options:6}];else if(!(n||kt in t))throw Be("'deps' required",t);return e}(t);let n=Pe,r=Re,s=!1,i=mt(t.provide);if(kt in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)s=!0,n=mt(t.useClass);else{if("function"!=typeof i)throw Be("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);s=!0,n=i}return{deps:e,fn:n,useNew:s,value:r}}(n);if(!0===n.multi){let r=e.get(t);if(r){if(r.fn!==Oe)throw je(t)}else e.set(t,r={token:n.provide,deps:[],useNew:!1,fn:Oe,value:Re});r.deps.push({token:t=n,options:6})}const s=e.get(t);if(s&&s.fn==Oe)throw je(t);e.set(t,r)}}}(r,t)}get(t,e,n=at.Default){const r=this._records.get(t);try{return function t(e,n,r,s,i,o){try{return function(e,n,r,s,i,o){let l;if(!n||o&at.SkipSelf)o&at.Self||(l=s.get(e,i,at.Default));else{if((l=n.value)==Ne)throw Error(He+"Circular dependency");if(l===Re){n.value=Ne;let e=void 0,i=n.useNew,o=n.fn,a=n.deps,u=Re;if(a.length){u=[];for(let e=0;e<a.length;e++){const n=a[e],i=n.options,o=2&i?r.get(n.token):void 0;u.push(t(n.token,o,r,o||4&i?s:De.NULL,1&i?null:De.THROW_IF_NOT_FOUND,at.Default))}}n.value=l=i?new o(...u):o.apply(e,u)}}return l}(e,n,r,s,i,o)}catch(l){throw l instanceof Error||(l=new Error(l)),(l[Et]=l[Et]||[]).unshift(e),n&&n.value==Ne&&(n.value=Re),l}}(t,r,this._records,this.parent,e,n)}catch(s){return function(t,e,n,r){const s=t[Et];throw e[It]&&s.unshift(e[It]),t.message=Vt("\n"+t.message,s,"StaticInjectorError",r),t[At]=s,t[Et]=null,t}(s,t,0,this.source)}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(pt(n))),`StaticInjector[${t.join(", ")}]`}}function je(t){return Be("Cannot mix multi providers and regular providers",t)}function Be(t,e){return new Error(Vt(t,e,"StaticInjectorError"))}const Le=new _t("AnalyzeForEntryComponents");let Me=null;function Ue(){if(!Me){const t=St.Symbol;if(t&&t.iterator)Me=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Me=n)}}}return Me}function Ke(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function qe(t,e){const n=ze(t),r=ze(e);if(n&&r)return function(t,e,n){const r=t[Ue()](),s=e[Ue()]();for(;;){const t=r.next(),e=s.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,qe);{const s=t&&("object"==typeof t||"function"==typeof t),i=e&&("object"==typeof e||"function"==typeof e);return!(n||!s||r||!i)||Ke(t,e)}}class $e{constructor(t){this.wrapped=t}static wrap(t){return new $e(t)}static unwrap(t){return $e.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof $e}}function ze(t){return!!Ge(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ue()in t)}function Ge(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function We(t){return!!t&&"function"==typeof t.then}function Ze(t){return!!t&&"function"==typeof t.subscribe}class Je{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}class Ye{}class Qe{}function Xe(t){const e=Error(`No component factory found for ${pt(t)}. Did you add it to @NgModule.entryComponents?`);return e[tn]=t,e}const tn="ngComponent";class en{resolveComponentFactory(t){throw Xe(t)}}let nn=(()=>{class t{}return t.NULL=new en,t})();class rn{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let r=0;r<t.length;r++){const e=t[r];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Xe(t);return new sn(e,this._ngModule)}}class sn extends Qe{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}function on(...t){}let ln=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>an(t),t})();const an=on;class un{}class cn{}const hn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let dn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>pn(),t})();const pn=on;class fn{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const gn=new fn("8.2.14");class mn{constructor(){}supports(t){return ze(t)}create(t){return new yn(t)}}const vn=(t,e)=>e;class yn{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||vn}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const i=!n||e&&e.currentIndex<_n(n,r,s)?e:n,o=_n(i,r,s),l=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(e=e._next,null==i.previousIndex)r++;else{s||(s=[]);const t=o-r,e=l-r;if(t!=e){for(let n=0;n<t;n++){const r=n<s.length?s[n]:s[n]=0,i=r+n;e<=i&&i<t&&(s[n]=r+1)}s[i.previousIndex]=e-t}}o!==l&&t(i,o,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ze(t))throw new Error(`Error trying to diff '${pt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,s=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)r=this._trackByFn(e,n=t[e]),null!==s&&Ke(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,n,r,e)),Ke(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,e),i=!0),s=s._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ue()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==s&&Ke(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,t,r,e)),Ke(s.item,t)||this._addIdentityChange(s,t)):(s=this._mismatch(s,t,r,e),i=!0),s=s._next,e++}),this.length=e;return this._truncate(s),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ke(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ke(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):t=this._addAfter(new wn(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Sn),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class wn{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bn{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ke(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Sn{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new bn,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _n(t,e,n){const r=t.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+e+s}class Cn{constructor(){}supports(t){return t instanceof Map||Ge(t)}create(){return new xn}}class xn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ge(t)))throw new Error(`Error trying to diff '${pt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new En(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Ke(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class En{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let An=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new lt,new it]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.ngInjectableDef=ct({token:t,providedIn:"root",factory:()=>new t([new mn])}),t})(),Fn=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new lt,new it]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.ngInjectableDef=ct({token:t,providedIn:"root",factory:()=>new t([new Cn])}),t})();const Tn=[new Cn],In=new An([new mn]),kn=new Fn(Tn);let Dn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Pn(t,ln),t})();const Pn=on;let Rn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Nn(t,ln),t})();const Nn=on;function On(t,e,n,r){let s=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return r&&(s+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Hn(n,e),n}(s,t)}function Hn(t,e){t[qt]=e,t[zt]=e.logError.bind(e)}function Vn(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function jn(t,e,n){const r=t.state,s=1792&r;return s===e?(t.state=-1793&r|n,t.initIndex=-1,!0):s===n}function Bn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Ln(t,e){return t.nodes[e]}function Mn(t,e){return t.nodes[e]}function Un(t,e){return t.nodes[e]}function Kn(t,e){return t.nodes[e]}function qn(t,e){return t.nodes[e]}const $n={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},zn=()=>{},Gn=new Map;function Wn(t){let e=Gn.get(t);return e||(e=pt(t)+"_"+Gn.size,Gn.set(t,e)),e}function Zn(t,e,n,r){if($e.isWrapped(r)){r=$e.unwrap(r);const s=t.def.nodes[e].bindingIndex+n,i=$e.unwrap(t.oldValues[s]);t.oldValues[s]=new $e(i)}return r}const Jn="$$undefined",Yn="$$empty";function Qn(t){return{id:Jn,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let Xn=0;function tr(t,e,n,r){return!(!(2&t.state)&&Ke(t.oldValues[e.bindingIndex+n],r))}function er(t,e,n,r){return!!tr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function nr(t,e,n,r){const s=t.oldValues[e.bindingIndex+n];if(1&t.state||!qe(s,r)){const i=e.bindings[n].name;throw On($n.createDebugContext(t,e.nodeIndex),`${i}: ${s}`,`${i}: ${r}`,0!=(1&t.state))}}function rr(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function sr(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function ir(t,e,n,r){try{return rr(33554432&t.def.nodes[e].flags?Mn(t,e).componentView:t),$n.handleEvent(t,e,n,r)}catch(s){t.root.errorHandler.handleError(s)}}function or(t){return t.parent?Mn(t.parent,t.parentNodeDef.nodeIndex):null}function lr(t){return t.parent?t.parentNodeDef.parent:null}function ar(t,e){switch(201347067&e.flags){case 1:return Mn(t,e.nodeIndex).renderElement;case 2:return Ln(t,e.nodeIndex).renderText}}function ur(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function cr(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function hr(t){return 1<<t%32}function dr(t){const e={};let n=0;const r={};return t&&t.forEach(([t,s])=>{"number"==typeof t?(e[t]=s,n|=hr(t)):r[t]=s}),{matchedQueries:e,references:r,matchedQueryIds:n}}function pr(t,e){return t.map(t=>{let n,r;return Array.isArray(t)?[r,n]=t:(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,It,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:Wn(n)}})}function fr(t,e,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Ut.Native?Mn(t,n.renderParent.nodeIndex).renderElement:void 0:e}const gr=new WeakMap;function mr(t){let e=gr.get(t);return e||((e=t(()=>zn)).factory=t,gr.set(t,e)),e}function vr(t,e,n,r,s){3===e&&(n=t.renderer.parentNode(ar(t,t.def.lastRenderRootNode))),yr(t,e,0,t.def.nodes.length-1,n,r,s)}function yr(t,e,n,r,s,i,o){for(let l=n;l<=r;l++){const n=t.def.nodes[l];11&n.flags&&br(t,n,e,s,i,o),l+=n.childCount}}function wr(t,e,n,r,s,i){let o=t;for(;o&&!ur(o);)o=o.parent;const l=o.parent,a=lr(o),u=a.nodeIndex+a.childCount;for(let c=a.nodeIndex+1;c<=u;c++){const t=l.def.nodes[c];t.ngContentIndex===e&&br(l,t,n,r,s,i),c+=t.childCount}if(!l.parent){const o=t.root.projectableNodes[e];if(o)for(let e=0;e<o.length;e++)Sr(t,o[e],n,r,s,i)}}function br(t,e,n,r,s,i){if(8&e.flags)wr(t,e.ngContent.index,n,r,s,i);else{const o=ar(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Sr(t,o,n,r,s,i),32&e.bindingFlags&&Sr(Mn(t,e.nodeIndex).componentView,o,n,r,s,i)):Sr(t,o,n,r,s,i),16777216&e.flags){const o=Mn(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<o.length;t++)vr(o[t],n,r,s,i)}1&e.flags&&!e.element.name&&yr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,s,i)}}function Sr(t,e,n,r,s,i){const o=t.renderer;switch(n){case 1:o.appendChild(r,e);break;case 2:o.insertBefore(r,e,s);break;case 3:o.removeChild(r,e);break;case 0:i.push(e)}}const _r=/^:([^:]+):(.+)$/;function Cr(t){if(":"===t[0]){const e=t.match(_r);return[e[1],e[2]]}return["",t]}function xr(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}const Er=new Object,Ar=Wn(De),Fr=Wn(Ct),Tr=Wn(jt);function Ir(t,e,n,r){return n=mt(n),{index:-1,deps:pr(r,pt(e)),flags:t,token:e,value:n}}function kr(t,e,n=De.THROW_IF_NOT_FOUND){const r=Rt(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const o=e.tokenKey;switch(o){case Ar:case Fr:case Tr:return t}const l=t._def.providersByKey[o];let a;if(l){let e=t._providers[l.index];return void 0===e&&(e=t._providers[l.index]=Dr(t,l)),e===Er?void 0:e}if((a=ht(e.token))&&(s=t,null!=(i=a).providedIn&&(function(t,e){return t._def.modules.indexOf(e)>-1}(s,i.providedIn)||"root"===i.providedIn&&s._def.isRoot))){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:a.factory,deps:[],index:n,token:e.token},t._providers[n]=Er,t._providers[n]=Dr(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{Rt(r)}var s,i}function Dr(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const r=n.length;switch(r){case 0:return new e;case 1:return new e(kr(t,n[0]));case 2:return new e(kr(t,n[0]),kr(t,n[1]));case 3:return new e(kr(t,n[0]),kr(t,n[1]),kr(t,n[2]));default:const s=new Array(r);for(let e=0;e<r;e++)s[e]=kr(t,n[e]);return new e(...s)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const r=n.length;switch(r){case 0:return e();case 1:return e(kr(t,n[0]));case 2:return e(kr(t,n[0]),kr(t,n[1]));case 3:return e(kr(t,n[0]),kr(t,n[1]),kr(t,n[2]));default:const s=Array(r);for(let e=0;e<r;e++)s[e]=kr(t,n[e]);return e(...s)}}(t,e.value,e.deps);break;case 2048:n=kr(t,e.deps[0]);break;case 256:n=e.value}return n===Er||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Er:n}function Pr(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const r=n[e];return r.viewContainerParent=null,Mt(n,e),$n.dirtyParentQueries(r),Nr(r),r}function Rr(t,e,n){const r=e?ar(e,e.def.lastRenderRootNode):t.renderElement,s=n.renderer.parentNode(r),i=n.renderer.nextSibling(r);vr(n,2,s,i,void 0)}function Nr(t){vr(t,3,null,null,void 0)}const Or=new Object;function Hr(t,e,n,r,s,i){return new Vr(t,e,n,r,s,i)}class Vr extends Qe{constructor(t,e,n,r,s,i){super(),this.selector=t,this.componentType=e,this._inputs=r,this._outputs=s,this.ngContentSelectors=i,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,r){if(!r)throw new Error("ngModule should be provided");const s=mr(this.viewDefFactory),i=s.nodes[0].element.componentProvider.nodeIndex,o=$n.createRootView(t,e||[],n,s,r,Or),l=Un(o,i).instance;return n&&o.renderer.setAttribute(Mn(o,0).renderElement,"ng-version",gn.full),new jr(o,new Ur(o),l)}}class jr extends Ye{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new ln(Mn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new zr(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function Br(t,e,n){return new Lr(t,e,n)}class Lr{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new ln(this._data.renderElement)}get injector(){return new zr(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=lr(t),t=t.parent;return t?new zr(t,e):new zr(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Pr(this._data,t);$n.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new Ur(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,s){const i=n||this.parentInjector;s||t instanceof sn||(s=i.get(jt));const o=t.create(i,r,void 0,s);return this.insert(o.hostView,e),o}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,r){let s=e.viewContainer._embeddedViews;null==n&&(n=s.length),r.viewContainerParent=t,Lt(s,n,r),function(t,e){const n=or(e);if(!n||n===t||16&e.state)return;e.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,e){if(4&e.flags)return;t.nodeFlags|=4,e.flags|=4;let n=e.parent;for(;n;)n.childFlags|=4,n=n.parent}(e.parent.def,e.parentNodeDef)}(e,r),$n.dirtyParentQueries(r),Rr(e,n>0?s[n-1]:null,r)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,n){const r=t.viewContainer._embeddedViews,s=r[e];Mt(r,e),null==n&&(n=r.length),Lt(r,n,s),$n.dirtyParentQueries(s),Nr(s),Rr(t,n>0?r[n-1]:null,s)}(this._data,n,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Pr(this._data,t);e&&$n.destroyView(e)}detach(t){const e=Pr(this._data,t);return e?new Ur(e):null}}function Mr(t){return new Ur(t)}class Ur{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return vr(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){rr(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{$n.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){$n.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),$n.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Nr(this._view),$n.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function Kr(t,e){return new qr(t,e)}class qr extends Dn{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new Ur($n.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new ln(Mn(this._parentView,this._def.nodeIndex).renderElement)}}function $r(t,e){return new zr(t,e)}class zr{constructor(t,e){this.view=t,this.elDef=e}get(t,e=De.THROW_IF_NOT_FOUND){return $n.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Wn(t)},e)}}function Gr(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=Mn(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return Ln(t,n.nodeIndex).renderText;if(20240&n.flags)return Un(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function Wr(t){return new Zr(t.renderer)}class Zr{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,r]=Cr(e),s=this.delegate.createElement(r,n);return t&&this.delegate.appendChild(t,s),s}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t);for(let s=0;s<e.length;s++)this.delegate.insertBefore(n,e[s],r)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[r,s]=Cr(e);null!=n?this.delegate.setAttribute(t,s,n,r):this.delegate.removeAttribute(t,s,r)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Jr(t,e,n,r){return new Yr(t,e,n,r)}class Yr{constructor(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let r=0;r<e.providers.length;r++){const s=e.providers[r];4096&s.flags||void 0===n[r]&&(n[r]=Dr(t,s))}}(this)}get(t,e=De.THROW_IF_NOT_FOUND,n=at.Default){let r=0;return n&at.SkipSelf?r|=1:n&at.Self&&(r|=4),kr(this,{token:t,tokenKey:Wn(t),flags:r},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(nn)}destroy(){if(this._destroyed)throw new Error(`The ng module ${pt(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,r=new Set;for(let s=0;s<n.providers.length;s++)if(131072&n.providers[s].flags){const e=t._providers[s];if(e&&e!==Er){const t=e.ngOnDestroy;"function"!=typeof t||r.has(e)||(t.apply(e),r.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const Qr=Wn(un),Xr=Wn(dn),ts=Wn(ln),es=Wn(Rn),ns=Wn(Dn),rs=Wn(Fe),ss=Wn(De),is=Wn(Ct);function os(t,e,n,r,s,i,o,l){const a=[];if(o)for(let c in o){const[t,e]=o[c];a[t]={flags:8,name:c,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const u=[];if(l)for(let c in l)u.push({type:1,propName:c,target:null,eventName:l[c]});return us(t,e|=16384,n,r,s,s,i,a,u)}function ls(t,e,n){return us(-1,t|=16,null,0,e,e,n)}function as(t,e,n,r,s){return us(-1,t,e,0,n,r,s)}function us(t,e,n,r,s,i,o,l,a){const{matchedQueries:u,references:c,matchedQueryIds:h}=dr(n);a||(a=[]),l||(l=[]),i=mt(i);const d=pr(o,pt(s));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:r,bindings:l,bindingFlags:xr(l),outputs:a,element:null,provider:{token:s,value:i,deps:d},text:null,query:null,ngContent:null}}function cs(t,e){return fs(t,e)}function hs(t,e){let n=t;for(;n.parent&&!ur(n);)n=n.parent;return gs(n.parent,lr(n),!0,e.provider.value,e.provider.deps)}function ds(t,e){const n=gs(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let r=0;r<e.outputs.length;r++){const s=e.outputs[r],i=n[s.propName];if(!Ze(i))throw new Error(`@Output ${s.propName} not initialized in '${n.constructor.name}'.`);{const n=i.subscribe(ps(t,e.parent.nodeIndex,s.eventName));t.disposables[e.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function ps(t,e,n){return r=>ir(t,e,n,r)}function fs(t,e){const n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return gs(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,s){const i=s.length;switch(i){case 0:return r();case 1:return r(vs(t,e,n,s[0]));case 2:return r(vs(t,e,n,s[0]),vs(t,e,n,s[1]));case 3:return r(vs(t,e,n,s[0]),vs(t,e,n,s[1]),vs(t,e,n,s[2]));default:const o=Array(i);for(let r=0;r<i;r++)o[r]=vs(t,e,n,s[r]);return r(...o)}}(t,e.parent,n,r.value,r.deps);case 2048:return vs(t,e.parent,n,r.deps[0]);case 256:return r.value}}function gs(t,e,n,r,s){const i=s.length;switch(i){case 0:return new r;case 1:return new r(vs(t,e,n,s[0]));case 2:return new r(vs(t,e,n,s[0]),vs(t,e,n,s[1]));case 3:return new r(vs(t,e,n,s[0]),vs(t,e,n,s[1]),vs(t,e,n,s[2]));default:const o=new Array(i);for(let r=0;r<i;r++)o[r]=vs(t,e,n,s[r]);return new r(...o)}}const ms={};function vs(t,e,n,r,s=De.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const i=t;2&r.flags&&(s=null);const o=r.tokenKey;o===rs&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);let l=t;for(;l;){if(e)switch(o){case Qr:return Wr(ys(l,e,n));case Xr:return ys(l,e,n).renderer;case ts:return new ln(Mn(l,e.nodeIndex).renderElement);case es:return Mn(l,e.nodeIndex).viewContainer;case ns:if(e.element.template)return Mn(l,e.nodeIndex).template;break;case rs:return Mr(ys(l,e,n));case ss:case is:return $r(l,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[o];if(t){let e=Un(l,t.nodeIndex);return e||(e={instance:fs(l,t)},l.nodes[t.nodeIndex]=e),e.instance}}n=ur(l),e=lr(l),l=l.parent,4&r.flags&&(l=null)}const a=i.root.injector.get(r.token,ms);return a!==ms||s===ms?a:i.root.ngModule.injector.get(r.token,s)}function ys(t,e,n){let r;if(n)r=Mn(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!ur(r);)r=r.parent;return r}function ws(t,e,n,r,s,i){if(32768&n.flags){const e=Mn(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[r].name]=s,524288&n.flags){i=i||{};const e=$e.unwrap(t.oldValues[n.bindingIndex+r]);i[n.bindings[r].nonMinifiedName]=new Je(e,s,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=s,i}function bs(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let r=0;for(let s=0;s<n.length;s++){const i=n[s];let o=i.parent;for(!o&&i.flags&e&&_s(t,s,i.flags&e,r++),0==(i.childFlags&e)&&(s+=i.childCount);o&&1&o.flags&&s===o.nodeIndex+o.childCount;)o.directChildFlags&e&&(r=Ss(t,o,e,r)),o=o.parent}}function Ss(t,e,n,r){for(let s=e.nodeIndex+1;s<=e.nodeIndex+e.childCount;s++){const e=t.def.nodes[s];e.flags&n&&_s(t,s,e.flags&n,r++),s+=e.childCount}return r}function _s(t,e,n,r){const s=Un(t,e);if(!s)return;const i=s.instance;i&&($n.setCurrentNode(t,e),1048576&n&&Bn(t,512,r)&&i.ngAfterContentInit(),2097152&n&&i.ngAfterContentChecked(),4194304&n&&Bn(t,768,r)&&i.ngAfterViewInit(),8388608&n&&i.ngAfterViewChecked(),131072&n&&i.ngOnDestroy())}const Cs=new _t("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Kt}),xs={},Es=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),As=void 0;var Fs=["en",[["a","p"],["AM","PM"],As],[["AM","PM"],As,As],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],As,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],As,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",As,"{1} 'at' {0}",As],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];const Ts="en-US";let Is=Ts;function ks(t){var e;e="Expected localeId to be defined",null==t&&function(t){throw new Error(`ASSERTION ERROR: ${t}`)}(e),"string"==typeof t&&(Is=t.toLowerCase().replace(/_/g,"-"))}class Ds extends E{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,s=t=>null,i=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(s=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(i=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(s=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(i=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,s,i);return t instanceof h&&t.add(o),o}}function Ps(){return this._results[Ue()]()}class Rs{constructor(){this.dirty=!0,this._results=[],this.changes=new Ds,this.length=0;const t=Ue(),e=Rs.prototype;e[t]||(e[t]=Ps)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?(n===e&&(n=e.slice(0,r)),t(s,n)):n!==e&&n.push(s)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Ns=new _t("Application Initializer");class Os{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();We(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}const Hs=new _t("AppId");function Vs(){return`${js()}${js()}${js()}`}function js(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Bs=new _t("Platform Initializer"),Ls=new _t("Platform ID"),Ms=new _t("appBootstrapListener");class Us{log(t){console.log(t)}warn(t){console.warn(t)}}const Ks=new _t("LocaleId"),qs=!1;function $s(){throw new Error("Runtime compiler is not loaded")}const zs=$s,Gs=$s,Ws=$s,Zs=$s;class Js{constructor(){this.compileModuleSync=zs,this.compileModuleAsync=Gs,this.compileModuleAndAllComponentsSync=Ws,this.compileModuleAndAllComponentsAsync=Zs}clearCache(){}clearCacheFor(t){}getModuleId(t){}}class Ys{}let Qs,Xs;function ti(){const t=St.wtf;return!(!t||!(Qs=t.trace)||(Xs=Qs.events,0))}const ei=ti();function ni(t,e){return null}const ri=ei?function(t,e=null){return Xs.createScope(t,e)}:(t,e)=>ni,si=ei?function(t,e){return Qs.leaveScope(t,e),e}:(t,e)=>e,ii=(()=>Promise.resolve(0))();function oi(t){"undefined"==typeof Zone?ii.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class li{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ds(!1),this.onMicrotaskEmpty=new Ds(!1),this.onStable=new Ds(!1),this.onError=new Ds(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,i,o)=>{try{return hi(e),t.invokeTask(r,s,i,o)}finally{di(e)}},onInvoke:(t,n,r,s,i,o,l)=>{try{return hi(e),t.invoke(r,s,i,o,l)}finally{di(e)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(e.hasPendingMicrotasks=s.microTask,ci(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!li.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(li.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+r,t,ui,ai,ai);try{return s.runTask(i,e,n)}finally{s.cancelTask(i)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function ai(){}const ui={};function ci(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hi(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function di(t){t._nesting--,ci(t)}class pi{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ds,this.onMicrotaskEmpty=new Ds,this.onStable=new Ds,this.onError=new Ds}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}class fi{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{li.assertNotInAngularZone(),oi(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())oi(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}class gi{constructor(){this._applications=new Map,yi.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return yi.findTestabilityInTree(this,t,e)}}class mi{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let vi,yi=new mi,wi=function(t,e,n){return t.get(Ys).createCompiler([e]).compileModuleAsync(n)},bi=function(t){return t instanceof sn};const Si=new _t("AllowMultipleToken");class _i{constructor(t,e){this.name=t,this.token=e}}function Ci(t,e,n=[]){const r=`Platform: ${e}`,s=new _t(r);return(e=[])=>{let i=xi();if(!i||i.injector.get(Si,!1))if(t)t(n.concat(e).concat({provide:s,useValue:!0}));else{const t=n.concat(e).concat({provide:s,useValue:!0});!function(t){if(vi&&!vi.destroyed&&!vi.injector.get(Si,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vi=t.get(Ei);const e=t.get(Bs,null);e&&e.forEach(t=>t())}(De.create({providers:t,name:r}))}return function(t){const e=xi();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(s)}}function xi(){return vi&&!vi.destroyed?vi:null}class Ei{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n="noop"===(s=e?e.ngZone:void 0)?new pi:("zone.js"===s?void 0:s)||new li({enableLongStackTrace:Xt()}),r=[{provide:li,useValue:n}];var s;return n.run(()=>{const e=De.create({providers:r,parent:this.injector,name:t.moduleType.name}),s=t.create(e),i=s.injector.get(Jt,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return qs&&ks(s.injector.get(Ks,Ts)||Ts),s.onDestroy(()=>Ti(this._modules,s)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{i.handleError(t)}})),function(t,e,n){try{const r=n();return We(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(i,n,()=>{const t=s.injector.get(Os);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,e=[]){const n=Ai({},e);return wi(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Fi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${pt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}function Ai(t,e){return Array.isArray(e)?e.reduce(Ai,t):Object.assign({},t,e)}let Fi=(()=>{class t{constructor(t,e,n,r,s,i){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Xt(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new b(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new b(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{li.assertNotInAngularZone(),oi(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{li.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=W(o,l.pipe(t=>Z()(function(t,e){return function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,X);return r.source=e,r.subjectFactory=n,r}}(et)(t))))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Qe?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=bi(n)?null:this._injector.get(jt),s=n.create(De.NULL,[],e||n.selector,r);s.onDestroy(()=>{this._unloadComponent(s)});const i=s.injector.get(fi,null);return i&&s.injector.get(gi).registerApplication(s.location.nativeElement,i),this._loadComponent(s),Xt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=t._tickScope();try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,si(e)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ti(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ms,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Ti(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t._tickScope=ri("ApplicationRef#tick()"),t})();function Ti(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ii{}const ki="#",Di="NgFactory";class Pi{}const Ri={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class Ni{constructor(t,e){this._compiler=t,this._config=e||Ri}load(t){return!qs&&this._compiler instanceof Js?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split(ki);return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Oi(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split(ki),s=Di;return void 0===r&&(r="default",s=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+s]).then(t=>Oi(t,e,r))}}function Oi(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class Hi{constructor(t,e){this.name=t,this.callback=e}}class Vi{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof ji&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class ji extends Vi{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,r){e.childNodes.forEach(e=>{e instanceof ji&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,r){e instanceof ji&&e.childNodes.forEach(e=>{n(e)&&r.push(e),e instanceof ji&&t(e,n,r)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof ji)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const Bi=new Map,Li=function(t){return Bi.get(t)||null};function Mi(t){Bi.set(t.nativeNode,t)}const Ui=Ci(null,"core",[{provide:Ls,useValue:"unknown"},{provide:Ei,deps:[De]},{provide:gi,deps:[]},{provide:Us,deps:[]}]);function Ki(){return In}function qi(){return kn}function $i(t){return t?(qs&&ks(t),t):Ts}function zi(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}class Gi{constructor(t){}}function Wi(t,e,n,r,s,i){t|=1;const{matchedQueries:o,references:l,matchedQueryIds:a}=dr(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:a,references:l,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:i?mr(i):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:s||zn},provider:null,text:null,query:null,ngContent:null}}function Zi(t,e,n,r,s,i,o=[],l,a,u,c,h){u||(u=zn);const{matchedQueries:d,references:p,matchedQueryIds:f}=dr(n);let g=null,m=null;i&&([g,m]=Cr(i)),l=l||[];const v=new Array(l.length);for(let b=0;b<l.length;b++){const[t,e,n]=l[b],[r,s]=Cr(e);let i=void 0,o=void 0;switch(15&t){case 4:o=n;break;case 1:case 8:i=n}v[b]={flags:t,ns:r,name:s,nonMinifiedName:s,securityContext:i,suffix:o}}a=a||[];const y=new Array(a.length);for(let b=0;b<a.length;b++){const[t,e]=a[b];y[b]={type:0,target:t,eventName:e,propName:null}}const w=(o=o||[]).map(([t,e])=>{const[n,r]=Cr(t);return[n,r,e]});return h=function(t){if(t&&t.id===Jn){const e=null!=t.encapsulation&&t.encapsulation!==Ut.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${Xn++}`:Yn}return t&&t.id===Yn&&(t=null),t||null}(h),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:r,childCount:s,bindings:v,bindingFlags:xr(v),outputs:y,element:{ns:g,name:m,attrs:w,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:u||zn},provider:null,text:null,query:null,ngContent:null}}function Ji(t,e,n){const r=n.element,s=t.root.selectorOrNode,i=t.renderer;let o;if(t.parent||!s){o=r.name?i.createElement(r.name,r.ns):i.createComment("");const s=fr(t,e,n);s&&i.appendChild(s,o)}else o=i.selectRootElement(s,!!r.componentRendererType&&r.componentRendererType.encapsulation===Ut.ShadowDom);if(r.attrs)for(let l=0;l<r.attrs.length;l++){const[t,e,n]=r.attrs[l];i.setAttribute(o,e,n,t)}return o}function Yi(t,e,n,r){for(let o=0;o<n.outputs.length;o++){const l=n.outputs[o],a=Qi(t,n.nodeIndex,(i=l.eventName,(s=l.target)?`${s}:${i}`:i));let u=l.target,c=t;"component"===l.target&&(u=null,c=e);const h=c.renderer.listen(u||r,l.eventName,a);t.disposables[n.outputIndex+o]=h}var s,i}function Qi(t,e,n){return r=>ir(t,e,n,r)}function Xi(t,e,n,r){if(!er(t,e,n,r))return!1;const s=e.bindings[n],i=Mn(t,e.nodeIndex),o=i.renderElement,l=s.name;switch(15&s.flags){case 1:!function(t,e,n,r,s,i){const o=e.securityContext;let l=o?t.root.sanitizer.sanitize(o,i):i;l=null!=l?l.toString():null;const a=t.renderer;null!=i?a.setAttribute(n,s,l,r):a.removeAttribute(n,s,r)}(t,s,o,s.ns,l,r);break;case 2:!function(t,e,n,r){const s=t.renderer;r?s.addClass(e,n):s.removeClass(e,n)}(t,o,l,r);break;case 4:!function(t,e,n,r,s){let i=t.root.sanitizer.sanitize(Se.STYLE,s);if(null!=i){i=i.toString();const t=e.suffix;null!=t&&(i+=t)}else i=null;const o=t.renderer;null!=i?o.setStyle(n,r,i):o.removeStyle(n,r)}(t,s,o,l,r);break;case 8:!function(t,e,n,r,s){const i=e.securityContext;let o=i?t.root.sanitizer.sanitize(i,s):s;t.renderer.setProperty(n,r,o)}(33554432&e.flags&&32&s.flags?i.componentView:t,s,o,l,r)}return!0}function to(t,e,n){let r=[];for(let s in n)r.push({propName:s,bindingType:n[s]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:hr(e),bindings:r},ngContent:null}}function eo(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&cr(t);){let n=t.parentNodeDef;t=t.parent;const r=n.nodeIndex+n.childCount;for(let s=0;s<=r;s++){const r=t.def.nodes[s];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&qn(t,s).setDirty(),!(1&r.flags&&s+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(s+=r.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&qn(t,n).setDirty(),n+=e.childCount}}function no(t,e){const n=qn(t,e.nodeIndex);if(!n.dirty)return;let r,s=void 0;if(67108864&e.flags){const n=e.parent.parent;s=ro(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),r=Un(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(s=ro(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(s);const i=e.query.bindings;let o=!1;for(let l=0;l<i.length;l++){const t=i[l];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,o=!0}r[t.propName]=e}o&&n.notifyOnChanges()}function ro(t,e,n,r,s){for(let i=e;i<=n;i++){const e=t.def.nodes[i],n=e.matchedQueries[r.id];if(null!=n&&s.push(so(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=Mn(t,i);if((e.childMatchedQueries&r.filterId)===r.filterId&&(ro(t,i+1,i+e.childCount,r,s),i+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const i=t[e],o=or(i);o&&o===n&&ro(i,0,i.def.nodes.length-1,r,s)}}const o=n.template._projectedViews;if(o)for(let t=0;t<o.length;t++){const e=o[t];ro(e,0,e.def.nodes.length-1,r,s)}}(e.childMatchedQueries&r.filterId)!==r.filterId&&(i+=e.childCount)}return s}function so(t,e,n){if(null!=n)switch(n){case 1:return Mn(t,e.nodeIndex).renderElement;case 0:return new ln(Mn(t,e.nodeIndex).renderElement);case 2:return Mn(t,e.nodeIndex).template;case 3:return Mn(t,e.nodeIndex).viewContainer;case 4:return Un(t,e.nodeIndex).instance}}function io(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function oo(t,e,n){const r=fr(t,e,n);r&&wr(t,n.ngContent.index,1,r,null,void 0)}function lo(t,e){return co(128,t,new Array(e+1))}function ao(t,e){return co(32,t,new Array(e))}function uo(t,e){const n=Object.keys(e),r=n.length,s=new Array(r);for(let i=0;i<r;i++){const t=n[i];s[e[t]]=t}return co(64,t,s)}function co(t,e,n){const r=new Array(n.length);for(let s=0;s<n.length;s++){const t=n[s];r[s]={flags:8,name:t,ns:null,nonMinifiedName:t,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:xr(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function ho(t,e,n){const r=new Array(n.length-1);for(let s=1;s<n.length;s++)r[s-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[s]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function po(t,e,n){let r;const s=t.renderer;r=s.createText(n.text.prefix);const i=fr(t,e,n);return i&&s.appendChild(i,r),{renderText:r}}function fo(t,e){return(null!=t?t.toString():"")+e.suffix}function go(t,e,n,r){let s=0,i=0,o=0,l=0,a=0,u=null,c=null,h=!1,d=!1,p=null;for(let f=0;f<e.length;f++){const t=e[f];if(t.nodeIndex=f,t.parent=u,t.bindingIndex=s,t.outputIndex=i,t.renderParent=c,o|=t.flags,a|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=u?u.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,h=!1,d=!1,t.element.template&&(a|=t.element.template.nodeMatchedQueries)}if(vo(u,t,e.length),s+=t.bindings.length,i+=t.outputs.length,!c&&3&t.flags&&(p=t),20224&t.flags){h||(h=!0,u.element.publicProviders=Object.create(u.element.publicProviders),u.element.allProviders=u.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?u.element.publicProviders[Wn(t.provider.token)]=t:(d||(d=!0,u.element.allProviders=Object.create(u.element.publicProviders)),u.element.allProviders[Wn(t.provider.token)]=t),e&&(u.element.componentProvider=t)}if(u?(u.childFlags|=t.flags,u.directChildFlags|=t.flags,u.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(u.childMatchedQueries|=t.element.template.nodeMatchedQueries)):l|=t.flags,t.childCount>0)u=t,mo(t)||(c=t);else for(;u&&f===u.nodeIndex+u.childCount;){const t=u.parent;t&&(t.childFlags|=u.childFlags,t.childMatchedQueries|=u.childMatchedQueries),c=(u=t)&&mo(u)?u.renderParent:u}}return{factory:null,nodeFlags:o,rootNodeFlags:l,nodeMatchedQueries:a,flags:t,nodes:e,updateDirectives:n||zn,updateRenderer:r||zn,handleEvent:(t,n,r,s)=>e[n].element.handleEvent(t,r,s),bindingCount:s,outputCount:i,lastRenderRootNode:p}}function mo(t){return 0!=(1&t.flags)&&null===t.element.name}function vo(t,e,n){const r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function yo(t,e,n,r){const s=So(t.root,t.renderer,t,e,n);return _o(s,t.component,r),Co(s),s}function wo(t,e,n){const r=So(t,t.renderer,null,null,e);return _o(r,n,n),Co(r),r}function bo(t,e,n,r){const s=e.element.componentRendererType;let i;return i=s?t.root.rendererFactory.createRenderer(r,s):t.root.renderer,So(t.root,i,t,e.element.componentProvider,n)}function So(t,e,n,r,s){const i=new Array(s.nodes.length),o=s.outputCount?new Array(s.outputCount):null;return{def:s,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:i,state:13,root:t,renderer:e,oldValues:new Array(s.bindingCount),disposables:o,initIndex:-1}}function _o(t,e,n){t.component=e,t.context=n}function Co(t){let e;ur(t)&&(e=Mn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,r=t.nodes;for(let s=0;s<n.nodes.length;s++){const i=n.nodes[s];let o;switch($n.setCurrentNode(t,s),201347067&i.flags){case 1:const n=Ji(t,e,i);let l=void 0;if(33554432&i.flags){const e=mr(i.element.componentView);l=$n.createComponentView(t,i,e,n)}Yi(t,l,i,n),o={renderElement:n,componentView:l,viewContainer:null,template:i.element.template?Kr(t,i):void 0},16777216&i.flags&&(o.viewContainer=Br(t,i,o));break;case 2:o=po(t,e,i);break;case 512:case 1024:case 2048:case 256:(o=r[s])||4096&i.flags||(o={instance:cs(t,i)});break;case 16:o={instance:hs(t,i)};break;case 16384:(o=r[s])||(o={instance:ds(t,i)}),32768&i.flags&&_o(Mn(t,i.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new Rs;break;case 8:oo(t,e,i),o=void 0}r[s]=o}Po(t,Do.CreateViewNodes),Ho(t,201326592,268435456,0)}function xo(t){Fo(t),$n.updateDirectives(t,1),Ro(t,Do.CheckNoChanges),$n.updateRenderer(t,1),Po(t,Do.CheckNoChanges),t.state&=-97}function Eo(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,jn(t,0,256),Fo(t),$n.updateDirectives(t,0),Ro(t,Do.CheckAndUpdate),Ho(t,67108864,536870912,0);let e=jn(t,256,512);bs(t,2097152|(e?1048576:0)),$n.updateRenderer(t,0),Po(t,Do.CheckAndUpdate),Ho(t,134217728,536870912,0),bs(t,8388608|((e=jn(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,jn(t,768,1024)}function Ao(t,e,n,r,s,i,o,l,a,u,c,h,d){return 0===n?function(t,e,n,r,s,i,o,l,a,u,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,s,i,o,l,a,u,c,h){const d=e.bindings.length;let p=!1;return d>0&&Xi(t,e,0,n)&&(p=!0),d>1&&Xi(t,e,1,r)&&(p=!0),d>2&&Xi(t,e,2,s)&&(p=!0),d>3&&Xi(t,e,3,i)&&(p=!0),d>4&&Xi(t,e,4,o)&&(p=!0),d>5&&Xi(t,e,5,l)&&(p=!0),d>6&&Xi(t,e,6,a)&&(p=!0),d>7&&Xi(t,e,7,u)&&(p=!0),d>8&&Xi(t,e,8,c)&&(p=!0),d>9&&Xi(t,e,9,h)&&(p=!0),p}(t,e,n,r,s,i,o,l,a,u,c,h);case 2:return function(t,e,n,r,s,i,o,l,a,u,c,h){let d=!1;const p=e.bindings,f=p.length;if(f>0&&er(t,e,0,n)&&(d=!0),f>1&&er(t,e,1,r)&&(d=!0),f>2&&er(t,e,2,s)&&(d=!0),f>3&&er(t,e,3,i)&&(d=!0),f>4&&er(t,e,4,o)&&(d=!0),f>5&&er(t,e,5,l)&&(d=!0),f>6&&er(t,e,6,a)&&(d=!0),f>7&&er(t,e,7,u)&&(d=!0),f>8&&er(t,e,8,c)&&(d=!0),f>9&&er(t,e,9,h)&&(d=!0),d){let d=e.text.prefix;f>0&&(d+=fo(n,p[0])),f>1&&(d+=fo(r,p[1])),f>2&&(d+=fo(s,p[2])),f>3&&(d+=fo(i,p[3])),f>4&&(d+=fo(o,p[4])),f>5&&(d+=fo(l,p[5])),f>6&&(d+=fo(a,p[6])),f>7&&(d+=fo(u,p[7])),f>8&&(d+=fo(c,p[8])),f>9&&(d+=fo(h,p[9]));const g=Ln(t,e.nodeIndex).renderText;t.renderer.setValue(g,d)}return d}(t,e,n,r,s,i,o,l,a,u,c,h);case 16384:return function(t,e,n,r,s,i,o,l,a,u,c,h){const d=Un(t,e.nodeIndex),p=d.instance;let f=!1,g=void 0;const m=e.bindings.length;return m>0&&tr(t,e,0,n)&&(f=!0,g=ws(t,d,e,0,n,g)),m>1&&tr(t,e,1,r)&&(f=!0,g=ws(t,d,e,1,r,g)),m>2&&tr(t,e,2,s)&&(f=!0,g=ws(t,d,e,2,s,g)),m>3&&tr(t,e,3,i)&&(f=!0,g=ws(t,d,e,3,i,g)),m>4&&tr(t,e,4,o)&&(f=!0,g=ws(t,d,e,4,o,g)),m>5&&tr(t,e,5,l)&&(f=!0,g=ws(t,d,e,5,l,g)),m>6&&tr(t,e,6,a)&&(f=!0,g=ws(t,d,e,6,a,g)),m>7&&tr(t,e,7,u)&&(f=!0,g=ws(t,d,e,7,u,g)),m>8&&tr(t,e,8,c)&&(f=!0,g=ws(t,d,e,8,c,g)),m>9&&tr(t,e,9,h)&&(f=!0,g=ws(t,d,e,9,h,g)),g&&p.ngOnChanges(g),65536&e.flags&&Bn(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),f}(t,e,n,r,s,i,o,l,a,u,c,h);case 32:case 64:case 128:return function(t,e,n,r,s,i,o,l,a,u,c,h){const d=e.bindings;let p=!1;const f=d.length;if(f>0&&er(t,e,0,n)&&(p=!0),f>1&&er(t,e,1,r)&&(p=!0),f>2&&er(t,e,2,s)&&(p=!0),f>3&&er(t,e,3,i)&&(p=!0),f>4&&er(t,e,4,o)&&(p=!0),f>5&&er(t,e,5,l)&&(p=!0),f>6&&er(t,e,6,a)&&(p=!0),f>7&&er(t,e,7,u)&&(p=!0),f>8&&er(t,e,8,c)&&(p=!0),f>9&&er(t,e,9,h)&&(p=!0),p){const p=Kn(t,e.nodeIndex);let g;switch(201347067&e.flags){case 32:g=new Array(d.length),f>0&&(g[0]=n),f>1&&(g[1]=r),f>2&&(g[2]=s),f>3&&(g[3]=i),f>4&&(g[4]=o),f>5&&(g[5]=l),f>6&&(g[6]=a),f>7&&(g[7]=u),f>8&&(g[8]=c),f>9&&(g[9]=h);break;case 64:g={},f>0&&(g[d[0].name]=n),f>1&&(g[d[1].name]=r),f>2&&(g[d[2].name]=s),f>3&&(g[d[3].name]=i),f>4&&(g[d[4].name]=o),f>5&&(g[d[5].name]=l),f>6&&(g[d[6].name]=a),f>7&&(g[d[7].name]=u),f>8&&(g[d[8].name]=c),f>9&&(g[d[9].name]=h);break;case 128:const t=n;switch(f){case 1:g=t.transform(n);break;case 2:g=t.transform(r);break;case 3:g=t.transform(r,s);break;case 4:g=t.transform(r,s,i);break;case 5:g=t.transform(r,s,i,o);break;case 6:g=t.transform(r,s,i,o,l);break;case 7:g=t.transform(r,s,i,o,l,a);break;case 8:g=t.transform(r,s,i,o,l,a,u);break;case 9:g=t.transform(r,s,i,o,l,a,u,c);break;case 10:g=t.transform(r,s,i,o,l,a,u,c,h)}}p.value=g}return p}(t,e,n,r,s,i,o,l,a,u,c,h);default:throw"unreachable"}}(t,e,r,s,i,o,l,a,u,c,h,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let r=!1;for(let s=0;s<n.length;s++)Xi(t,e,s,n[s])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){const r=e.bindings;let s=!1;for(let i=0;i<n.length;i++)er(t,e,i,n[i])&&(s=!0);if(s){let s="";for(let t=0;t<n.length;t++)s+=fo(n[t],r[t]);s=e.text.prefix+s;const i=Ln(t,e.nodeIndex).renderText;t.renderer.setValue(i,s)}return s}(t,e,n);case 16384:return function(t,e,n){const r=Un(t,e.nodeIndex),s=r.instance;let i=!1,o=void 0;for(let l=0;l<n.length;l++)tr(t,e,l,n[l])&&(i=!0,o=ws(t,r,e,l,n[l],o));return o&&s.ngOnChanges(o),65536&e.flags&&Bn(t,256,e.nodeIndex)&&s.ngOnInit(),262144&e.flags&&s.ngDoCheck(),i}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const r=e.bindings;let s=!1;for(let i=0;i<n.length;i++)er(t,e,i,n[i])&&(s=!0);if(s){const s=Kn(t,e.nodeIndex);let i;switch(201347067&e.flags){case 32:i=n;break;case 64:i={};for(let s=0;s<n.length;s++)i[r[s].name]=n[s];break;case 128:const t=n[0],e=n.slice(1);i=t.transform(...e)}s.value=i}return s}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Fo(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(4&r.flags){const e=Mn(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const r=e[n];r.state|=32,sr(r,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function To(t,e,n,r,s,i,o,l,a,u,c,h,d){return 0===n?function(t,e,n,r,s,i,o,l,a,u,c,h){const d=e.bindings.length;d>0&&nr(t,e,0,n),d>1&&nr(t,e,1,r),d>2&&nr(t,e,2,s),d>3&&nr(t,e,3,i),d>4&&nr(t,e,4,o),d>5&&nr(t,e,5,l),d>6&&nr(t,e,6,a),d>7&&nr(t,e,7,u),d>8&&nr(t,e,8,c),d>9&&nr(t,e,9,h)}(t,e,r,s,i,o,l,a,u,c,h,d):function(t,e,n){for(let r=0;r<n.length;r++)nr(t,e,r,n[r])}(t,e,r),!1}function Io(t,e){if(qn(t,e.nodeIndex).dirty)throw On($n.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function ko(t){if(!(128&t.state)){if(Ro(t,Do.Destroy),Po(t,Do.Destroy),bs(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=or(t);if(e){const n=e.template._projectedViews;n&&(Mt(n,n.indexOf(t)),$n.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(Mn(t,n).renderElement):2&e.flags?t.renderer.destroyNode(Ln(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&qn(t,n).destroy()}}(t),ur(t)&&t.renderer.destroy(),t.state|=128}}const Do=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function Po(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const s=n.nodes[r];33554432&s.flags?No(Mn(t,r).componentView,e):0==(33554432&s.childFlags)&&(r+=s.childCount)}}function Ro(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const s=n.nodes[r];if(16777216&s.flags){const n=Mn(t,r).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)No(n[t],e)}else 0==(16777216&s.childFlags)&&(r+=s.childCount)}}function No(t,e){const n=t.state;switch(e){case Do.CheckNoChanges:0==(128&n)&&(12==(12&n)?xo(t):64&n&&Oo(t,Do.CheckNoChangesProjectedViews));break;case Do.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?xo(t):64&n&&Oo(t,e));break;case Do.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Eo(t):64&n&&Oo(t,Do.CheckAndUpdateProjectedViews));break;case Do.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Eo(t):64&n&&Oo(t,e));break;case Do.Destroy:ko(t);break;case Do.CreateViewNodes:Co(t)}}function Oo(t,e){Ro(t,e),Po(t,e)}function Ho(t,e,n,r){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const s=t.def.nodes.length;for(let i=0;i<s;i++){const s=t.def.nodes[i];if(s.flags&e&&s.flags&n)switch($n.setCurrentNode(t,s.nodeIndex),r){case 0:no(t,s);break;case 1:Io(t,s)}s.childFlags&e&&s.childFlags&n||(i+=s.childCount)}}let Vo=!1;function jo(t,e,n,r,s,i){const o=s.injector.get(cn);return wo(Lo(t,s,o,e,n),r,i)}function Bo(t,e,n,r,s,i){const o=s.injector.get(cn),l=Lo(t,s,new yl(o),e,n),a=Jo(r);return ml(nl.create,wo,null,[l,a,i])}function Lo(t,e,n,r,s){const i=e.injector.get(_e),o=e.injector.get(Jt),l=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:s,sanitizer:i,rendererFactory:n,renderer:l,errorHandler:o}}function Mo(t,e,n,r){const s=Jo(n);return ml(nl.create,yo,null,[t,e,s,r])}function Uo(t,e,n,r){return n=zo.get(e.element.componentProvider.provider.token)||Jo(n),ml(nl.create,bo,null,[t,e,n,r])}function Ko(t,e,n,r){return Jr(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===qo.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const r=qo.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(t=>{$o.forEach((r,s)=>{ht(s).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const r=t.providers[e];n&&(r.flags|=4096);const s=qo.get(r.token);s&&(r.flags=-3841&r.flags|s.flags,r.deps=pr(s.deps),r.value=s.value)}if($o.size>0){let e=new Set(t.modules);$o.forEach((r,s)=>{if(e.has(ht(s).providedIn)){let e={token:s,flags:r.flags|(n?4096:0),deps:pr(r.deps),value:r.value,index:t.providers.length};t.providers.push(e),t.providersByKey[Wn(s)]=e}})}}(t=t.factory(()=>zn)),t):t}(r))}const qo=new Map,$o=new Map,zo=new Map;function Go(t){let e;qo.set(t.token,t),"function"==typeof t.token&&(e=ht(t.token))&&"function"==typeof e.providedIn&&$o.set(t.token,t)}function Wo(t,e){const n=mr(e.viewDefFactory),r=mr(n.nodes[0].element.componentView);zo.set(t,r)}function Zo(){qo.clear(),$o.clear(),zo.clear()}function Jo(t){if(0===qo.size)return t;const e=function(t){const e=[];let n=null;for(let r=0;r<t.nodes.length;r++){const s=t.nodes[r];1&s.flags&&(n=s),n&&3840&s.flags&&qo.has(s.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>zn);for(let r=0;r<e.length;r++)n(t,e[r]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=qo.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=pr(n.deps),t.value=n.value)}}}}function Yo(t,e,n,r,s,i,o,l,a,u,c,h,d){const p=t.def.nodes[e];return Ao(t,p,n,r,s,i,o,l,a,u,c,h,d),224&p.flags?Kn(t,e).value:void 0}function Qo(t,e,n,r,s,i,o,l,a,u,c,h,d){const p=t.def.nodes[e];return To(t,p,n,r,s,i,o,l,a,u,c,h,d),224&p.flags?Kn(t,e).value:void 0}function Xo(t){return ml(nl.detectChanges,Eo,null,[t])}function tl(t){return ml(nl.checkNoChanges,xo,null,[t])}function el(t){return ml(nl.destroy,ko,null,[t])}const nl=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let rl,sl,il;function ol(t,e){sl=t,il=e}function ll(t,e,n,r){return ol(t,e),ml(nl.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function al(t,e){if(128&t.state)throw Vn(nl[rl]);return ol(t,dl(t,0)),t.def.updateDirectives((function(t,n,r,...s){const i=t.def.nodes[n];return 0===e?cl(t,i,r,s):hl(t,i,r,s),16384&i.flags&&ol(t,dl(t,n)),224&i.flags?Kn(t,i.nodeIndex).value:void 0}),t)}function ul(t,e){if(128&t.state)throw Vn(nl[rl]);return ol(t,pl(t,0)),t.def.updateRenderer((function(t,n,r,...s){const i=t.def.nodes[n];return 0===e?cl(t,i,r,s):hl(t,i,r,s),3&i.flags&&ol(t,pl(t,n)),224&i.flags?Kn(t,i.nodeIndex).value:void 0}),t)}function cl(t,e,n,r){if(Ao(t,e,n,...r)){const o=1===n?r[0]:r;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const r=e.bindings[t],l=o[t];8&r.flags&&(n[(s=r.nonMinifiedName,i=void 0,i=s.replace(/[$@]/g,"_"),`ng-reflect-${s=i.replace(Ee,(...t)=>"-"+t[1].toLowerCase())}`)]=Ae(l))}const r=e.parent,l=Mn(t,r.nodeIndex).renderElement;if(r.element.name)for(let e in n){const r=n[e];null!=r?t.renderer.setAttribute(l,e,r):t.renderer.removeAttribute(l,e)}else t.renderer.setValue(l,`bindings=${JSON.stringify(n,null,2)}`)}}var s,i}function hl(t,e,n,r){To(t,e,n,...r)}function dl(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function pl(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class fl{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,r=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=lr(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return Mn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return $r(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){gl(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&gl(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!ur(t);)t=t.parent;return t.parent?Mn(t.parent,lr(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?ar(this.view,this.nodeDef):ar(this.elView,this.elDef)}logError(t,...e){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const s=function(t,e){let n=-1;for(let r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(n,r);let i=-1;n.factory(()=>++i===s?t.error.bind(t,...e):zn),i<s&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function gl(t,e,n){for(let r in e.references)n[r]=so(t,e,e.references[r])}function ml(t,e,n,r){const s=rl,i=sl,o=il;try{rl=t;const l=e.apply(n,r);return sl=i,il=o,rl=s,l}catch(u){if(Gt(u)||!sl)throw u;throw l=u,a=vl(),l instanceof Error||(l=new Error(l.toString())),Hn(l,a),l}var l,a}function vl(){return sl?new fl(sl,il):null}class yl{constructor(t){this.delegate=t}createRenderer(t,e){return new wl(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class wl{constructor(t){this.delegate=t,this.debugContextFactory=vl,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){const e=Li(t);!function(t){Bi.delete(t.nativeNode)}(e),e instanceof Vi&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){const e=new ji(n,null,r);e.name=t,Mi(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Mi(new Vi(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Mi(new Vi(e,null,n)),e}appendChild(t,e){const n=Li(t),r=Li(e);n&&r&&n instanceof ji&&n.addChild(r),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const r=Li(t),s=Li(e),i=Li(n);r&&s&&r instanceof ji&&r.insertBefore(i,s),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Li(t),r=Li(e);n&&r&&n instanceof ji&&n.removeChild(r),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),r=vl();return r&&Mi(new ji(n,null,r)),n}setAttribute(t,e,n,r){const s=Li(t);s&&s instanceof ji&&(s.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){const r=Li(t);r&&r instanceof ji&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Li(t);n&&n instanceof ji&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Li(t);n&&n instanceof ji&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,r){const s=Li(t);s&&s instanceof ji&&(s.styles[e]=n),this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){const r=Li(t);r&&r instanceof ji&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const r=Li(t);r&&r instanceof ji&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const r=Li(t);r&&r.listeners.push(new Hi(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function bl(t,e,n){return new Sl(t,e,n)}class Sl extends Bt{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(Vo)return;Vo=!0;const t=Xt()?{setCurrentNode:ol,createRootView:Bo,createEmbeddedView:Mo,createComponentView:Uo,createNgModuleRef:Ko,overrideProvider:Go,overrideComponentView:Wo,clearOverrides:Zo,checkAndUpdateView:Xo,checkNoChangesView:tl,destroyView:el,createDebugContext:(t,e)=>new fl(t,e),handleEvent:ll,updateDirectives:al,updateRenderer:ul}:{setCurrentNode:()=>{},createRootView:jo,createEmbeddedView:yo,createComponentView:bo,createNgModuleRef:Jr,overrideProvider:zn,overrideComponentView:zn,clearOverrides:zn,checkAndUpdateView:Eo,checkNoChangesView:xo,destroyView:ko,createDebugContext:(t,e)=>new fl(t,e),handleEvent:(t,e,n,r)=>t.def.handleEvent(t,e,n,r),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?Yo:Qo,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?Yo:Qo,t)};$n.setCurrentNode=t.setCurrentNode,$n.createRootView=t.createRootView,$n.createEmbeddedView=t.createEmbeddedView,$n.createComponentView=t.createComponentView,$n.createNgModuleRef=t.createNgModuleRef,$n.overrideProvider=t.overrideProvider,$n.overrideComponentView=t.overrideComponentView,$n.clearOverrides=t.clearOverrides,$n.checkAndUpdateView=t.checkAndUpdateView,$n.checkNoChangesView=t.checkNoChangesView,$n.destroyView=t.destroyView,$n.resolveDep=vs,$n.createDebugContext=t.createDebugContext,$n.handleEvent=t.handleEvent,$n.updateDirectives=t.updateDirectives,$n.updateRenderer=t.updateRenderer,$n.dirtyParentQueries=eo}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),r={};for(const s in t.providersByKey)r[s]=t.providersByKey[s];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(mr(this._ngModuleDefFactory));return $n.createNgModuleRef(this.moduleType,t||De.NULL,this._bootstrapComponents,e)}}class _l{}class Cl{}let xl=(()=>{class t{constructor(){this.baseUrl="api"}get apiUrl(){return`${this.baseUrl}`}createRawUrl(t){return`${t}`}createApiUrl(t){return`${this.baseUrl}/${t}`}}return t.ngInjectableDef=ct({factory:function(){return new t},token:t,providedIn:"root"}),t})();function El(t){const e=t.prototype.ngOnDestroy;t.prototype.ngOnDestroy=function(){for(const t in this){const e=this[t];e&&"function"==typeof e.unsubscribe&&e.unsubscribe()}e&&"function"==typeof e&&e.apply(this,arguments)}}function Al(t,e){return new b(e?n=>e.schedule(Fl,0,{error:t,subscriber:n}):e=>e.error(t))}function Fl({error:t,subscriber:e}){e.error(t)}function Tl(...t){let e=t[t.length-1];return F(e)?(t.pop(),L(t,e)):G(t)}function Il(t,e){return U(t,e,1)}function kl(t,e){return function(n){return n.lift(new Dl(t,e))}}class Dl{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Pl(t,this.predicate,this.thisArg))}}class Pl extends f{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class Rl{}const Nl=new _t("Location Initialized");class Ol{}const Hl=new _t("appBaseHref");class Vl{constructor(t,e){this._subject=new Ds,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Vl.stripTrailingSlash(jl(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Vl.normalizeQueryParams(e))}normalize(t){return Vl.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,jl(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vl.normalizeQueryParams(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vl.normalizeQueryParams(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}static normalizeQueryParams(t){return t&&"?"!==t[0]?"?"+t:t}static joinWithSlash(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}static stripTrailingSlash(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}function jl(t){return t.replace(/\/index.html$/,"")}class Bl extends Ol{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Vl.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let s=this.prepareExternalUrl(n+Vl.normalizeQueryParams(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){let s=this.prepareExternalUrl(n+Vl.normalizeQueryParams(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class Ll extends Ol{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vl.joinWithSlash(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Vl.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const s=this.prepareExternalUrl(n+Vl.normalizeQueryParams(r));this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){const s=this.prepareExternalUrl(n+Vl.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}const Ml=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),Ul=function(t){return function(t){const e=t.toLowerCase().replace(/_/g,"-");let n=xs[e];if(n)return n;const r=e.split("-")[0];if(n=xs[r])return n;if("en"===r)return Fs;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Es.PluralCase]},Kl=new _t("UseV4Plurals");class ql{}class $l extends ql{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):Ul(e||this.locale)(t)){case Ml.Zero:return"zero";case Ml.One:return"one";case Ml.Two:return"two";case Ml.Few:return"few";case Ml.Many:return"many";default:return"other"}}}function zl(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,s]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class Gl{}class Wl{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}getValue(){return null}setClass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(ze(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${pt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}let Zl=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})();class Jl extends Zl{constructor(t){super(t)}set klass(t){this._delegate.setClass(t)}set ngClass(t){this._delegate.setNgClass(t)}ngDoCheck(){this._delegate.applyChanges()}}class Yl{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class Ql{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Xt()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Yl(null,this._ngForOf,-1,-1),null===r?void 0:r),s=new Xl(t,n);e.push(s)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const s=this._viewContainer.get(n);this._viewContainer.move(s,r);const i=new Xl(t,s);e.push(i)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}class Xl{constructor(t,e){this.record=t,this.view=e}}class ta{constructor(t,e){this._viewContainer=t,this._context=new ea,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){na("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){na("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}class ea{constructor(){this.$implicit=null,this.ngIf=null}}function na(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${pt(e)}'.`)}class ra{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}class sa{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}class ia{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new ra(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}class oa{constructor(t,e,n){n._addDefault(new ra(t,e))}}class la{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){this._shouldRecreateView(t)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}class aa{}const ua=new _t("DocumentToken"),ca="server";let ha=(()=>{class t{}return t.ngInjectableDef=ct({token:t,providedIn:"root",factory:()=>new da(Ot(ua),window,Ot(Jt))}),t})();class da{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}class pa{}class fa{}class ga{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),s=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(s):this.headers.set(r,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ga?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ga;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ga?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let t=this.headers.get(e);if(!t)return;0===(t=t.filter(t=>-1===s.indexOf(t))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ma{encodeKey(t){return va(t)}encodeValue(t){return va(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function va(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class ya{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ma,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[s,i]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(s)||[];o.push(i),n.set(s,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).join("&")}clone(t){const e=new ya({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function wa(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function ba(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Sa(t){return"undefined"!=typeof FormData&&t instanceof FormData}class _a{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.params&&(this.params=s.params)),this.headers||(this.headers=new ga),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new ya,this.urlWithParams=e}serializeBody(){return null===this.body?null:wa(this.body)||ba(this.body)||Sa(this.body)||"string"==typeof this.body?this.body:this.body instanceof ya?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:Sa(this.body)?null:ba(this.body)?this.body.type||null:wa(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ya?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,i=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,a=t.params||this.params;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),l)),t.setParams&&(a=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),a)),new _a(e,n,s,{params:a,headers:l,reportProgress:o,responseType:r,withCredentials:i})}}const Ca=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class xa{constructor(t,e=200,n="OK"){this.headers=t.headers||new ga,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Ea extends xa{constructor(t={}){super(t),this.type=Ca.ResponseHeader}clone(t={}){return new Ea({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Aa extends xa{constructor(t={}){super(t),this.type=Ca.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Aa({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Fa extends xa{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Ta(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}class Ia{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof _a)r=t;else{let s=void 0;s=n.headers instanceof ga?n.headers:new ga(n.headers);let i=void 0;n.params&&(i=n.params instanceof ya?n.params:new ya({fromObject:n.params})),r=new _a(t,e,void 0!==n.body?n.body:null,{headers:s,params:i,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const s=Tl(r).pipe(Il(t=>this.handler.handle(t)));if(t instanceof _a||"events"===n.observe)return s;const i=s.pipe(kl(t=>t instanceof Aa));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return i.pipe(V(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return i.pipe(V(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return i.pipe(V(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return i.pipe(V(t=>t.body))}case"response":return i;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new ya).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Ta(n,e))}post(t,e,n={}){return this.request("POST",t,Ta(n,e))}put(t,e,n={}){return this.request("PUT",t,Ta(n,e))}}class ka{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Da=new _t("HTTP_INTERCEPTORS");class Pa{intercept(t,e){return e.handle(t)}}const Ra=/^\)\]\}',?\n/;class Na{}class Oa{constructor(){}build(){return new XMLHttpRequest}}class Ha{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new b(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let s=null;const i=()=>{if(null!==s)return s;const e=1223===n.status?204:n.status,r=n.statusText||"OK",i=new ga(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return s=new Ea({headers:i,status:e,statusText:r,url:o})},o=()=>{let{headers:r,status:s,statusText:o,url:l}=i(),a=null;204!==s&&(a=void 0===n.response?n.responseText:n.response),0===s&&(s=a?200:0);let u=s>=200&&s<300;if("json"===t.responseType&&"string"==typeof a){const t=a;a=a.replace(Ra,"");try{a=""!==a?JSON.parse(a):null}catch(c){a=t,u&&(u=!1,a={error:c,text:a})}}u?(e.next(new Aa({body:a,headers:r,status:s,statusText:o,url:l||void 0})),e.complete()):e.error(new Fa({error:a,headers:r,status:s,statusText:o,url:l||void 0}))},l=t=>{const{url:r}=i(),s=new Fa({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(s)};let a=!1;const u=r=>{a||(e.next(i()),a=!0);let s={type:Ca.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(s.total=r.total),"text"===t.responseType&&n.responseText&&(s.partialText=n.responseText),e.next(s)},c=t=>{let n={type:Ca.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",l),t.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:Ca.Sent}),()=>{n.removeEventListener("error",l),n.removeEventListener("load",o),t.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.abort()}})}}const Va=new _t("XSRF_COOKIE_NAME"),ja=new _t("XSRF_HEADER_NAME");class Ba{}class La{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=zl(t,this.cookieName),this.lastCookieString=t),this.lastToken}}class Ma{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}class Ua{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Da,[]);this.chain=t.reduceRight((t,e)=>new ka(t,e),this.backend)}return this.chain.handle(t)}}class Ka{static disable(){return{ngModule:Ka,providers:[{provide:Ma,useClass:Pa}]}}static withOptions(t={}){return{ngModule:Ka,providers:[t.cookieName?{provide:Va,useValue:t.cookieName}:[],t.headerName?{provide:ja,useValue:t.headerName}:[]]}}}class qa{}let $a=(()=>{class t{constructor(t,e){this.http=t,this.api=e}get(t,e){const n=this.api.createApiUrl(t);return this.http.get(n,{params:e})}post(t,e){const n=this.api.createApiUrl(t);return this.http.post(n,e)}postFile(t,e,n=!1){const r=this.api.createApiUrl(t),s=new FormData;s.append("file",e);const i=new _a("POST",r,s,{reportProgress:n});return this.http.request(i)}put(t,e){const n=this.api.createApiUrl(t);return this.http.put(n,e)}delete(t){const e=this.api.createApiUrl(t);return this.http.delete(e)}getBlob(t){const e=this.api.createApiUrl(t);return this.http.get(e,{responseType:"blob"})}handleError(t){if(t.error instanceof ErrorEvent)console.error("An error occured:",t.error.message);else{if(400===t.status)return Al({succeeded:!1,errors:t.error[""]});console.error(`Backend returned code ${t.status}: ${t.error.title}`)}return Al("Somehting went wrong. Please try again later.")}}return t.ngInjectableDef=ct({factory:function(){return new t(Ot(Ia),Ot(xl))},token:t,providedIn:"root"}),t})();function za(t,e,n){return function(r){return r.lift(new Ga(t,e,n))}}class Ga{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Wa(t,this.nextOrObserver,this.error,this.complete))}}class Wa extends f{constructor(t,e,n,s){super(t),this._tapNext=v,this._tapError=v,this._tapComplete=v,this._tapError=n||v,this._tapComplete=s||v,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||v,this._tapError=e.error||v,this._tapComplete=e.complete||v)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function Za(t,e,n,r){var s,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(i<3?s(o):i>3?s(e,n,o):s(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function Ja(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{a(r.next(t))}catch(e){i(e)}}function l(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){t.done?s(t.value):new n((function(e){e(t.value)})).then(o,l)}a((r=r.apply(t,e||[])).next())}))}class Ya{call(t,e){return e.subscribe(new Qa(t))}}class Qa extends H{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){let e=t[n],r=O(this,e,e,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}}notifyNext(t,e,n,r,s){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}class Xa extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class tu extends Xa{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(s){n=!0,r=!!s&&s||new Error(s)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let eu=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class nu extends eu{constructor(t,e=eu.now){super(t,()=>nu.delegate&&nu.delegate!==this?nu.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return nu.delegate&&nu.delegate!==this?nu.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const ru=new nu(tu);function su(t){return t instanceof Date&&!isNaN(+t)}const iu=new b(t=>t.complete());function ou(t){return t?function(t){return new b(e=>t.schedule(()=>e.complete()))}(t):iu}let lu=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Tl(this.value);case"E":return Al(this.error);case"C":return ou()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function au(t,e=ru){const n=su(t)?+t-e.now():Math.abs(t);return t=>t.lift(new uu(n,e))}class uu{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new cu(t,this.delay,this.scheduler))}}class cu extends f{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,s=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(s);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(cu.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new hu(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(lu.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(lu.createComplete()),this.unsubscribe()}}class hu{constructor(t,e){this.time=t,this.notification=e}}function du(t,e){return"function"==typeof e?n=>n.pipe(du((n,r)=>M(t(n,r)).pipe(V((t,s)=>e(n,t,r,s))))):e=>e.lift(new pu(t))}class pu{constructor(t){this.project=t}call(t,e){return e.subscribe(new fu(t,this.project))}}class fu extends H{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new T(this,e,n),i=this.destination;i.add(s),this.innerSubscription=O(this,t,void 0,void 0,s),this.innerSubscription!==s&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,s){this.destination.next(e)}}const gu=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),mu=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function vu(t){return e=>0===t?ou():e.lift(new yu(t))}class yu{constructor(t){if(this.total=t,this.total<0)throw new mu}call(t,e){return e.subscribe(new wu(t,this.total))}}class wu extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function bu(t=null){return e=>e.lift(new Su(t))}class Su{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new _u(t,this.defaultValue))}}class _u extends f{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Cu(t=Au){return e=>e.lift(new xu(t))}class xu{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Eu(t,this.errorFactory))}}class Eu extends f{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Au(){return new gu}function Fu(t,e){const n=arguments.length>=2;return r=>r.pipe(t?kl((e,n)=>t(e,n,r)):$,vu(1),n?bu(e):Cu(()=>new gu))}function Tu(t){return function(e){const n=new Iu(t),r=e.lift(n);return n.caught=r}}class Iu{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ku(t,this.selector,this.caught))}}class ku extends H{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new T(this,void 0,void 0);this.add(r);const s=O(this,n,void 0,void 0,r);s!==r&&this.add(s)}}}const Du=(()=>{function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t})();class Pu{constructor(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}call(t,e){return e.subscribe(new Ru(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class Ru extends H{constructor(t,e,n,r,s){super(t),this.absoluteTimeout=e,this.waitFor=n,this.withObservable=r,this.scheduler=s,this.action=null,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(O(t,e))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(Ru.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=null,this.scheduler=null,this.withObservable=null}}var Nu=n("gfpf");class Ou{}class Hu{}function Vu(t){const e=t.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function ju(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}class Bu{}class Lu{validateAtHash(t){return Ja(this,void 0,void 0,(function*(){let e=this.inferHashAlgorithm(t.idTokenHeader),n=yield this.calcHash(t.accessToken,e),r=ju(n.substr(0,n.length/2)),s=t.idTokenClaims.at_hash.replace(/=/g,"");return r!==s&&(console.error("exptected at_hash: "+r),console.error("actual at_hash: "+s)),r===s}))}inferHashAlgorithm(t){let e=t.alg;if(!e.match(/^.S[0-9]{3}$/))throw new Error("Algorithm not supported: "+e);return"sha-"+e.substr(2)}}class Mu{getHashFragmentParams(t){let e=t||window.location.hash;if(0!==(e=decodeURIComponent(e)).indexOf("#"))return{};const n=e.indexOf("?");return e=e.substr(n>-1?n+1:1),this.parseQueryString(e)}parseQueryString(t){const e={};let n,r,s,i,o,l,a;if(null===t)return e;n=t.split("&");for(let u=0;u<n.length;u++)-1===(s=(r=n[u]).indexOf("="))?(i=r,o=null):(i=r.substr(0,s),o=r.substr(s+1)),l=decodeURIComponent(i),a=decodeURIComponent(o),"/"===l.substr(0,1)&&(l=l.substr(1)),e[l]=a;return e}}class Uu{constructor(t){this.type=t}}class Ku extends Uu{constructor(t,e=null){super(t),this.info=e}}class qu extends Uu{constructor(t,e=null){super(t),this.info=e}}class $u extends Uu{constructor(t,e,n=null){super(t),this.reason=e,this.params=n}}class zu{constructor(t){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret=null,this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.openUri=t=>{location.href=t},t&&Object.assign(this,t)}}class Gu{encodeKey(t){return encodeURIComponent(t)}encodeValue(t){return encodeURIComponent(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}class Wu{}class Zu extends zu{constructor(t,e,n,r,s,i,o,l){super(),this.ngZone=t,this.http=e,this.config=s,this.urlHelper=i,this.logger=o,this.crypto=l,this.discoveryDocumentLoaded=!1,this.state="",this.eventsSubject=new E,this.discoveryDocumentLoadedSubject=new E,this.grantTypesSupported=[],this.inImplicitFlow=!1,this.debug("angular-oauth2-oidc v8-beta"),this.discoveryDocumentLoaded$=this.discoveryDocumentLoadedSubject.asObservable(),this.events=this.eventsSubject.asObservable(),r&&(this.tokenValidationHandler=r),s&&this.configure(s);try{n?this.setStorage(n):"undefined"!=typeof sessionStorage&&this.setStorage(sessionStorage)}catch(a){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",a)}this.setupRefreshTimer()}configure(t){Object.assign(this,new zu,t),this.config=Object.assign({},new zu,t),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()}configChanged(){this.setupRefreshTimer()}restartSessionChecksIfStillLoggedIn(){this.hasValidIdToken()&&this.initSessionCheck()}restartRefreshTimerIfStillLoggedIn(){this.setupExpirationTimers()}setupSessionCheck(){this.events.pipe(kl(t=>"token_received"===t.type)).subscribe(t=>{this.initSessionCheck()})}setupAutomaticSilentRefresh(t={},e,n=!0){let r=!0;this.events.pipe(za(t=>{"token_received"===t.type?r=!0:"logout"===t.type&&(r=!1)}),kl(t=>"token_expires"===t.type)).subscribe(s=>{null!=e&&"any"!==e&&s.info!==e||!r||this.refreshInternal(t,n).catch(t=>{this.debug("Automatic silent refresh did not work")})}),this.restartRefreshTimerIfStillLoggedIn()}refreshInternal(t,e){return"code"===this.responseType?this.refreshToken():this.silentRefresh(t,e)}loadDiscoveryDocumentAndTryLogin(t=null){return this.loadDiscoveryDocument().then(e=>this.tryLogin(t))}loadDiscoveryDocumentAndLogin(t=null){return this.loadDiscoveryDocumentAndTryLogin(t).then(t=>!(!this.hasValidIdToken()||!this.hasValidAccessToken())||(this.initImplicitFlow(),!1))}debug(...t){this.showDebugInformation&&this.logger.debug.apply(console,t)}validateUrlFromDiscoveryDocument(t){const e=[],n=this.validateUrlForHttps(t),r=this.validateUrlAgainstIssuer(t);return n||e.push("https for all urls required. Also for urls received by discovery."),r||e.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),e}validateUrlForHttps(t){if(!t)return!0;const e=t.toLowerCase();return!1===this.requireHttps||!(!e.match(/^http:\/\/localhost($|[:\/])/)&&!e.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps)||e.startsWith("https://")}validateUrlAgainstIssuer(t){return!this.strictDiscoveryDocumentValidation||!t||t.toLowerCase().startsWith(this.issuer.toLowerCase())}setupRefreshTimer(){"undefined"!=typeof window?(this.hasValidIdToken()&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.events.pipe(kl(t=>"token_received"===t.type)).subscribe(t=>{this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()})):this.debug("timer not supported on this plattform")}setupExpirationTimers(){const t=this.getIdTokenExpiration()||Number.MAX_VALUE,e=(this.getAccessTokenExpiration()||Number.MAX_VALUE)<=t;this.hasValidAccessToken()&&e&&this.setupAccessTokenTimer(),this.hasValidIdToken()&&!e&&this.setupIdTokenTimer()}setupAccessTokenTimer(){const t=this.getAccessTokenExpiration(),e=this.getAccessTokenStoredAt(),n=this.calcTimeout(e,t);this.ngZone.runOutsideAngular(()=>{this.accessTokenTimeoutSubscription=Tl(new qu("token_expires","access_token")).pipe(au(n)).subscribe(t=>{this.ngZone.run(()=>{this.eventsSubject.next(t)})})})}setupIdTokenTimer(){const t=this.getIdTokenExpiration(),e=this.getIdTokenStoredAt(),n=this.calcTimeout(e,t);this.ngZone.runOutsideAngular(()=>{this.idTokenTimeoutSubscription=Tl(new qu("token_expires","id_token")).pipe(au(n)).subscribe(t=>{this.ngZone.run(()=>{this.eventsSubject.next(t)})})})}clearAccessTokenTimer(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()}clearIdTokenTimer(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()}calcTimeout(t,e){const n=Date.now();return Math.max(0,(e-t)*this.timeoutFactor-(n-t))}setStorage(t){this._storage=t,this.configChanged()}loadDiscoveryDocument(t=null){return new Promise((e,n)=>{t||((t=this.issuer||"").endsWith("/")||(t+="/"),t+=".well-known/openid-configuration"),this.validateUrlForHttps(t)?this.http.get(t).subscribe(t=>{if(!this.validateDiscoveryDocument(t))return this.eventsSubject.next(new $u("discovery_document_validation_error",null)),void n("discovery_document_validation_error");this.loginUrl=t.authorization_endpoint,this.logoutUrl=t.end_session_endpoint||this.logoutUrl,this.grantTypesSupported=t.grant_types_supported,this.issuer=t.issuer,this.tokenEndpoint=t.token_endpoint,this.userinfoEndpoint=t.userinfo_endpoint,this.jwksUri=t.jwks_uri,this.sessionCheckIFrameUrl=t.check_session_iframe||this.sessionCheckIFrameUrl,this.discoveryDocumentLoaded=!0,this.discoveryDocumentLoadedSubject.next(t),this.sessionChecksEnabled&&this.restartSessionChecksIfStillLoggedIn(),this.loadJwks().then(n=>{const r=new Ku("discovery_document_loaded",{discoveryDocument:t,jwks:n});this.eventsSubject.next(r),e(r)}).catch(t=>{this.eventsSubject.next(new $u("discovery_document_load_error",t)),n(t)})},t=>{this.logger.error("error loading discovery document",t),this.eventsSubject.next(new $u("discovery_document_load_error",t)),n(t)}):n("issuer must use https, or config value for property requireHttps must allow http")})}loadJwks(){return new Promise((t,e)=>{this.jwksUri?this.http.get(this.jwksUri).subscribe(e=>{this.jwks=e,this.eventsSubject.next(new Ku("discovery_document_loaded")),t(e)},t=>{this.logger.error("error loading jwks",t),this.eventsSubject.next(new $u("jwks_load_error",t)),e(t)}):t(null)})}validateDiscoveryDocument(t){let e;return this.skipIssuerCheck||t.issuer===this.issuer?(e=this.validateUrlFromDiscoveryDocument(t.authorization_endpoint)).length>0?(this.logger.error("error validating authorization_endpoint in discovery document",e),!1):(e=this.validateUrlFromDiscoveryDocument(t.end_session_endpoint)).length>0?(this.logger.error("error validating end_session_endpoint in discovery document",e),!1):((e=this.validateUrlFromDiscoveryDocument(t.token_endpoint)).length>0&&this.logger.error("error validating token_endpoint in discovery document",e),(e=this.validateUrlFromDiscoveryDocument(t.userinfo_endpoint)).length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",e),!1):(e=this.validateUrlFromDiscoveryDocument(t.jwks_uri)).length>0?(this.logger.error("error validating jwks_uri in discovery document",e),!1):(this.sessionChecksEnabled&&!t.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0)):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+t.issuer),!1)}fetchTokenUsingPasswordFlowAndLoadUserProfile(t,e,n=new ga){return this.fetchTokenUsingPasswordFlow(t,e,n).then(()=>this.loadUserProfile())}loadUserProfile(){if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use https, or config value for property requireHttps must allow http");return new Promise((t,e)=>{const n=(new ga).set("Authorization","Bearer "+this.getAccessToken());this.http.get(this.userinfoEndpoint,{headers:n}).subscribe(n=>{this.debug("userinfo received",n);const r=this.getIdentityClaims()||{};this.skipSubjectCheck||!this.oidc||r.sub&&n.sub===r.sub?(n=Object.assign({},r,n),this._storage.setItem("id_token_claims_obj",JSON.stringify(n)),this.eventsSubject.next(new Ku("user_profile_loaded")),t(n)):e("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false")},t=>{this.logger.error("error loading user info",t),this.eventsSubject.next(new $u("user_profile_load_error",t)),e(t)})})}fetchTokenUsingPasswordFlow(t,e,n=new ga){if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");return new Promise((r,s)=>{let i=new ya({encoder:new Gu}).set("grant_type","password").set("scope",this.scope).set("username",t).set("password",e);if(this.useHttpBasicAuth){const t=btoa(`${this.clientId}:${this.dummyClientSecret}`);n=n.set("Authorization","Basic "+t)}if(this.useHttpBasicAuth||(i=i.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(i=i.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const t of Object.getOwnPropertyNames(this.customQueryParams))i=i.set(t,this.customQueryParams[t]);n=n.set("Content-Type","application/x-www-form-urlencoded"),this.http.post(this.tokenEndpoint,i,{headers:n}).subscribe(t=>{this.debug("tokenResponse",t),this.storeAccessTokenResponse(t.access_token,t.refresh_token,t.expires_in,t.scope),this.eventsSubject.next(new Ku("token_received")),r(t)},t=>{this.logger.error("Error performing password flow",t),this.eventsSubject.next(new $u("token_error",t)),s(t)})})}refreshToken(){if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");return new Promise((t,e)=>{let n=(new ya).set("grant_type","refresh_token").set("client_id",this.clientId).set("scope",this.scope).set("refresh_token",this._storage.getItem("refresh_token"));if(this.dummyClientSecret&&(n=n.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const s of Object.getOwnPropertyNames(this.customQueryParams))n=n.set(s,this.customQueryParams[s]);const r=(new ga).set("Content-Type","application/x-www-form-urlencoded");this.http.post(this.tokenEndpoint,n,{headers:r}).pipe(du(t=>t.id_token?M(this.processIdToken(t.id_token,t.access_token,!0)).pipe(za(t=>this.storeIdToken(t)),V(e=>t)):Tl(t))).subscribe(e=>{this.debug("refresh tokenResponse",e),this.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in,e.scope),this.eventsSubject.next(new Ku("token_received")),this.eventsSubject.next(new Ku("token_refreshed")),t(e)},t=>{this.logger.error("Error performing password flow",t),this.eventsSubject.next(new $u("token_refresh_error",t)),e(t)})})}removeSilentRefreshEventListener(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)}setupSilentRefreshEventListener(){this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=t=>{const e=this.processMessageEventMessage(t);this.tryLogin({customHashFragment:e,preventClearHashAfterLogin:!0,onLoginError:t=>{this.eventsSubject.next(new $u("silent_refresh_error",t))},onTokenReceived:()=>{this.eventsSubject.next(new Ku("silently_refreshed"))}}).catch(t=>this.debug("tryLogin during silent refresh failed",t))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)}silentRefresh(t={},e=!0){const n=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(t.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("tokenEndpoint must use https, or config value for property requireHttps must allow http");if("undefined"==typeof document)throw new Error("silent refresh is not supported on this platform");const r=document.getElementById(this.silentRefreshIFrameName);r&&document.body.removeChild(r),this.silentRefreshSubject=n.sub;const s=document.createElement("iframe");return s.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,e,t).then(t=>{s.setAttribute("src",t),this.silentRefreshShowIFrame||(s.style.display="none"),document.body.appendChild(s)}),function(...t){if(1===t.length){if(!a(t[0]))return t[0];t=t[0]}return G(t,void 0).lift(new Ya)}([this.events.pipe(kl(t=>t instanceof $u),Fu()),this.events.pipe(kl(t=>"silently_refreshed"===t.type),Fu()),Tl(new $u("silent_refresh_timeout",null)).pipe(au(this.silentRefreshTimeout))]).pipe(za(t=>{"silent_refresh_timeout"===t.type&&this.eventsSubject.next(t)}),V(t=>{if(t instanceof $u)throw t;return t})).toPromise()}initImplicitFlowInPopup(t){return t=t||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then(e=>new Promise((n,r)=>{let s=window.open(e,"_blank",this.calculatePopupFeatures(t));const i=()=>{window.removeEventListener("message",o),s.close(),s=null},o=t=>{const e=this.processMessageEventMessage(t);this.tryLogin({customHashFragment:e,preventClearHashAfterLogin:!0}).then(()=>{i(),n()},t=>{i(),r(t)})};window.addEventListener("message",o)}))}calculatePopupFeatures(t){const e=t.height||470,n=t.width||500,r=screen.width/2-n/2;return`location=no,toolbar=no,width=${n},height=${e},top=${screen.height/2-e/2},left=${r}`}processMessageEventMessage(t){let e="#";if(this.silentRefreshMessagePrefix&&(e+=this.silentRefreshMessagePrefix),!t||!t.data||"string"!=typeof t.data)return;const n=t.data;return n.startsWith(e)?"#"+n.substr(e.length):void 0}canPerformSessionCheck(){return!!this.sessionChecksEnabled&&(this.sessionCheckIFrameUrl?this.getSessionState()?"undefined"!=typeof document:(console.warn("sessionChecksEnabled is activated but there is no session_state"),!1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),!1))}setupSessionCheckEventListener(){this.removeSessionCheckEventListener(),this.sessionCheckEventListener=t=>{const e=t.origin.toLowerCase(),n=this.issuer.toLowerCase();switch(this.debug("sessionCheckEventListener"),n.startsWith(e)||this.debug("sessionCheckEventListener","wrong origin",e,"expected",n),t.data){case"unchanged":this.handleSessionUnchanged();break;case"changed":this.ngZone.run(()=>{this.handleSessionChange()});break;case"error":this.ngZone.run(()=>{this.handleSessionError()})}this.debug("got info from session check inframe",t)},this.ngZone.runOutsideAngular(()=>{window.addEventListener("message",this.sessionCheckEventListener)})}handleSessionUnchanged(){this.debug("session check","session unchanged")}handleSessionChange(){this.eventsSubject.next(new qu("session_changed")),this.stopSessionCheckTimer(),this.silentRefreshRedirectUri?(this.silentRefresh().catch(t=>this.debug("silent refresh failed after session changed")),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new qu("session_terminated")),this.logOut(!0))}waitForSilentRefreshAfterSessionChange(){this.events.pipe(kl(t=>"silently_refreshed"===t.type||"silent_refresh_timeout"===t.type||"silent_refresh_error"===t.type),Fu()).subscribe(t=>{"silently_refreshed"!==t.type&&(this.debug("silent refresh did not work after session changed"),this.eventsSubject.next(new qu("session_terminated")),this.logOut(!0))})}handleSessionError(){this.stopSessionCheckTimer(),this.eventsSubject.next(new qu("session_error"))}removeSessionCheckEventListener(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)}initSessionCheck(){if(!this.canPerformSessionCheck())return;const t=document.getElementById(this.sessionCheckIFrameName);t&&document.body.removeChild(t);const e=document.createElement("iframe");e.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),e.setAttribute("src",this.sessionCheckIFrameUrl),e.style.display="none",document.body.appendChild(e),this.startSessionCheckTimer()}startSessionCheckTimer(){this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular(()=>{this.sessionCheckTimer=setInterval(this.checkSession.bind(this),this.sessionCheckIntervall)})}stopSessionCheckTimer(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)}checkSession(){const t=document.getElementById(this.sessionCheckIFrameName);t||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);const e=this.getSessionState();e||this.stopSessionCheckTimer(),t.contentWindow.postMessage(this.clientId+" "+e,this.issuer)}createLoginUrl(t="",e="",n="",r=!1,s={}){return Ja(this,void 0,void 0,(function*(){let i;i=n||this.redirectUri;const o=yield this.createAndSaveNonce();if(t=t?o+this.config.nonceStateSeparator+t:o,!this.requestAccessToken&&!this.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");this.responseType=this.config.responseType?this.config.responseType:this.oidc&&this.requestAccessToken?"id_token token":this.oidc&&!this.requestAccessToken?"id_token":"token";const l=this.loginUrl.indexOf("?")>-1?"&":"?";let a=this.scope;this.oidc&&!a.match(/(^|\s)openid($|\s)/)&&(a="openid "+a);let u=this.loginUrl+l+"response_type="+encodeURIComponent(this.responseType)+"&client_id="+encodeURIComponent(this.clientId)+"&state="+encodeURIComponent(t)+"&redirect_uri="+encodeURIComponent(i)+"&scope="+encodeURIComponent(a);if("code"===this.responseType&&!this.disablePKCE){const[t,e]=yield this.createChallangeVerifierPairForPKCE();this._storage.setItem("PKCI_verifier",e),u+="&code_challenge="+t,u+="&code_challenge_method=S256"}e&&(u+="&login_hint="+encodeURIComponent(e)),this.resource&&(u+="&resource="+encodeURIComponent(this.resource)),this.oidc&&(u+="&nonce="+encodeURIComponent(o)),r&&(u+="&prompt=none");for(const t of Object.keys(s))u+="&"+encodeURIComponent(t)+"="+encodeURIComponent(s[t]);if(this.customQueryParams)for(const t of Object.getOwnPropertyNames(this.customQueryParams))u+="&"+t+"="+encodeURIComponent(this.customQueryParams[t]);return u}))}initImplicitFlowInternal(t="",e=""){if(this.inImplicitFlow)return;if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl must use https, or config value for property requireHttps must allow http");let n={},r=null;"string"==typeof e?r=e:"object"==typeof e&&(n=e),this.createLoginUrl(t,r,null,!1,n).then(this.config.openUri).catch(t=>{console.error("Error in initImplicitFlow",t),this.inImplicitFlow=!1})}initImplicitFlow(t="",e=""){""!==this.loginUrl?this.initImplicitFlowInternal(t,e):this.events.pipe(kl(t=>"discovery_document_loaded"===t.type)).subscribe(n=>this.initImplicitFlowInternal(t,e))}resetImplicitFlow(){this.inImplicitFlow=!1}callOnTokenReceivedIfExists(t){const e=this;if(t.onTokenReceived){const n={idClaims:e.getIdentityClaims(),idToken:e.getIdToken(),accessToken:e.getAccessToken(),state:e.state};t.onTokenReceived(n)}}storeAccessTokenResponse(t,e,n,r){if(this._storage.setItem("access_token",t),r&&this._storage.setItem("granted_scopes",JSON.stringify(r.split("+"))),this._storage.setItem("access_token_stored_at",""+Date.now()),n){const t=1e3*n,e=(new Date).getTime()+t;this._storage.setItem("expires_at",""+e)}e&&this._storage.setItem("refresh_token",e)}tryLogin(t=null){return"code"===this.config.responseType?this.tryLoginCodeFlow().then(t=>!0):this.tryLoginImplicitFlow(t)}parseQueryString(t){return t&&0!==t.length?("?"===t.charAt(0)&&(t=t.substr(1)),this.urlHelper.parseQueryString(t)):{}}tryLoginCodeFlow(){const t=this.parseQueryString(window.location.search),e=t.code,n=t.state,r=location.href.replace(/[&\?]code=[^&\$]*/,"").replace(/[&\?]scope=[^&\$]*/,"").replace(/[&\?]state=[^&\$]*/,"").replace(/[&\?]session_state=[^&\$]*/,"");history.replaceState(null,window.name,r);let[s,i]=this.parseState(n);if(this.state=i,t.error){this.debug("error trying to login"),this.handleLoginError({},t);const e=new $u("code_error",{},t);return this.eventsSubject.next(e),Promise.reject(e)}if(!s)return Promise.resolve();if(!this.validateNonce(s)){const t=new $u("invalid_nonce_in_state",null);return this.eventsSubject.next(t),Promise.reject(t)}return e?new Promise((t,n)=>{this.getTokenFromCode(e).then(e=>{t()}).catch(t=>{n(t)})}):Promise.resolve()}getTokenFromCode(t){let e=(new ya).set("grant_type","authorization_code").set("code",t).set("redirect_uri",this.redirectUri);if(!this.disablePKCE){const t=this._storage.getItem("PKCI_verifier");t?e=e.set("code_verifier",t):console.warn("No PKCI verifier found in oauth storage!")}return this.fetchAndProcessToken(e)}fetchAndProcessToken(t){let e=(new ga).set("Content-Type","application/x-www-form-urlencoded");if(!this.validateUrlForHttps(this.tokenEndpoint))throw new Error("tokenEndpoint must use Http. Also check property requireHttps.");if(this.useHttpBasicAuth){const t=btoa(`${this.clientId}:${this.dummyClientSecret}`);e=e.set("Authorization","Basic "+t)}return this.useHttpBasicAuth||(t=t.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(t=t.set("client_secret",this.dummyClientSecret)),new Promise((n,r)=>{if(this.customQueryParams)for(let e of Object.getOwnPropertyNames(this.customQueryParams))t=t.set(e,this.customQueryParams[e]);this.http.post(this.tokenEndpoint,t,{headers:e}).subscribe(t=>{this.debug("refresh tokenResponse",t),this.storeAccessTokenResponse(t.access_token,t.refresh_token,t.expires_in,t.scope),this.oidc&&t.id_token?this.processIdToken(t.id_token,t.access_token).then(e=>{this.storeIdToken(e),this.eventsSubject.next(new Ku("token_received")),this.eventsSubject.next(new Ku("token_refreshed")),n(t)}).catch(t=>{this.eventsSubject.next(new $u("token_validation_error",t)),console.error("Error validating tokens"),console.error(t),r(t)}):(this.eventsSubject.next(new Ku("token_received")),this.eventsSubject.next(new Ku("token_refreshed")),n(t))},t=>{console.error("Error getting token",t),this.eventsSubject.next(new $u("token_refresh_error",t)),r(t)})})}tryLoginImplicitFlow(t=null){let e;e=(t=t||{}).customHashFragment?this.urlHelper.getHashFragmentParams(t.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",e);const n=e.state;let[r,s]=this.parseState(n);if(this.state=s,e.error){this.debug("error trying to login"),this.handleLoginError(t,e);const n=new $u("token_error",{},e);return this.eventsSubject.next(n),Promise.reject(n)}const i=e.access_token,o=e.id_token,l=e.session_state,a=e.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!i)return Promise.resolve(!1);if(this.requestAccessToken&&!t.disableOAuth2StateCheck&&!n)return Promise.resolve(!1);if(this.oidc&&!o)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!l&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!t.disableOAuth2StateCheck&&!this.validateNonce(r)){const t=new $u("invalid_nonce_in_state",null);return this.eventsSubject.next(t),Promise.reject(t)}return this.requestAccessToken&&this.storeAccessTokenResponse(i,null,e.expires_in||this.fallbackAccessTokenExpirationTimeInSec,a),this.oidc?this.processIdToken(o,i).then(e=>t.validationHandler?t.validationHandler({accessToken:i,idClaims:e.idTokenClaims,idToken:e.idToken,state:n}).then(t=>e):e).then(e=>(this.storeIdToken(e),this.storeSessionState(l),this.clearHashAfterLogin&&(location.hash=""),this.eventsSubject.next(new Ku("token_received")),this.callOnTokenReceivedIfExists(t),this.inImplicitFlow=!1,!0)).catch(t=>(this.eventsSubject.next(new $u("token_validation_error",t)),this.logger.error("Error validating tokens"),this.logger.error(t),Promise.reject(t))):(this.eventsSubject.next(new Ku("token_received")),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&(location.hash=""),this.callOnTokenReceivedIfExists(t),Promise.resolve(!0))}parseState(t){let e=t,n="";if(t){const r=t.indexOf(this.config.nonceStateSeparator);r>-1&&(e=t.substr(0,r),n=t.substr(r+this.config.nonceStateSeparator.length))}return[e,n]}validateNonce(t){const e=this._storage.getItem("nonce");return e===t||(console.error("Validating access_token failed, wrong state/nonce.",e,t),!1)}storeIdToken(t){this._storage.setItem("id_token",t.idToken),this._storage.setItem("id_token_claims_obj",t.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+t.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+Date.now())}storeSessionState(t){this._storage.setItem("session_state",t)}getSessionState(){return this._storage.getItem("session_state")}handleLoginError(t,e){t.onLoginError&&t.onLoginError(e),this.clearHashAfterLogin&&(location.hash="")}processIdToken(t,e,n=!1){const r=t.split("."),s=Vu(this.padBase64(r[0])),i=JSON.parse(s),o=Vu(this.padBase64(r[1])),l=JSON.parse(o),a=this._storage.getItem("nonce");if(Array.isArray(l.aud)){if(l.aud.every(t=>t!==this.clientId)){const t="Wrong audience: "+l.aud.join(",");return this.logger.warn(t),Promise.reject(t)}}else if(l.aud!==this.clientId){const t="Wrong audience: "+l.aud;return this.logger.warn(t),Promise.reject(t)}if(!l.sub){const t="No sub claim in id_token";return this.logger.warn(t),Promise.reject(t)}if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==l.sub){const t="After refreshing, we got an id_token for another user (sub). "+`Expected sub: ${this.silentRefreshSubject}, received sub: ${l.sub}`;return this.logger.warn(t),Promise.reject(t)}if(!l.iat){const t="No iat claim in id_token";return this.logger.warn(t),Promise.reject(t)}if(!this.skipIssuerCheck&&l.iss!==this.issuer){const t="Wrong issuer: "+l.iss;return this.logger.warn(t),Promise.reject(t)}if(!n&&l.nonce!==a){const t="Wrong nonce: "+l.nonce;return this.logger.warn(t),Promise.reject(t)}if(!this.disableAtHashCheck&&this.requestAccessToken&&!l.at_hash){const t="An at_hash is needed!";return this.logger.warn(t),Promise.reject(t)}const u=Date.now(),c=1e3*l.iat,h=1e3*l.exp,d=1e3*(this.clockSkewInSec||600);if(c-d>=u||h+d<=u){const t="Token has expired";return console.error(t),console.error({now:u,issuedAtMSec:c,expiresAtMSec:h}),Promise.reject(t)}const p={accessToken:e,idToken:t,jwks:this.jwks,idTokenClaims:l,idTokenHeader:i,loadKeys:()=>this.loadJwks()};return this.checkAtHash(p).then(e=>{if(!this.disableAtHashCheck&&this.requestAccessToken&&!e){const t="Wrong at_hash";return this.logger.warn(t),Promise.reject(t)}return this.checkSignature(p).then(e=>({idToken:t,idTokenClaims:l,idTokenClaimsJson:o,idTokenHeader:i,idTokenHeaderJson:s,idTokenExpiresAt:h}))})}getIdentityClaims(){const t=this._storage.getItem("id_token_claims_obj");return t?JSON.parse(t):null}getGrantedScopes(){const t=this._storage.getItem("granted_scopes");return t?JSON.parse(t):null}getIdToken(){return this._storage?this._storage.getItem("id_token"):null}padBase64(t){for(;t.length%4!=0;)t+="=";return t}getAccessToken(){return this._storage?this._storage.getItem("access_token"):null}getRefreshToken(){return this._storage?this._storage.getItem("refresh_token"):null}getAccessTokenExpiration(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null}getAccessTokenStoredAt(){return parseInt(this._storage.getItem("access_token_stored_at"),10)}getIdTokenStoredAt(){return parseInt(this._storage.getItem("id_token_stored_at"),10)}getIdTokenExpiration(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null}hasValidAccessToken(){if(this.getAccessToken()){const t=this._storage.getItem("expires_at"),e=new Date;return!(t&&parseInt(t,10)<e.getTime())}return!1}hasValidIdToken(){if(this.getIdToken()){const t=this._storage.getItem("id_token_expires_at"),e=new Date;return!(t&&parseInt(t,10)<e.getTime())}return!1}authorizationHeader(){return"Bearer "+this.getAccessToken()}logOut(t=!1){const e=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this._storage.removeItem("nonce"),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.silentRefreshSubject=null,this.eventsSubject.next(new qu("logout")),!this.logoutUrl)return;if(t)return;if(!e&&!this.postLogoutRedirectUri)return;let n;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl must use https, or config value for property requireHttps must allow http");if(this.logoutUrl.indexOf("{{")>-1)n=this.logoutUrl.replace(/\{\{id_token\}\}/,e).replace(/\{\{client_id\}\}/,this.clientId);else{let t=new ya;e&&(t=t.set("id_token_hint",e));const r=this.postLogoutRedirectUri||this.redirectUri;r&&(t=t.set("post_logout_redirect_uri",r)),n=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+t.toString()}this.config.openUri(n)}createAndSaveNonce(){const t=this;return this.createNonce().then((function(e){return t._storage.setItem("nonce",e),e}))}ngOnDestroy(){this.clearAccessTokenTimer(),this.clearIdTokenTimer()}createNonce(){return new Promise(t=>{if(this.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");const e="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-";let n=45,r="";const s=self.crypto||self.msCrypto;if(s){const t=s.getRandomValues(new Uint8Array(n));for(;0<n--;)r+=e[63&t[n]]}else for(;0<n--;)r+=e[64*Math.random()|0];t(r)})}checkAtHash(t){return Ja(this,void 0,void 0,(function*(){return this.tokenValidationHandler?this.tokenValidationHandler.validateAtHash(t):(this.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),!0)}))}checkSignature(t){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(t):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))}initLoginFlow(t="",e={}){return"code"===this.responseType?this.initCodeFlow(t,e):this.initImplicitFlow(t,e)}initCodeFlow(t="",e={}){""!==this.loginUrl?this.initCodeFlowInternal(t,e):this.events.pipe(kl(t=>"discovery_document_loaded"===t.type)).subscribe(n=>this.initCodeFlowInternal(t,e))}initCodeFlowInternal(t="",e={}){if(!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl must use Http. Also check property requireHttps.");this.createLoginUrl(t,"",null,!1,e).then((function(t){location.href=t})).catch(t=>{console.error("Error in initAuthorizationCodeFlow"),console.error(t)})}createChallangeVerifierPairForPKCE(){return Ja(this,void 0,void 0,(function*(){if(!this.crypto)throw new Error("PKCI support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");const t=yield this.createNonce();return[ju(yield this.crypto.calcHash(t,"sha-256")),t]}))}}class Ju{}class Yu{}class Qu{handleError(t){return Al(t)}}class Xu{constructor(t,e,n,r){this.authStorage=t,this.oAuthService=e,this.errorHandler=n,this.moduleConfig=r}checkUrl(t){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(t):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find(e=>t.startsWith(e))}intercept(t,e){const n=t.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer?this.moduleConfig.resourceServer.allowedUrls&&!this.checkUrl(n)?e.handle(t):this.moduleConfig.resourceServer.sendAccessToken?W(Tl(this.oAuthService.getAccessToken()).pipe(kl(t=>!!t)),this.oAuthService.events.pipe(kl(t=>"token_received"===t.type),function(t,e=ru){return function(t,e,n=ru){return r=>{let s=su(t),i=s?+t-n.now():Math.abs(t);return r.lift(new Pu(i,s,e,n))}}(t,Al(new Du),e)}(this.oAuthService.waitForTokenInMsec||0),Tu(t=>Tl(null)),V(t=>this.oAuthService.getAccessToken()))).pipe(vu(1),U(n=>{if(n){const e=t.headers.set("Authorization","Bearer "+n);t=t.clone({headers:e})}return e.handle(t).pipe(Tu(t=>this.errorHandler.handleError(t)))})):e.handle(t).pipe(Tu(t=>this.errorHandler.handleError(t))):e.handle(t)}}class tc{validateSignature(t){return Promise.resolve(null)}validateAtHash(t){return Promise.resolve(!0)}}function ec(){return console}function nc(){return"undefined"!=typeof sessionStorage?sessionStorage:null}class rc extends Lu{constructor(){super(...arguments),this.allowedAlgorithms=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","PS256","PS384","PS512"],this.gracePeriodInSec=600}validateSignature(t,e=!1){if(!t.idToken)throw new Error("Parameter idToken expected!");if(!t.idTokenHeader)throw new Error("Parameter idTokenHandler expected.");if(!t.jwks)throw new Error("Parameter jwks expected!");if(!t.jwks.keys||!Array.isArray(t.jwks.keys)||0===t.jwks.keys.length)throw new Error("Array keys in jwks missing!");let n,r=t.idTokenHeader.kid,s=t.jwks.keys,i=t.idTokenHeader.alg;if(r)n=s.find(t=>t.kid===r);else{let t=this.alg2kty(i),e=s.filter(e=>e.kty===t&&"sig"===e.use);if(e.length>1){let t="More than one matching key found. Please specify a kid in the id_token header.";return console.error(t),Promise.reject(t)}1===e.length&&(n=e[0])}if(!n&&!e&&t.loadKeys)return t.loadKeys().then(e=>t.jwks=e).then(e=>this.validateSignature(t,!0));if(!n&&e&&!r){let t="No matching key found.";return console.error(t),Promise.reject(t)}if(!n&&e&&r){let t="expected key not found in property jwks. This property is most likely loaded with the discovery document. Expected key id (kid): "+r;return console.error(t),Promise.reject(t)}let o=Nu.KEYUTIL.getKey(n);return Nu.KJUR.jws.JWS.verifyJWT(t.idToken,o,{alg:this.allowedAlgorithms,gracePeriod:this.gracePeriodInSec})?Promise.resolve():Promise.reject("Signature not valid")}alg2kty(t){switch(t.charAt(0)){case"R":return"RSA";case"E":return"EC";default:throw new Error("Cannot infer kty from alg: "+t)}}calcHash(t,e){let n=new Nu.KJUR.crypto.MessageDigest({alg:e}).digestString(t),r=this.toByteArrayAsString(n);return Promise.resolve(r)}toByteArrayAsString(t){let e="";for(let n=0;n<t.length;n+=2){let r=t.charAt(n)+t.charAt(n+1),s=parseInt(r,16);e+=String.fromCharCode(s)}return e}}class sc{static forRoot(t=null,e=tc){return{ngModule:sc,providers:[Zu,Mu,{provide:Ou,useFactory:ec},{provide:Hu,useFactory:nc},{provide:Bu,useClass:e},{provide:Wu,useClass:rc},{provide:Yu,useClass:Qu},{provide:Ju,useValue:t},{provide:Da,useClass:Xu,multi:!0}]}}}class ic extends E{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _;return this._value}next(t){super.next(this._value=t)}}const oc={};class lc{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ac(t,this.resultSelector))}}class ac extends H{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(oc),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(O(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,s){const i=this.values,o=this.toRespond?i[n]===oc?--this.toRespond:this.toRespond:0;i[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function uc(t){return new b(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?M(n):ou()).subscribe(e)})}function cc(){return z(1)}function hc(t){return function(e){return 0===t?ou():e.lift(new dc(t))}}class dc{constructor(t){if(this.total=t,this.total<0)throw new mu}call(t,e){return e.subscribe(new pc(t,this.total))}}class pc extends f{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<n;s++){const s=e++%n;t.next(r[s])}}t.complete()}}function fc(t,e){const n=arguments.length>=2;return r=>r.pipe(t?kl((e,n)=>t(e,n,r)):$,hc(1),n?bu(e):Cu(()=>new gu))}class gc{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new mc(t,this.predicate,this.thisArg,this.source))}}class mc extends f{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function vc(...t){return cc()(Tl(...t))}function yc(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new wc(t,e,n))}}class wc{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new bc(t,this.accumulator,this.seed,this.hasSeed))}}class bc extends f{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class Sc{constructor(t){this.callback=t}call(t,e){return e.subscribe(new _c(t,this.callback))}}class _c extends f{constructor(t,e){super(t),this.add(new h(e))}}let Cc=null;function xc(){return Cc}class Ec{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}class Ac extends Ec{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(e).forEach(n=>{null!=this.getStyle(t,n)&&(this._transitionEnd=e[n])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const Fc={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Tc=3,Ic={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Dc=(()=>{if(St.Node)return St.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}})();class Pc extends Ac{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new Pc,Cc||(Cc=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return Fc}contains(t,e){return Dc.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const r=this.getStyle(t,e)||"";return n?r==n:r.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,r){t.setAttributeNS(e,n,r)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),t.location===Tc&&kc.hasOwnProperty(e)&&(e=kc[e]))}return Ic[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Nc||(Nc=document.querySelector("base"))?Nc.getAttribute("href"):null;return null==e?null:(n=e,Rc||(Rc=document.createElement("a")),Rc.setAttribute("href",n),"/"===Rc.pathname.charAt(0)?Rc.pathname:"/"+Rc.pathname);var n}resetBaseElement(){Nc=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return zl(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let Rc,Nc=null;function Oc(){return!!window.history.pushState}const Hc=new _t("TRANSITION_ID"),Vc=[{provide:Ns,useFactory:function(t,e,n){return()=>{n.get(Os).donePromise.then(()=>{const n=xc();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Hc,ua,De],multi:!0}];class jc{static init(){var t;t=new jc,yi=t}addToWindow(t){St.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},St.getAllAngularTestabilities=()=>t.getAllTestabilities(),St.getAllAngularRootElements=()=>t.getAllRootElements(),St.frameworkStabilizers||(St.frameworkStabilizers=[]),St.frameworkStabilizers.push(t=>{const e=St.getAllAngularTestabilities();let n=e.length,r=!1;const s=function(e){r=r||e,0==--n&&t(r)};e.forEach((function(t){t.whenStable(s)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?xc().isShadowRoot(e)?this.findTestabilityInTree(t,xc().getHost(e),!0):this.findTestabilityInTree(t,xc().parentElement(e),!0):null}}function Bc(t,e){"undefined"!=typeof COMPILED&&COMPILED||((St.ng=St.ng||{})[t]=e)}const Lc=(()=>({ApplicationRef:Fi,NgZone:li}))();function Mc(t){return Li(t)}const Uc=new _t("EventManagerPlugins");class Kc{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}class qc{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=xc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}class $c{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}class zc extends $c{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>xc().remove(t))}}const Gc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Wc=/%COMP%/g,Zc="_nghost-%COMP%",Jc="_ngcontent-%COMP%";function Yc(t,e,n){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Yc(t,s,n):(s=s.replace(Wc,t),n.push(s))}return n}function Qc(t){return e=>{!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}class Xc{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new th(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ut.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new rh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case Ut.Native:case Ut.ShadowDom:return new sh(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Yc(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class th{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Gc[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=Gc[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Gc[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&hn.DashCase?t.style.setProperty(e,n,r&hn.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&hn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){nh(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return nh(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Qc(n)):this.eventManager.addEventListener(t,e,Qc(n))}}const eh=(()=>"@".charCodeAt(0))();function nh(t,e){if(t.charCodeAt(0)===eh)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class rh extends th{constructor(t,e,n,r){super(t),this.component=n;const s=Yc(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=Jc.replace(Wc,r+"-"+n.id),this.hostAttr=Zc.replace(Wc,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class sh extends th{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===Ut.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const s=Yc(r.id,r.styles,[]);for(let i=0;i<s.length;i++){const t=document.createElement("style");t.textContent=s[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const ih=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t})(),oh=ih("addEventListener"),lh=ih("removeEventListener"),ah={},uh="FALSE",ch="ANGULAR",hh="addEventListener",dh="removeEventListener",ph="__zone_symbol__propagationStopped",fh="__zone_symbol__stopImmediatePropagation",gh=(()=>{const t="undefined"!=typeof Zone&&Zone[ih("BLACK_LISTED_EVENTS")];if(t){const e={};return t.forEach(t=>{e[t]=t}),e}})(),mh=function(t){return!!gh&&gh.hasOwnProperty(t)},vh=function(t){const e=ah[t.type];if(!e)return;const n=this[e];if(!n)return;const r=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[ph];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}}};class yh extends qc{constructor(t,e,n){super(t),this.ngZone=e,n&&function(t){return t===ca}(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[fh])return;const t=Event.prototype[fh]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[ph]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let r=n;if(!t[oh]||li.isInAngularZone()&&!mh(e))t[hh](e,r,!1);else{let n=ah[e];n||(n=ah[e]=ih(ch+e+uh));let s=t[n];const i=s&&s.length>0;s||(s=t[n]=[]);const o=mh(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:o,handler:r});else{let t=!1;for(let e=0;e<s.length;e++)if(s[e].handler===r){t=!0;break}t||s.push({zone:o,handler:r})}i||t[oh](e,vh,!1)}return()=>this.removeEventListener(t,e,r)}removeEventListener(t,e,n){let r=t[lh];if(!r)return t[dh].apply(t,[e,n,!1]);let s=ah[e],i=s&&t[s];if(!i)return t[dh].apply(t,[e,n,!1]);let o=!1;for(let l=0;l<i.length;l++)if(i[l].handler===n){o=!0,i.splice(l,1);break}o?0===i.length&&r.apply(t,[e,vh,!1]):t[dh].apply(t,[e,n,!1])}}const wh={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},bh=new _t("HammerGestureConfig"),Sh=new _t("HammerLoader");class _h{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}class Ch extends qc{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!wh.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,s=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=()=>{});r||(s=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),s=()=>{}}),()=>{s()}}return r.runOutsideAngular(()=>{const s=this._config.buildHammer(t),i=function(t){r.runGuarded((function(){n(t)}))};return s.on(e,i),()=>{s.off(e,i),"function"==typeof s.destroy&&s.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}const xh=["alt","control","meta","shift"],Eh={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};class Ah extends qc{constructor(t){super(t)}supports(t){return null!=Ah.parseEventName(t)}addEventListener(t,e,n){const r=Ah.parseEventName(e),s=Ah.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xc().onAndCancel(t,r.domEventName,s))}static parseEventName(t){const e=t.toLowerCase().split("."),n=e.shift();if(0===e.length||"keydown"!==n&&"keyup"!==n)return null;const r=Ah._normalizeKey(e.pop());let s="";if(xh.forEach(t=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),s+=t+".")}),s+=r,0!=e.length||0===r.length)return null;const i={};return i.domEventName=n,i.fullKey=s,i}static getEventFullKey(t){let e="",n=xc().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),xh.forEach(r=>{r!=n&&(0,Eh[r])(t)&&(e+=r+".")}),e+=n}static eventCallback(t,e,n){return r=>{Ah.getEventFullKey(r)===t&&n.runGuarded(()=>e(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}class Fh{}class Th extends Fh{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Se.NONE:return e;case Se.HTML:return e instanceof kh?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){let n=null;try{we=we||new te(t);let r=e?String(e):"";n=we.getInertBodyElement(r);let s=5,i=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=i,i=n.innerHTML,n=we.getInertBodyElement(r)}while(r!==i);const o=new ge,l=o.sanitizeChildren(be(n)||n);return Xt()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),l}finally{if(n){const t=be(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e)));case Se.STYLE:return e instanceof Dh?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";const e=t.match(xe);return e&&re(e[1])===e[1]||t.match(Ce)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const s=t.charAt(r);"'"===s&&n?e=!e:'"'===s&&e&&(n=!n)}return e&&n}(t)?t:(Xt()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}(e));case Se.SCRIPT:if(e instanceof Ph)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case Se.URL:return e instanceof Nh||e instanceof Rh?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),re(String(e)));case Se.RESOURCE_URL:if(e instanceof Nh)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof Ih)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(t){return new kh(t)}bypassSecurityTrustStyle(t){return new Dh(t)}bypassSecurityTrustScript(t){return new Ph(t)}bypassSecurityTrustUrl(t){return new Rh(t)}bypassSecurityTrustResourceUrl(t){return new Nh(t)}}class Ih{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class kh extends Ih{getTypeName(){return"HTML"}}class Dh extends Ih{getTypeName(){return"Style"}}class Ph extends Ih{getTypeName(){return"Script"}}class Rh extends Ih{getTypeName(){return"URL"}}class Nh extends Ih{getTypeName(){return"ResourceURL"}}const Oh=Ci(Ui,"browser",[{provide:Ls,useValue:"browser"},{provide:Bs,useValue:function(){Pc.makeCurrent(),jc.init()},multi:!0},{provide:Rl,useClass:class extends Rl{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=xc().getLocation(),this._history=xc().getHistory()}getBaseHrefFromDOM(){return xc().getBaseHref(this._doc)}onPopState(t){xc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){xc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Oc()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Oc()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}},deps:[ua]},{provide:ua,useFactory:function(){return document},deps:[]}]);function Hh(){return new Jt}class Vh{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:Vh,providers:[{provide:Hs,useValue:t.appId},{provide:Hc,useExisting:Hs},Vc]}}}"undefined"!=typeof window&&window;class jh{constructor(t,e){this.id=t,this.url=e}}class Bh extends jh{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lh extends jh{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Mh extends jh{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uh extends jh{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kh extends jh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qh extends jh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $h extends jh{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zh extends jh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gh extends jh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wh{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zh{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jh{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yh{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qh{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xh{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class td{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ed{}const nd="primary";class rd{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function sd(t){return new rd(t)}const id="ngNavigationCancelingError";function od(t){const e=Error("NavigationCancelingError: "+t);return e[id]=!0,e}function ld(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const s={};for(let i=0;i<r.length;i++){const e=r[i],n=t[i];if(e.startsWith(":"))s[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:s}}class ad{constructor(t,e){this.routes=t,this.module=e}}function ud(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];cd(r,hd(e,r))}}function cd(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==nd)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&ud(t.children,e)}function hd(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function dd(t){const e=t.children&&t.children.map(dd),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==nd&&(n.component=ed),n}function pd(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(t[s=n[i]]!==e[s])return!1;return!0}function fd(t){return Array.prototype.concat.apply([],t)}function gd(t){return t.length>0?t[t.length-1]:null}function md(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function vd(t){return Ze(t)?t:We(t)?M(Promise.resolve(t)):Tl(t)}function yd(t,e,n){return n?function(t,e){return pd(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!_d(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e[n]===t[n])}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,s){if(n.segments.length>s.length)return!!_d(n.segments.slice(0,s.length),s)&&!r.hasChildren();if(n.segments.length===s.length){if(!_d(n.segments,s))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=s.slice(0,n.segments.length),i=s.slice(n.segments.length);return!!_d(n.segments,t)&&!!n.children[nd]&&e(n.children[nd],r,i)}}(e,n,n.segments)}(t.root,e.root)}class wd{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sd(this.queryParams)),this._queryParamMap}toString(){return Ad.serialize(this)}}class bd{constructor(t,e){this.segments=t,this.children=e,this.parent=null,md(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fd(this)}}class Sd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=sd(this.parameters)),this._parameterMap}toString(){return Rd(this)}}function _d(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Cd(t,e){let n=[];return md(t.children,(t,r)=>{r===nd&&(n=n.concat(e(t,r)))}),md(t.children,(t,r)=>{r!==nd&&(n=n.concat(e(t,r)))}),n}class xd{}class Ed{parse(t){const e=new jd(t);return new wd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return Fd(e);if(n){const n=e.children[nd]?t(e.children[nd],!1):"",r=[];return md(e.children,(e,n)=>{n!==nd&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Cd(e,(n,r)=>r===nd?[t(e.children[nd],!1)]:[`${r}:${t(n,!1)}`]);return`${Fd(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Id(e)}=${Id(t)}`).join("&"):`${Id(e)}=${Id(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Ad=new Ed;function Fd(t){return t.segments.map(t=>Rd(t)).join("/")}function Td(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Id(t){return Td(t).replace(/%3B/gi,";")}function kd(t){return Td(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dd(t){return decodeURIComponent(t)}function Pd(t){return Dd(t.replace(/\+/g,"%20"))}function Rd(t){return`${kd(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${kd(t)}=${kd(e[t])}`).join("")}`;var e}const Nd=/^[^\/()?;=#]+/;function Od(t){const e=t.match(Nd);return e?e[0]:""}const Hd=/^[^=?&#]+/,Vd=/^[^?&#]+/;class jd{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bd([],{}):new bd([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[nd]=new bd(t,e)),n}parseSegment(){const t=Od(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Sd(Dd(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Od(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Od(this.remaining);t&&this.capture(n=t)}t[Dd(e)]=Dd(n)}parseQueryParam(t){const e=function(t){const e=t.match(Hd);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Vd);return e?e[0]:""}(this.remaining);t&&this.capture(n=t)}const r=Pd(e),s=Pd(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(t[r]=e=[e]),e.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Od(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s=void 0;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=nd);const i=this.parseChildren();e[s]=1===Object.keys(i).length?i[nd]:new bd([],i),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Bd{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ld(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ld(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Md(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Md(t,this._root).map(t=>t.value)}}function Ld(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ld(t,n);if(e)return e}return null}function Md(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Md(t,n);if(r.length)return r.unshift(e),r}return[]}class Ud{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Kd(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class qd extends Bd{constructor(t,e){super(t),this.snapshot=e,Jd(this,t)}toString(){return this.snapshot.toString()}}function $d(t,e){const n=function(t,e){const n=new Wd([],{},{},"",{},nd,e,null,t.root,-1,{});return new Zd("",new Ud(n,[]))}(t,e),r=new ic([new Sd("",{})]),s=new ic({}),i=new ic({}),o=new ic({}),l=new ic(""),a=new zd(r,s,o,l,i,nd,e,n.root);return a.snapshot=n.root,new qd(new Ud(a,[]),n)}class zd{constructor(t,e,n,r,s,i,o,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(V(t=>sd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(V(t=>sd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gd(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Wd{constructor(t,e,n,r,s,i,o,l,a,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this.routeConfig=l,this._urlSegment=a,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zd extends Bd{constructor(t,e){super(e),this.url=t,Jd(this,e)}toString(){return Yd(this._root)}}function Jd(t,e){e.value._routerState=t,e.children.forEach(e=>Jd(t,e))}function Yd(t){const e=t.children.length>0?` { ${t.children.map(Yd).join(", ")} } `:"";return`${t.value}${e}`}function Qd(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pd(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),pd(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!pd(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),pd(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Xd(t,e){var n,r;return pd(t.params,e.params)&&_d(n=t.url,r=e.url)&&n.every((t,e)=>pd(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Xd(t.parent,e.parent))}function tp(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ep(t,e,n,r,s){let i={};return r&&md(r,(t,e)=>{i[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new wd(n.root===t?e:function t(e,n,r){const s={};return md(e.children,(e,i)=>{s[i]=e===n?r:t(e,n,r)}),new bd(e.segments,s)}(n.root,t,e),i,s)}class np{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&tp(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==gd(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rp{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function sp(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[nd]:`${t}`}function ip(t,e,n){if(t||(t=new bd([],{})),0===t.segments.length&&t.hasChildren())return op(t,e,n);const r=function(t,e,n){let r=0,s=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(r>=n.length)return i;const e=t.segments[s],o=sp(n[r]),l=r<n.length-1?n[r+1]:null;if(s>0&&void 0===o)break;if(o&&l&&"object"==typeof l&&void 0===l.outlets){if(!cp(o,l,e))return i;r+=2}else{if(!cp(o,{},e))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(t,e,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new bd(t.segments.slice(0,r.pathIndex),{});return e.children[nd]=new bd(t.segments.slice(r.pathIndex),t.children),op(e,0,s)}return r.match&&0===s.length?new bd(t.segments,{}):r.match&&!t.hasChildren()?lp(t,e,n):r.match?op(t,0,s):lp(t,e,n)}function op(t,e,n){if(0===n.length)return new bd(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{[nd]:t}:void 0===t[0].outlets?{[nd]:t}:t[0].outlets}(n),s={};return md(r,(n,r)=>{null!==n&&(s[r]=ip(t.children[r],e,n))}),md(t.children,(t,e)=>{void 0===r[e]&&(s[e]=t)}),new bd(t.segments,s)}}function lp(t,e,n){const r=t.segments.slice(0,e);let s=0;for(;s<n.length;){if("object"==typeof n[s]&&void 0!==n[s].outlets){const t=ap(n[s].outlets);return new bd(r,t)}if(0===s&&tp(n[0])){r.push(new Sd(t.segments[e].path,n[0])),s++;continue}const i=sp(n[s]),o=s<n.length-1?n[s+1]:null;i&&o&&tp(o)?(r.push(new Sd(i,up(o))),s+=2):(r.push(new Sd(i,{})),s++)}return new bd(r,{})}function ap(t){const e={};return md(t,(t,n)=>{null!==t&&(e[n]=lp(new bd([],{}),0,t))}),e}function up(t){const e={};return md(t,(t,n)=>e[n]=`${t}`),e}function cp(t,e,n){return t==n.path&&pd(e,n.parameters)}const hp=(t,e,n)=>V(r=>(new dp(e,r.targetRouterState,r.currentRouterState,n).activate(t),r));class dp{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Qd(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Kd(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),md(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Kd(t),s=t.value.component?n.children:e;md(r,(t,e)=>this.deactivateRouteAndItsChildren(t,s)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Kd(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Xh(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Yh(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(Qd(r),r===s)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),pp(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),s=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=s,e.outlet&&e.outlet.activateWith(r,s),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function pp(t){Qd(t.value),t.children.forEach(pp)}function fp(t){return"function"==typeof t}function gp(t){return t instanceof wd}class mp{constructor(t){this.segmentGroup=t||null}}class vp{constructor(t){this.urlTree=t}}function yp(t){return new b(e=>e.error(new mp(t)))}function wp(t){return new b(e=>e.error(new vp(t)))}function bp(t){return new b(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Sp{constructor(t,e,n,r,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(jt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,nd).pipe(V(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Tu(t=>{if(t instanceof vp)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof mp)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,nd).pipe(V(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Tu(t=>{if(t instanceof mp)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new bd([],{[nd]:t}):t;return new wd(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(V(t=>new bd([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Tl({});const n=[],r=[],s={};return md(t,(t,i)=>{const o=e(i,t).pipe(V(t=>s[i]=t));i===nd?n.push(o):r.push(o)}),Tl.apply(null,n.concat(r)).pipe(cc(),fc(),V(()=>s))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,s,i){return Tl(...n).pipe(V(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,s,i).pipe(Tu(t=>{if(t instanceof mp)return Tl(null);throw t}))),cc(),Fu(t=>!!t),Tu((t,n)=>{if(t instanceof gu||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,s))return Tl(new bd([],{}));throw new mp(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,s,i,o){return Ep(r)!==i?yp(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i):yp(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?wp(s):this.lineralizeSegments(n,s).pipe(U(n=>{const s=new bd(n,{});return this.expandSegment(t,s,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){const{matched:o,consumedSegments:l,lastChild:a,positionalParamSegments:u}=_p(e,r,s);if(!o)return yp(e);const c=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?wp(c):this.lineralizeSegments(r,c).pipe(U(r=>this.expandSegment(t,e,n,r.concat(s.slice(a)),i,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(V(t=>(n._loadedConfig=t,new bd(r,{})))):Tl(new bd(r,{}));const{matched:s,consumedSegments:i,lastChild:o}=_p(e,n,r);if(!s)return yp(e);const l=r.slice(o);return this.getChildConfig(t,n,r).pipe(U(t=>{const n=t.module,r=t.routes,{segmentGroup:s,slicedSegments:o}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>xp(t,e,n)&&Ep(n)!==nd)}(t,n,r)?{segmentGroup:Cp(new bd(e,function(t,e){const n={};n[nd]=e;for(const r of t)""===r.path&&Ep(r)!==nd&&(n[Ep(r)]=new bd([],{}));return n}(r,new bd(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>xp(t,e,n))}(t,n,r)?{segmentGroup:Cp(new bd(t.segments,function(t,e,n,r){const s={};for(const i of n)xp(t,e,i)&&!r[Ep(i)]&&(s[Ep(i)]=new bd([],{}));return Object.assign({},r,s)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,i,l,r);return 0===o.length&&s.hasChildren()?this.expandChildren(n,r,s).pipe(V(t=>new bd(i,t))):0===r.length&&0===o.length?Tl(new bd(i,{})):this.expandSegment(n,s,r,o,nd,!0).pipe(V(t=>new bd(i.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Tl(new ad(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Tl(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?M(r).pipe(V(r=>{const s=t.get(r);let i;if(function(t){return t&&fp(t.canLoad)}(s))i=s.canLoad(e,n);else{if(!fp(s))throw new Error("Invalid CanLoad guard");i=s(e,n)}return vd(i)})).pipe(cc(),(s=t=>!0===t,t=>t.lift(new gc(s,void 0,t)))):Tl(!0);var s}(t.injector,e,n).pipe(U(n=>n?this.configLoader.load(t.injector,e).pipe(V(t=>(e._loadedConfig=t,t))):function(t){return new b(e=>e.error(od(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Tl(new ad([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Tl(n);if(r.numberOfChildren>1||!r.children[nd])return bp(t.redirectTo);r=r.children[nd]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new wd(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return md(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const s=t.substring(1);n[r]=e[s]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let i={};return md(e.children,(e,s)=>{i[s]=this.createSegmentGroup(t,e,n,r)}),new bd(s,i)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function _p(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||ld)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Cp(t){if(1===t.numberOfChildren&&t.children[nd]){const e=t.children[nd];return new bd(t.segments.concat(e.segments),e.children)}return t}function xp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Ep(t){return t.outlet||nd}class Ap{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Fp{constructor(t,e){this.component=t,this.route=e}}function Tp(t,e,n){const r=t._root;return function t(e,n,r,s,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Kd(n);return e.children.forEach(e=>{!function(e,n,r,s,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,l=n?n.value:null,a=r?r.getContext(e.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!_d(t.url,e.url);case"pathParamsOrQueryParamsChange":return!_d(t.url,e.url)||!pd(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xd(t,e)||!pd(t.queryParams,e.queryParams);case"paramsChange":default:return!Xd(t,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ap(s)):(o.data=l.data,o._resolvedData=l._resolvedData),t(e,n,o.component?a?a.children:null:r,s,i),u&&i.canDeactivateChecks.push(new Fp(a&&a.outlet&&a.outlet.component||null,l))}else l&&kp(n,a,i),i.canActivateChecks.push(new Ap(s)),t(e,null,o.component?a?a.children:null:r,s,i)}(e,o[e.value.outlet],r,s.concat([e.value]),i),delete o[e.value.outlet]}),md(o,(t,e)=>kp(t,r.getContext(e),i)),i}(r,e?e._root:null,n,[r.value])}function Ip(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function kp(t,e,n){const r=Kd(t),s=t.value;md(r,(t,r)=>{kp(t,s.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Fp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}const Dp=Symbol("INITIAL_VALUE");function Pp(){return du(t=>(function(...t){let e=null,n=null;return F(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&a(t[0])&&(t=t[0]),G(t,n).lift(new lc(e))})(...t.map(t=>t.pipe(vu(1),function(...t){const e=t[t.length-1];return F(e)?(t.pop(),n=>vc(t,n,e)):e=>vc(t,e)}(Dp)))).pipe(yc((t,e)=>{let n=!1;return e.reduce((t,r,s)=>{if(t!==Dp)return t;if(r===Dp&&(n=!0),!n){if(!1===r)return r;if(s===e.length-1||gp(r))return r}return t},t)},Dp),kl(t=>t!==Dp),V(t=>gp(t)?t:!0===t),vu(1)))}function Rp(t,e){return null!==t&&e&&e(new Qh(t)),Tl(!0)}function Np(t,e){return null!==t&&e&&e(new Jh(t)),Tl(!0)}function Op(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Tl(r.map(r=>uc(()=>{const s=Ip(r,e,n);let i;if(function(t){return t&&fp(t.canActivate)}(s))i=vd(s.canActivate(e,t));else{if(!fp(s))throw new Error("Invalid CanActivate guard");i=vd(s(e,t))}return i.pipe(Fu())}))).pipe(Pp()):Tl(!0)}function Hp(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(t=>(function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null})(t)).filter(t=>null!==t).map(e=>uc(()=>Tl(e.guards.map(s=>{const i=Ip(s,e.node,n);let o;if(function(t){return t&&fp(t.canActivateChild)}(i))o=vd(i.canActivateChild(r,t));else{if(!fp(i))throw new Error("Invalid CanActivateChild guard");o=vd(i(r,t))}return o.pipe(Fu())})).pipe(Pp())));return Tl(s).pipe(Pp())}class Vp{}class jp{constructor(t,e,n,r,s,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=i}recognize(){try{const t=Mp(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,nd),n=new Wd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},nd,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ud(n,e),s=new Zd(this.url,r);return this.inheritParamsAndData(s._root),Tl(s)}catch(t){return new b(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Gd(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Cd(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===nd?-1:e.value.outlet===nd?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(s){if(!(s instanceof Vp))throw s}if(this.noLeftoversInUrl(e,n,r))return[];throw new Vp}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Vp;if((t.outlet||nd)!==r)throw new Vp;let s,i=[],o=[];if("**"===t.path){const i=n.length>0?gd(n).parameters:{};s=new Wd(n,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qp(t),r,t.component,t,Bp(e),Lp(e)+n.length,$p(t))}else{const l=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Vp;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||ld)(n,t,e);if(!r)throw new Vp;const s={};md(r.posParams,(t,e)=>{s[e]=t.path});const i=r.consumed.length>0?Object.assign({},s,r.consumed[r.consumed.length-1].parameters):s;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:i}}(e,t,n);i=l.consumedSegments,o=n.slice(l.lastChild),s=new Wd(i,l.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qp(t),r,t.component,t,Bp(e),Lp(e)+i.length,$p(t))}const l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:a,slicedSegments:u}=Mp(e,i,o,l,this.relativeLinkResolution);if(0===u.length&&a.hasChildren()){const t=this.processChildren(l,a);return[new Ud(s,t)]}if(0===l.length&&0===u.length)return[new Ud(s,[])];const c=this.processSegment(l,a,u,nd);return[new Ud(s,c)]}}function Bp(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Lp(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Mp(t,e,n,r,s){if(n.length>0&&function(t,e,n){return n.some(n=>Up(t,e,n)&&Kp(n)!==nd)}(t,n,r)){const s=new bd(e,function(t,e,n,r){const s={};s[nd]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&Kp(i)!==nd){const n=new bd([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,s[Kp(i)]=n}return s}(t,e,r,new bd(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Up(t,e,n))}(t,n,r)){const i=new bd(t.segments,function(t,e,n,r,s,i){const o={};for(const l of r)if(Up(t,n,l)&&!s[Kp(l)]){const n=new bd([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===i?t.segments.length:e.length,o[Kp(l)]=n}return Object.assign({},s,o)}(t,e,n,r,t.children,s));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}const i=new bd(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function Up(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Kp(t){return t.outlet||nd}function qp(t){return t.data||{}}function $p(t){return t.resolve||{}}function zp(t,e,n,r){const s=Ip(t,e,r);return vd(s.resolve?s.resolve(e,n):s(e,n))}function Gp(t){return function(e){return e.pipe(du(e=>{const n=t(e);return n?M(n).pipe(V(()=>e)):M([e])}))}}class Wp{}class Zp{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const Jp=new _t("ROUTES");class Yp{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(V(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new ad(fd(r.injector.get(Jp)).map(dd),r)}))}loadModuleFactory(t){return"string"==typeof t?M(this.loader.load(t)):vd(t()).pipe(U(t=>t instanceof Bt?Tl(t):M(this.compiler.compileModuleAsync(t))))}}class Qp{}class Xp{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function tf(t){throw t}function ef(t,e,n){return e.parse("/")}function nf(t,e){return Tl(null)}class rf{constructor(t,e,n,r,s,i,o,l){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new E,this.errorHandler=tf,this.malformedUriErrorHandler=ef,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:nf,afterPreactivation:nf},this.urlHandlingStrategy=new Xp,this.routeReuseStrategy=new Zp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=s.get(jt),this.console=s.get(Us);const a=s.get(li);this.isNgZoneEnabled=a instanceof li,this.resetConfig(l),this.currentUrlTree=new wd(new bd([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Yp(i,o,t=>this.triggerEvent(new Wh(t)),t=>this.triggerEvent(new Zh(t))),this.routerState=$d(this.currentUrlTree,this.rootComponentType),this.transitions=new ic({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(kl(t=>0!==t.id),V(t=>Object.assign({},t,{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),du(t=>{let n=!1,r=!1;return Tl(t).pipe(za(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),du(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Tl(t).pipe(du(t=>{const n=this.transitions.getValue();return e.next(new Bh(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?iu:[t]}),du(t=>Promise.resolve(t)),function(t,e,n,r){return function(s){return s.pipe(du(s=>(function(t,e,n,r,s){return new Sp(t,e,n,r,s).apply()})(t,e,n,s.extractedUrl,r).pipe(V(t=>Object.assign({},s,{urlAfterRedirects:t})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),za(t=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,s){return function(i){return i.pipe(U(i=>(function(t,e,n,r,s="emptyOnly",i="legacy"){return new jp(t,e,n,r,s,i).recognize()})(t,e,i.urlAfterRedirects,n(i.urlAfterRedirects),r,s).pipe(V(t=>Object.assign({},i,{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),za(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),za(t=>{const n=new Kh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:s,restoredState:i,extras:o}=t,l=new Bh(n,this.serializeUrl(r),s,i);e.next(l);const a=$d(r,this.rootComponentType).snapshot;return Tl(Object.assign({},t,{targetSnapshot:a,urlAfterRedirects:r,extras:Object.assign({},o,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),iu}),Gp(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),za(t=>{const e=new qh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),V(t=>Object.assign({},t,{guards:Tp(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(U(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return 0===o.length&&0===i.length?Tl(Object.assign({},n,{guardsResult:!0})):function(t,e,n,r){return M(t).pipe(U(t=>(function(t,e,n,r,s){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?Tl(i.map(i=>{const o=Ip(i,e,s);let l;if(function(t){return t&&fp(t.canDeactivate)}(o))l=vd(o.canDeactivate(t,e,n,r));else{if(!fp(o))throw new Error("Invalid CanDeactivate guard");l=vd(o(t,e,n,r))}return l.pipe(Fu())})).pipe(Pp()):Tl(!0)})(t.component,t.route,n,e,r)),Fu(t=>!0!==t,!0))}(o,r,s,t).pipe(U(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return M(e).pipe(Il(e=>M([Np(e.route.parent,r),Rp(e.route,r),Hp(t,e.path,n),Op(t,e.route,n)]).pipe(cc(),Fu(t=>!0!==t,!0))),Fu(t=>!0!==t,!0))}(r,i,t,e):Tl(n)),V(t=>Object.assign({},n,{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),za(t=>{if(gp(t.guardsResult)){const e=od(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),za(t=>{const e=new $h(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),kl(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Mh(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Gp(t=>{if(t.guards.canActivateChecks.length)return Tl(t).pipe(za(t=>{const e=new zh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),function(t,e){return function(n){return n.pipe(U(n=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=n;return s.length?M(s).pipe(Il(n=>(function(t,e,n,r){return function(t,e,n,r){const s=Object.keys(t);if(0===s.length)return Tl({});if(1===s.length){const i=s[0];return zp(t[i],e,n,r).pipe(V(t=>({[i]:t})))}const i={};return M(s).pipe(U(s=>zp(t[s],e,n,r).pipe(V(t=>(i[s]=t,t))))).pipe(fc(),V(()=>i))}(t._resolve,t,e,r).pipe(V(e=>(t._resolvedData=e,t.data=Object.assign({},t.data,Gd(t,n).resolve),null)))})(n.route,r,t,e)),function(t,e){return arguments.length>=2?function(n){return y(yc(t,e),hc(1),bu(e))(n)}:function(e){return y(yc((e,n,r)=>t(e,n,r+1)),hc(1))(e)}}((t,e)=>t),V(t=>n)):Tl(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),za(t=>{const e=new Gh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Gp(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),V(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=n.value;const i=function(e,n,r){return n.children.map(n=>{for(const s of r.children)if(e.shouldReuseRoute(s.value.snapshot,n.value))return t(e,n,s);return t(e,n)})}(e,n,r);return new Ud(s,i)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new zd(new ic((s=n.value).url),new ic(s.params),new ic(s.queryParams),new ic(s.fragment),new ic(s.data),s.outlet,s.component,s),i=n.children.map(n=>t(e,n));return new Ud(r,i)}}var s}(t,e._root,n?n._root:void 0);return new qd(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:e})}),za(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),hp(this.rootContexts,this.routeReuseStrategy,t=>this.triggerEvent(t)),za({next(){n=!0},complete(){n=!0}}),function(t){return e=>e.lift(new Sc(t))}(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Mh(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Tu(n=>{if(r=!0,function(t){return t&&t[id]}(n)){const r=gp(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const s=new Mh(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(s),t.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Uh(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(s){t.reject(s)}}return iu}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign({},this.getTransition(),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ud(t),this.config=t.map(dd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:s,preserveQueryParams:i,queryParamsHandling:o,preserveFragment:l}=e;Xt()&&i&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const a=n||this.routerState.root,u=l?this.currentUrlTree.fragment:s;let c=null;if(o)switch(o){case"merge":c=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=i?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,s){if(0===n.length)return ep(e.root,e.root,e,r,s);const i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new np(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return md(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===s?(r.split("/").forEach((r,s)=>{0==s&&"."===r||(0==s&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new np(n,e,r)}(n);if(i.toRoot())return ep(e.root,new bd([],{}),e,r,s);const o=function(t,e,n){if(t.isAbsolute)return new rp(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new rp(n.snapshot._urlSegment,!0,0);const r=tp(t.commands[0])?0:1;return function(t,e,n){let r=t,s=e,i=n;for(;i>s;){if(i-=s,!(r=r.parent))throw new Error("Invalid number of '../'");s=r.segments.length}return new rp(r,!1,s-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(i,e,t),l=o.processChildren?op(o.segmentGroup,o.index,i.commands):ip(o.segmentGroup,o.index,i.commands);return ep(o.segmentGroup,l,e,r,s)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){Xt()&&this.isNgZoneEnabled&&!li.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=gp(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(gp(t))return yd(this.currentUrlTree,t,e);const n=this.parseUrl(t);return yd(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Lh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r){const s=this.getTransition();if(s&&"imperative"!==e&&"imperative"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"hashchange"==e&&"popstate"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"popstate"==e&&"hashchange"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);let i=null,o=null;const l=new Promise((t,e)=>{i=t,o=e}),a=++this.navigationId;return this.setTransition({id:a,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:i,reject:o,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const s=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(s)||e?this.location.replaceState(s,"",Object.assign({},r,{navigationId:n})):this.location.go(s,"",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class sf{constructor(t,e,n,r,s){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(s.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Xt()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:lf(this.skipLocationChange),replaceUrl:lf(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:lf(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:lf(this.preserveFragment)})}}class of{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof Lh&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Xt()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:lf(this.skipLocationChange),replaceUrl:lf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:lf(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:lf(this.preserveFragment)})}}function lf(t){return""===t||!!t}class af{constructor(t,e,n,r,s){this.router=t,this.element=e,this.renderer=n,this.link=r,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(t=>{t instanceof Lh&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(t=>this.update()),this.linksWithHrefs.changes.subscribe(t=>this.update()),this.update()}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}class uf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cf,this.attachRef=null}}class cf{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new uf,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class hf{constructor(t,e,n,r,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ds,this.deactivateEvents=new Ds,this.name=r||nd,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,s=new df(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class df{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===zd?this.route:t===cf?this.childContexts:this.parent.get(t,e)}}class pf{}class ff{preload(t,e){return e().pipe(Tu(()=>Tl(null)))}}class gf{preload(t,e){return Tl(null)}}class mf{constructor(t,e,n,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new Yp(e,n,e=>t.triggerEvent(new Wh(e)),e=>t.triggerEvent(new Zh(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(kl(t=>t instanceof Lh),Il(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(jt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return M(n).pipe(z(),V(t=>void 0))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}class vf{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Bh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Lh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof td&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new td(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const yf=new _t("ROUTER_CONFIGURATION"),wf=new _t("ROUTER_FORROOT_GUARD"),bf=[Vl,{provide:xd,useClass:Ed},{provide:rf,useFactory:Ff,deps:[Fi,xd,cf,Vl,De,Ii,Js,Jp,yf,[Qp,new it],[Wp,new it]]},cf,{provide:zd,useFactory:Tf,deps:[rf]},{provide:Ii,useClass:Ni},mf,gf,ff,{provide:yf,useValue:{enableTracing:!1}}];function Sf(){return new _i("Router",rf)}class _f{constructor(t,e){}static forRoot(t,e){return{ngModule:_f,providers:[bf,Af(t),{provide:wf,useFactory:Ef,deps:[[rf,new it,new lt]]},{provide:yf,useValue:e||{}},{provide:Ol,useFactory:xf,deps:[Rl,[new st(Hl),new it],yf]},{provide:vf,useFactory:Cf,deps:[rf,ha,yf]},{provide:pf,useExisting:e&&e.preloadingStrategy?e.preloadingStrategy:gf},{provide:_i,multi:!0,useFactory:Sf},[If,{provide:Ns,multi:!0,useFactory:kf,deps:[If]},{provide:Pf,useFactory:Df,deps:[If]},{provide:Ms,multi:!0,useExisting:Pf}]]}}static forChild(t){return{ngModule:_f,providers:[Af(t)]}}}function Cf(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new vf(t,e,n)}function xf(t,e,n={}){return n.useHash?new Bl(t,e):new Ll(t,e)}function Ef(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Af(t){return[{provide:Le,multi:!0,useValue:t},{provide:Jp,multi:!0,useValue:t}]}function Ff(t,e,n,r,s,i,o,l,a={},u,c){const h=new rf(null,e,n,r,s,i,o,fd(l));if(u&&(h.urlHandlingStrategy=u),c&&(h.routeReuseStrategy=c),a.errorHandler&&(h.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(h.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=xc();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(h.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(h.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(h.relativeLinkResolution=a.relativeLinkResolution),h}function Tf(t){return t.routerState.root}class If{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new E}appInitializer(){return this.injector.get(Nl,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(rf),r=this.injector.get(yf);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Tl(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(yf),n=this.injector.get(mf),r=this.injector.get(vf),s=this.injector.get(rf),i=this.injector.get(Fi);t===i.components[0]&&(this.isLegacyEnabled(e)?s.initialNavigation():this.isLegacyDisabled(e)&&s.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),s.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}function kf(t){return t.appInitializer.bind(t)}function Df(t){return t.bootstrapListener.bind(t)}const Pf=new _t("Router Initializer");let Rf=(()=>{class t{constructor(t,e){this.oauthService=t,this.router=e}canActivate(){const t=this.oauthService.hasValidAccessToken();return t||this.router.navigate(["forbidden"]),t}canActivateChild(){return this.canActivate()}}return t.ngInjectableDef=ct({factory:function(){return new t(Ot(Zu),Ot(rf))},token:t,providedIn:"root"}),t})(),Nf=(()=>{class t{constructor(){this.subscribers={}}subsribe(t){const e=(new Date).valueOf();return this.subscribers[e]=t,e}unsubscribe(t){delete this.subscribers[t]}publish(t){const e=this.getSubscribersForMessage(t);0!==e.length&&e.forEach(e=>{e.onMessage(t)})}getSubscribersForMessage(t){const e=new Array;for(const n in this.subscribers)if(this.subscribers.hasOwnProperty(n)){const r=this.subscribers[n];r.getType()===t.getType()&&e.push(r)}return e}}return t.ngInjectableDef=ct({factory:function(){return new t},token:t,providedIn:"root"}),t})();class Of{}var Hf=function(t){return t[t.Success=0]="Success",t[t.Info=1]="Info",t[t.Warning=2]="Warning",t[t.Danger=3]="Danger",t}({});let Vf=(()=>{class t extends Of{constructor(t,e,n,r){super(),this.title=t,this.message=e,this.level=n,this._hasAction=!1,this._viewed=!1,this.action=void 0,this.level=void 0!==n?n:Hf.Info,r&&(this._hasAction=!0,this.action=r)}get viewed(){return this._viewed}set viewed(t){this._viewed=t,this._viewed&&this.hasAction&&delete this.action}get hasAction(){return this._hasAction}getType(){return t.KEY}}return t.KEY="StatusMessage",t})(),jf=(()=>{class t{constructor(){this.username=t.ANONYMOUS,this.claims=new Array}get isAuthenticated(){return this.username!==t.ANONYMOUS}get userName(){return this.username}get userClaims(){return this.claims}reset(){this.setProperties()}hasClaim(t){return!(!this.claims||!t)&&this.claims.some(e=>e===t)}setProperties(e=null){if(e){const t=JSON.parse(window.atob(e.split(".")[1]));return this.username=t.name,void(this.claims=Array.isArray(t.role)?t.role:[t.role])}this.username=t.ANONYMOUS,this.claims=new Array}}return t.ANONYMOUS="anonymous",t.ngInjectableDef=ct({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Bf=(()=>{class t extends Of{constructor(t){super(),this.source=t}getType(){return t.KEY}}return t.KEY="RefreshMessage",t})();class Lf{}let Mf=(()=>{class t{constructor(t){this.http=t}load(){return this.http.get("client/config/spaclient").toPromise().then(t=>{this.config=t})}}return t.ngInjectableDef=ct({factory:function(){return new t(Ot($a))},token:t,providedIn:Lf}),t})();class Uf{}class Kf{constructor(t,e,n,r){this.router=t,this.user=e,this.oauthService=n,this.clientConfigProvider=r,this.title="ClientApp",this.style="shell"}get isAuthenticated(){return this.user.isAuthenticated}get username(){return this.user.userName}get claims(){return this.user.userClaims}ngOnInit(){this.configure()}loginClick(t){"login"===t?this.login():this.logout()}login(){this.oauthService.initLoginFlow()}logout(){this.oauthService.logOut(!1),this.user.reset(),this.router.navigate(["/"])}configure(){const t=this.clientConfigProvider.config;this.oauthService.configure({clientId:t.clientId,issuer:t.issuer,redirectUri:t.redirectUri||window.location.origin,responseType:t.responseType||void 0,scope:t.scope,loginUrl:t.loginUrl,logoutUrl:t.logoutUrl,requireHttps:!1}),this.oauthService.tokenValidationHandler=new rc,this.oauthService.events.subscribe(t=>{"token_received"!==t.type&&"token_refreshed"!==t.type||this.user.setProperties(this.oauthService.getAccessToken())}),this.oauthService.loadDiscoveryDocumentAndLogin({onTokenReceived:t=>{this.user.setProperties(t.accessToken)}})}}var qf=Qn({encapsulation:2,styles:[],data:{}});function $f(t){return go(0,[(t()(),Zi(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),os(1,212992,null,0,hf,[cf,Rn,nn,[8,null],Fe],null,null)],(function(t,e){t(e,1,0)}),null)}function zf(t){return go(0,[(t()(),Zi(0,0,null,null,1,"ng-component",[],null,null,null,$f,qf)),os(1,49152,null,0,ed,[],null,null)],null,null)}var Gf=Hr("ng-component",ed,zf,{},{},[]);function Wf(...t){if(1===t.length){const e=t[0];if(a(e))return Zf(e,null);if(u(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Zf(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Zf(t=1===t.length&&a(t[0])?t[0]:t,null).pipe(V(t=>e(...t)))}return Zf(t,null)}function Zf(t,e){return new b(n=>{const r=t.length;if(0===r)return void n.complete();const s=new Array(r);let i=0,o=0;for(let l=0;l<r;l++){const a=M(t[l]);let u=!1;n.add(a.subscribe({next:t=>{u||(u=!0,o++),s[l]=t},error:t=>n.error(t),complete:()=>{++i!==r&&u||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=s[n],t),{}):s),n.complete())}}))}})}const Jf=new _t("NgValueAccessor");class Yf{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}const Qf=new _t("CompositionEventMode");class Xf{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=xc()?xc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}class tg{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class eg extends tg{get formDirective(){return null}get path(){return null}}function ng(){throw new Error("unimplemented")}class rg extends tg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return ng()}get asyncValidator(){return ng()}}class sg{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class ig extends sg{constructor(t){super(t)}}class og extends sg{constructor(t){super(t)}}function lg(t){return null==t||0===t.length}const ag=new _t("NgValidators"),ug=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class cg{static min(t){return e=>{if(lg(e.value)||lg(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(lg(e.value)||lg(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return lg(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return lg(t.value)?null:ug.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(lg(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return cg.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(lg(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(hg);return 0==e.length?null:function(t){return pg(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(hg);return 0==e.length?null:function(t){return Wf(function(t,e){return e.map(e=>e(t))}(t,e).map(dg)).pipe(V(pg))}}}function hg(t){return null!=t}function dg(t){const e=We(t)?M(t):t;if(!Ze(e))throw new Error("Expected validator to return Promise or Observable.");return e}function pg(t){const e=t.reduce((t,e)=>null!=e?Object.assign({},t,e):t,{});return 0===Object.keys(e).length?null:e}function fg(t){return t.validate?e=>t.validate(e):t}function gg(t){return t.validate?e=>t.validate(e):t}class mg{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}class vg{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}const yg={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class wg{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${yg.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${yg.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${yg.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${yg.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${yg.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${yg.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function bg(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}class Sg{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ke}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=bg(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}class _g{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(bg(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function Cg(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}class xg{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Cg(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Cg(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function Eg(t,e){return[...e.path,t]}function Ag(t,e){t||kg(e,"Cannot find control with"),e.valueAccessor||kg(e,"No value accessor for form control with"),t.validator=cg.compose([t.validator,e.validator]),t.asyncValidator=cg.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Fg(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Fg(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function Fg(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Tg(t,e){null==t&&kg(e,"Cannot find control with"),t.validator=cg.compose([t.validator,e.validator]),t.asyncValidator=cg.composeAsync([t.asyncValidator,e.asyncValidator])}function Ig(t){return kg(t,"There is no FormControl instance attached to form control element with")}function kg(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function Dg(t){return null!=t?cg.compose(t.map(fg)):null}function Pg(t){return null!=t?cg.composeAsync(t.map(gg)):null}function Rg(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Ke(e,n.currentValue)}const Ng=[Yf,class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},mg,Sg,class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ke}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),s=this._getOptionValue(r.value);n.push(s)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},class{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(rg),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}];function Og(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Hg(t,e){if(!e)return null;Array.isArray(e)||kg(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,s=void 0;return e.forEach(e=>{e.constructor===Xf?n=e:function(t){return Ng.some(e=>t.constructor===e)}(e)?(r&&kg(t,"More than one built-in value accessor matches form control with"),r=e):(s&&kg(t,"More than one custom value accessor matches form control with"),s=e)}),s||r||n||(kg(t,"No valid value accessor for form control with"),null)}function Vg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const jg="VALID",Bg="INVALID",Lg="PENDING",Mg="DISABLED";function Ug(t){const e=qg(t)?t.validators:t;return Array.isArray(e)?Dg(e):e||null}function Kg(t,e){const n=qg(e)?e.asyncValidators:t;return Array.isArray(n)?Pg(n):n||null}function qg(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class $g{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===jg}get invalid(){return this.status===Bg}get pending(){return this.status==Lg}get disabled(){return this.status===Mg}get enabled(){return this.status!==Mg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=Ug(t)}setAsyncValidators(t){this.asyncValidator=Kg(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Lg,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Mg,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=jg,this._forEachChild(e=>{e.enable(Object.assign({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==jg&&this.status!==Lg||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mg:jg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Lg;const e=dg(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((t,e)=>t instanceof Gg?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof Wg&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Ds,this.statusChanges=new Ds}_calculateStatus(){return this._allControlsDisabled()?Mg:this.errors?Bg:this._anyControlsHaveStatus(Lg)?Lg:this._anyControlsHaveStatus(Bg)?Bg:jg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){qg(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class zg extends $g{constructor(t=null,e,n){super(Ug(e),Kg(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Gg extends $g{constructor(t,e,n){super(Ug(e),Kg(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof zg?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Wg extends $g{constructor(t,e,n){super(Ug(e),Kg(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof zg?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Zg=(()=>Promise.resolve(null))();class Jg extends eg{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Ds,this.form=new Gg({},Dg(t),Pg(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Zg.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Ag(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Zg.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Vg(this._directives,t)})}addFormGroup(t){Zg.then(()=>{const e=this._findContainer(t.path),n=new Gg({});Tg(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Zg.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Zg.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Og(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}class Yg{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${yg.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${yg.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${yg.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${yg.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${yg.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${yg.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const Qg=new _t("NgFormSelectorWarning");class Xg extends eg{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Eg(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Dg(this._validators)}get asyncValidator(){return Pg(this._asyncValidators)}_checkParentType(){}}class tm extends Xg{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof tm||this._parent instanceof Jg||Yg.modelGroupParentException()}}const em=(()=>Promise.resolve(null))();class nm extends rg{constructor(t,e,n,r){super(),this.control=new zg,this._registered=!1,this.update=new Ds,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Hg(this,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Rg(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Eg(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Dg(this._rawValidators)}get asyncValidator(){return Pg(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ag(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof tm)&&this._parent instanceof Xg?Yg.formGroupNameException():this._parent instanceof tm||this._parent instanceof Jg||Yg.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Yg.missingNameException()}_updateValue(t){em.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;em.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}class rm{}const sm=new _t("NgModelWithFormControlWarning");class im extends eg{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Ds}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Ag(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Vg(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Tg(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Tg(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Og(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>Ig(e)),e.valueAccessor.registerOnTouched(()=>Ig(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&Ag(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=Dg(this._validators);this.form.validator=cg.compose([this.form.validator,t]);const e=Pg(this._asyncValidators);this.form.asyncValidator=cg.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||wg.missingFormException()}}class om extends Xg{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){am(this._parent)&&wg.groupParentException()}}class lm extends eg{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Eg(this.name,this._parent)}get validator(){return Dg(this._validators)}get asyncValidator(){return Pg(this._asyncValidators)}_checkParentType(){am(this._parent)&&wg.arrayParentException()}}function am(t){return!(t instanceof om||t instanceof im||t instanceof lm)}let um=(()=>{class t extends rg{constructor(t,e,n,r,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new Ds,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Hg(this,r)}set isDisabled(t){wg.disabledAttrWarning()}ngOnChanges(e){var n,r;this._added||this._setUpControl(),Rg(e,this.viewModel)&&("formControlName",n=t,this,r=this._ngModelWarningConfig,Xt()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(wg.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Eg(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Dg(this._rawValidators)}get asyncValidator(){return Pg(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof om)&&this._parent instanceof Xg?wg.ngModelGroupException():this._parent instanceof om||this._parent instanceof im||this._parent instanceof lm||wg.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t})();class cm{ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=cg.pattern(this.pattern)}}class hm{}class dm{group(t,e=null){const n=this._reduceControls(t);let r=null,s=null,i=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,s=null!=e.asyncValidators?e.asyncValidators:null,i=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,s=null!=e.asyncValidator?e.asyncValidator:null)),new Gg(n,{asyncValidators:s,updateOn:i,validators:r})}control(t,e,n){return new zg(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Wg(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof zg||t instanceof Gg||t instanceof Wg?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}class pm{static withConfig(t){return{ngModule:pm,providers:[{provide:Qg,useValue:t.warnOnDeprecatedNgFormSelector}]}}}class fm{static withConfig(t){return{ngModule:fm,providers:[{provide:sm,useValue:t.warnOnNgModelWithFormControl}]}}}class gm{transform(t,e){return t&&e?t.filter(t=>this.applyFilter(t,e)):t}applyFilter(t,e){return!(e.value&&t.value&&-1===t.value.toLowerCase().indexOf(e.value.toLowerCase()))}}class mm{constructor(t){this._elementRef=t,this.clickOutside=new Ds}onClick(t,e){e&&(this._elementRef.nativeElement.contains(e)||this.clickOutside.emit(t))}}class vm{constructor(t){"string"==typeof t&&(this.key=this.value=t),"object"==typeof t&&(this.key=t.key,this.value=t.value)}static byKey(t,e){return e.find(e=>e.key===t)}static byValue(t,e){return e.find(e=>e.value===t)}}gt(()=>Sm);const ym=()=>{},wm="key",bm="value";class Sm{constructor(){this._data=[],this.filter=new vm(this.data),this.selectedItems=[],this.isDropdownOpen=!1,this.disabled=!1,this.singleSelection=!1,this.bindingBehavior="key",this.filterChange=new Ds,this.dropDownClose=new Ds,this.select=new Ds,this.selectAll=new Ds,this.deSelect=new Ds,this.deSelectAll=new Ds,this.onTouchedCallback=ym,this.onChangeCallback=ym}set data(t){this._data=t?t.map(t=>new vm(t)):[]}onFilterTextChange(t){this.filterChange.emit(t)}onKeyDown(t,e){32===t.keyCode&&(t.preventDefault(),this.onItemClick(e))}onItemClick(t){this.disabled||(this.isSelected(t)?this.removeSelected(t):this.addSelected(t),this.singleSelection&&this.closeDropdown())}writeValue(t){null!=t&&t.length>0?(Array.isArray(t)||(t=[t]),this.selectedItems=t.map(this.bindingBehavior===wm?t=>vm.byKey(t,this._data):t=>vm.byValue(t,this._data))):this.selectedItems=[],this.onChangeCallback(t)}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.disabled=t}onTouched(){this.closeDropdown(),this.onTouchedCallback()}shortCuts(t){13===t.keyCode&&(t.preventDefault(),this.toggleDropdown(t))}trackByFn(t,e){return e.key}isSelected(t){let e=!1;return this.selectedItems.forEach(n=>{t.key===n.key&&(e=!0)}),e}isAllItemsSelected(){return this._data.length===this.selectedItems.length}showButton(){return!this.singleSelection}addSelected(t){this.singleSelection?(this.selectedItems=[],this.selectedItems.push(t)):this.selectedItems.push(t),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.select.emit(this.emittedValue(t))}removeSelected(t){this.selectedItems.forEach(e=>{t.key===e.key&&this.selectedItems.splice(this.selectedItems.indexOf(e),1)}),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.deSelect.emit(this.emittedValue(t))}emittedValue(t){if(this.singleSelection)return Array.isArray(t)&&t.length>0?this.bindingBehavior===wm?t[0].key:t[0].value:Array.isArray(t)?null:this.bindingBehavior===wm?t.key:t.value;const e=[];return Array.isArray(t)?t.map(t=>{e.push(this.bindingBehavior===wm?t.key:t.value)}):t&&e.push(this.bindingBehavior===wm?t.key:t.value),e}toggleDropdown(t){t.preventDefault(),this.disabled&&this.singleSelection||(this.isDropdownOpen=!this.isDropdownOpen,this.isDropdownOpen||this.dropDownClose.emit())}closeDropdown(){this.isDropdownOpen=!1,this.filter.value="",this.dropDownClose.emit()}toggleSelectAll(){if(this.disabled)return!1;this.isAllItemsSelected()?(this.selectedItems=[],this.deSelectAll.emit(this.emittedValue(this.selectedItems))):(this.selectedItems=this._data.slice(),this.selectAll.emit(this.emittedValue(this.selectedItems))),this.onChangeCallback(this.emittedValue(this.selectedItems))}}var _m=Qn({encapsulation:2,styles:[],data:{}});function Cm(t){return go(0,[(t()(),Zi(0,0,null,null,1,"span",[["class","no-item-selected"]],null,null,null,null,null)),(t()(),ho(-1,null,["select items"]))],null,null)}function xm(t){return go(0,[(t()(),Zi(0,0,null,null,3,"span",[["class","selected-item"]],null,null,null,null,null)),(t()(),ho(1,null,[" "," "])),(t()(),Zi(2,0,null,null,1,"a",[["style","padding-top:2px;padding-left:2px;color:white"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onItemClick(t.context.$implicit)&&r),r}),null,null)),(t()(),ho(-1,null,["x"]))],null,(function(t,e){t(e,1,0,e.context.$implicit.value)}))}function Em(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(-1,null,["select all"]))],null,null)}function Am(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(-1,null,["unselect all"]))],null,null)}function Fm(t){return go(0,[(t()(),Zi(0,0,null,null,5,"li",[["class","multiselect-item-checkbox"],["style","border-bottom: 1px solid #ccc"],["tabindex","0"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleSelectAll()&&r),r}),null,null)),(t()(),Zi(1,0,null,null,0,"input",[["aria-label","multiselect-select-all"],["type","checkbox"]],[[8,"checked",0],[8,"disabled",0]],null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Em)),os(3,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Am)),os(5,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,3,0,!n.isAllItemsSelected()),t(e,5,0,n.isAllItemsSelected())}),(function(t,e){var n=e.component;t(e,1,0,n.isAllItemsSelected(),n.disabled)}))}function Tm(t){return go(0,[(t()(),Zi(0,0,null,null,6,"li",[["class","filter-textbox"]],null,null,null,null,null)),(t()(),Zi(1,0,null,null,5,"input",[["aria-label","multiselect-search"],["type","text"]],[[8,"placeholder",0],[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Gr(t,2)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,2).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,2)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,2)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==(s.filter.value=n)&&r),"ngModelChange"===e&&(r=!1!==s.onFilterTextChange(n)&&r),r}),null,null)),os(2,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),as(1024,null,Jf,(function(t){return[t]}),[Xf]),os(4,671744,null,0,nm,[[8,null],[8,null],[8,null],[6,Jf]],{model:[0,"model"]},{update:"ngModelChange"}),as(2048,null,rg,null,[nm]),os(6,16384,null,0,ig,[[4,rg]],null,null)],(function(t,e){t(e,4,0,e.component.filter.value)}),(function(t,e){t(e,1,0,"Search",e.component.disabled,Gr(e,6).ngClassUntouched,Gr(e,6).ngClassTouched,Gr(e,6).ngClassPristine,Gr(e,6).ngClassDirty,Gr(e,6).ngClassValid,Gr(e,6).ngClassInvalid,Gr(e,6).ngClassPending)}))}function Im(t){return go(0,[(t()(),Zi(0,0,null,null,3,"li",[["class","multiselect-item-checkbox"],["tabindex","0"]],null,[[null,"click"],[null,"keydown"]],(function(t,e,n){var r=!0,s=t.component;return"click"===e&&(r=!1!==s.onItemClick(t.context.$implicit)&&r),"keydown"===e&&(r=!1!==s.onKeyDown(n,t.context.$implicit)&&r),r}),null,null)),(t()(),Zi(1,0,null,null,0,"input",[["aria-label","multiselect-item"],["type","checkbox"]],[[8,"checked",0],[8,"disabled",0]],null,null,null,null)),(t()(),Zi(2,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(3,null,["",""]))],null,(function(t,e){var n=e.component;t(e,1,0,n.isSelected(e.context.$implicit),n.disabled||!n.isSelected(e.context.$implicit)),t(e,3,0,e.context.$implicit.value)}))}function km(t){return go(0,[(t()(),Zi(0,0,null,null,2,"li",[["class","no-data"]],null,null,null,null,null)),(t()(),Zi(1,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),ho(-1,null,["No data!"]))],null,null)}function Dm(t){return go(0,[(t()(),Zi(0,0,null,null,11,"div",[["class","dropdown-list"]],null,null,null,null,null)),(t()(),Zi(1,0,null,null,4,"ul",[],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Fm)),os(3,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Tm)),os(5,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Zi(6,0,null,null,5,"ul",[],null,null,null,null,null)),(t()(),Wi(16777216,null,null,2,null,Im)),os(8,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null),ls(0,gm,[]),(t()(),Wi(16777216,null,null,1,null,km)),os(11,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,3,0,!n.singleSelection),t(e,5,0,n._data.length>0),t(e,8,0,Zn(e,8,0,Gr(e,9).transform(n._data,n.filter))),t(e,11,0,0==n._data.length)}),null)}function Pm(t){return go(0,[(t()(),Zi(0,0,null,null,13,"div",[["class","multiselect-dropdown"],["tabindex","0"],["tw-clickoutside",""]],null,[[null,"blur"],[null,"clickOutside"],["document","click"]],(function(t,e,n){var r=!0,s=t.component;return"document:click"===e&&(r=!1!==Gr(t,1).onClick(n,n.target)&&r),"blur"===e&&(r=!1!==s.onTouched()&&r),"clickOutside"===e&&(r=!1!==s.closeDropdown()&&r),r}),null,null)),os(1,16384,null,0,mm,[ln],null,{clickOutside:"clickOutside"}),(t()(),Zi(2,0,null,null,9,"div",[],[[2,"disabled",null]],null,null,null,null)),(t()(),Zi(3,0,null,null,8,"span",[["class","dropdown-btn"],["tabindex","-1"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleDropdown(n)&&r),r}),null,null)),(t()(),Wi(16777216,null,null,1,null,Cm)),os(5,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,xm)),os(7,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(t()(),Zi(8,0,null,null,3,"span",[["style","float:right !important;padding-right:4px"]],null,null,null,null,null)),(t()(),Zi(9,0,null,null,2,"span",[],null,null,null,null,null)),as(512,null,Gl,Wl,[An,Fn,ln,dn]),os(11,278528,null,0,Jl,[Gl],{ngClass:[0,"ngClass"]},null),(t()(),Wi(16777216,null,null,1,null,Dm)),os(13,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,5,0,0==n.selectedItems.length),t(e,7,0,n.selectedItems,n.trackByFn),t(e,11,0,n.isDropdownOpen?"dropdown-up":"dropdown-down"),t(e,13,0,n.isDropdownOpen)}),(function(t,e){t(e,2,0,e.component.disabled)}))}gt(()=>Rm);class Rm{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){const e=new Date(t);this._renderer.setProperty(this._elementRef.nativeElement,"valueAsDate",e)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}class Nm{constructor(){this.hideLabel=!1}control(t){return this.form.get(t)}}var Om=Qn({encapsulation:2,styles:[],data:{}});function Hm(t){return go(0,[(t()(),Zi(0,0,null,null,1,"label",[],[[1,"for",0]],null,null,null,null)),(t()(),ho(1,null,[" "," "]))],null,(function(t,e){var n=e.component;t(e,0,0,n.editor.key),t(e,1,0,n.editor.label)}))}function Vm(t){return go(0,[(t()(),Zi(0,0,null,null,5,"input",[["type","hidden"]],[[1,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0;return"input"===e&&(r=!1!==Gr(t,1)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,1).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,1)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,1)._compositionEnd(n.target.value)&&r),r}),null,null)),os(1,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),as(1024,null,Jf,(function(t){return[t]}),[Xf]),os(3,671744,null,0,um,[[3,eg],[8,null],[8,null],[6,Jf],[2,sm]],{name:[0,"name"]},null),as(2048,null,rg,null,[um]),os(5,16384,null,0,ig,[[4,rg]],null,null)],(function(t,e){t(e,3,0,e.component.editor.key)}),(function(t,e){t(e,0,0,e.component.editor.key,Gr(e,5).ngClassUntouched,Gr(e,5).ngClassTouched,Gr(e,5).ngClassPristine,Gr(e,5).ngClassDirty,Gr(e,5).ngClassValid,Gr(e,5).ngClassInvalid,Gr(e,5).ngClassPending)}))}function jm(t){return go(0,[(t()(),Zi(0,0,null,null,8,"input",[["inputmode","numeric"],["pattern","[0-9.,]*"],["type","number"]],[[1,"id",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(t,e,n){var r=!0;return"input"===e&&(r=!1!==Gr(t,1)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,1).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,1)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,1)._compositionEnd(n.target.value)&&r),"change"===e&&(r=!1!==Gr(t,2).onChange(n.target.value)&&r),"input"===e&&(r=!1!==Gr(t,2).onChange(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,2).onTouched()&&r),r}),null,null)),os(1,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),os(2,16384,null,0,mg,[dn,ln],null,null),os(3,540672,null,0,cm,[],{pattern:[0,"pattern"]},null),as(1024,null,ag,(function(t){return[t]}),[cm]),as(1024,null,Jf,(function(t,e){return[t,e]}),[Xf,mg]),os(6,671744,null,0,um,[[3,eg],[6,ag],[8,null],[6,Jf],[2,sm]],{name:[0,"name"]},null),as(2048,null,rg,null,[um]),os(8,16384,null,0,ig,[[4,rg]],null,null)],(function(t,e){var n=e.component;t(e,3,0,"[0-9.,]*"),t(e,6,0,n.editor.key)}),(function(t,e){t(e,0,0,e.component.editor.key,Gr(e,3).pattern?Gr(e,3).pattern:null,Gr(e,8).ngClassUntouched,Gr(e,8).ngClassTouched,Gr(e,8).ngClassPristine,Gr(e,8).ngClassDirty,Gr(e,8).ngClassValid,Gr(e,8).ngClassInvalid,Gr(e,8).ngClassPending)}))}function Bm(t){return go(0,[(t()(),Zi(0,0,null,null,5,"input",[["type","password"]],[[1,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0;return"input"===e&&(r=!1!==Gr(t,1)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,1).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,1)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,1)._compositionEnd(n.target.value)&&r),r}),null,null)),os(1,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),as(1024,null,Jf,(function(t){return[t]}),[Xf]),os(3,671744,null,0,um,[[3,eg],[8,null],[8,null],[6,Jf],[2,sm]],{name:[0,"name"]},null),as(2048,null,rg,null,[um]),os(5,16384,null,0,ig,[[4,rg]],null,null)],(function(t,e){t(e,3,0,e.component.editor.key)}),(function(t,e){t(e,0,0,e.component.editor.key,Gr(e,5).ngClassUntouched,Gr(e,5).ngClassTouched,Gr(e,5).ngClassPristine,Gr(e,5).ngClassDirty,Gr(e,5).ngClassValid,Gr(e,5).ngClassInvalid,Gr(e,5).ngClassPending)}))}function Lm(t){return go(0,[(t()(),Zi(0,0,null,null,7,"label",[],null,null,null,null,null)),(t()(),Zi(1,0,null,null,5,"input",[["type","checkbox"]],[[1,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(t,e,n){var r=!0;return"change"===e&&(r=!1!==Gr(t,2).onChange(n.target.checked)&&r),"blur"===e&&(r=!1!==Gr(t,2).onTouched()&&r),r}),null,null)),os(2,16384,null,0,Yf,[dn,ln],null,null),as(1024,null,Jf,(function(t){return[t]}),[Yf]),os(4,671744,null,0,um,[[3,eg],[8,null],[8,null],[6,Jf],[2,sm]],{name:[0,"name"]},null),as(2048,null,rg,null,[um]),os(6,16384,null,0,ig,[[4,rg]],null,null),(t()(),ho(7,null,[" "," "]))],(function(t,e){t(e,4,0,e.component.editor.key)}),(function(t,e){var n=e.component;t(e,1,0,n.editor.key,Gr(e,6).ngClassUntouched,Gr(e,6).ngClassTouched,Gr(e,6).ngClassPristine,Gr(e,6).ngClassDirty,Gr(e,6).ngClassValid,Gr(e,6).ngClassInvalid,Gr(e,6).ngClassPending),t(e,7,0,n.editor.label)}))}function Mm(t){return go(0,[(t()(),Zi(0,0,null,null,2,"option",[],null,null,null,null,null)),os(1,147456,null,0,_g,[ln,dn,[2,Sg]],null,null),os(2,147456,null,0,xg,[ln,dn,[8,null]],null,null)],null,null)}function Um(t){return go(0,[(t()(),Zi(0,0,null,null,3,"option",[],null,null,null,null,null)),os(1,147456,null,0,_g,[ln,dn,[2,Sg]],{ngValue:[0,"ngValue"]},null),os(2,147456,null,0,xg,[ln,dn,[8,null]],{ngValue:[0,"ngValue"]},null),(t()(),ho(3,null,[" "," "]))],(function(t,e){t(e,1,0,e.context.$implicit.key),t(e,2,0,e.context.$implicit.key)}),(function(t,e){t(e,3,0,e.context.$implicit.value)}))}function Km(t){return go(0,[(t()(),Zi(0,0,null,null,9,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(t,e,n){var r=!0;return"change"===e&&(r=!1!==Gr(t,1).onChange(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,1).onTouched()&&r),r}),null,null)),os(1,16384,null,0,Sg,[dn,ln],null,null),as(1024,null,Jf,(function(t){return[t]}),[Sg]),os(3,671744,null,0,um,[[3,eg],[8,null],[8,null],[6,Jf],[2,sm]],{name:[0,"name"]},null),as(2048,null,rg,null,[um]),os(5,16384,null,0,ig,[[4,rg]],null,null),(t()(),Wi(16777216,null,null,1,null,Mm)),os(7,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Um)),os(9,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,3,0,n.editor.key),t(e,7,0,!n.editor.required),t(e,9,0,n.editor.options)}),(function(t,e){t(e,0,0,Gr(e,5).ngClassUntouched,Gr(e,5).ngClassTouched,Gr(e,5).ngClassPristine,Gr(e,5).ngClassDirty,Gr(e,5).ngClassValid,Gr(e,5).ngClassInvalid,Gr(e,5).ngClassPending)}))}function qm(t){return go(0,[(t()(),Zi(0,0,null,null,5,"tw-multi-select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"blur"],["window","keydown"]],(function(t,e,n){var r=!0;return"blur"===e&&(r=!1!==Gr(t,1).onTouched()&&r),"window:keydown"===e&&(r=!1!==Gr(t,1).shortCuts(n)&&r),r}),Pm,_m)),os(1,49152,null,0,Sm,[],{singleSelection:[0,"singleSelection"],bindingBehavior:[1,"bindingBehavior"],data:[2,"data"]},null),as(1024,null,Jf,(function(t){return[t]}),[Sm]),os(3,671744,null,0,um,[[3,eg],[8,null],[8,null],[6,Jf],[2,sm]],{name:[0,"name"]},null),as(2048,null,rg,null,[um]),os(5,16384,null,0,ig,[[4,rg]],null,null)],(function(t,e){var n=e.component;t(e,1,0,n.editor.singleSelection,n.editor.bindingBehaviour,n.editor.options),t(e,3,0,n.editor.key)}),(function(t,e){t(e,0,0,Gr(e,5).ngClassUntouched,Gr(e,5).ngClassTouched,Gr(e,5).ngClassPristine,Gr(e,5).ngClassDirty,Gr(e,5).ngClassValid,Gr(e,5).ngClassInvalid,Gr(e,5).ngClassPending)}))}function $m(t){return go(0,[(t()(),Zi(0,0,null,null,6,"input",[["twUseValueAsDate",""],["type","date"]],[[1,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0;return"input"===e&&(r=!1!==Gr(t,1)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,1).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,1)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,1)._compositionEnd(n.target.value)&&r),"input"===e&&(r=!1!==Gr(t,2).onChange(n.target.valueAsDate)&&r),"blur"===e&&(r=!1!==Gr(t,2).onTouched()&&r),r}),null,null)),os(1,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),os(2,16384,null,0,Rm,[dn,ln],null,null),as(1024,null,Jf,(function(t,e){return[t,e]}),[Xf,Rm]),os(4,671744,null,0,um,[[3,eg],[8,null],[8,null],[6,Jf],[2,sm]],{name:[0,"name"]},null),as(2048,null,rg,null,[um]),os(6,16384,null,0,ig,[[4,rg]],null,null)],(function(t,e){t(e,4,0,e.component.editor.key)}),(function(t,e){t(e,0,0,e.component.editor.key,Gr(e,6).ngClassUntouched,Gr(e,6).ngClassTouched,Gr(e,6).ngClassPristine,Gr(e,6).ngClassDirty,Gr(e,6).ngClassValid,Gr(e,6).ngClassInvalid,Gr(e,6).ngClassPending)}))}function zm(t){return go(0,[(t()(),Zi(0,0,null,null,6,"textarea",[],[[1,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0;return"input"===e&&(r=!1!==Gr(t,1)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,1).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,1)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,1)._compositionEnd(n.target.value)&&r),r}),null,null)),os(1,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),as(1024,null,Jf,(function(t){return[t]}),[Xf]),os(3,671744,null,0,um,[[3,eg],[8,null],[8,null],[6,Jf],[2,sm]],{name:[0,"name"]},null),as(2048,null,rg,null,[um]),os(5,16384,null,0,ig,[[4,rg]],null,null),(t()(),ho(-1,null,["    "]))],(function(t,e){t(e,3,0,e.component.editor.key)}),(function(t,e){t(e,0,0,e.component.editor.key,Gr(e,5).ngClassUntouched,Gr(e,5).ngClassTouched,Gr(e,5).ngClassPristine,Gr(e,5).ngClassDirty,Gr(e,5).ngClassValid,Gr(e,5).ngClassInvalid,Gr(e,5).ngClassPending)}))}function Gm(t){return go(0,[(t()(),Zi(0,0,null,null,5,"input",[["type","text"]],[[1,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0;return"input"===e&&(r=!1!==Gr(t,1)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,1).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,1)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,1)._compositionEnd(n.target.value)&&r),r}),null,null)),os(1,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),as(1024,null,Jf,(function(t){return[t]}),[Xf]),os(3,671744,null,0,um,[[3,eg],[8,null],[8,null],[6,Jf],[2,sm]],{name:[0,"name"]},null),as(2048,null,rg,null,[um]),os(5,16384,null,0,ig,[[4,rg]],null,null)],(function(t,e){t(e,3,0,e.component.editor.key)}),(function(t,e){t(e,0,0,e.component.editor.key,Gr(e,5).ngClassUntouched,Gr(e,5).ngClassTouched,Gr(e,5).ngClassPristine,Gr(e,5).ngClassDirty,Gr(e,5).ngClassValid,Gr(e,5).ngClassInvalid,Gr(e,5).ngClassPending)}))}function Wm(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(1,null,[" "," required. "]))],null,(function(t,e){t(e,1,0,e.component.editor.label)}))}function Zm(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(1,null,[" "," must not be lower than ",". "]))],null,(function(t,e){var n=e.component;t(e,1,0,n.editor.label,n.editor.min)}))}function Jm(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(1,null,[" "," must not be greater than ",". "]))],null,(function(t,e){var n=e.component;t(e,1,0,n.editor.label,n.editor.max)}))}function Ym(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(1,null,[" "," must be at least "," characters in length. "]))],null,(function(t,e){var n=e.component;t(e,1,0,n.editor.label,n.editor.minLength)}))}function Qm(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(1,null,[" "," must not be longer than "," characters. "]))],null,(function(t,e){var n=e.component;t(e,1,0,n.editor.label,n.editor.maxLength)}))}function Xm(t){return go(0,[(t()(),Zi(0,0,null,null,10,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Wm)),os(2,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Zm)),os(4,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Jm)),os(6,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Ym)),os(8,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Qm)),os(10,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.control(n.editor.key).hasError("required")),t(e,4,0,n.control(n.editor.key).hasError("min")),t(e,6,0,n.control(n.editor.key).hasError("max")),t(e,8,0,n.control(n.editor.key).hasError("minlength")),t(e,10,0,n.control(n.editor.key).hasError("maxlength"))}),null)}function tv(t){return go(0,[(t()(),Zi(0,0,null,null,29,"div",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var r=!0;return"submit"===e&&(r=!1!==Gr(t,5).onSubmit(n)&&r),"reset"===e&&(r=!1!==Gr(t,5).onReset()&&r),r}),null,null)),as(512,null,Gl,Wl,[An,Fn,ln,dn]),os(2,278528,null,0,Jl,[Gl],{ngClass:[0,"ngClass"]},null),uo(3,{"has-danger":0,"form-group":1,checkbox:2}),os(4,16384,null,0,sa,[],{ngSwitch:[0,"ngSwitch"]},null),os(5,540672,null,0,im,[[8,null],[8,null]],{form:[0,"form"]},null),as(2048,null,eg,null,[im]),os(7,16384,null,0,og,[[4,eg]],null,null),(t()(),Wi(16777216,null,null,1,null,Hm)),os(9,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Vm)),os(11,278528,null,0,ia,[Rn,Dn,sa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Wi(16777216,null,null,1,null,jm)),os(13,278528,null,0,ia,[Rn,Dn,sa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Wi(16777216,null,null,1,null,Bm)),os(15,278528,null,0,ia,[Rn,Dn,sa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Wi(16777216,null,null,1,null,Lm)),os(17,278528,null,0,ia,[Rn,Dn,sa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Wi(16777216,null,null,1,null,Km)),os(19,278528,null,0,ia,[Rn,Dn,sa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Wi(16777216,null,null,1,null,qm)),os(21,278528,null,0,ia,[Rn,Dn,sa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Wi(16777216,null,null,1,null,$m)),os(23,278528,null,0,ia,[Rn,Dn,sa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Wi(16777216,null,null,1,null,zm)),os(25,278528,null,0,ia,[Rn,Dn,sa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Wi(16777216,null,null,1,null,Gm)),os(27,16384,null,0,oa,[Rn,Dn,sa],null,null),(t()(),Wi(16777216,null,null,1,null,Xm)),os(29,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component,r=t(e,3,0,n.control(n.editor.key).invalid,"checkbox"!==n.editor.type,"checkbox"===n.editor.type);t(e,2,0,r),t(e,4,0,n.editor.type),t(e,5,0,n.form),t(e,9,0,!n.hideLabel&&"checkbox"!==n.editor.type&&"hidden"!==n.editor.type),t(e,11,0,"hidden"),t(e,13,0,"number"),t(e,15,0,"password"),t(e,17,0,"checkbox"),t(e,19,0,"select"),t(e,21,0,"multi-select"),t(e,23,0,"date"),t(e,25,0,"textarea"),t(e,29,0,n.control(n.editor.key).invalid)}),(function(t,e){t(e,0,0,Gr(e,7).ngClassUntouched,Gr(e,7).ngClassTouched,Gr(e,7).ngClassPristine,Gr(e,7).ngClassDirty,Gr(e,7).ngClassValid,Gr(e,7).ngClassInvalid,Gr(e,7).ngClassPending)}))}const ev="hidden",nv="text",rv="password",sv="checkbox",iv="multi-select",ov="single",lv="array";class av{static getValidators(t){const e=new Array;return t.required&&e.push(cg.required),t.min&&e.push(cg.min(t.min)),t.max&&e.push(cg.max(t.max)),t.minLength&&e.push(cg.minLength(t.minLength)),t.maxLength&&e.push(cg.maxLength(t.maxLength)),cg.compose(e)}}class uv{}class cv{constructor(t){this._registry=t}set slot(t){this._slot=t}set form(t){this._form=t}ngOnInit(){if(this._slot){const t=this._registry.get(this._slot.type?this._slot.type:ov);if(t){const e=this.slotContent.injector.get(nn).resolveComponentFactory(t.component);this._componentRef=this.slotContent.createComponent(e,this.slotContent.length),this._componentRef.instance.slot=this._slot,this._componentRef.instance.form=this._form}}}ngOnDestroy(){this._componentRef&&(delete this._componentRef.instance.slot,delete this._componentRef.instance.form,this._componentRef.destroy())}}class hv{constructor(t,e){this.key=t,this.component=e}}class dv{constructor(){this._registry=new Map}register(t){this._registry.has(t.key)||this._registry.set(t.key,t)}exists(t){return this._registry.has(t)}get(t){const e=this._registry.get(t);if(!e)throw new Error(`ComponentMetaData for key ${t} was not found!`);return e}}var pv=Qn({encapsulation:2,styles:[],data:{}});function fv(t){return go(0,[(t()(),Wi(0,null,null,0))],null,null)}function gv(t){return go(0,[to(402653184,1,{slotContent:0}),(t()(),Wi(16777216,[[1,3],["slotContent",2]],null,0,null,fv))],null,null)}class mv extends uv{constructor(){super(...arguments),this.collapsed=!1}toggle(){this.collapsed=!this.collapsed}}var vv=Qn({encapsulation:2,styles:[],data:{}});function yv(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-editor",[],null,null,null,tv,Om)),os(1,49152,null,0,Nm,[],{editor:[0,"editor"],form:[1,"form"]},null)],(function(t,e){t(e,1,0,e.context.$implicit,e.component.form)}),null)}function wv(t){return go(0,[(t()(),Zi(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,yv)),os(2,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null),(t()(),Wi(0,null,null,0))],(function(t,e){t(e,2,0,e.component.slot.editors)}),null)}function bv(t){return go(0,[(t()(),Zi(0,0,null,null,5,null,null,null,null,null,null,null)),(t()(),Zi(1,0,null,null,4,"fieldset",[],null,null,null,null,null)),(t()(),Zi(2,0,null,null,1,"legend",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggle()&&r),r}),null,null)),(t()(),ho(3,null,["",""])),(t()(),Wi(16777216,null,null,1,null,wv)),os(5,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,5,0,!e.component.collapsed)}),(function(t,e){t(e,3,0,e.component.slot.title)}))}function Sv(t){return go(0,[(t()(),Zi(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),Zi(1,0,null,null,1,"tw-slothost",[],null,null,null,gv,pv)),os(2,245760,null,0,cv,[dv],{slot:[0,"slot"],form:[1,"form"]},null)],(function(t,e){t(e,2,0,e.context.$implicit,e.component.form.get(e.context.$implicit.key))}),null)}function _v(t){return go(0,[(t()(),Zi(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Sv)),os(2,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null),(t()(),Wi(0,null,null,0))],(function(t,e){t(e,2,0,e.component.slot.children)}),null)}function Cv(t){return go(0,[(t()(),Wi(16777216,null,null,1,null,bv)),os(1,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,_v)),os(3,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.slot.editors&&n.slot.editors.length>0),t(e,3,0,n.slot.children&&n.slot.children.length>0)}),null)}function xv(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-slot",[],null,null,null,Cv,vv)),os(1,49152,null,0,mv,[],null,null)],null,null)}var Ev=Hr("tw-slot",mv,xv,{slot:"slot",form:"form"},{},[]);class Av extends mv{constructor(t){super(),this._fb=t}get rows(){return this.form}add(){const t=this.createRow(this.slot);this.rows.push(t)}remove(t){this.rows.removeAt(t)}createRow(t){const e=this._fb.group({});return t.editors.forEach(t=>{e.addControl(t.key,new zg(void 0,av.getValidators(t)))}),e}}var Fv=Qn({encapsulation:2,styles:[],data:{}});function Tv(t){return go(0,[(t()(),Zi(0,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),Zi(1,0,null,null,1,"tw-editor",[],null,null,null,tv,Om)),os(2,49152,null,0,Nm,[],{hideLabel:[0,"hideLabel"],editor:[1,"editor"],form:[2,"form"]},null)],(function(t,e){t(e,2,0,!0,e.context.$implicit,e.component.rows.at(e.parent.context.index))}),null)}function Iv(t){return go(0,[(t()(),Zi(0,0,null,null,5,"tr",[],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Tv)),os(2,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null),(t()(),Zi(3,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),Zi(4,0,null,null,1,"button",[["class","button--secondary"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.remove(t.context.index)&&r),r}),null,null)),(t()(),ho(-1,null,["-"]))],(function(t,e){t(e,2,0,e.component.slot.editors)}),null)}function kv(t){return go(0,[(t()(),Zi(0,0,null,null,11,null,null,null,null,null,null,null)),(t()(),Zi(1,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),Zi(2,0,null,null,1,"button",[["class","button--secondary"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.add()&&r),r}),null,null)),(t()(),ho(-1,null,["+"])),(t()(),Zi(4,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),Zi(5,0,null,null,6,"table",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var r=!0;return"submit"===e&&(r=!1!==Gr(t,6).onSubmit(n)&&r),"reset"===e&&(r=!1!==Gr(t,6).onReset()&&r),r}),null,null)),os(6,540672,null,0,im,[[8,null],[8,null]],{form:[0,"form"]},null),as(2048,null,eg,null,[im]),os(8,16384,null,0,og,[[4,eg]],null,null),(t()(),Zi(9,0,null,null,2,"tbody",[],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Iv)),os(11,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,6,0,n.form),t(e,11,0,n.rows.controls)}),(function(t,e){t(e,5,0,Gr(e,8).ngClassUntouched,Gr(e,8).ngClassTouched,Gr(e,8).ngClassPristine,Gr(e,8).ngClassDirty,Gr(e,8).ngClassValid,Gr(e,8).ngClassInvalid,Gr(e,8).ngClassPending)}))}function Dv(t){return go(0,[(t()(),Zi(0,0,null,null,4,"fieldset",[],null,null,null,null,null)),(t()(),Zi(1,0,null,null,1,"legend",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggle()&&r),r}),null,null)),(t()(),ho(2,null,["",""])),(t()(),Wi(16777216,null,null,1,null,kv)),os(4,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,4,0,!e.component.collapsed)}),(function(t,e){t(e,2,0,e.component.slot.title)}))}function Pv(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-arrayslot",[],null,null,null,Dv,Fv)),os(1,49152,null,0,Av,[dm],null,null)],null,null)}var Rv=Hr("tw-arrayslot",Av,Pv,{slot:"slot",form:"form"},{},[]);class Nv{constructor(){this.style="pane"}}var Ov=Qn({encapsulation:0,styles:[[""]],data:{}});function Hv(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[["class","pane__list"]],null,null,null,null,null)),io(null,0),(t()(),Zi(2,0,null,null,1,"div",[["class","pane__detail"]],null,null,null,null,null)),io(null,1)],null,null)}class Vv{transform(t,e){return t?e?(e=e.toLowerCase(),t.filter(t=>JSON.stringify(t).toLowerCase().includes(e))):t:[]}}class jv{constructor(){this.header="list__header"}}class Bv{constructor(t){this.template=t}}class Lv{get rows(){return this._rows}set rows(t){this._rows=t,this.loading=!1,this.isEmpty||this.ngAfterContentInit()}ngOnInit(){this.loading=!0}ngAfterContentInit(){this.templates.forEach(t=>{this.itemTemplate=t.template})}isEmpty(){const t=this.rows;return null==t||0===t.length}attachRows(t){this.isEmpty()?this.rows=t:t.forEach(t=>{this.rows.push(t)})}}class Mv{constructor(){this.classList=new Array(...["fa","fa-fw"])}set name(t){this.addClass(`fa-${t}`)}set size(t){this.addClass(`fa-${t}x`)}set spin(t){t?this.addClass("fa-spin"):this.removeClass("fa-spin")}addClass(t){this.classList.push(t)}removeClass(t){let e;(e=this.classList.indexOf(t))>=0&&this.classList.splice(e,1)}}var Uv=Qn({encapsulation:2,styles:[],data:{}});function Kv(t){return go(0,[(t()(),Zi(0,0,null,null,2,"i",[["aria-hidden","true"]],null,null,null,null,null)),as(512,null,Gl,Wl,[An,Fn,ln,dn]),os(2,278528,null,0,Jl,[Gl],{ngClass:[0,"ngClass"]},null)],(function(t,e){t(e,2,0,e.component.classList)}),null)}var qv=Qn({encapsulation:2,styles:[],data:{}});function $v(t){return go(0,[io(null,0)],null,null)}var zv=Qn({encapsulation:2,styles:[],data:{}});function Gv(t){return go(0,[(t()(),Zi(0,0,null,null,2,"div",[["class","list--loading"]],null,null,null,null,null)),(t()(),Zi(1,0,null,null,1,"tw-icon",[["name","spinner"]],null,null,null,Kv,Uv)),os(2,49152,null,0,Mv,[],{name:[0,"name"],spin:[1,"spin"]},null)],(function(t,e){t(e,2,0,"spinner",!0)}),null)}function Wv(t){return go(0,[(t()(),Zi(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Zv(t){return go(0,[(t()(),Wi(16777216,null,null,2,null,Wv)),os(1,540672,null,0,la,[Rn],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),uo(2,{$implicit:0,rowIndex:1}),(t()(),Wi(0,null,null,0))],(function(t,e){var n=e.component,r=t(e,2,0,e.context.$implicit,e.context.index);t(e,1,0,r,n.itemTemplate)}),null)}function Jv(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(-1,null,["No data!"]))],null,null)}function Yv(t){return go(0,[(t()(),Zi(0,0,null,null,9,"div",[["class","list"]],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Gv)),os(2,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),io(null,0),(t()(),Zi(4,0,null,null,4,"div",[["class","list__content"]],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Zv)),os(6,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null),(t()(),Wi(16777216,null,null,1,null,Jv)),os(8,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),io(null,1)],(function(t,e){var n=e.component;t(e,2,0,n.loading),t(e,6,0,n.rows),t(e,8,0,n.isEmpty())}),null)}class Qv{constructor(t){this.http=t}claimtypes(){return this.http.get("claimtype").pipe(Tu(this.http.handleError))}claimtype(t){return this.http.get(`claimtype/${t}`).pipe(Tu(this.http.handleError))}create(t){return t.id=void 0,this.http.post("claimtype",t).pipe(Tu(this.http.handleError))}update(t){return this.http.put("claimtype",t).pipe(Tu(this.http.handleError))}delete(t){return this.http.delete(`claimtype/${t}`).pipe(Tu(this.http.handleError))}}let Xv=(()=>{return Za([El],class{constructor(t,e){this.service=t,this.bus=e,this.searchText="",this.claimtypes=[],this.busSubscription=this.bus.subsribe(this)}ngOnInit(){this.searchText="",this.loadData()}ngOnDestroy(){this.bus.unsubscribe(this.busSubscription)}onMessage(t){"claimtype"===t.source&&this.loadData()}getType(){return Bf.KEY}reload(){this.ngOnInit()}loadData(){this.loadClaimtypes()}loadClaimtypes(){this.claimtypes$=this.service.claimtypes().subscribe(t=>{this.claimtypes=t})}})})();var ty=Qn({encapsulation:0,styles:[[""]],data:{}});function ey(t){return go(0,[(t()(),Zi(0,0,null,null,9,"div",[["class","list__item"],["routerLinkActive","active"]],[[1,"title",0]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Gr(t,1).onClick()&&r),r}),null,null)),os(1,16384,[[4,4]],0,sf,[rf,zd,[8,null],dn,ln],{routerLink:[0,"routerLink"]},null),ao(2,2),os(3,1720320,null,2,af,[rf,ln,dn,[2,sf],[2,of]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,4,{links:1}),to(603979776,5,{linksWithHrefs:1}),(t()(),Zi(6,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(7,null,["",""])),(t()(),Zi(8,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(9,null,["",""]))],(function(t,e){var n=t(e,2,0,".",null==e.context.$implicit?null:e.context.$implicit.id);t(e,1,0,n),t(e,3,0,"active")}),(function(t,e){t(e,0,0,null==e.context.$implicit?null:e.context.$implicit.name),t(e,7,0,e.context.$implicit.name),t(e,9,0,e.context.$implicit.description)}))}function ny(t){return go(0,[ls(0,Vv,[]),(t()(),Zi(1,0,null,null,27,"tw-list",[],null,null,null,Yv,zv)),os(2,1163264,null,3,Lv,[],{rows:[0,"rows"]},null),to(603979776,1,{header:0}),to(603979776,2,{footer:0}),to(603979776,3,{templates:1}),lo(6,2),(t()(),Zi(7,0,null,0,19,"tw-header",[],[[8,"className",0]],null,null,$v,qv)),os(8,49152,[[1,4]],0,jv,[],null,null),(t()(),Zi(9,0,null,0,1,"h3",[],null,null,null,null,null)),(t()(),ho(-1,null,["Claimtypes"])),(t()(),Zi(11,0,null,0,8,"div",[["class","button__bar"]],null,null,null,null,null)),(t()(),Zi(12,0,null,null,4,"a",[["class","button"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Gr(t,13).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),os(13,671744,null,0,of,[rf,zd,Ol],{routerLink:[0,"routerLink"]},null),ao(14,2),(t()(),Zi(15,0,null,null,1,"tw-icon",[["name","plus"]],null,null,null,Kv,Uv)),os(16,49152,null,0,Mv,[],{name:[0,"name"]},null),(t()(),Zi(17,0,null,null,2,"button",[["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.reload()&&r),r}),null,null)),(t()(),Zi(18,0,null,null,1,"tw-icon",[["name","refresh"]],null,null,null,Kv,Uv)),os(19,49152,null,0,Mv,[],{name:[0,"name"]},null),(t()(),Zi(20,0,null,0,6,"div",[["class","form list__search"]],null,null,null,null,null)),(t()(),Zi(21,0,null,null,5,"input",[["placeholder","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Gr(t,22)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,22).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,22)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,22)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==(s.searchText=n)&&r),r}),null,null)),os(22,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),as(1024,null,Jf,(function(t){return[t]}),[Xf]),os(24,671744,null,0,nm,[[8,null],[8,null],[8,null],[6,Jf]],{model:[0,"model"]},{update:"ngModelChange"}),as(2048,null,rg,null,[nm]),os(26,16384,null,0,ig,[[4,rg]],null,null),(t()(),Wi(0,null,null,1,null,ey)),os(28,16384,[[3,4]],0,Bv,[Dn],{name:[0,"name"]},null)],(function(t,e){var n=e.component,r=Zn(e,2,0,t(e,6,0,Gr(e,0),n.claimtypes,n.searchText));t(e,2,0,r);var s=t(e,14,0,".","new");t(e,13,0,s),t(e,16,0,"plus"),t(e,19,0,"refresh"),t(e,24,0,n.searchText),t(e,28,0,"claimtype-item")}),(function(t,e){t(e,7,0,Gr(e,8).header),t(e,12,0,Gr(e,13).target,Gr(e,13).href),t(e,21,0,Gr(e,26).ngClassUntouched,Gr(e,26).ngClassTouched,Gr(e,26).ngClassPristine,Gr(e,26).ngClassDirty,Gr(e,26).ngClassValid,Gr(e,26).ngClassInvalid,Gr(e,26).ngClassPending)}))}class ry{}var sy=Qn({encapsulation:0,styles:[[""]],data:{}});function iy(t){return go(0,[(t()(),Zi(0,0,null,null,8,"tw-pane",[],[[8,"className",0]],null,null,Hv,Ov)),os(1,49152,null,0,Nv,[],null,null),(t()(),Zi(2,0,null,0,3,"div",[["list",""]],null,null,null,null,null)),(t()(),Zi(3,0,null,null,2,"tw-claimtype-list",[],null,null,null,ny,ty)),as(512,null,Qv,Qv,[$a]),os(5,245760,null,0,Xv,[Qv,Nf],null,null),(t()(),Zi(6,0,null,1,2,"div",[["detail",""]],null,null,null,null,null)),(t()(),Zi(7,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),os(8,212992,null,0,hf,[cf,Rn,nn,[8,null],Fe],null,null)],(function(t,e){t(e,5,0),t(e,8,0)}),(function(t,e){t(e,0,0,Gr(e,1).style)}))}function oy(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-claimtype-dashboard",[],null,null,null,iy,sy)),os(1,49152,null,0,ry,[],null,null)],null,null)}var ly=Hr("tw-claimtype-dashboard",ry,oy,{},{},[]);class ay{}var uy=Qn({encapsulation:2,styles:[],data:{}});function cy(t){return go(0,[(t()(),Zi(0,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),ho(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.context.$implicit)}))}function hy(t){return go(0,[(t()(),Zi(0,0,null,null,2,"ul",[["class","form__validation-summary"]],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,cy)),os(2,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.errors)}),null)}function dy(t){return go(0,[(t()(),Wi(16777216,null,null,1,null,hy)),os(1,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,1,0,e.component.errors)}),null)}class py{constructor(t,e){this._fb=t,this._slotRegistry=e}toGroup(t,e){const n=this.getSlot(t);return this.toGroupRecursive(n,e)}getSlot(t){return this._slotRegistry.get(t)}toGroupRecursive(t,e){const n=this._fb.group({});if(Array.isArray(e)){const n=this._fb.array([]);for(let r=0;r<e.length;r++){const s=this._fb.group({});t.editors.forEach(t=>{s.addControl(t.key,new zg({value:e[r][t.key],disabled:!0===t.isReadOnly},av.getValidators(t)))}),n.push(s)}return n}return t.editors.forEach(t=>{n.addControl(t.key,new zg({value:e[t.key],disabled:!0===t.isReadOnly},av.getValidators(t)))}),t.children&&t.children.length>0&&t.children.forEach(t=>{n.addControl(t.key,this.toGroupRecursive(t,e[t.key]))}),n}}class fy{constructor(){this._registry=new Map}register(t){this._registry.set(t.key,t)}get(t){return this._registry.get(t)}}class gy{constructor(t){this.formdefService=t,this.showSave=!1,this.showCancel=!1,this.showDelete=!1,this.submitted=new Ds,this.resetted=new Ds,this.deleted=new Ds,this.class="form",this.form=new Gg({})}set viewModel(t){t&&(this._viewModel=t,this.ngOnInit())}get viewModel(){return this._viewModel}get getSaveLabel(){return this.saveTitle?this.saveTitle:"Save"}get formValue(){return this.form.value}get formIsValid(){return this.form.valid}ngOnInit(){this.viewModel&&(this.form=this.formdefService.toGroup(this.key,this.viewModel),this.slot=this.formdefService.getSlot(this.key))}onSubmit(){this.submitted.next(this.form.value)}onReset(){this.resetted.next(this.form.value)}onDelete(){this.deleted.next(this.form.value)}}var my=Qn({encapsulation:2,styles:[],data:{}});function vy(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-slot",[],null,null,null,Cv,vv)),os(1,49152,null,0,mv,[],{slot:[0,"slot"],form:[1,"form"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.slot,n.form)}),null)}function yy(t){return go(0,[(t()(),Zi(0,0,null,null,1,"button",[["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),ho(1,null,["",""]))],null,(function(t,e){var n=e.component;t(e,0,0,!n.form.valid),t(e,1,0,n.getSaveLabel)}))}function wy(t){return go(0,[(t()(),Zi(0,0,null,null,1,"button",[["class","button--secondary"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onReset()&&r),r}),null,null)),(t()(),ho(-1,null,["Cancel"]))],null,null)}function by(t){return go(0,[(t()(),Zi(0,0,null,null,1,"button",[["class","button--secondary"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDelete()&&r),r}),null,null)),(t()(),ho(-1,null,["Delete"]))],null,null)}function Sy(t){return go(0,[(t()(),Zi(0,0,null,null,15,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(t,e,n){var r=!0,s=t.component;return"submit"===e&&(r=!1!==Gr(t,2).onSubmit(n)&&r),"reset"===e&&(r=!1!==Gr(t,2).onReset()&&r),"ngSubmit"===e&&(r=!1!==s.onSubmit()&&r),r}),null,null)),os(1,16384,null,0,rm,[],null,null),os(2,540672,null,0,im,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),as(2048,null,eg,null,[im]),os(4,16384,null,0,og,[[4,eg]],null,null),(t()(),Wi(16777216,null,null,1,null,vy)),os(6,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Zi(7,0,null,null,1,"tw-validation-summary",[],null,null,null,dy,uy)),os(8,49152,null,0,ay,[],{errors:[0,"errors"]},null),(t()(),Zi(9,0,null,null,6,"div",[["class","button__bar"]],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,yy)),os(11,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,wy)),os(13,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,by)),os(15,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.form),t(e,6,0,n.slot),t(e,8,0,n.errors),t(e,11,0,n.showSave),t(e,13,0,n.showCancel),t(e,15,0,n.showDelete)}),(function(t,e){t(e,0,0,Gr(e,4).ngClassUntouched,Gr(e,4).ngClassTouched,Gr(e,4).ngClassPristine,Gr(e,4).ngClassDirty,Gr(e,4).ngClassValid,Gr(e,4).ngClassInvalid,Gr(e,4).ngClassPending)}))}class _y{constructor(t){this.registry=t,this.registry.register(new hv(ov,mv)),this.registry.register(new hv(lv,Av))}}let Cy=(()=>{class t{constructor(){this.key=t.KEY,this.type=ov,this.title="Detail",this.editors=[{key:"id",type:ev,label:"Id",required:!0},{key:"name",type:nv,label:"Name",required:!0},{key:"description",type:nv,label:"Description"}]}}return t.KEY="ClaimtypeDetailSlot",t})(),xy=(()=>{return Za([El],class{constructor(t,e,n,r){this.router=t,this.route=e,this.service=n,this.messageBus=r,this.key=Cy.KEY,this.isNew=!1}ngOnInit(){this.routeParams$=this.route.params.subscribe(t=>{t.id&&this.init(t.id)})}submitted(t){this.claimtype$=this.isNew?this.service.create(t).subscribe(t=>{t&&(this.changesSaved(),this.back())}):this.service.update(t).subscribe(()=>{this.changesSaved(),this.back()})}deleted(t){this.isNew||(this.claimtype$=this.service.delete(t.id).subscribe(t=>{this.changesSaved(),this.back()}))}back(){this.router.navigate(["claimtypes"])}init(t){"new"!==t?this.load(t.toString()):this.create()}load(t){this.isNew=!1,this.claimtype$=this.service.claimtype(t).subscribe(t=>{this.key=Cy.KEY,this.viewModel=t})}create(){this.isNew=!0,this.viewModel={id:"new",name:void 0,description:void 0}}changesSaved(){this.messageBus.publish(new Vf(void 0,"Your changes have been saved...",Hf.Success)),this.messageBus.publish(new Bf("claimtype"))}})})();var Ey=Qn({encapsulation:0,styles:[[""]],data:{}});function Ay(t){return go(0,[(t()(),Zi(0,0,null,null,2,"tw-formdef",[],[[8,"className",0]],[[null,"submitted"],[null,"deleted"]],(function(t,e,n){var r=!0,s=t.component;return"submitted"===e&&(r=!1!==s.submitted(n)&&r),"deleted"===e&&(r=!1!==s.deleted(n)&&r),r}),Sy,my)),as(512,null,py,py,[dm,fy]),os(2,114688,[["formDef",4]],0,gy,[py],{key:[0,"key"],viewModel:[1,"viewModel"],showSave:[2,"showSave"],showDelete:[3,"showDelete"]},{submitted:"submitted",deleted:"deleted"})],(function(t,e){var n=e.component;t(e,2,0,n.key,n.viewModel,!0,!n.isNew)}),(function(t,e){t(e,0,0,Gr(e,2).class)}))}function Fy(t){return go(0,[(t()(),Zi(0,0,null,null,2,"tw-claimtype-detail",[],null,null,null,Ay,Ey)),as(512,null,Qv,Qv,[$a]),os(2,114688,null,0,xy,[rf,zd,Qv,Nf],null,null)],(function(t,e){t(e,2,0)}),null)}var Ty=Hr("tw-claimtype-detail",xy,Fy,{},{},[]);class Iy{constructor(t){this.http=t}roles(){return this.http.get("role").pipe(Tu(this.http.handleError))}role(t){return this.http.get(`role/${t}`).pipe(Tu(this.http.handleError))}create(t){return t.id=void 0,this.http.post("role",t).pipe(Tu(this.http.handleError))}update(t){return this.http.put("role",t).pipe(Tu(this.http.handleError))}delete(t){return this.http.delete(`role/${t}`).pipe(Tu(this.http.handleError))}}let ky=(()=>{return Za([El],class{constructor(t,e){this.service=t,this.bus=e,this.searchText="",this.roles=[],this.busSubscription=this.bus.subsribe(this)}ngOnInit(){this.searchText="",this.loadData()}ngOnDestroy(){this.bus.unsubscribe(this.busSubscription)}onMessage(t){"role"===t.source&&this.loadData()}getType(){return Bf.KEY}reload(){this.ngOnInit()}loadData(){this.loadRoles()}loadRoles(){this.roles$=this.service.roles().subscribe(t=>{this.roles=t})}})})();var Dy=Qn({encapsulation:0,styles:[[""]],data:{}});function Py(t){return go(0,[(t()(),Zi(0,0,null,null,7,"div",[["class","list__item"],["routerLinkActive","active"]],[[1,"title",0]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Gr(t,1).onClick()&&r),r}),null,null)),os(1,16384,[[4,4]],0,sf,[rf,zd,[8,null],dn,ln],{routerLink:[0,"routerLink"]},null),ao(2,2),os(3,1720320,null,2,af,[rf,ln,dn,[2,sf],[2,of]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,4,{links:1}),to(603979776,5,{linksWithHrefs:1}),(t()(),Zi(6,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(7,null,["",""]))],(function(t,e){var n=t(e,2,0,".",null==e.context.$implicit?null:e.context.$implicit.id);t(e,1,0,n),t(e,3,0,"active")}),(function(t,e){t(e,0,0,null==e.context.$implicit?null:e.context.$implicit.name),t(e,7,0,e.context.$implicit.name)}))}function Ry(t){return go(0,[ls(0,Vv,[]),(t()(),Zi(1,0,null,null,27,"tw-list",[],null,null,null,Yv,zv)),os(2,1163264,null,3,Lv,[],{rows:[0,"rows"]},null),to(603979776,1,{header:0}),to(603979776,2,{footer:0}),to(603979776,3,{templates:1}),lo(6,2),(t()(),Zi(7,0,null,0,19,"tw-header",[],[[8,"className",0]],null,null,$v,qv)),os(8,49152,[[1,4]],0,jv,[],null,null),(t()(),Zi(9,0,null,0,1,"h3",[],null,null,null,null,null)),(t()(),ho(-1,null,["Roles"])),(t()(),Zi(11,0,null,0,8,"div",[["class","button__bar"]],null,null,null,null,null)),(t()(),Zi(12,0,null,null,4,"a",[["class","button"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Gr(t,13).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),os(13,671744,null,0,of,[rf,zd,Ol],{routerLink:[0,"routerLink"]},null),ao(14,2),(t()(),Zi(15,0,null,null,1,"tw-icon",[["name","plus"]],null,null,null,Kv,Uv)),os(16,49152,null,0,Mv,[],{name:[0,"name"]},null),(t()(),Zi(17,0,null,null,2,"button",[["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.reload()&&r),r}),null,null)),(t()(),Zi(18,0,null,null,1,"tw-icon",[["name","refresh"]],null,null,null,Kv,Uv)),os(19,49152,null,0,Mv,[],{name:[0,"name"]},null),(t()(),Zi(20,0,null,0,6,"div",[["class","form list__search"]],null,null,null,null,null)),(t()(),Zi(21,0,null,null,5,"input",[["placeholder","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Gr(t,22)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,22).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,22)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,22)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==(s.searchText=n)&&r),r}),null,null)),os(22,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),as(1024,null,Jf,(function(t){return[t]}),[Xf]),os(24,671744,null,0,nm,[[8,null],[8,null],[8,null],[6,Jf]],{model:[0,"model"]},{update:"ngModelChange"}),as(2048,null,rg,null,[nm]),os(26,16384,null,0,ig,[[4,rg]],null,null),(t()(),Wi(0,null,null,1,null,Py)),os(28,16384,[[3,4]],0,Bv,[Dn],{name:[0,"name"]},null)],(function(t,e){var n=e.component,r=Zn(e,2,0,t(e,6,0,Gr(e,0),n.roles,n.searchText));t(e,2,0,r);var s=t(e,14,0,".","new");t(e,13,0,s),t(e,16,0,"plus"),t(e,19,0,"refresh"),t(e,24,0,n.searchText),t(e,28,0,"role-item")}),(function(t,e){t(e,7,0,Gr(e,8).header),t(e,12,0,Gr(e,13).target,Gr(e,13).href),t(e,21,0,Gr(e,26).ngClassUntouched,Gr(e,26).ngClassTouched,Gr(e,26).ngClassPristine,Gr(e,26).ngClassDirty,Gr(e,26).ngClassValid,Gr(e,26).ngClassInvalid,Gr(e,26).ngClassPending)}))}class Ny{}var Oy=Qn({encapsulation:0,styles:[[""]],data:{}});function Hy(t){return go(0,[(t()(),Zi(0,0,null,null,8,"tw-pane",[],[[8,"className",0]],null,null,Hv,Ov)),os(1,49152,null,0,Nv,[],null,null),(t()(),Zi(2,0,null,0,3,"div",[["list",""]],null,null,null,null,null)),(t()(),Zi(3,0,null,null,2,"tw-role-list",[],null,null,null,Ry,Dy)),as(512,null,Iy,Iy,[$a]),os(5,245760,null,0,ky,[Iy,Nf],null,null),(t()(),Zi(6,0,null,1,2,"div",[["detail",""]],null,null,null,null,null)),(t()(),Zi(7,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),os(8,212992,null,0,hf,[cf,Rn,nn,[8,null],Fe],null,null)],(function(t,e){t(e,5,0),t(e,8,0)}),(function(t,e){t(e,0,0,Gr(e,1).style)}))}function Vy(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-role-dashboard",[],null,null,null,Hy,Oy)),os(1,49152,null,0,Ny,[],null,null)],null,null)}var jy=Hr("tw-role-dashboard",Ny,Vy,{},{},[]);let By=(()=>{class t{constructor(){this.key=t.KEY,this.type=ov,this.title="Detail",this.editors=[{key:"id",type:ev,label:"Id",required:!0},{key:"name",type:nv,label:"Name",required:!0}]}}return t.KEY="RoleDetailSlot",t})(),Ly=(()=>{return Za([El],class{constructor(t,e,n,r){this.router=t,this.route=e,this.service=n,this.messageBus=r,this.key=By.KEY,this.isNew=!1}ngOnInit(){this.routeParams$=this.route.params.subscribe(t=>{t.id&&this.init(t.id)})}submitted(t){this.role$=this.isNew?this.service.create(t).subscribe(t=>{t&&(this.changesSaved(),this.back())}):this.service.update(t).subscribe(()=>{this.changesSaved(),this.back()})}deleted(t){this.isNew||(this.role$=this.service.delete(t.id).subscribe(t=>{this.changesSaved(),this.back()}))}back(){this.router.navigate(["roles"])}init(t){"new"!==t?this.load(t.toString()):this.create()}load(t){this.isNew=!1,this.role$=this.service.role(t).subscribe(t=>{this.key=By.KEY,this.viewModel=t})}create(){this.isNew=!0,this.viewModel={id:"new",name:void 0}}changesSaved(){this.messageBus.publish(new Vf(void 0,"Your changes have been saved...",Hf.Success)),this.messageBus.publish(new Bf("role"))}})})();var My=Qn({encapsulation:0,styles:[[""]],data:{}});function Uy(t){return go(0,[(t()(),Zi(0,0,null,null,2,"tw-formdef",[],[[8,"className",0]],[[null,"submitted"],[null,"deleted"]],(function(t,e,n){var r=!0,s=t.component;return"submitted"===e&&(r=!1!==s.submitted(n)&&r),"deleted"===e&&(r=!1!==s.deleted(n)&&r),r}),Sy,my)),as(512,null,py,py,[dm,fy]),os(2,114688,[["formDef",4]],0,gy,[py],{key:[0,"key"],viewModel:[1,"viewModel"],showSave:[2,"showSave"],showDelete:[3,"showDelete"]},{submitted:"submitted",deleted:"deleted"})],(function(t,e){var n=e.component;t(e,2,0,n.key,n.viewModel,!0,!n.isNew)}),(function(t,e){t(e,0,0,Gr(e,2).class)}))}function Ky(t){return go(0,[(t()(),Zi(0,0,null,null,2,"tw-role-detail",[],null,null,null,Uy,My)),as(512,null,Iy,Iy,[$a]),os(2,114688,null,0,Ly,[rf,zd,Iy,Nf],null,null)],(function(t,e){t(e,2,0)}),null)}var qy=Hr("tw-role-detail",Ly,Ky,{},{},[]);let $y=(()=>{class t{constructor(){this.key=t.KEY,this.type=ov,this.title="Register user",this.editors=[{key:"userName",type:nv,label:"Name",required:!0},{key:"email",type:nv,label:"Email",required:!0},{key:"password",type:rv,label:"Password",required:!0,minLength:6,maxLength:100}]}}return t.KEY="RegisterUserSlot",t})(),zy=(()=>{class t{constructor(e,n){this.key=t.KEY,this.type=ov,this.title="Detail";const r=e.map(t=>({key:t,value:t})),s=n.map(t=>({key:t,value:t}));this.editors=[{key:"id",type:ev,label:"Id",required:!0},{key:"userName",type:nv,label:"Name",required:!0},{key:"email",type:nv,label:"Email",required:!0},{key:"lockoutEnabled",type:sv,label:"Lockout enabled"},{key:"isLockedOut",type:sv,label:"Is locked out",isReadOnly:!0},{key:"claims",type:iv,label:"Claims",required:!1,options:r,singleSelection:!1,bindingBehaviour:bm},{key:"roles",type:iv,label:"Roles",required:!1,options:s,singleSelection:!1,bindingBehaviour:bm}]}}return t.KEY="UserDetailSlot",t})();class Gy{constructor(t,e,n){this.http=t,this.claimsService=e,this.roleService=n}users(){return this.http.get("account/users").pipe(Tu(this.http.handleError))}user(t){return Wf({user:this.http.get(`account/user/${t}`),claims:this.claimsService.claimtypes(),roles:this.roleService.roles()}).pipe(V(t=>({user:t.user,claims:t.claims.map(t=>t.name),roles:t.roles.map(t=>t.name)}))).pipe(Tu(this.http.handleError))}register(t){return this.http.post("account/register",t).pipe(Tu(this.http.handleError))}changePassword(t){return this.http.post("account/changepassword",t).pipe(Tu(this.http.handleError))}update(t){return this.http.put("account/user",t).pipe(Tu(this.http.handleError))}delete(t){return this.http.delete(`account/user/${t}`).pipe(Tu(this.http.handleError))}}let Wy=(()=>{return Za([El],class{constructor(t,e){this.service=t,this.bus=e,this.searchText="",this.users=[],this.busSubscription=this.bus.subsribe(this)}ngOnInit(){this.searchText="",this.loadData()}ngOnDestroy(){this.bus.unsubscribe(this.busSubscription)}onMessage(t){"user"===t.source&&this.loadData()}getType(){return Bf.KEY}reload(){this.ngOnInit()}loadData(){this.loadUsers()}loadUsers(){this.users$=this.service.users().subscribe(t=>{this.users=t})}})})();var Zy=Qn({encapsulation:0,styles:[[""]],data:{}});function Jy(t){return go(0,[(t()(),Zi(0,0,null,null,9,"div",[["class","list__item"],["routerLinkActive","active"]],[[1,"title",0]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Gr(t,1).onClick()&&r),r}),null,null)),os(1,16384,[[4,4]],0,sf,[rf,zd,[8,null],dn,ln],{routerLink:[0,"routerLink"]},null),ao(2,2),os(3,1720320,null,2,af,[rf,ln,dn,[2,sf],[2,of]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,4,{links:1}),to(603979776,5,{linksWithHrefs:1}),(t()(),Zi(6,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(7,null,["",""])),(t()(),Zi(8,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(9,null,["",""]))],(function(t,e){var n=t(e,2,0,".",null==e.context.$implicit?null:e.context.$implicit.id);t(e,1,0,n),t(e,3,0,"active")}),(function(t,e){t(e,0,0,null==e.context.$implicit?null:e.context.$implicit.userName),t(e,7,0,e.context.$implicit.userName),t(e,9,0,e.context.$implicit.email)}))}function Yy(t){return go(0,[ls(0,Vv,[]),(t()(),Zi(1,0,null,null,27,"tw-list",[],null,null,null,Yv,zv)),os(2,1163264,null,3,Lv,[],{rows:[0,"rows"]},null),to(603979776,1,{header:0}),to(603979776,2,{footer:0}),to(603979776,3,{templates:1}),lo(6,2),(t()(),Zi(7,0,null,0,19,"tw-header",[],[[8,"className",0]],null,null,$v,qv)),os(8,49152,[[1,4]],0,jv,[],null,null),(t()(),Zi(9,0,null,0,1,"h3",[],null,null,null,null,null)),(t()(),ho(-1,null,["Users"])),(t()(),Zi(11,0,null,0,8,"div",[["class","button__bar"]],null,null,null,null,null)),(t()(),Zi(12,0,null,null,4,"a",[["class","button"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Gr(t,13).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),os(13,671744,null,0,of,[rf,zd,Ol],{routerLink:[0,"routerLink"]},null),ao(14,2),(t()(),Zi(15,0,null,null,1,"tw-icon",[["name","plus"]],null,null,null,Kv,Uv)),os(16,49152,null,0,Mv,[],{name:[0,"name"]},null),(t()(),Zi(17,0,null,null,2,"button",[["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.reload()&&r),r}),null,null)),(t()(),Zi(18,0,null,null,1,"tw-icon",[["name","refresh"]],null,null,null,Kv,Uv)),os(19,49152,null,0,Mv,[],{name:[0,"name"]},null),(t()(),Zi(20,0,null,0,6,"div",[["class","form list__search"]],null,null,null,null,null)),(t()(),Zi(21,0,null,null,5,"input",[["placeholder","search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var r=!0,s=t.component;return"input"===e&&(r=!1!==Gr(t,22)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Gr(t,22).onTouched()&&r),"compositionstart"===e&&(r=!1!==Gr(t,22)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Gr(t,22)._compositionEnd(n.target.value)&&r),"ngModelChange"===e&&(r=!1!==(s.searchText=n)&&r),r}),null,null)),os(22,16384,null,0,Xf,[dn,ln,[2,Qf]],null,null),as(1024,null,Jf,(function(t){return[t]}),[Xf]),os(24,671744,null,0,nm,[[8,null],[8,null],[8,null],[6,Jf]],{model:[0,"model"]},{update:"ngModelChange"}),as(2048,null,rg,null,[nm]),os(26,16384,null,0,ig,[[4,rg]],null,null),(t()(),Wi(0,null,null,1,null,Jy)),os(28,16384,[[3,4]],0,Bv,[Dn],{name:[0,"name"]},null)],(function(t,e){var n=e.component,r=Zn(e,2,0,t(e,6,0,Gr(e,0),n.users,n.searchText));t(e,2,0,r);var s=t(e,14,0,".","register");t(e,13,0,s),t(e,16,0,"plus"),t(e,19,0,"refresh"),t(e,24,0,n.searchText),t(e,28,0,"user-item")}),(function(t,e){t(e,7,0,Gr(e,8).header),t(e,12,0,Gr(e,13).target,Gr(e,13).href),t(e,21,0,Gr(e,26).ngClassUntouched,Gr(e,26).ngClassTouched,Gr(e,26).ngClassPristine,Gr(e,26).ngClassDirty,Gr(e,26).ngClassValid,Gr(e,26).ngClassInvalid,Gr(e,26).ngClassPending)}))}class Qy{}var Xy=Qn({encapsulation:0,styles:[[""]],data:{}});function tw(t){return go(0,[(t()(),Zi(0,0,null,null,8,"tw-pane",[],[[8,"className",0]],null,null,Hv,Ov)),os(1,49152,null,0,Nv,[],null,null),(t()(),Zi(2,0,null,0,3,"div",[["list",""]],null,null,null,null,null)),(t()(),Zi(3,0,null,null,2,"tw-user-list",[],null,null,null,Yy,Zy)),as(512,null,Gy,Gy,[$a,Qv,Iy]),os(5,245760,null,0,Wy,[Gy,Nf],null,null),(t()(),Zi(6,0,null,1,2,"div",[["detail",""]],null,null,null,null,null)),(t()(),Zi(7,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),os(8,212992,null,0,hf,[cf,Rn,nn,[8,null],Fe],null,null)],(function(t,e){t(e,5,0),t(e,8,0)}),(function(t,e){t(e,0,0,Gr(e,1).style)}))}function ew(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-user-dashboard",[],null,null,null,tw,Xy)),os(1,49152,null,0,Qy,[],null,null)],null,null)}var nw=Hr("tw-user-dashboard",Qy,ew,{},{},[]);let rw=(()=>{return Za([El],class{constructor(t,e,n){this.router=t,this.service=e,this.messageBus=n,this.key=$y.KEY,this.errors=[]}ngOnInit(){this.key=$y.KEY,this.viewModel={userName:void 0,email:void 0,password:void 0,confirmPassword:void 0}}submitted(t){t.confirmPassword=t.password,this.user$=this.service.register(t).subscribe(()=>{this.changesSaved(),this.back()},t=>{console.log(t),this.errors=t.errors})}back(){this.router.navigate(["users"])}changesSaved(){this.messageBus.publish(new Vf(void 0,"Your changes have been saved...",Hf.Success)),this.messageBus.publish(new Bf("user"))}})})();var sw=Qn({encapsulation:0,styles:[[""]],data:{}});function iw(t){return go(0,[(t()(),Zi(0,0,null,null,2,"tw-formdef",[],[[8,"className",0]],[[null,"submitted"]],(function(t,e,n){var r=!0;return"submitted"===e&&(r=!1!==t.component.submitted(n)&&r),r}),Sy,my)),as(512,null,py,py,[dm,fy]),os(2,114688,null,0,gy,[py],{key:[0,"key"],viewModel:[1,"viewModel"],showSave:[2,"showSave"],saveTitle:[3,"saveTitle"],showCancel:[4,"showCancel"],showDelete:[5,"showDelete"],errors:[6,"errors"]},{submitted:"submitted"})],(function(t,e){var n=e.component;t(e,2,0,n.key,n.viewModel,!0,"Register",!1,!1,n.errors)}),(function(t,e){t(e,0,0,Gr(e,2).class)}))}function ow(t){return go(0,[(t()(),Zi(0,0,null,null,2,"tw-register-user",[],null,null,null,iw,sw)),as(512,null,Gy,Gy,[$a,Qv,Iy]),os(2,114688,null,0,rw,[rf,Gy,Nf],null,null)],(function(t,e){t(e,2,0)}),null)}var lw=Hr("tw-register-user",rw,ow,{},{},[]);let aw=(()=>{return Za([El],class{constructor(t,e,n,r,s){this.router=t,this.route=e,this.service=n,this.slotRegistry=r,this.messageBus=s,this.key=zy.KEY}ngOnInit(){this.routeParams$=this.route.params.subscribe(t=>{t.id&&this.init(t.id)})}submitted(t){this.user$=this.service.update(t).subscribe(()=>{this.changesSaved(),this.back()})}deleted(t){this.changesSaved()}back(){this.router.navigate(["users"])}init(t){this.load(t.toString())}load(t){this.user$=this.service.user(t).subscribe(t=>{this.slotRegistry.register(new zy(t.claims,t.roles)),this.key=zy.KEY,this.viewModel=t.user})}changesSaved(){this.messageBus.publish(new Vf(void 0,"Your changes have been saved...",Hf.Success)),this.messageBus.publish(new Bf("user"))}})})();var uw=Qn({encapsulation:0,styles:[[""]],data:{}});function cw(t){return go(0,[(t()(),Zi(0,0,null,null,2,"tw-formdef",[],[[8,"className",0]],[[null,"submitted"]],(function(t,e,n){var r=!0;return"submitted"===e&&(r=!1!==t.component.submitted(n)&&r),r}),Sy,my)),as(512,null,py,py,[dm,fy]),os(2,114688,[["formDef",4]],0,gy,[py],{key:[0,"key"],viewModel:[1,"viewModel"],showSave:[2,"showSave"],showDelete:[3,"showDelete"]},{submitted:"submitted"})],(function(t,e){var n=e.component;t(e,2,0,n.key,n.viewModel,!0,!1)}),(function(t,e){t(e,0,0,Gr(e,2).class)}))}function hw(t){return go(0,[(t()(),Zi(0,0,null,null,2,"tw-user-detail",[],null,null,null,cw,uw)),as(512,null,Gy,Gy,[$a,Qv,Iy]),os(2,114688,null,0,aw,[rf,zd,Gy,fy,Nf],null,null)],(function(t,e){t(e,2,0)}),null)}var dw=Hr("tw-user-detail",aw,hw,{},{},[]),pw=Qn({encapsulation:2,styles:[],data:{}});function fw(t){return go(0,[(t()(),Zi(0,0,null,null,3,"h1",[],null,null,null,null,null)),(t()(),ho(-1,null,["Oooppss... "])),(t()(),Zi(2,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ho(-1,null,["You do not have access to this area!"])),(t()(),Zi(4,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),ho(-1,null,["Please try to login or ask your administrator."]))],null,null)}function gw(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-forbidden",[],null,null,null,fw,pw)),os(1,49152,null,0,_l,[],null,null)],null,null)}var mw=Hr("tw-forbidden",_l,gw,{},{},[]),vw=Qn({encapsulation:2,styles:[],data:{}});function yw(t){return go(0,[(t()(),Zi(0,0,null,null,3,"h1",[],null,null,null,null,null)),(t()(),ho(-1,null,["Oooppss... "])),(t()(),Zi(2,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),ho(-1,null,["This page does not exist!"]))],null,null)}function ww(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-page-not-found",[],null,null,null,yw,vw)),os(1,49152,null,0,Cl,[],null,null)],null,null)}var bw=Hr("tw-page-not-found",Cl,ww,{},{},[]);class Sw{constructor(){this.items=new Array}ngOnDestroy(){this.items=[]}register(t){this.items.some(e=>e.id===t.id)||this.items.push(t)}}class _w{constructor(t){this.service=t}get menuItems(){return this.service.items}ngOnInit(){this.service.register({id:"1",name:"Users",route:"/users",icon:"users"}),this.service.register({id:"2",name:"Roles",route:"/roles",icon:"tags"}),this.service.register({id:"3",name:"ClaimTypes",route:"/claimtypes",icon:"key"})}}var Cw=Qn({encapsulation:2,styles:[],data:{}});function xw(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-icon",[],null,null,null,Kv,Uv)),os(1,49152,null,0,Mv,[],{name:[0,"name"]},null)],(function(t,e){t(e,1,0,e.parent.parent.context.$implicit.icon)}),null)}function Ew(t){return go(0,[(t()(),Zi(0,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Gr(t,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),os(1,671744,[[2,4]],0,of,[rf,zd,Ol],{routerLink:[0,"routerLink"]},null),(t()(),Wi(16777216,null,null,1,null,xw)),os(3,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),ho(4,null,[" "," "]))],(function(t,e){t(e,1,0,e.parent.context.$implicit.route),t(e,3,0,e.parent.context.$implicit.icon)}),(function(t,e){t(e,0,0,Gr(e,1).target,Gr(e,1).href),t(e,4,0,e.parent.context.$implicit.name)}))}function Aw(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-icon",[],null,null,null,Kv,Uv)),os(1,49152,null,0,Mv,[],{name:[0,"name"]},null)],(function(t,e){t(e,1,0,e.parent.parent.context.$implicit.icon)}),null)}function Fw(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-icon",[],null,null,null,Kv,Uv)),os(1,49152,null,0,Mv,[],{name:[0,"name"]},null)],(function(t,e){t(e,1,0,e.parent.parent.context.$implicit.icon)}),null)}function Tw(t){return go(0,[(t()(),Zi(0,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Gr(t,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),os(1,671744,[[4,4],[2,4]],0,of,[rf,zd,Ol],{routerLink:[0,"routerLink"]},null),(t()(),Wi(16777216,null,null,1,null,Fw)),os(3,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),ho(4,null,[" "," "]))],(function(t,e){t(e,1,0,e.parent.context.$implicit.route),t(e,3,0,e.parent.context.$implicit.icon)}),(function(t,e){t(e,0,0,Gr(e,1).target,Gr(e,1).href),t(e,4,0,e.parent.context.$implicit.name)}))}function Iw(t){return go(0,[(t()(),Zi(0,0,null,null,5,"li",[["class","menu__item"],["routerLinkActive","active"]],null,null,null,null,null)),os(1,1720320,null,2,af,[rf,ln,dn,[2,sf],[2,of]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,3,{links:1}),to(603979776,4,{linksWithHrefs:1}),(t()(),Wi(16777216,null,null,1,null,Tw)),os(5,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,1,0,"active"),t(e,5,0,e.context.$implicit.route)}),null)}function kw(t){return go(0,[(t()(),Zi(0,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Iw)),os(2,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.parent.parent.context.$implicit.children)}),null)}function Dw(t){return go(0,[(t()(),Zi(0,0,null,null,5,"span",[],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Aw)),os(2,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),ho(3,null,[" "," "])),(t()(),Wi(16777216,null,null,1,null,kw)),os(5,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,2,0,e.parent.context.$implicit.icon),t(e,5,0,e.parent.context.$implicit.children&&e.parent.context.$implicit.children.length>0)}),(function(t,e){t(e,3,0,e.parent.context.$implicit.name)}))}function Pw(t){return go(0,[(t()(),Zi(0,0,null,null,10,"li",[["routerLinkActive","item.route ? 'active' : null"]],null,null,null,null,null)),as(512,null,Gl,Wl,[An,Fn,ln,dn]),os(2,278528,null,0,Jl,[Gl],{ngClass:[0,"ngClass"]},null),uo(3,{menu__item:0}),os(4,1720320,null,2,af,[rf,ln,dn,[2,sf],[2,of]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,1,{links:1}),to(603979776,2,{linksWithHrefs:1}),(t()(),Wi(16777216,null,null,1,null,Ew)),os(8,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Dw)),os(10,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=t(e,3,0,e.context.$implicit.route);t(e,2,0,n),t(e,4,0,"item.route ? 'active' : null"),t(e,8,0,e.context.$implicit.route),t(e,10,0,!e.context.$implicit.route)}),null)}function Rw(t){return go(0,[(t()(),Wi(16777216,null,null,1,null,Pw)),os(1,278528,null,0,Ql,[Rn,Dn,An],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,1,0,e.component.menuItems)}),null)}class Nw{constructor(t){this.user=t,this.collapsed=!1,this.classlist=this.getClassList(),this.loginClick=new Ds}get isAuthenticated(){return this.user.isAuthenticated}get userName(){return this.user.userName}toggle(){this.collapsed=!this.collapsed,this.classlist=this.getClassList()}login(){this.loginClick.next("login")}logout(){this.loginClick.next("logout")}getClassList(){return this.collapsed?"sidebar sidebar--collapsed":"sidebar"}}var Ow=Qn({encapsulation:0,styles:[[""]],data:{}});function Hw(t){return go(0,[(t()(),Zi(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),ho(-1,null,["STS Admin"]))],null,null)}function Vw(t){return go(0,[(t()(),Zi(0,0,null,null,2,"span",[["name","arrow-right"]],null,null,null,null,null)),(t()(),Zi(1,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ho(-1,null,[">"]))],null,null)}function jw(t){return go(0,[(t()(),Zi(0,0,null,null,2,"span",[["name","arrow-left"]],null,null,null,null,null)),(t()(),Zi(1,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),ho(-1,null,["<"]))],null,null)}function Bw(t){return go(0,[(t()(),Zi(0,0,null,null,2,"tw-menu",[],null,null,null,Rw,Cw)),as(131584,null,Sw,Sw,[]),os(2,114688,null,0,_w,[Sw],null,null)],(function(t,e){t(e,2,0)}),null)}function Lw(t){return go(0,[(t()(),Zi(0,0,null,null,5,"li",[["routerLinkActive","active"]],null,null,null,null,null)),os(1,1720320,null,2,af,[rf,ln,dn,[2,sf],[2,of]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,3,{links:1}),to(603979776,4,{linksWithHrefs:1}),(t()(),Zi(4,0,null,null,1,"a",[["href","javascript:void(0)"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.login()&&r),r}),null,null)),(t()(),ho(-1,null,[" Login "]))],(function(t,e){t(e,1,0,"active")}),null)}function Mw(t){return go(0,[(t()(),Zi(0,0,null,null,5,"li",[["routerLinkActive","active"]],null,null,null,null,null)),os(1,1720320,null,2,af,[rf,ln,dn,[2,sf],[2,of]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,5,{links:1}),to(603979776,6,{linksWithHrefs:1}),(t()(),Zi(4,0,null,null,1,"a",[["href","javascript:void(0)"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.logout()&&r),r}),null,null)),(t()(),ho(-1,null,[" Logout "]))],(function(t,e){t(e,1,0,"active")}),null)}function Uw(t){return go(0,[(t()(),Zi(0,0,null,null,7,"div",[["class","sidebar__header"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggle()&&r),r}),null,null)),(t()(),Wi(16777216,null,null,1,null,Hw)),os(2,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Zi(3,0,null,null,4,"button",[["type","button"]],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Vw)),os(5,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,jw)),os(7,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Zi(8,0,null,null,10,"div",[["class","sidebar__content"]],null,null,null,null,null)),(t()(),Zi(9,0,null,null,9,"ul",[],null,null,null,null,null)),(t()(),Zi(10,0,null,null,6,"li",[["class","menu__item"],["routerLinkActive","active"]],null,null,null,null,null)),os(11,1720320,null,2,af,[rf,ln,dn,[2,sf],[2,of]],{routerLinkActive:[0,"routerLinkActive"]},null),to(603979776,1,{links:1}),to(603979776,2,{linksWithHrefs:1}),(t()(),Zi(14,0,null,null,2,"a",[["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==Gr(t,15).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),os(15,671744,[[2,4]],0,of,[rf,zd,Ol],{routerLink:[0,"routerLink"]},null),(t()(),ho(16,null,[" "," "])),(t()(),Wi(16777216,null,null,1,null,Bw)),os(18,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Zi(19,0,null,null,5,"div",[["class","sidebar__footer"]],null,null,null,null,null)),(t()(),Zi(20,0,null,null,4,"ul",[],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,Lw)),os(22,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Wi(16777216,null,null,1,null,Mw)),os(24,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,!n.collapsed),t(e,5,0,n.collapsed),t(e,7,0,!n.collapsed),t(e,11,0,"active"),t(e,15,0,"/"),t(e,18,0,n.isAuthenticated),t(e,22,0,!n.isAuthenticated),t(e,24,0,n.isAuthenticated)}),(function(t,e){var n=e.component;t(e,14,0,Gr(e,15).target,Gr(e,15).href),t(e,16,0,n.userName)}))}class Kw{constructor(t){this.messageBus=t,this.status$=new ic(null),this.messageBus.subsribe(this)}get status(){return this.status$.asObservable()}onMessage(t){this.setStatus(t)}getType(){return Vf.KEY}setStatus(t){this.status$.next(t)}}class qw{constructor(t){this.service=t,this.styles=this.getStyles(),this.hasAction=!1}get statusMessage(){return this.status&&this.status.title&&this.status.title.length>0?`${this.status.title}: ${this.status.message}`:this.status.message}get status(){return this.message}ngOnInit(){this.service.status.subscribe(t=>{t&&(this.message=t,this.hasAction=this.message.hasAction,this.fadeOut(),this.styles=this.getStyles(this.getStatusClass()))})}displayStatusBar(){return this.message&&!this.message.viewed}close(){this.message.viewed=!0,this.styles=this.getStyles()}action(){this.message.action(),this.close()}fadeOut(){this.message&&this.message.level===Hf.Success&&setTimeout(()=>{this.close()},5e3)}getStyles(t=null){return t?`workspace__status ${t}`:"workspace__status"}getStatusClass(){let t="success";switch(this.message.level){case Hf.Info:t="info";break;case Hf.Warning:t="warning";break;case Hf.Danger:t="danger"}return`workspace__status--${t}`}}var $w=Qn({encapsulation:2,styles:[],data:{}});function zw(t){return go(0,[(t()(),Zi(0,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),Zi(1,0,null,null,2,"button",[["class","close"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.action()&&r),r}),null,null)),(t()(),Zi(2,0,null,null,1,"tw-icon",[["name","bolt"]],null,null,null,Kv,Uv)),os(3,49152,null,0,Mv,[],{name:[0,"name"]},null)],(function(t,e){t(e,3,0,"bolt")}),null)}function Gw(t){return go(0,[(t()(),Zi(0,0,null,null,8,"div",[],null,null,null,null,null)),(t()(),Wi(16777216,null,null,1,null,zw)),os(2,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Zi(3,0,null,null,5,"div",[],null,null,null,null,null)),(t()(),ho(4,null,[" "," "])),(t()(),Zi(5,0,null,null,3,"span",[["class","workspace__status-close"]],null,null,null,null,null)),(t()(),Zi(6,0,null,null,2,"button",[["class","close"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.close()&&r),r}),null,null)),(t()(),Zi(7,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),ho(-1,null,["\xd7"]))],(function(t,e){t(e,2,0,e.component.hasAction)}),(function(t,e){t(e,4,0,e.component.statusMessage)}))}function Ww(t){return go(0,[(t()(),Wi(16777216,null,null,1,null,Gw)),os(1,16384,null,0,ta,[Rn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,1,0,e.component.displayStatusBar())}),null)}class Zw{constructor(){this.style="workspace"}}var Jw=Qn({encapsulation:0,styles:[[""]],data:{}});function Yw(t){return go(0,[(t()(),Zi(0,0,null,null,0,"div",[["class","workspace__header"]],null,null,null,null,null)),(t()(),Zi(1,0,null,null,2,"tw-statusbar",[],[[8,"className",0]],null,null,Ww,$w)),as(512,null,Kw,Kw,[Nf]),os(3,114688,null,0,qw,[Kw],null,null),(t()(),Zi(4,0,null,null,2,"div",[["class","workspace__content"]],null,null,null,null,null)),(t()(),Zi(5,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),os(6,212992,null,0,hf,[cf,Rn,nn,[8,null],Fe],null,null)],(function(t,e){t(e,3,0),t(e,6,0)}),(function(t,e){t(e,1,0,Gr(e,3).styles)}))}var Qw=Qn({encapsulation:0,styles:[[""]],data:{}});function Xw(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-sidebar",[],[[8,"className",0]],[[null,"loginClick"]],(function(t,e,n){var r=!0;return"loginClick"===e&&(r=!1!==t.component.loginClick(n)&&r),r}),Uw,Ow)),os(1,49152,null,0,Nw,[jf],null,{loginClick:"loginClick"}),(t()(),Zi(2,0,null,null,1,"tw-workspace",[],[[8,"className",0]],null,null,Yw,Jw)),os(3,49152,null,0,Zw,[],null,null)],null,(function(t,e){t(e,0,0,Gr(e,1).classlist),t(e,2,0,Gr(e,3).style)}))}function tb(t){return go(0,[(t()(),Zi(0,0,null,null,1,"tw-root",[],[[8,"className",0]],null,null,Xw,Qw)),os(1,114688,null,0,Kf,[rf,jf,Zu,Mf],null,null)],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,Gr(e,1).style)}))}var eb=Hr("tw-root",Kf,tb,{},{},[]);class nb{}class rb{}class sb{}class ib{}class ob{}class lb{}class ab{}class ub{}class cb{}class hb{}class db{}class pb{}class fb{}class gb{constructor(t){this.slotRegistry=t,this.slotRegistry.register(new Cy)}}class mb{constructor(t){this.slotRegistry=t,this.slotRegistry.register(new By)}}class vb{constructor(t){this.slotRegistry=t,this.slotRegistry.register(new $y)}}var yb=bl(Uf,[Kf],(function(t){return function(t){const e={},n=[];let r=!1;for(let s=0;s<t.length;s++){const i=t[s];i.token===Ie&&!0===i.value&&(r=!0),1073741824&i.flags&&n.push(i.token),i.index=s,e[Wn(i.token)]=i}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}([Ir(512,nn,rn,[[8,[Gf,Ev,Rv,ly,Ty,jy,qy,nw,lw,dw,mw,bw,eb]],[3,nn],jt]),Ir(5120,Ks,$i,[[3,Ks]]),Ir(4608,ql,$l,[Ks,[2,Kl]]),Ir(5120,Cs,zi,[li]),Ir(5120,Hs,Vs,[]),Ir(5120,An,Ki,[]),Ir(5120,Fn,qi,[]),Ir(4608,Fh,Th,[ua]),Ir(6144,_e,null,[Fh]),Ir(4608,bh,_h,[]),Ir(5120,Uc,(function(t,e,n,r,s,i,o,l){return[new yh(t,e,n),new Ah(r),new Ch(s,i,o,l)]}),[ua,li,Ls,ua,ua,bh,Us,[2,Sh]]),Ir(4608,Kc,Kc,[Uc,li]),Ir(135680,zc,zc,[ua]),Ir(4608,Xc,Xc,[Kc,zc,Hs]),Ir(6144,cn,null,[Xc]),Ir(6144,$c,null,[zc]),Ir(4608,fi,fi,[li]),Ir(4608,Ba,La,[ua,Ls,Va]),Ir(4608,Ma,Ma,[Ba,ja]),Ir(5120,Hu,nc,[]),Ir(4608,Oa,Oa,[]),Ir(6144,Na,null,[Oa]),Ir(4608,Ha,Ha,[Na]),Ir(6144,fa,null,[Ha]),Ir(4608,pa,Ua,[fa,De]),Ir(4608,Ia,Ia,[pa]),Ir(4608,Bu,tc,[]),Ir(4608,Mu,Mu,[]),Ir(5120,Ou,ec,[]),Ir(4608,Wu,rc,[]),Ir(135680,Zu,Zu,[li,Ia,[2,Hu],[2,Bu],[2,zu],Mu,Ou,[2,Wu]]),Ir(4608,Yu,Qu,[]),Ir(5120,Da,(function(t,e,n,r,s){return[t,new Xu(e,n,r,s)]}),[Ma,Hu,Zu,Yu,[2,Ju]]),Ir(135680,Sw,Sw,[]),Ir(4608,vg,vg,[]),Ir(4608,dm,dm,[]),Ir(4608,Qv,Qv,[$a]),Ir(4608,Iy,Iy,[$a]),Ir(4608,Gy,Gy,[$a,Qv,Iy]),Ir(5120,zd,Tf,[rf]),Ir(4608,gf,gf,[]),Ir(6144,pf,null,[gf]),Ir(135680,mf,mf,[rf,Ii,Js,De,pf]),Ir(4608,ff,ff,[]),Ir(5120,vf,Cf,[rf,ha,yf]),Ir(5120,Pf,Df,[If]),Ir(5120,Ms,(function(t){return[t]}),[Pf]),Ir(1073742336,aa,aa,[]),Ir(1024,Jt,Hh,[]),Ir(1024,_i,(function(){return[Sf()]}),[]),Ir(512,If,If,[De]),Ir(1024,Ns,(function(t,e,n){return[(s=t,Bc("probe",Mc),Bc("coreTokens",Object.assign({},Lc,(s||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>Mc),kf(e),(r=n,()=>r.load())];var r,s}),[[2,_i],If,Mf]),Ir(512,Os,Os,[[2,Ns]]),Ir(131584,Fi,Fi,[li,Us,De,Jt,nn,Os]),Ir(1073742336,Gi,Gi,[Fi]),Ir(1073742336,Vh,Vh,[[3,Vh]]),Ir(1073742336,Ka,Ka,[]),Ir(1073742336,qa,qa,[]),Ir(1024,wf,Ef,[[3,rf]]),Ir(512,xd,Ed,[]),Ir(512,cf,cf,[]),Ir(256,yf,{},[]),Ir(1024,Ol,xf,[Rl,[2,Hl],yf]),Ir(512,Vl,Vl,[Ol,Rl]),Ir(512,Js,Js,[]),Ir(512,Ii,Ni,[Js,[2,Pi]]),Ir(1024,Jp,(function(){return[[{path:"claimtypes",component:ry,canActivate:[Rf],children:[{path:":id",component:xy}]}],[{path:"roles",component:Ny,canActivate:[Rf],children:[{path:":id",component:Ly}]}],[{path:"users",component:Qy,canActivate:[Rf],children:[{path:"register",component:rw},{path:":id",component:aw}]}],[{path:"",redirectTo:"forbidden",pathMatch:"full"},{path:"forbidden",component:_l},{path:"**",component:Cl}]]}),[]),Ir(1024,rf,Ff,[Fi,xd,cf,Vl,De,Ii,Js,Jp,yf,[2,Qp],[2,Wp]]),Ir(1073742336,_f,_f,[[2,wf],[2,rf]]),Ir(1073742336,sc,sc,[]),Ir(1073742336,nb,nb,[]),Ir(1073742336,rb,rb,[]),Ir(1073742336,sb,sb,[]),Ir(1073742336,ib,ib,[]),Ir(1073742336,ob,ob,[]),Ir(1073742336,lb,lb,[]),Ir(1073742336,Lf,Lf,[]),Ir(1073742336,ab,ab,[]),Ir(1073742336,ub,ub,[]),Ir(1073742336,cb,cb,[]),Ir(1073742336,hb,hb,[]),Ir(1073742336,db,db,[]),Ir(1073742336,pb,pb,[]),Ir(1073742336,hm,hm,[]),Ir(1073742336,pm,pm,[]),Ir(1073742336,fm,fm,[]),Ir(1073742336,fb,fb,[]),Ir(512,dv,dv,[]),Ir(1073742336,_y,_y,[dv]),Ir(512,fy,fy,[]),Ir(1073742336,gb,gb,[fy]),Ir(1073742336,mb,mb,[fy]),Ir(1073742336,vb,vb,[fy]),Ir(1073742336,Uf,Uf,[]),Ir(256,Ie,!0,[]),Ir(256,Va,"XSRF-TOKEN",[]),Ir(256,ja,"X-XSRF-TOKEN",[]),Ir(256,Ju,null,[])])}));(function(){if(Qt)throw new Error("Cannot enable prod mode after platform setup.");Yt=!1})(),Oh().bootstrapModuleFactory(yb).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);